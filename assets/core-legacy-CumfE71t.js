!function(){var e,t,n,r,i,a,o=["chain","pollingInterval","timeout"],s=["headers","signal","cache"],c=["headers","signal"],u=["body","headers","signal"],l=["body","headers","signal"],d=["body","headers","signal"];function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e,t,n,r){var i=h(E(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},h.apply(null,arguments)}function v(e,t,n){return t=E(t),g(e,b()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function g(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function y(e){var t="function"==typeof Map?new Map:void 0;return y=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(b())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&k(i,n.prototype),i}(e,arguments,E(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),k(n,e)},y(e)}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=O(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function A(e,t,n){return t&&N(e.prototype,t),n&&N(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function x(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return R(u,"_invoke",function(n,r,i){var a,s,c,u=0,l=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,s=0,c=e,f.n=n,o}};function p(n,r){for(s=n,c=r,t=0;!d&&u&&!i&&t<l.length;t++){var i,a=l[t],p=f.p,h=a[2];n>3?(i=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=p&&((i=n<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<h&&(i=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,f.n=h,s=0))}if(i||n>1)return o;throw d=!0,r}return function(i,l,h){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,h),s=l,c=h;(t=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,a){if(s||(i="next"),t=a[i]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=a.return)&&t.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==o)break}catch(t){a=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,i,a),!0),u}var o={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(R(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,R(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,R(d,"constructor",u),R(u,"constructor",c),c.displayName="GeneratorFunction",R(u,i,"GeneratorFunction"),R(d),R(d,i,"Generator"),R(d,r,function(){return this}),R(d,"toString",function(){return"[object Generator]"}),(x=function(){return{w:a,m:f}})()}function R(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}R=function(e,t,n,r){function a(t,n){R(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},R(e,t,n,r)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){j(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function j(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}function L(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function q(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){L(a,r,i,o,s,"next",e)}function s(e){L(a,r,i,o,s,"throw",e)}o(void 0)})}}function B(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}System.register(["./index-legacy-CXPEV-Pz.js","./index.es-legacy-CBBnaXOf.js"],function(h,b){"use strict";var k,E,N,O,_,R,U,M,L,z,F,W,H,V,K,$,G,J,Y,X,Z,Q,ee,te,ne,re,ie,ae,oe,se,ce,ue,le,de,fe,pe,he,ve,ge,me,we,ye,be,ke,Ee,Ce;return{setters:[function(e){k=e.a3,E=e.a4,N=e.a5,O=e.a6,_=e.a7,R=e.a8,U=e.$,M=e.a9,L=e.aa},function(e){z=e.I,F=e.h,W=e.i,H=e.j,V=e.k,K=e.l,$=e.C,G=e.m,J=e.n,Y=e.s,X=e.o,Z=e.p,Q=e.A,ee=e.E,te=e.q,ne=e.u,re=e.y,ie=e.v,ae=e.x,oe=e.O,se=e.z,ce=e.B,ue=e.D,le=e.F,de=e.G,fe=e.N,pe=e.P,he=e.Q,ve=e.J,ge=e.K,me=e.L,we=e.M,ye=e.R,be=e.S,ke=e.T,Ee=e.U,Ce=e.V}],execute:function(){var Ie,Ne,Ae,Se,Pe,Oe;function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.key,r=void 0===n?"fallback":n,i=t.name,a=void 0===i?"Fallback":i,s=t.rank,c=void 0!==s&&s,u=t.shouldThrow,l=void 0===u?Te:u,d=t.retryCount,f=t.retryDelay;return function(t){var n=t.chain,i=t.pollingInterval,s=void 0===i?4e3:i,u=t.timeout,p=B(t,o),h=e,v=function(){},g=k({key:r,name:a,request:function(e){return q(x().m(function t(){var r,i,a,o;return x().w(function(t){for(;;)if(0===t.n)return r=e.method,i=e.params,o=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(q(x().m(function e(){var t,s,c,d,f=arguments;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return s=h[t=f.length>0&&void 0!==f[0]?f[0]:0](D(D({},p),{},{chain:n,retryCount:0,timeout:u})),e.p=1,e.n=2,s.request({method:r,params:i});case 2:return c=e.v,v({method:r,params:i,response:c,transport:s,status:"success"}),e.a(2,c);case 3:if(e.p=3,d=e.v,v({error:d,method:r,params:i,transport:s,status:"error"}),!l(d)){e.n=4;break}throw d;case 4:if(t!==h.length-1){e.n=5;break}throw d;case 5:if(null!=a||(a=h.slice(t+1).some(function(e){var t=e({chain:n}).config.methods||{},i=t.include,a=t.exclude;return i?i.includes(r):!a||!a.includes(r)})),a){e.n=6;break}throw d;case 6:return e.a(2,o(t+1))}},e,null,[[1,3]])}))),t.a(2,o())},t)}))()},retryCount:d,retryDelay:f,type:"fallback"},{onResponse:function(e){return v=e},transports:h.map(function(e){return e({chain:n,retryCount:0})})});if(c){var m,w="object"===T(c)?c:{};!function(e){var t=e.chain,n=e.interval,r=void 0===n?4e3:n,i=e.onTransports,a=e.ping,o=e.sampleCount,s=void 0===o?10:o,c=e.timeout,u=void 0===c?1e3:c,l=e.transports,d=e.weights,f=void 0===d?{}:d,p=f.stability,h=void 0===p?.7:p,v=f.latency,g=void 0===v?.3:v,m=[],w=function(){var e=q(x().m(function e(){var n,o,c;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Promise.all(l.map(function(){var e=q(x().m(function e(n){var r,i,o,s,c;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=n({chain:t,retryCount:0,timeout:u}),i=Date.now(),e.p=1,e.n=2,a?a({transport:r}):r.request({method:"net_listening"});case 2:s=1,e.n=4;break;case 3:e.p=3,e.v,s=0;case 4:return e.p=4,o=Date.now(),e.f(4);case 5:return c=o-i,e.a(2,{latency:c,success:s})}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}()));case 1:return n=e.v,m.push(n),m.length>s&&m.shift(),o=Math.max.apply(Math,P(m.map(function(e){return Math.max.apply(Math,P(e.map(function(e){return e.latency})))}))),c=l.map(function(e,t){var n=m.map(function(e){return e[t].latency}),r=1-n.reduce(function(e,t){return e+t},0)/n.length/o,i=m.map(function(e){return e[t].success}),a=i.reduce(function(e,t){return e+t},0)/i.length;return 0===a?[0,t]:[g*r+h*a,t]}).sort(function(e,t){return t[0]-e[0]}),i(c.map(function(e){var t=S(e,2)[1];return l[t]})),e.n=2,_(r);case 2:w();case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();w()}({chain:n,interval:null!==(m=w.interval)&&void 0!==m?m:s,onTransports:function(e){return h=e},ping:w.ping,sampleCount:w.sampleCount,timeout:w.timeout,transports:h,weights:w.weights})}return g}}function Te(e){return!(!("code"in e)||"number"!=typeof e.code||e.code!==E.code&&e.code!==N.code&&!O.nodeMessage.test(e.message)&&5e3!==e.code)}h({F:function(e,t){Ub=document.createElement("style"),Db=document.createElement("style"),jb=document.createElement("style"),Ub.textContent=Lb(e).core.cssText,Db.textContent=Lb(e).dark.cssText,jb.textContent=Lb(e).light.cssText,document.head.appendChild(Ub),document.head.appendChild(Db),document.head.appendChild(jb),Mb(t)},a:ba,c:function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},d:ka,e:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");wa(e.outputLen),wa(e.blockLen)},f:ya,g:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Aa&&"function"==typeof Aa.getRandomValues)return Aa.getRandomValues(new Uint8Array(e));if(Aa&&"function"==typeof Aa.randomBytes)return Aa.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")},h:function(){for(var e=0,t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];ya(n),e+=n.length}for(var r=new Uint8Array(e),i=0,a=0;i<arguments.length;i++){var o=i<0||arguments.length<=i?void 0:arguments[i];r.set(o,a),a+=o.length}return r},i:fr,j:rt,p:nt,r:function(e,t){return e<<32-t|e>>>t},s:ot,t:_a,w:xa});var xe=1e6,Re=1e6,Ue="[big.js] ",De=Ue+"Invalid ",je=De+"decimal places",Me=De+"rounding mode",Le=Ue+"Division by zero",qe={},Be=void 0,ze=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Fe(e,t,n,r){var i=e.c;if(n===Be&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(Me);if(t<1)r=3===n&&(r||!!i[0])||0===t&&(1===n&&i[0]>=5||2===n&&(i[0]>5||5===i[0]&&(r||i[1]!==Be))),i.length=1,r?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(r=1===n&&i[t]>=5||2===n&&(i[t]>5||5===i[t]&&(r||i[t+1]!==Be||1&i[t-1]))||3===n&&(r||!!i[0]),i.length=t,r)for(;++i[--t]>9;)if(i[t]=0,0===t){++e.e,i.unshift(1);break}for(t=i.length;!i[--t];)i.pop()}return e}function We(e,t,n){var r=e.e,i=e.c.join(""),a=i.length;if(t)i=i.charAt(0)+(a>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>a)for(r-=a;r--;)i+="0";else r<a&&(i=i.slice(0,r)+"."+i.slice(r));else a>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&n?"-"+i:i}qe.abs=function(){var e=new this.constructor(this);return e.s=1,e},qe.cmp=function(e){var t,n=this,r=n.c,i=(e=new n.constructor(e)).c,a=n.s,o=e.s,s=n.e,c=e.e;if(!r[0]||!i[0])return r[0]?a:i[0]?-o:0;if(a!=o)return a;if(t=a<0,s!=c)return s>c^t?1:-1;for(o=(s=r.length)<(c=i.length)?s:c,a=-1;++a<o;)if(r[a]!=i[a])return r[a]>i[a]^t?1:-1;return s==c?0:s>c^t?1:-1},qe.div=function(e){var t=this,n=t.constructor,r=t.c,i=(e=new n(e)).c,a=t.s==e.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>xe)throw Error(je);if(!i[0])throw Error(Le);if(!r[0])return e.s=a,e.c=[e.e=0],e;var s,c,u,l,d,f=i.slice(),p=s=i.length,h=r.length,v=r.slice(0,s),g=v.length,m=e,w=m.c=[],y=0,b=o+(m.e=t.e-e.e)+1;for(m.s=a,a=b<0?0:b,f.unshift(0);g++<s;)v.push(0);do{for(u=0;u<10;u++){if(s!=(g=v.length))l=s>g?1:-1;else for(d=-1,l=0;++d<s;)if(i[d]!=v[d]){l=i[d]>v[d]?1:-1;break}if(!(l<0))break;for(c=g==s?i:f;g;){if(v[--g]<c[g]){for(d=g;d&&!v[--d];)v[d]=9;--v[d],v[g]+=10}v[g]-=c[g]}for(;!v[0];)v.shift()}w[y++]=l?u:++u,v[0]&&l?v[g]=r[p]||0:v=[r[p]]}while((p++<h||v[0]!==Be)&&a--);return w[0]||1==y||(w.shift(),m.e--,b--),y>b&&Fe(m,b,n.RM,v[0]!==Be),m},qe.eq=function(e){return 0===this.cmp(e)},qe.gt=function(e){return this.cmp(e)>0},qe.gte=function(e){return this.cmp(e)>-1},qe.lt=function(e){return this.cmp(e)<0},qe.lte=function(e){return this.cmp(e)<1},qe.minus=qe.sub=function(e){var t,n,r,i,a=this,o=a.constructor,s=a.s,c=(e=new o(e)).s;if(s!=c)return e.s=-c,a.plus(e);var u=a.c.slice(),l=a.e,d=e.c,f=e.e;if(!u[0]||!d[0])return d[0]?e.s=-c:u[0]?e=new o(a):e.s=1,e;if(s=l-f){for((i=s<0)?(s=-s,r=u):(f=l,r=d),r.reverse(),c=s;c--;)r.push(0);r.reverse()}else for(n=((i=u.length<d.length)?u:d).length,s=c=0;c<n;c++)if(u[c]!=d[c]){i=u[c]<d[c];break}if(i&&(r=u,u=d,d=r,e.s=-e.s),(c=(n=d.length)-(t=u.length))>0)for(;c--;)u[t++]=0;for(c=t;n>s;){if(u[--n]<d[n]){for(t=n;t&&!u[--t];)u[t]=9;--u[t],u[n]+=10}u[n]-=d[n]}for(;0===u[--c];)u.pop();for(;0===u[0];)u.shift(),--f;return u[0]||(e.s=1,u=[f=0]),e.c=u,e.e=f,e},qe.mod=function(e){var t,n=this,r=n.constructor,i=n.s,a=(e=new r(e)).s;if(!e.c[0])throw Error(Le);return n.s=e.s=1,t=1==e.cmp(n),n.s=i,e.s=a,t?new r(n):(i=r.DP,a=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=i,r.RM=a,this.minus(n.times(e)))},qe.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},qe.plus=qe.add=function(e){var t,n,r,i=this,a=i.constructor;if(e=new a(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var o=i.e,s=i.c,c=e.e,u=e.c;if(!s[0]||!u[0])return u[0]||(s[0]?e=new a(i):e.s=i.s),e;if(s=s.slice(),t=o-c){for(t>0?(c=o,r=u):(t=-t,r=s),r.reverse();t--;)r.push(0);r.reverse()}for(s.length-u.length<0&&(r=u,u=s,s=r),t=u.length,n=0;t;s[t]%=10)n=(s[--t]=s[t]+u[t]+n)/10|0;for(n&&(s.unshift(n),++c),t=s.length;0===s[--t];)s.pop();return e.c=s,e.e=c,e},qe.pow=function(e){var t=this,n=new t.constructor("1"),r=n,i=e<0;if(e!==~~e||e<-1e6||e>Re)throw Error(De+"exponent");for(i&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return i?n.div(r):r},qe.prec=function(e,t){if(e!==~~e||e<1||e>xe)throw Error(De+"precision");return Fe(new this.constructor(this),e,t)},qe.round=function(e,t){if(e===Be)e=0;else if(e!==~~e||e<-xe||e>xe)throw Error(je);return Fe(new this.constructor(this),e+this.e+1,t)},qe.sqrt=function(){var e,t,n,r=this,i=r.constructor,a=r.s,o=r.e,s=new i("0.5");if(!r.c[0])return new i(r);if(a<0)throw Error(Ue+"No square root");0===(a=Math.sqrt(+We(r,!0,!0)))||a===1/0?((t=r.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new i(((a=Math.sqrt(t))==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+o)):e=new i(a+""),o=e.e+(i.DP+=4);do{n=e,e=s.times(n.plus(r.div(n)))}while(n.c.slice(0,o).join("")!==e.c.slice(0,o).join(""));return Fe(e,(i.DP-=4)+e.e+1,i.RM)},qe.times=qe.mul=function(e){var t,n=this,r=n.constructor,i=n.c,a=(e=new r(e)).c,o=i.length,s=a.length,c=n.e,u=e.e;if(e.s=n.s==e.s?1:-1,!i[0]||!a[0])return e.c=[e.e=0],e;for(e.e=c+u,o<s&&(t=i,i=a,a=t,u=o,o=s,s=u),t=new Array(u=o+s);u--;)t[u]=0;for(c=s;c--;){for(s=0,u=o+c;u>c;)s=t[u]+a[c]*i[u-c-1]+s,t[u--]=s%10,s=s/10|0;t[u]=s}for(s?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},qe.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==Be){if(e!==~~e||e<0||e>xe)throw Error(je);for(n=Fe(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return We(n,!0,!!r)},qe.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==Be){if(e!==~~e||e<0||e>xe)throw Error(je);for(e=e+(n=Fe(new n.constructor(n),e+n.e+1,t)).e+1;n.c.length<e;)n.c.push(0)}return We(n,!1,!!r)},qe[Symbol.for("nodejs.util.inspect.custom")]=qe.toJSON=qe.toString=function(){var e=this,t=e.constructor;return We(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},qe.toNumber=function(){var e=+We(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(Ue+"Imprecise conversion");return e},qe.toPrecision=function(e,t){var n=this,r=n.constructor,i=n.c[0];if(e!==Be){if(e!==~~e||e<1||e>xe)throw Error(De+"precision");for(n=Fe(new r(n),e,t);n.c.length<e;)n.c.push(0)}return We(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!i)},qe.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(Ue+"valueOf disallowed");return We(e,e.e<=t.NE||e.e>=t.PE,!0)};var He=function e(){function t(n){var r=this;if(!(r instanceof t))return n===Be?e():new t(n);if(n instanceof t)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict&&"bigint"!=typeof n)throw TypeError(De+"value");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,r,i;if(!ze.test(t))throw Error(De+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".",""));(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length);for(i=t.length,r=0;r<i&&"0"==t.charAt(r);)++r;if(r==i)e.c=[e.e=0];else{for(;i>0&&"0"==t.charAt(--i););for(e.e=n-r-1,e.c=[],n=0;r<=i;)e.c[n++]=+t.charAt(r++)}}(r,n)}r.constructor=t}return t.prototype=qe,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}(),Ve=Symbol(),Ke=Object.getPrototypeOf,$e=new WeakMap,Ge=function(e){return function(e){return e&&($e.has(e)?$e.get(e):Ke(e)===Object.prototype||Ke(e)===Array.prototype)}(e)&&e[Ve]||null},Je=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];$e.set(e,t)},Ye={LEGACY:!0},Xe=function(e){return"object"===T(e)&&null!==e},Ze=new WeakMap,Qe=new WeakSet,et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.is,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return new Proxy(e,t)},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return Xe(e)&&!Qe.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new WeakMap,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,o=i.get(e);if((null==o?void 0:o[0])===t)return o[1];var s=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return Je(s,!0),i.set(e,[t,s]),Reflect.ownKeys(e).forEach(function(t){if(!Object.getOwnPropertyDescriptor(s,t)){var r=Reflect.get(e,t),i=Reflect.getOwnPropertyDescriptor(e,t).enumerable,o={value:r,enumerable:i,configurable:!0};if(Qe.has(r))Je(r,!1);else if(r instanceof Promise)delete o.value,o.get=function(){return n(r)};else if(Ze.has(r)){var c=S(Ze.get(r),2),u=c[0],l=c[1];o.value=a(u,l(),n)}Object.defineProperty(s,t,o)}}),Object.preventExtensions(s)},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new WeakMap,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[1,1],c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:function(r){if(!Xe(r))throw new Error("object required");var i=o.get(r);if(i)return i;var u=s[0],l=new Set,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:++s[0];u!==t&&(u=t,l.forEach(function(n){return n(e,t)}))},f=s[1],p=function(e){return function(t,n){var r=P(t);r[1]=[e].concat(P(r[1])),d(r,n)}},h=new Map,v=function(e){var t,n=h.get(e);n&&(h.delete(e),null==(t=n[1])||t.call(n))},g=Array.isArray(r)?[]:Object.create(Object.getPrototypeOf(r)),m={deleteProperty:function(e,t){var n=Reflect.get(e,t);v(t);var r=Reflect.deleteProperty(e,t);return r&&d(["delete",[t],n]),r},set:function(t,r,i,a){var s=Reflect.has(t,r),u=Reflect.get(t,r,a);if(s&&(e(u,i)||o.has(i)&&e(u,o.get(i))))return!0;v(r),Xe(i)&&(i=Ge(i)||i);var f=i;if(i instanceof Promise)i.then(function(e){i.status="fulfilled",i.value=e,d(["resolve",[r],e])}).catch(function(e){i.status="rejected",i.reason=e,d(["reject",[r],e])});else{!Ze.has(i)&&n(i)&&(f=c(i));var g=!Qe.has(f)&&Ze.get(f);g&&function(e,t){if("production"!==(Ye?"production":void 0)&&h.has(e))throw new Error("prop listener already exists");if(l.size){var n=t[3](p(e));h.set(e,[t,n])}else h.set(e,[t])}(r,g)}return Reflect.set(t,r,f,a),d(["set",[r],i,u]),!0}},w=t(g,m);o.set(r,w);var y=[g,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:++s[1];return f===e||l.size||(f=e,h.forEach(function(t){var n=S(t,1)[0][1](e);n>u&&(u=n)})),u},a,function(e){l.add(e),1===l.size&&h.forEach(function(e,t){var n=S(e,2),r=n[0],i=n[1];if("production"!==(Ye?"production":void 0)&&i)throw new Error("remove already exists");var a=r[3](p(t));h.set(t,[r,a])});return function(){l.delete(e),0===l.size&&h.forEach(function(e,t){var n=S(e,2),r=n[0],i=n[1];i&&(i(),h.set(t,[r]))})}}];return Ze.set(w,y),Reflect.ownKeys(r).forEach(function(e){var t=Object.getOwnPropertyDescriptor(r,e);"value"in t&&(w[e]=r[e],delete t.value,delete t.writable),Object.defineProperty(g,e,t)}),w};return[c,Ze,Qe,e,t,n,r,i,a,o,s]}(),tt=S(et,1)[0];function nt(){return tt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function rt(e,t,n){var r,i=Ze.get(e);"production"===(Ye?"production":void 0)||i||console.warn("Please use proxy object");var a=[],o=i[3],s=!1,c=o(function(e){a.push(e),r||(r=Promise.resolve().then(function(){r=void 0,s&&t(a.splice(0))}))});return s=!0,function(){s=!1,c()}}function it(e,t){var n=Ze.get(e);"production"===(Ye?"production":void 0)||n||console.warn("Please use proxy object");var r=S(n,3),i=r[0],a=r[1];return(0,r[2])(i,a(),t)}function at(e){return Qe.add(e),e}function ot(e,t,n,r){var i=e[t];return rt(e,function(){var r=e[t];Object.is(i,r)||n(i=r)})}
/**
             * @license
             * Copyright 2019 Google LLC
             * SPDX-License-Identifier: BSD-3-Clause
             */
var st=globalThis,ct=st.ShadowRoot&&(void 0===st.ShadyCSS||st.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ut=Symbol(),lt=new WeakMap,dt=function(){return A(function e(t,n,r){if(I(this,e),this._$cssResult$=!0,r!==ut)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n},[{key:"styleSheet",get:function(){var e=this.o,t=this.t;if(ct&&void 0===e){var n=void 0!==t&&1===t.length;n&&(e=lt.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&lt.set(t,e))}return e}},{key:"toString",value:function(){return this.cssText}}])}(),ft=function(e){return new dt("string"==typeof e?e:e+"",void 0,ut)},pt=h("k",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=1===e.length?e[0]:n.reduce(function(t,n,r){return t+function(e){if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")}(n)+e[r+1]},e[0]);return new dt(i,e,ut)}),ht=ct?function(e){return e}:function(e){return e instanceof CSSStyleSheet?function(e){var t,n="",r=C(e.cssRules);try{for(r.s();!(t=r.n()).done;){n+=t.value.cssText}}catch(i){r.e(i)}finally{r.f()}return ft(n)}(e):e},vt=Object.is,gt=Object.defineProperty,mt=Object.getOwnPropertyDescriptor,wt=Object.getOwnPropertyNames,yt=Object.getOwnPropertySymbols,bt=Object.getPrototypeOf,kt=globalThis,Et=kt.trustedTypes,Ct=Et?Et.emptyScript:"",It=kt.reactiveElementPolyfillSupport,Nt=function(e,t){return e},At={toAttribute:function(e,t){switch(t){case Boolean:e=e?Ct:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute:function(e,t){var n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},St=function(e,t){return!vt(e,t)},Pt={attribute:!0,type:String,converter:At,reflect:!1,useDefault:!1,hasChanged:St};h({K:At,J:St}),null!==(Ie=Symbol.metadata)&&void 0!==Ie||(Symbol.metadata=Symbol("metadata")),null!==(Ne=kt.litPropertyMetadata)&&void 0!==Ne||(kt.litPropertyMetadata=new WeakMap);var Ot=function(e){function t(){var e;return I(this,t),(e=v(this,t))._$Ep=void 0,e.isUpdatePending=!1,e.hasUpdated=!1,e._$Em=null,e._$Ev(),e}return w(t,e),A(t,[{key:"_$Ev",value:function(){var e,t=this;this._$ES=new Promise(function(e){return t.enableUpdating=e}),this._$AL=new Map,this._$E_(),this.requestUpdate(),null===(e=this.constructor.l)||void 0===e||e.forEach(function(e){return e(t)})}},{key:"addController",value:function(e){var t,n;(null!==(t=this._$EO)&&void 0!==t?t:this._$EO=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}},{key:"removeController",value:function(e){var t;null===(t=this._$EO)||void 0===t||t.delete(e)}},{key:"_$E_",value:function(){var e,t=new Map,n=C(this.constructor.elementProperties.keys());try{for(n.s();!(e=n.n()).done;){var r=e.value;this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r])}}catch(i){n.e(i)}finally{n.f()}t.size>0&&(this._$Ep=t)}},{key:"createRenderRoot",value:function(){var e,t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return function(e,t){if(ct)e.adoptedStyleSheets=t.map(function(e){return e instanceof CSSStyleSheet?e:e.styleSheet});else{var n,r=C(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=document.createElement("style"),o=st.litNonce;void 0!==o&&a.setAttribute("nonce",o),a.textContent=i.cssText,e.appendChild(a)}}catch(s){r.e(s)}finally{r.f()}}}(t,this.constructor.elementStyles),t}},{key:"connectedCallback",value:function(){var e,t;null!==(e=this.renderRoot)&&void 0!==e||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$EO)||void 0===t||t.forEach(function(e){var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)})}},{key:"enableUpdating",value:function(e){}},{key:"disconnectedCallback",value:function(){var e;null===(e=this._$EO)||void 0===e||e.forEach(function(e){var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)})}},{key:"attributeChangedCallback",value:function(e,t,n){this._$AK(e,n)}},{key:"_$ET",value:function(e,t){var n=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,n);if(void 0!==r&&!0===n.reflect){var i,a=(void 0!==(null===(i=n.converter)||void 0===i?void 0:i.toAttribute)?n.converter:At).toAttribute(t,n.type);this._$Em=e,null==a?this.removeAttribute(r):this.setAttribute(r,a),this._$Em=null}}},{key:"_$AK",value:function(e,t){var n=this.constructor,r=n._$Eh.get(e);if(void 0!==r&&this._$Em!==r){var i,a,o,s=n.getPropertyOptions(r),c="function"==typeof s.converter?{fromAttribute:s.converter}:void 0!==(null===(i=s.converter)||void 0===i?void 0:i.fromAttribute)?s.converter:At;this._$Em=r;var u=c.fromAttribute(t,s.type);this[r]=null!==(a=null!=u?u:null===(o=this._$Ej)||void 0===o?void 0:o.get(r))&&void 0!==a?a:u,this._$Em=null}}},{key:"requestUpdate",value:function(e,t,n){if(void 0!==e){var r,i,a=this.constructor,o=this[e];if(null!=n||(n=a.getPropertyOptions(e)),!((null!==(r=n.hasChanged)&&void 0!==r?r:St)(o,t)||n.useDefault&&n.reflect&&o===(null===(i=this._$Ej)||void 0===i?void 0:i.get(e))&&!this.hasAttribute(a._$Eu(e,n))))return;this.C(e,t,n)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}},{key:"C",value:function(e,t,n,r){var i,a,o,s=n.useDefault,c=n.reflect,u=n.wrapped;s&&!(null!==(i=this._$Ej)&&void 0!==i?i:this._$Ej=new Map).has(e)&&(this._$Ej.set(e,null!==(a=null!=r?r:t)&&void 0!==a?a:this[e]),!0!==u||void 0!==r)||(this._$AL.has(e)||(this.hasUpdated||s||(t=void 0),this._$AL.set(e,t)),!0===c&&this._$Em!==e&&(null!==(o=this._$Eq)&&void 0!==o?o:this._$Eq=new Set).add(e))}},{key:"_$EP",value:(n=q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return this.isUpdatePending=!0,e.p=1,e.n=2,this._$ES;case 2:e.n=4;break;case 3:e.p=3,n=e.v,Promise.reject(n);case 4:if(null==(t=this.scheduleUpdate())){e.n=5;break}return e.n=5,t;case 5:return e.a(2,!this.isUpdatePending)}},e,this,[[1,3]])})),function(){return n.apply(this,arguments)})},{key:"scheduleUpdate",value:function(){return this.performUpdate()}},{key:"performUpdate",value:function(){if(this.isUpdatePending){if(!this.hasUpdated){var e;if(null!==(e=this.renderRoot)&&void 0!==e||(this.renderRoot=this.createRenderRoot()),this._$Ep){var t,n=C(this._$Ep);try{for(n.s();!(t=n.n()).done;){var r=S(t.value,2),i=r[0],a=r[1];this[i]=a}}catch(m){n.e(m)}finally{n.f()}this._$Ep=void 0}var o=this.constructor.elementProperties;if(o.size>0){var s,c=C(o);try{for(c.s();!(s=c.n()).done;){var u=S(s.value,2),l=u[0],d=u[1],f=d.wrapped,p=this[l];!0!==f||this._$AL.has(l)||void 0===p||this.C(l,void 0,d,p)}}catch(m){c.e(m)}finally{c.f()}}}var h=!1,v=this._$AL;try{var g;(h=this.shouldUpdate(v))?(this.willUpdate(v),null!==(g=this._$EO)&&void 0!==g&&g.forEach(function(e){var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)}),this.update(v)):this._$EM()}catch(v){throw h=!1,this._$EM(),v}h&&this._$AE(v)}}},{key:"willUpdate",value:function(e){}},{key:"_$AE",value:function(e){var t;null!==(t=this._$EO)&&void 0!==t&&t.forEach(function(e){var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}},{key:"_$EM",value:function(){this._$AL=new Map,this.isUpdatePending=!1}},{key:"updateComplete",get:function(){return this.getUpdateComplete()}},{key:"getUpdateComplete",value:function(){return this._$ES}},{key:"shouldUpdate",value:function(e){return!0}},{key:"update",value:function(e){var t=this;this._$Eq&&(this._$Eq=this._$Eq.forEach(function(e){return t._$ET(e,t[e])})),this._$EM()}},{key:"updated",value:function(e){}},{key:"firstUpdated",value:function(e){}}],[{key:"addInitializer",value:function(e){var t;this._$Ei(),(null!==(t=this.l)&&void 0!==t?t:this.l=[]).push(e)}},{key:"observedAttributes",get:function(){return this.finalize(),this._$Eh&&P(this._$Eh.keys())}},{key:"createProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt;if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){var n=Symbol(),r=this.getPropertyDescriptor(e,n,t);void 0!==r&&gt(this.prototype,e,r)}}},{key:"getPropertyDescriptor",value:function(e,t,n){var r,i=null!==(r=mt(this.prototype,e))&&void 0!==r?r:{get:function(){return this[t]},set:function(e){this[t]=e}},a=i.get,o=i.set;return{get:a,set:function(t){var r=null==a?void 0:a.call(this);null!=o&&o.call(this,t),this.requestUpdate(e,r,n)},configurable:!0,enumerable:!0}}},{key:"getPropertyOptions",value:function(e){var t;return null!==(t=this.elementProperties.get(e))&&void 0!==t?t:Pt}},{key:"_$Ei",value:function(){if(!this.hasOwnProperty(Nt("elementProperties"))){var e=bt(this);e.finalize(),void 0!==e.l&&(this.l=P(e.l)),this.elementProperties=new Map(e.elementProperties)}}},{key:"finalize",value:function(){if(!this.hasOwnProperty(Nt("finalized"))){if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Nt("properties"))){var e,t=this.properties,n=C([].concat(P(wt(t)),P(yt(t))));try{for(n.s();!(e=n.n()).done;){var r=e.value;this.createProperty(r,t[r])}}catch(m){n.e(m)}finally{n.f()}}var i=this[Symbol.metadata];if(null!==i){var a=litPropertyMetadata.get(i);if(void 0!==a){var o,s=C(a);try{for(s.s();!(o=s.n()).done;){var c=S(o.value,2),u=c[0],l=c[1];this.elementProperties.set(u,l)}}catch(m){s.e(m)}finally{s.f()}}}this._$Eh=new Map;var d,f=C(this.elementProperties);try{for(f.s();!(d=f.n()).done;){var p=S(d.value,2),h=p[0],v=p[1],g=this._$Eu(h,v);void 0!==g&&this._$Eh.set(g,h)}}catch(m){f.e(m)}finally{f.f()}this.elementStyles=this.finalizeStyles(this.styles)}}},{key:"finalizeStyles",value:function(e){var t=[];if(Array.isArray(e)){var n,r=C(new Set(e.flat(1/0).reverse()));try{for(r.s();!(n=r.n()).done;){var i=n.value;t.unshift(ht(i))}}catch(a){r.e(a)}finally{r.f()}}else void 0!==e&&t.push(ht(e));return t}},{key:"_$Eu",value:function(e,t){var n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}}]);var n}(y(HTMLElement));Ot.elementStyles=[],Ot.shadowRootOptions={mode:"open"},Ot[Nt("elementProperties")]=new Map,Ot[Nt("finalized")]=new Map,null!=It&&It({ReactiveElement:Ot}),(null!==(Ae=kt.reactiveElementVersions)&&void 0!==Ae?Ae:kt.reactiveElementVersions=[]).push("2.1.1");
/**
             * @license
             * Copyright 2017 Google LLC
             * SPDX-License-Identifier: BSD-3-Clause
             */
var _t=globalThis,Tt=_t.trustedTypes,xt=Tt?Tt.createPolicy("lit-html",{createHTML:function(e){return e}}):void 0,Rt="$lit$",Ut="lit$".concat(Math.random().toFixed(9).slice(2),"$"),Dt="?"+Ut,jt="<".concat(Dt,">"),Mt=document,Lt=function(){return Mt.createComment("")},qt=function(e){return null===e||"object"!=T(e)&&"function"!=typeof e},Bt=Array.isArray,zt="[ \t\n\f\r]",Ft=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Wt=/-->/g,Ht=/>/g,Vt=RegExp(">|".concat(zt,"(?:([^\\s\"'>=/]+)(").concat(zt,"*=").concat(zt,"*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)"),"g"),Kt=/'/g,$t=/"/g,Gt=/^(?:script|style|textarea|title)$/i,Jt=function(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return{_$litType$:e,strings:t,values:r}}},Yt=Jt(1),Xt=Jt(2),Zt=Symbol.for("lit-noChange"),Qt=Symbol.for("lit-nothing"),en=new WeakMap,tn=Mt.createTreeWalker(Mt,129);function nn(e,t){if(!Bt(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==xt?xt.createHTML(t):t}h({x:Yt,b:Xt,N:Zt,L:Qt});var rn=function(e,t){for(var n,r=e.length-1,i=[],a=2===t?"<svg>":3===t?"<math>":"",o=Ft,s=0;s<r;s++){for(var c=e[s],u=void 0,l=void 0,d=-1,f=0;f<c.length&&(o.lastIndex=f,null!==(l=o.exec(c)));)f=o.lastIndex,o===Ft?"!--"===l[1]?o=Wt:void 0!==l[1]?o=Ht:void 0!==l[2]?(Gt.test(l[2])&&(n=RegExp("</"+l[2],"g")),o=Vt):void 0!==l[3]&&(o=Vt):o===Vt?">"===l[0]?(o=null!=n?n:Ft,d=-1):void 0===l[1]?d=-2:(d=o.lastIndex-l[2].length,u=l[1],o=void 0===l[3]?Vt:'"'===l[3]?$t:Kt):o===$t||o===Kt?o=Vt:o===Wt||o===Ht?o=Ft:(o=Vt,n=void 0);var p=o===Vt&&e[s+1].startsWith("/>")?" ":"";a+=o===Ft?c+jt:d>=0?(i.push(u),c.slice(0,d)+Rt+c.slice(d)+Ut+p):c+Ut+(-2===d?s:p)}return[nn(e,a+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),i]},an=function(){return A(function e(t,n){var r,i=t.strings,a=t._$litType$;I(this,e),this.parts=[];var o=0,s=0,c=i.length-1,u=this.parts,l=S(rn(i,a),2),d=l[0],f=l[1];if(this.el=e.createElement(d,n),tn.currentNode=this.el.content,2===a||3===a){var p=this.el.content.firstChild;p.replaceWith.apply(p,P(p.childNodes))}for(;null!==(r=tn.nextNode())&&u.length<c;){if(1===r.nodeType){if(r.hasAttributes()){var h,v=C(r.getAttributeNames());try{for(v.s();!(h=v.n()).done;){var g=h.value;if(g.endsWith(Rt)){var m=f[s++],w=r.getAttribute(g).split(Ut),y=/([.?@])?(.*)/.exec(m);u.push({type:1,index:o,name:y[2],strings:w,ctor:"."===y[1]?ln:"?"===y[1]?dn:"@"===y[1]?fn:un}),r.removeAttribute(g)}else g.startsWith(Ut)&&(u.push({type:6,index:o}),r.removeAttribute(g))}}catch(A){v.e(A)}finally{v.f()}}if(Gt.test(r.tagName)){var b=r.textContent.split(Ut),k=b.length-1;if(k>0){r.textContent=Tt?Tt.emptyScript:"";for(var E=0;E<k;E++)r.append(b[E],Lt()),tn.nextNode(),u.push({type:2,index:++o});r.append(b[k],Lt())}}}else if(8===r.nodeType)if(r.data===Dt)u.push({type:2,index:o});else for(var N=-1;-1!==(N=r.data.indexOf(Ut,N+1));)u.push({type:7,index:o}),N+=Ut.length-1;o++}},null,[{key:"createElement",value:function(e,t){var n=Mt.createElement("template");return n.innerHTML=e,n}}])}();function on(e,t){var n,r,i,a,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,c=arguments.length>3?arguments[3]:void 0;if(t===Zt)return t;var u=void 0!==c?null===(n=s._$Co)||void 0===n?void 0:n[c]:s._$Cl,l=qt(t)?void 0:t._$litDirective$;return(null===(r=u)||void 0===r?void 0:r.constructor)!==l&&(null!==(i=u)&&void 0!==i&&null!==(a=i._$AO)&&void 0!==a&&a.call(i,!1),void 0===l?u=void 0:(u=new l(e))._$AT(e,s,c),void 0!==c?(null!==(o=s._$Co)&&void 0!==o?o:s._$Co=[])[c]=u:s._$Cl=u),void 0!==u&&(t=on(e,u._$AS(e,t.values),u,c)),t}var sn=function(){return A(function e(t,n){I(this,e),this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n},[{key:"parentNode",get:function(){return this._$AM.parentNode}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"u",value:function(e){var t,n=this._$AD,r=n.el.content,i=n.parts,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:Mt).importNode(r,!0);tn.currentNode=a;for(var o=tn.nextNode(),s=0,c=0,u=i[0];void 0!==u;){var l;if(s===u.index){var d=void 0;2===u.type?d=new cn(o,o.nextSibling,this,e):1===u.type?d=new u.ctor(o,u.name,u.strings,this,e):6===u.type&&(d=new pn(o,this,e)),this._$AV.push(d),u=i[++c]}s!==(null===(l=u)||void 0===l?void 0:l.index)&&(o=tn.nextNode(),s++)}return tn.currentNode=Mt,a}},{key:"p",value:function(e){var t,n=0,r=C(this._$AV);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,n),n+=i.strings.length-2):i._$AI(e[n])),n++}}catch(a){r.e(a)}finally{r.f()}}}])}(),cn=function(){function e(t,n,r,i){var a;I(this,e),this.type=2,this._$AH=Qt,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=null===(a=null==i?void 0:i.isConnected)||void 0===a||a}return A(e,[{key:"_$AU",get:function(){var e,t;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cv}},{key:"parentNode",get:function(){var e,t=this._$AA.parentNode,n=this._$AM;return void 0!==n&&11===(null===(e=t)||void 0===e?void 0:e.nodeType)&&(t=n.parentNode),t}},{key:"startNode",get:function(){return this._$AA}},{key:"endNode",get:function(){return this._$AB}},{key:"_$AI",value:function(e){e=on(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this),qt(e)?e===Qt||null==e||""===e?(this._$AH!==Qt&&this._$AR(),this._$AH=Qt):e!==this._$AH&&e!==Zt&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):function(e){return Bt(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator])}(e)?this.k(e):this._(e)}},{key:"O",value:function(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}},{key:"T",value:function(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}},{key:"_",value:function(e){this._$AH!==Qt&&qt(this._$AH)?this._$AA.nextSibling.data=e:this.T(Mt.createTextNode(e)),this._$AH=e}},{key:"$",value:function(e){var t,n=e.values,r=e._$litType$,i="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=an.createElement(nn(r.h,r.h[0]),this.options)),r);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===i)this._$AH.p(n);else{var a=new sn(i,this),o=a.u(this.options);a.p(n),this.T(o),this._$AH=a}}},{key:"_$AC",value:function(e){var t=en.get(e.strings);return void 0===t&&en.set(e.strings,t=new an(e)),t}},{key:"k",value:function(t){Bt(this._$AH)||(this._$AH=[],this._$AR());var n,r,i=this._$AH,a=0,o=C(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;a===i.length?i.push(n=new e(this.O(Lt()),this.O(Lt()),this,this.options)):n=i[a],n._$AI(s),a++}}catch(c){o.e(c)}finally{o.f()}a<i.length&&(this._$AR(n&&n._$AB.nextSibling,a),i.length=a)}},{key:"_$AR",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,t=arguments.length>1?arguments[1]:void 0;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e!==this._$AB;){var n,r=e.nextSibling;e.remove(),e=r}}},{key:"setConnected",value:function(e){var t;void 0===this._$AM&&(this._$Cv=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}])}(),un=function(){return A(function e(t,n,r,i,a){I(this,e),this.type=1,this._$AH=Qt,this._$AN=void 0,this.element=t,this.name=n,this._$AM=i,this.options=a,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Qt},[{key:"tagName",get:function(){return this.element.tagName}},{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=this.strings,a=!1;if(void 0===i)e=on(this,e,t,0),(a=!qt(e)||e!==this._$AH&&e!==Zt)&&(this._$AH=e);else{var o,s,c=e;for(e=i[0],o=0;o<i.length-1;o++)(s=on(this,c[n+o],t,o))===Zt&&(s=this._$AH[o]),a||(a=!qt(s)||s!==this._$AH[o]),s===Qt?e=Qt:e!==Qt&&(e+=(null!=s?s:"")+i[o+1]),this._$AH[o]=s}a&&!r&&this.j(e)}},{key:"j",value:function(e){e===Qt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}])}(),ln=function(e){function t(){var e;return I(this,t),(e=v(this,t,arguments)).type=3,e}return w(t,e),A(t,[{key:"j",value:function(e){this.element[this.name]=e===Qt?void 0:e}}])}(un),dn=function(e){function t(){var e;return I(this,t),(e=v(this,t,arguments)).type=4,e}return w(t,e),A(t,[{key:"j",value:function(e){this.element.toggleAttribute(this.name,!!e&&e!==Qt)}}])}(un),fn=function(e){function t(e,n,r,i,a){var o;return I(this,t),(o=v(this,t,[e,n,r,i,a])).type=5,o}return w(t,e),A(t,[{key:"_$AI",value:function(e){var t;if((e=null!==(t=on(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==t?t:Qt)!==Zt){var n=this._$AH,r=e===Qt&&n!==Qt||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==Qt&&(n===Qt||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}}},{key:"handleEvent",value:function(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(t=null===(n=this.options)||void 0===n?void 0:n.host)&&void 0!==t?t:this.element,e):this._$AH.handleEvent(e)}}])}(un),pn=function(){return A(function e(t,n,r){I(this,e),this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r},[{key:"_$AU",get:function(){return this._$AM._$AU}},{key:"_$AI",value:function(e){on(this,e)}}])}(),hn=_t.litHtmlPolyfillSupport;null!=hn&&hn(an,cn),(null!==(Se=_t.litHtmlVersions)&&void 0!==Se?Se:_t.litHtmlVersions=[]).push("3.3.1");var vn=globalThis,gn=function(e){function t(){var e;return I(this,t),(e=v(this,t,arguments)).renderOptions={host:m(e)},e._$Do=void 0,e}return w(t,e),A(t,[{key:"createRenderRoot",value:function(){var e,n,r=p(t,"createRenderRoot",this,3)([]);return null!==(n=(e=this.renderOptions).renderBefore)&&void 0!==n||(e.renderBefore=r.firstChild),r}},{key:"update",value:function(e){var n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),p(t,"update",this,3)([e]),this._$Do=function(e,t,n){var r,i=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:t,a=i._$litPart$;if(void 0===a){var o,s=null!==(o=null==n?void 0:n.renderBefore)&&void 0!==o?o:null;i._$litPart$=a=new cn(t.insertBefore(Lt(),s),s,void 0,null!=n?n:{})}return a._$AI(e),a}(n,this.renderRoot,this.renderOptions)}},{key:"connectedCallback",value:function(){var e;p(t,"connectedCallback",this,3)([]),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}},{key:"disconnectedCallback",value:function(){var e;p(t,"disconnectedCallback",this,3)([]),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}},{key:"render",value:function(){return Zt}}])}(Ot);
/**
             * @license
             * Copyright 2017 Google LLC
             * SPDX-License-Identifier: BSD-3-Clause
             */h("m",gn),gn._$litElement$=!0,gn.finalized=!0,null===(Pe=vn.litElementHydrateSupport)||void 0===Pe||Pe.call(vn,{LitElement:gn});var mn=vn.litElementPolyfillSupport;null==mn||mn({LitElement:gn}),(null!==(Oe=vn.litElementVersions)&&void 0!==Oe?Oe:vn.litElementVersions=[]).push("4.2.1");var wn={},yn=h("I",{WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:("undefined"!=typeof process?wn.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"}),bn=function(e){return e?Number(e.split(":")[1]):void 0},kn=function(e,t){return(null==e?void 0:e.filter(function(e){return e.chainNamespace===t}))||[]},En=function(e,t){if(void 0===e||void 0===t)return new He(0);var n=new He(e),r=new He(t);return n.times(r)},Cn=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],In=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Nn=function(e){return yn.USDT_CONTRACT_ADDRESSES.includes(e)?In:Cn},An=function(e){var t;if(3!==(null===(t=e.split(":"))||void 0===t?void 0:t.length))throw new Error("Invalid CAIP Address");return e},Sn=function(e){var t=e.split(":");if(3!==t.length)throw new Error("Invalid CAIP-10 address: ".concat(e));var n=S(t,3),r=n[0],i=n[1],a=n[2];if(!r||!i||!a)throw new Error("Invalid CAIP-10 address: ".concat(e));return{chainNamespace:r,chainId:i,address:a}},Pn=function(e){var t=e.split(":");if(2!==t.length)throw new Error("Invalid CAIP-2 network id: ".concat(e));var n=S(t,2),r=n[0],i=n[1];if(!r||!i)throw new Error("Invalid CAIP-2 network id: ".concat(e));return{chainNamespace:r,chainId:i}},On="@appkit/active_caip_network_id",_n="@appkit/connected_social",Tn="@appkit-wallet/SOCIAL_USERNAME",xn="@appkit/recent_wallets",Rn="WALLETCONNECT_DEEPLINK_CHOICE",Un="@appkit/active_namespace",Dn="@appkit/connected_namespaces",jn="@appkit/connection_status",Mn="@appkit/social_provider",Ln="@appkit/native_balance_cache",qn="@appkit/portfolio_cache",Bn="@appkit/ens_cache",zn="@appkit/identity_cache",Fn="@appkit/preferred_account_types",Wn="@appkit/connections";function Hn(e){if(!e)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return"@appkit/".concat(e,":connected_connector_id")}var Vn=function(e,t){Gn()&&void 0!==t&&localStorage.setItem(e,t)},Kn=function(e){if(Gn())return localStorage.getItem(e)||void 0},$n=function(e){Gn()&&localStorage.removeItem(e)};function Gn(){return"undefined"!=typeof window&&"undefined"!=typeof localStorage}function Jn(e,t){return"light"===t?{"--w3m-accent":(null==e?void 0:e["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(null==e?void 0:e["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var Yn=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Xn=h("V",{FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,BALANCE_SUPPORTED_CHAINS:["eip155","solana"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"}}),Zn=h("U",{cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired:function(e,t){return Date.now()-e>t},getActiveNetworkProps:function(){var e=Zn.getActiveNamespace(),t=Zn.getActiveCaipNetworkId(),n=t?t.split(":")[1]:void 0;return{namespace:e,caipNetworkId:t,chainId:n?isNaN(Number(n))?n:Number(n):void 0}},setWalletConnectDeepLink:function(e){var t=e.name,n=e.href;try{Vn(Rn,JSON.stringify({href:n,name:t}))}catch(r){console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink:function(){try{var e=Kn(Rn);if(e)return JSON.parse(e)}catch(t){console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink:function(){try{$n(Rn)}catch(e){console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace:function(e){try{Vn(Un,e)}catch(t){console.info("Unable to set active namespace")}},setActiveCaipNetworkId:function(e){try{Vn(On,e),Zn.setActiveNamespace(e.split(":")[0])}catch(t){console.info("Unable to set active caip network id")}},getActiveCaipNetworkId:function(){try{return Kn(On)}catch(e){return void console.info("Unable to get active caip network id")}},deleteActiveCaipNetworkId:function(){try{$n(On)}catch(e){console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId:function(e){try{var t=Hn(e);$n(t)}catch(n){console.info("Unable to delete connected connector id")}},setAppKitRecent:function(e){try{var t=Zn.getRecentWallets(),n=t.find(function(t){return t.id===e.id});n||(t.unshift(e),t.length>2&&t.pop(),Vn(xn,JSON.stringify(t)))}catch(r){console.info("Unable to set AppKit recent")}},getRecentWallets:function(){try{var e=Kn(xn);return e?JSON.parse(e):[]}catch(t){console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId:function(e,t){try{var n=Hn(e);Vn(n,t)}catch(r){console.info("Unable to set Connected Connector Id")}},getActiveNamespace:function(){try{return Kn(Un)}catch(e){console.info("Unable to get active namespace")}},getConnectedConnectorId:function(e){if(e)try{var t=Hn(e);return Kn(t)}catch(Rt){console.info("Unable to get connected connector id in namespace ",e)}},setConnectedSocialProvider:function(e){try{Vn(_n,e)}catch(t){console.info("Unable to set connected social provider")}},getConnectedSocialProvider:function(){try{return Kn(_n)}catch(e){console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider:function(){try{$n(_n)}catch(e){console.info("Unable to delete connected social provider")}},getConnectedSocialUsername:function(){try{return Kn(Tn)}catch(e){console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId:function(){var e,t=Kn(On);return null==t||null===(e=t.split(":"))||void 0===e?void 0:e[1]},setConnectionStatus:function(e){try{Vn(jn,e)}catch(t){console.info("Unable to set connection status")}},getConnectionStatus:function(){try{return Kn(jn)}catch(e){return}},getConnectedNamespaces:function(){try{var e=Kn(Dn);return null!=e&&e.length?e.split(","):[]}catch(t){return[]}},setConnectedNamespaces:function(e){try{var t=Array.from(new Set(e));Vn(Dn,t.join(","))}catch(n){console.info("Unable to set namespaces in storage")}},addConnectedNamespace:function(e){try{var t=Zn.getConnectedNamespaces();t.includes(e)||(t.push(e),Zn.setConnectedNamespaces(t))}catch(n){console.info("Unable to add connected namespace")}},removeConnectedNamespace:function(e){try{var t=Zn.getConnectedNamespaces(),n=t.indexOf(e);n>-1&&(t.splice(n,1),Zn.setConnectedNamespaces(t))}catch(r){console.info("Unable to remove connected namespace")}},getTelegramSocialProvider:function(){try{return Kn(Mn)}catch(e){return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider:function(e){try{Vn(Mn,e)}catch(t){console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider:function(){try{$n(Mn)}catch(e){console.info("Unable to remove telegram social provider")}},getBalanceCache:function(){var e={};try{var t=Kn(qn);e=t?JSON.parse(t):{}}catch(n){console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache:function(e){try{var t=Zn.getBalanceCache();Vn(qn,JSON.stringify(D(D({},t),{},j({},e,void 0))))}catch(n){console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress:function(e){try{var t=Zn.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;Zn.removeAddressFromBalanceCache(e)}catch(n){console.info("Unable to get balance cache for address",e)}},updateBalanceCache:function(e){try{var t=Zn.getBalanceCache();t[e.caipAddress]=e,Vn(qn,JSON.stringify(t))}catch(n){console.info("Unable to update balance cache",e)}},getNativeBalanceCache:function(){var e={};try{var t=Kn(Ln);e=t?JSON.parse(t):{}}catch(n){console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache:function(e){try{var t=Zn.getBalanceCache();Vn(Ln,JSON.stringify(D(D({},t),{},j({},e,void 0))))}catch(n){console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress:function(e){try{var t=Zn.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),Zn.removeAddressFromBalanceCache(e)}catch(n){console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache:function(e){try{var t=Zn.getNativeBalanceCache();t[e.caipAddress]=e,Vn(Ln,JSON.stringify(t))}catch(n){console.info("Unable to update balance cache",e)}},getEnsCache:function(){var e={};try{var t=Kn(Bn);e=t?JSON.parse(t):{}}catch(n){console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress:function(e){try{var t=Zn.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;Zn.removeEnsFromCache(e)}catch(n){console.info("Unable to get ens name from cache",e)}},updateEnsCache:function(e){try{var t=Zn.getEnsCache();t[e.address]=e,Vn(Bn,JSON.stringify(t))}catch(n){console.info("Unable to update ens name cache",e)}},removeEnsFromCache:function(e){try{var t=Zn.getEnsCache();Vn(Bn,JSON.stringify(D(D({},t),{},j({},e,void 0))))}catch(n){console.info("Unable to remove ens name from cache",e)}},getIdentityCache:function(){var e={};try{var t=Kn(zn);e=t?JSON.parse(t):{}}catch(n){console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress:function(e){try{var t=Zn.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;Zn.removeIdentityFromCache(e)}catch(n){console.info("Unable to get identity from cache",e)}},updateIdentityCache:function(e){try{var t=Zn.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},Vn(zn,JSON.stringify(t))}catch(n){console.info("Unable to update identity cache",e)}},removeIdentityFromCache:function(e){try{var t=Zn.getIdentityCache();Vn(zn,JSON.stringify(D(D({},t),{},j({},e,void 0))))}catch(n){console.info("Unable to remove identity from cache",e)}},clearAddressCache:function(){try{$n(qn),$n(Ln),$n(Bn),$n(zn)}catch(e){console.info("Unable to clear address cache")}},setPreferredAccountTypes:function(e){try{Vn(Fn,JSON.stringify(e))}catch(t){console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes:function(){try{var e=Kn(Fn);return e?JSON.parse(e):{}}catch(t){console.info("Unable to get preferred account types")}return{}},setConnections:function(e,t){try{var n=D(D({},Zn.getConnections()),{},j({},t,e));Vn(Wn,JSON.stringify(n))}catch(r){console.error("Unable to sync connections to storage",r)}},getConnections:function(){try{var e=Kn(Wn);return e?JSON.parse(e):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}}),Qn=h("G",{isMobile:function(){var e,t;return!!this.isClient()&&Boolean("function"==typeof(null===(e=window)||void 0===e?void 0:e.matchMedia)&&(null===(t=window)||void 0===t||null===(t=t.matchMedia("(pointer:coarse)"))||void 0===t?void 0:t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/.test(navigator.userAgent))},checkCaipNetwork:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null==e?void 0:e.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase())},isAndroid:function(){var e;if(!this.isMobile())return!1;var t=null===(e=window)||void 0===e?void 0:e.navigator.userAgent.toLowerCase();return Qn.isMobile()&&t.includes("android")},isIos:function(){var e;if(!this.isMobile())return!1;var t=null===(e=window)||void 0===e?void 0:e.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari:function(){var e;return!!this.isClient()&&(null===(e=window)||void 0===e?void 0:e.navigator.userAgent.toLowerCase()).includes("safari")},isClient:function(){return"undefined"!=typeof window},isPairingExpired:function(e){return!e||e-Date.now()<=Xn.TEN_SEC_MS},isAllowedRetry:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xn.ONE_SEC_MS;return Date.now()-e>=t},copyToClopboard:function(e){navigator.clipboard.writeText(e)},isIframe:function(){try{var e,t;return(null===(e=window)||void 0===e?void 0:e.self)!==(null===(t=window)||void 0===t?void 0:t.top)}catch(Rt){return!1}},isSafeApp:function(){if(Qn.isClient()&&window.self!==window.top)try{var e,t=null===(e=window)||void 0===e||null===(e=e.location)||void 0===e||null===(e=e.ancestorOrigins)||void 0===e?void 0:e[0];if(t){var n=new URL(t),r=new URL("https://app.safe.global");return n.hostname===r.hostname}}catch(i){return!1}return!1},getPairingExpiry:function(){return Date.now()+Xn.FOUR_MINUTES_MS},getNetworkId:function(e){return null==e?void 0:e.split(":")[1]},getPlainAddress:function(e){return null==e?void 0:e.split(":")[2]},wait:function(e){return q(x().m(function t(){return x().w(function(t){for(;;)if(0===t.n)return t.a(2,new Promise(function(t){setTimeout(t,e)}))},t)}))()},debounce:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=void 0;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n&&clearTimeout(n),n=setTimeout(function(){e.apply(void 0,i)},t)}},isHttpUrl:function(e){return e.startsWith("http://")||e.startsWith("https://")},formatNativeUrl:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Qn.isHttpUrl(e))return this.formatUniversalUrl(e,t);var i=e,a=r;i.includes("://")||(i=e.replaceAll("/","").replaceAll(":",""),i="".concat(i,"://")),i.endsWith("/")||(i="".concat(i,"/")),!a||null!==(n=a)&&void 0!==n&&n.endsWith("/")||(a="".concat(a,"/")),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t));var o=encodeURIComponent(t);return{redirect:"".concat(i,"wc?uri=").concat(o),redirectUniversalLink:a?"".concat(a,"wc?uri=").concat(o):void 0,href:i}},formatUniversalUrl:function(e,t){if(!Qn.isHttpUrl(e))return this.formatNativeUrl(e,t);var n=e;n.endsWith("/")||(n="".concat(n,"/"));var r=encodeURIComponent(t);return{redirect:"".concat(n,"wc?uri=").concat(r),href:n}},getOpenTargetForPlatform:function(e){return"popupWindow"===e?e:this.isTelegram()?Zn.getTelegramSocialProvider()?"_top":"_blank":e},openHref:function(e,t,n){var r;null===(r=window)||void 0===r||r.open(e,this.getOpenTargetForPlatform(t),n||"noreferrer noopener")},returnOpenHref:function(e,t,n){var r;return null===(r=window)||void 0===r?void 0:r.open(e,this.getOpenTargetForPlatform(t),n||"noreferrer noopener")},isTelegram:function(){return"undefined"!=typeof window&&(Boolean(window.TelegramWebviewProxy)||Boolean(window.Telegram)||Boolean(window.TelegramWebviewProxyProto))},isPWA:function(){var e,t,n;if("undefined"==typeof window)return!1;var r=null===(e=(t=window).matchMedia)||void 0===e||null===(e=e.call(t,"(display-mode: standalone)"))||void 0===e?void 0:e.matches,i=null===(n=window)||void 0===n||null===(n=n.navigator)||void 0===n?void 0:n.standalone;return Boolean(r||i)},preloadImage:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)if(0===t.n)return n=new Promise(function(t,n){var r=new Image;r.onload=t,r.onerror=n,r.crossOrigin="anonymous",r.src=e}),t.a(2,Promise.race([n,Qn.wait(2e3)]))},t)}))()},formatBalance:function(e,t){var n="0.000";if("string"==typeof e){var r=Number(e);if(r){var i=Math.floor(1e3*r)/1e3;i&&(n=i.toString())}}return"".concat(n).concat(t?" ".concat(t):"")},formatBalance2:function(e,t){var n=void 0;if("0"===e)n="0";else if("string"==typeof e){var r,i=Number(e);if(i)n=null===(r=i.toString().match(/^-?[0-9]+(?:\.[0-9]{0,3})?/))||void 0===r?void 0:r[0]}return{value:null!=n?n:"0",rest:"0"===n?"000":"",symbol:t}},getApiUrl:function(){return yn.W3M_API_URL},getBlockchainApiUrl:function(){return yn.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl:function(){return yn.PULSE_API_URL},getUUID:function(){var e;return null!==(e=crypto)&&void 0!==e&&e.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},parseError:function(e){var t;return"string"==typeof e?e:"string"==typeof(null==e||null===(t=e.issues)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.message)?e.issues[0].message:e instanceof Error?e.message:"Unknown error"},sortRequestedNetworks:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t&&e&&(e.forEach(function(e,t){n[e]=t}),t.sort(function(e,t){var r=n[e.id],i=n[t.id];return void 0!==r&&void 0!==i?r-i:void 0!==r?-1:void 0!==i?1:0})),t},calculateBalance:function(e){var t,n=0,r=C(e);try{for(r.s();!(t=r.n()).done;){var i;n+=null!==(i=t.value.value)&&void 0!==i?i:0}}catch(a){r.e(a)}finally{r.f()}return n},formatTokenBalance:function(e){var t=S(e.toFixed(2).split("."),2);return{dollars:t[0],pennies:t[1]}},isAddress:function(e){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"eip155"){case"eip155":return!!/^(?:0x)?[0-9a-f]{40}$/i.test(e)&&!(!/^(?:0x)?[0-9a-f]{40}$/i.test(e)&&!/^(?:0x)?[0-9A-F]{40}$/i.test(e));case"solana":return/[1-9A-HJ-NP-Za-km-z\u017F\u212A]{32,44}$/i.test(e);default:return!1}},uniqueBy:function(e,t){var n=new Set;return e.filter(function(e){var r=e[t];return!n.has(r)&&(n.add(r),!0)})},generateSdkVersion:function(e,t,n){var r=0===e.length?Xn.ADAPTER_TYPES.UNIVERSAL:e.map(function(e){return e.adapterType}).join(",");return"".concat(t,"-").concat(r,"-").concat(n)},createAccount:function(e,t,n,r,i){return{namespace:e,address:t,type:n,publicKey:r,path:i}},isCaipAddress:function(e){if("string"!=typeof e)return!1;var t=e.split(":"),n=t[0];return 3===t.filter(Boolean).length&&n in yn.CHAIN_NAME_MAP},isMac:function(){var e,t=null===(e=window)||void 0===e?void 0:e.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl:function(e){var t,n="--".concat(encodeURIComponent(null===(t=window)||void 0===t?void 0:t.location.href)),r="state=";if("auth.magic.link"===new URL(e).host){var i="provider_authorization_url=",a=e.substring(e.indexOf(i)+27),o=this.injectIntoUrl(decodeURIComponent(a),r,n);return e.replace(a,encodeURIComponent(o))}return this.injectIntoUrl(e,r,n)},injectIntoUrl:function(e,t,n){var r=e.indexOf(t);if(-1===r)throw new Error("".concat(t," parameter not found in the URL: ").concat(e));var i=e.indexOf("&",r),a=t.length,o=-1!==i?i:e.length;return e.substring(0,r+a)+(e.substring(r+a,o)+n)+e.substring(i)}});function er(){return tr.apply(this,arguments)}function tr(){return tr=q(x().m(function e(){var t,n=arguments;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch.apply(void 0,n);case 1:if((t=e.v).ok){e.n=2;break}throw new Error("HTTP status code: ".concat(t.status),{cause:t});case 2:return e.a(2,t)}},e)})),tr.apply(this,arguments)}var nr=function(){return A(function e(t){var n=t.baseUrl,r=t.clientId;I(this,e),this.baseUrl=n,this.clientId=r},[{key:"get",value:(i=q(x().m(function e(t){var n,r,i,a,o,c;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.headers,r=t.signal,i=t.cache,a=B(t,s),o=this.createUrl(a),e.n=1,er(o,{method:"GET",headers:n,signal:r,cache:i});case 1:return c=e.v,e.a(2,c.json())}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getBlob",value:(r=q(x().m(function e(t){var n,r,i,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.headers,r=t.signal,i=B(t,c),a=this.createUrl(i),e.n=1,er(a,{method:"GET",headers:n,signal:r});case 1:return o=e.v,e.a(2,o.blob())}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"post",value:(n=q(x().m(function e(t){var n,r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.body,r=t.headers,i=t.signal,a=B(t,u),o=this.createUrl(a),e.n=1,er(o,{method:"POST",headers:r,body:n?JSON.stringify(n):void 0,signal:i});case 1:return s=e.v,e.a(2,s.json())}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"put",value:(t=q(x().m(function e(t){var n,r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.body,r=t.headers,i=t.signal,a=B(t,l),o=this.createUrl(a),e.n=1,er(o,{method:"PUT",headers:r,body:n?JSON.stringify(n):void 0,signal:i});case 1:return s=e.v,e.a(2,s.json())}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"delete",value:(e=q(x().m(function e(t){var n,r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.body,r=t.headers,i=t.signal,a=B(t,d),o=this.createUrl(a),e.n=1,er(o,{method:"DELETE",headers:r,body:n?JSON.stringify(n):void 0,signal:i});case 1:return s=e.v,e.a(2,s.json())}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"createUrl",value:function(e){var t=e.path,n=e.params,r=new URL(t,this.baseUrl);return n&&Object.entries(n).forEach(function(e){var t=S(e,2),n=t[0],i=t[1];i&&r.searchParams.append(n,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}]);var e,t,n,r,i}(),rr=function(e){if(!e||!e.length)return e;if(Qn.isTelegram()){if(Qn.isIos())return e.filter(function(e){return"google"!==e});if(Qn.isMac())return e.filter(function(e){return"x"!==e});if(Qn.isAndroid())return e.filter(function(e){return!["facebook","x"].includes(e)})}return e},ir=nt({features:Xn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Xn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ar=h("O",{state:ir,subscribeKey:function(e,t){return ot(ir,e,t)},setOptions:function(e){Object.assign(ir,e)},setRemoteFeatures:function(e){var t;if(e){var n=D(D({},ir.remoteFeatures),e);ir.remoteFeatures=n,null!==(t=ir.remoteFeatures)&&void 0!==t&&t.socials&&(ir.remoteFeatures.socials=rr(ir.remoteFeatures.socials))}},setFeatures:function(e){if(e){ir.features||(ir.features=Xn.DEFAULT_FEATURES);var t=D(D({},ir.features),e);ir.features=t}},setProjectId:function(e){ir.projectId=e},setCustomRpcUrls:function(e){ir.customRpcUrls=e},setAllWallets:function(e){ir.allWallets=e},setIncludeWalletIds:function(e){ir.includeWalletIds=e},setExcludeWalletIds:function(e){ir.excludeWalletIds=e},setFeaturedWalletIds:function(e){ir.featuredWalletIds=e},setTokens:function(e){ir.tokens=e},setTermsConditionsUrl:function(e){ir.termsConditionsUrl=e},setPrivacyPolicyUrl:function(e){ir.privacyPolicyUrl=e},setCustomWallets:function(e){ir.customWallets=e},setIsSiweEnabled:function(e){ir.isSiweEnabled=e},setIsUniversalProvider:function(e){ir.isUniversalProvider=e},setSdkVersion:function(e){ir.sdkVersion=e},setMetadata:function(e){ir.metadata=e},setDisableAppend:function(e){ir.disableAppend=e},setEIP6963Enabled:function(e){ir.enableEIP6963=e},setDebug:function(e){ir.debug=e},setEnableWalletConnect:function(e){ir.enableWalletConnect=e},setEnableWalletGuide:function(e){ir.enableWalletGuide=e},setEnableAuthLogger:function(e){ir.enableAuthLogger=e},setEnableWallets:function(e){ir.enableWallets=e},setPreferUniversalLinks:function(e){ir.experimental_preferUniversalLinks=e},setHasMultipleAddresses:function(e){ir.hasMultipleAddresses=e},setSIWX:function(e){ir.siwx=e},setConnectMethodsOrder:function(e){ir.features=D(D({},ir.features),{},{connectMethodsOrder:e})},setWalletFeaturesOrder:function(e){ir.features=D(D({},ir.features),{},{walletFeaturesOrder:e})},setSocialsOrder:function(e){ir.remoteFeatures=D(D({},ir.remoteFeatures),{},{socials:e})},setCollapseWallets:function(e){ir.features=D(D({},ir.features),{},{collapseWallets:e})},setEnableEmbedded:function(e){ir.enableEmbedded=e},setAllowUnsupportedChain:function(e){ir.allowUnsupportedChain=e},setManualWCControl:function(e){ir.manualWCControl=e},setEnableNetworkSwitch:function(e){ir.enableNetworkSwitch=e},setDefaultAccountTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(e).forEach(function(e){var t=S(e,2),n=t[0],r=t[1];r&&(ir.defaultAccountTypes[n]=r)})},setUniversalProviderConfigOverride:function(e){ir.universalProviderConfigOverride=e},getUniversalProviderConfigOverride:function(){return ir.universalProviderConfigOverride},getSnapshot:function(){return it(ir)}}),or=Object.freeze({enabled:!0,events:[]}),sr=new nr({baseUrl:Qn.getAnalyticsUrl(),clientId:null}),cr=nt(D({},or)),ur={state:cr,subscribeKey:function(e,t){return ot(cr,e,t)},sendError:function(e,t){return q(x().m(function n(){var r,i,a,o,s,c;return x().w(function(n){for(;;)switch(n.p=n.n){case 0:if(cr.enabled){n.n=1;break}return n.a(2);case 1:if(r=Date.now(),!(cr.events.filter(function(e){var t=new Date(e.properties.timestamp||"").getTime();return r-t<6e4}).length>=5)){n.n=2;break}return n.a(2);case 2:if(i={type:"error",event:t,properties:{errorType:e.name,errorMessage:e.message,stackTrace:e.stack,timestamp:(new Date).toISOString()}},cr.events.push(i),n.p=3,"undefined"!=typeof window){n.n=4;break}return n.a(2);case 4:return a=ar.state,o=a.projectId,s=a.sdkType,c=a.sdkVersion,n.n=5,sr.post({path:"/e",params:{projectId:o,st:s,sv:c||"html-wagmi-4.2.2"},body:{eventId:Qn.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:(new Date).toISOString(),props:{type:"error",event:t,errorType:e.name,errorMessage:e.message,stackTrace:e.stack}}});case 5:n.n=7;break;case 6:n.p=6,n.v;case 7:return n.a(2)}},n,null,[[3,6]])}))()},enable:function(){cr.enabled=!0},disable:function(){cr.enabled=!1},clearEvents:function(){cr.events=[]}},lr=function(e){function t(e,n,r){var i;I(this,t),(i=v(this,t,[e])).name="AppKitError",i.category=n,i.originalError=r,Object.setPrototypeOf(i,t.prototype);var a=!1;if(r instanceof Error&&"string"==typeof r.stack&&r.stack){var o=r.stack,s=o.indexOf("\n");if(s>-1){var c=o.substring(s+1);i.stack="".concat(i.name,": ").concat(i.message,"\n").concat(c),a=!0}}return a||(Error.captureStackTrace?Error.captureStackTrace(i,t):i.stack||(i.stack="".concat(i.name,": ").concat(i.message))),i}return w(t,e),A(t)}(y(Error));function dr(e,t){var n=e instanceof lr?e:new lr(e instanceof Error?e.message:String(e),t,e);throw ur.sendError(n,n.category),n}function fr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INTERNAL_SDK_ERROR",n={};return Object.keys(e).forEach(function(r){var i=e[r];if("function"==typeof i){var a=i;a="AsyncFunction"===i.constructor.name?function(){var e=q(x().m(function e(){var n,r=arguments;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,i.apply(void 0,r);case 1:return e.a(2,e.v);case 2:return e.p=2,n=e.v,e.a(2,dr(n,t))}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}():function(){try{return i.apply(void 0,arguments)}catch(e){return dr(e,t)}},n[r]=a}else n[r]=i}),n}var pr,hr,vr={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},gr=function(e,t){var n=window.location.href,r=encodeURIComponent(n);if(e===vr.PHANTOM.id&&!("phantom"in window)){var i=n.startsWith("https")?"https":"http",a=n.split("/")[2],o=encodeURIComponent("".concat(i,"://").concat(a));window.location.href="".concat(vr.PHANTOM.url,"/ul/browse/").concat(r,"?ref=").concat(o)}e!==vr.SOLFLARE.id||"solflare"in window||(window.location.href="".concat(vr.SOLFLARE.url,"/ul/v1/browse/").concat(r,"?ref=").concat(r)),t===yn.CHAIN.SOLANA&&(e!==vr.COINBASE.id||"coinbaseSolana"in window||(window.location.href="".concat(vr.COINBASE.url,"/dapp?cb_url=").concat(r)))},mr=nt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),wr=h("u",fr({state:mr,subscribeNetworkImages:function(e){return rt(mr.networkImages,function(){return e(mr.networkImages)})},subscribeKey:function(e,t){return ot(mr,e,t)},subscribe:function(e){return rt(mr,function(){return e(mr)})},setWalletImage:function(e,t){mr.walletImages[e]=t},setNetworkImage:function(e,t){mr.networkImages[e]=t},setChainImage:function(e,t){mr.chainImages[e]=t},setConnectorImage:function(e,t){mr.connectorImages=D(D({},mr.connectorImages),{},j({},e,t))},setTokenImage:function(e,t){mr.tokenImages[e]=t},setCurrencyImage:function(e,t){mr.currencyImages[e]=t}})),yr={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},br=nt({networkImagePromises:{}}),kr=h("q",{fetchWalletImage:function(e){var t=this;return q(x().m(function n(){return x().w(function(n){for(;;)switch(n.n){case 0:if(e){n.n=1;break}return n.a(2,void 0);case 1:return n.n=2,xr._fetchWalletImage(e);case 2:return n.a(2,t.getWalletImageById(e))}},n)}))()},fetchNetworkImage:function(e){var t=this;return q(x().m(function n(){var r;return x().w(function(n){for(;;)switch(n.n){case 0:if(e){n.n=1;break}return n.a(2,void 0);case 1:if(!(r=t.getNetworkImageById(e))){n.n=2;break}return n.a(2,r);case 2:return br.networkImagePromises[e]||(br.networkImagePromises[e]=xr._fetchNetworkImage(e)),n.n=3,br.networkImagePromises[e];case 3:return n.a(2,t.getNetworkImageById(e))}},n)}))()},getWalletImageById:function(e){if(e)return wr.state.walletImages[e]},getWalletImage:function(e){return null!=e&&e.image_url?null==e?void 0:e.image_url:null!=e&&e.image_id?wr.state.walletImages[e.image_id]:void 0},getNetworkImage:function(e){var t,n,r;return null!=e&&null!==(t=e.assets)&&void 0!==t&&t.imageUrl?null==e||null===(r=e.assets)||void 0===r?void 0:r.imageUrl:null!=e&&null!==(n=e.assets)&&void 0!==n&&n.imageId?wr.state.networkImages[e.assets.imageId]:void 0},getNetworkImageById:function(e){if(e)return wr.state.networkImages[e]},getConnectorImage:function(e){return null!=e&&e.imageUrl?e.imageUrl:null!=e&&e.imageId?wr.state.connectorImages[e.imageId]:void 0},getChainImage:function(e){return wr.state.networkImages[yr[e]]}}),Er=nt({message:"",variant:"info",open:!1}),Cr=h("A",fr({state:Er,subscribeKey:function(e,t){return ot(Er,e,t)},open:function(e,t){var n=ar.state.debug,r=e.shortMessage,i=e.longMessage;n&&(Er.message=r,Er.variant=t,Er.open=!0),i&&console.error("function"==typeof i?i():i)},close:function(){Er.open=!1,Er.message="",Er.variant="info"}})),Ir=Qn.getAnalyticsUrl(),Nr=new nr({baseUrl:Ir,clientId:null}),Ar=["MODAL_CREATED"],Sr=nt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Pr=h("E",{state:Sr,subscribe:function(e){return rt(Sr,function(){return e(Sr)})},getSdkProperties:function(){var e=ar.state;return{projectId:e.projectId,st:e.sdkType,sv:e.sdkVersion||"html-wagmi-4.2.2"}},_sendAnalyticsEvent:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,n=mi.state.address,!Ar.includes(e.data.event)&&"undefined"!=typeof window){t.n=1;break}return t.a(2);case 1:return t.n=2,Nr.post({path:"/e",params:Pr.getSdkProperties(),body:{eventId:Qn.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:D(D({},e.data),{},{address:n})}});case 2:Sr.reportedErrors.FORBIDDEN=!1,t.n=4;break;case 3:t.p=3,r=t.v,r instanceof Error&&r.cause instanceof Response&&r.cause.status===yn.HTTP_STATUS_CODES.FORBIDDEN&&!Sr.reportedErrors.FORBIDDEN&&(Cr.open({shortMessage:"Invalid App Configuration",longMessage:"Origin ".concat(Gn()?window.origin:"uknown"," not found on Allowlist - update configuration on cloud.reown.com")},"error"),Sr.reportedErrors.FORBIDDEN=!0);case 4:return t.a(2)}},t,null,[[0,3]])}))()},sendEvent:function(e){var t;Sr.timestamp=Date.now(),Sr.data=e,null!==(t=ar.state.features)&&void 0!==t&&t.analytics&&Pr._sendAnalyticsEvent(Sr)}}),Or=Qn.getApiUrl(),_r=new nr({baseUrl:Or,clientId:null}),Tr=nt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),xr=h("D",{state:Tr,subscribeKey:function(e,t){return ot(Tr,e,t)},_getSdkProperties:function(){var e=ar.state;return{projectId:e.projectId,st:e.sdkType||"appkit",sv:e.sdkVersion||"html-wagmi-4.2.2"}},_filterOutExtensions:function(e){return ar.state.isUniversalProvider?e.filter(function(e){return Boolean(e.mobile_link||e.desktop_link||e.webapp_link)}):e},_fetchWalletImage:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.n){case 0:return n="".concat(_r.baseUrl,"/getWalletImage/").concat(e),t.n=1,_r.getBlob({path:n,params:xr._getSdkProperties()});case 1:r=t.v,wr.setWalletImage(e,URL.createObjectURL(r));case 2:return t.a(2)}},t)}))()},_fetchNetworkImage:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.n){case 0:return n="".concat(_r.baseUrl,"/public/getAssetImage/").concat(e),t.n=1,_r.getBlob({path:n,params:xr._getSdkProperties()});case 1:r=t.v,wr.setNetworkImage(e,URL.createObjectURL(r));case 2:return t.a(2)}},t)}))()},_fetchConnectorImage:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.n){case 0:return n="".concat(_r.baseUrl,"/public/getAssetImage/").concat(e),t.n=1,_r.getBlob({path:n,params:xr._getSdkProperties()});case 1:r=t.v,wr.setConnectorImage(e,URL.createObjectURL(r));case 2:return t.a(2)}},t)}))()},_fetchCurrencyImage:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.n){case 0:return n="".concat(_r.baseUrl,"/public/getCurrencyImage/").concat(e),t.n=1,_r.getBlob({path:n,params:xr._getSdkProperties()});case 1:r=t.v,wr.setCurrencyImage(e,URL.createObjectURL(r));case 2:return t.a(2)}},t)}))()},_fetchTokenImage:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.n){case 0:return n="".concat(_r.baseUrl,"/public/getTokenImage/").concat(e),t.n=1,_r.getBlob({path:n,params:xr._getSdkProperties()});case 1:r=t.v,wr.setTokenImage(e,URL.createObjectURL(r));case 2:return t.a(2)}},t)}))()},_filterWalletsByPlatform:function(e){var t=Qn.isMobile()?null==e?void 0:e.filter(function(e){return!!e.mobile_link||(e.id===vr.COINBASE.id||"solana"===li.state.activeChain&&(e.id===vr.SOLFLARE.id||e.id===vr.PHANTOM.id))}):e;return t},fetchProjectConfig:function(){return q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_r.get({path:"/appkit/v1/config",params:xr._getSdkProperties()});case 1:return t=e.v,e.a(2,t.features)}},e)}))()},fetchAllowedOrigins:function(){return q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,_r.get({path:"/projects/v1/origins",params:xr._getSdkProperties()});case 1:return t=e.v,n=t.allowedOrigins,e.a(2,n);case 2:return e.p=2,e.v,e.a(2,[])}},e,null,[[0,2]])}))()},fetchNetworkImages:function(){return q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.n){case 0:if(t=li.getAllRequestedCaipNetworks(),!(n=null==t?void 0:t.map(function(e){var t=e.assets;return null==t?void 0:t.imageId}).filter(Boolean).filter(function(e){return!kr.getNetworkImageById(e)}))){e.n=1;break}return e.n=1,Promise.allSettled(n.map(function(e){return xr._fetchNetworkImage(e)}));case 1:return e.a(2)}},e)}))()},fetchConnectorImages:function(){return q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.n){case 0:return t=zr.state.connectors,n=t.map(function(e){return e.imageId}).filter(Boolean),e.n=1,Promise.allSettled(n.map(function(e){return xr._fetchConnectorImage(e)}));case 1:return e.a(2)}},e)}))()},fetchCurrencyImages:function(){var e=arguments;return q(x().m(function t(){var n;return x().w(function(t){for(;;)switch(t.n){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:[],t.n=1,Promise.allSettled(n.map(function(e){return xr._fetchCurrencyImage(e)}));case 1:return t.a(2)}},t)}))()},fetchTokenImages:function(){var e=arguments;return q(x().m(function t(){var n;return x().w(function(t){for(;;)switch(t.n){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:[],t.n=1,Promise.allSettled(n.map(function(e){return xr._fetchTokenImage(e)}));case 1:return t.a(2)}},t)}))()},fetchWallets:function(e){return q(x().m(function t(){var n,r,i,a,o;return x().w(function(t){for(;;)switch(t.n){case 0:return i=null!==(n=e.exclude)&&void 0!==n?n:[],xr._getSdkProperties().sv.startsWith("html-core-")&&i.push.apply(i,P(Object.values(vr).map(function(e){return e.id}))),t.n=1,_r.get({path:"/getWallets",params:D(D(D({},xr._getSdkProperties()),e),{},{page:String(e.page),entries:String(e.entries),include:null===(r=e.include)||void 0===r?void 0:r.join(","),exclude:i.join(",")})});case 1:return a=t.v,o=xr._filterWalletsByPlatform(null==a?void 0:a.data),t.a(2,{data:o||[],count:null==a?void 0:a.count})}},t)}))()},fetchFeaturedWallets:function(){return q(x().m(function e(){var t,n,r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:if(null==(t=ar.state.featuredWalletIds)||!t.length){e.n=3;break}return r=D(D({},xr._getSdkProperties()),{},{page:1,entries:null!==(n=null==t?void 0:t.length)&&void 0!==n?n:4,include:t}),e.n=1,xr.fetchWallets(r);case 1:return i=e.v,a=i.data,o=P(a).sort(function(e,n){return t.indexOf(e.id)-t.indexOf(n.id)}),s=o.map(function(e){return e.image_id}).filter(Boolean),e.n=2,Promise.allSettled(s.map(function(e){return xr._fetchWalletImage(e)}));case 2:Tr.featured=o,Tr.allFeatured=o;case 3:return e.a(2)}},e)}))()},fetchRecommendedWallets:function(){return q(x().m(function e(){var t,n,r,i,a,o,s,c,u,l,d,f,p;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,Tr.isFetchingRecommendedWallets=!0,t=ar.state,n=t.includeWalletIds,r=t.excludeWalletIds,i=t.featuredWalletIds,a=[].concat(P(null!=r?r:[]),P(null!=i?i:[])).filter(Boolean),o=li.getRequestedCaipNetworkIds().join(","),s={page:1,entries:4,include:n,exclude:a,chains:o},e.n=1,xr.fetchWallets(s);case 1:return c=e.v,u=c.data,l=c.count,d=Zn.getRecentWallets(),f=u.map(function(e){return e.image_id}).filter(Boolean),p=d.map(function(e){return e.image_id}).filter(Boolean),e.n=2,Promise.allSettled([].concat(P(f),P(p)).map(function(e){return xr._fetchWalletImage(e)}));case 2:Tr.recommended=u,Tr.allRecommended=u,Tr.count=null!=l?l:0,e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,Tr.isFetchingRecommendedWallets=!1,e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])}))()},fetchWalletsByPage:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c,u,l,d,f,p;return x().w(function(t){for(;;)switch(t.n){case 0:return n=e.page,r=ar.state,i=r.includeWalletIds,a=r.excludeWalletIds,o=r.featuredWalletIds,s=li.getRequestedCaipNetworkIds().join(","),c=[].concat(P(Tr.recommended.map(function(e){return e.id})),P(null!=a?a:[]),P(null!=o?o:[])).filter(Boolean),u={page:n,entries:40,include:i,exclude:c,chains:s},t.n=1,xr.fetchWallets(u);case 1:return l=t.v,d=l.data,f=l.count,p=d.slice(0,20).map(function(e){return e.image_id}).filter(Boolean),t.n=2,Promise.allSettled(p.map(function(e){return xr._fetchWalletImage(e)}));case 2:Tr.wallets=Qn.uniqueBy([].concat(P(Tr.wallets),P(xr._filterOutExtensions(d))),"id").filter(function(e){var t;return null===(t=e.chains)||void 0===t?void 0:t.some(function(e){return s.includes(e)})}),Tr.count=f>Tr.count?f:Tr.count,Tr.page=n;case 3:return t.a(2)}},t)}))()},initializeExcludedWallets:function(e){return q(x().m(function t(){var n,r,i,a;return x().w(function(t){for(;;)switch(t.n){case 0:return n=e.ids,r={page:1,entries:n.length,include:n},t.n=1,xr.fetchWallets(r);case 1:i=t.v,(a=i.data)&&a.forEach(function(e){Tr.excludedWallets.push({rdns:e.rdns,name:e.name})});case 2:return t.a(2)}},t)}))()},searchWallet:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c,u,l,d;return x().w(function(t){for(;;)switch(t.n){case 0:return n=e.search,r=e.badge,i=ar.state,a=i.includeWalletIds,o=i.excludeWalletIds,s=li.getRequestedCaipNetworkIds().join(","),Tr.search=[],c={page:1,entries:100,search:null==n?void 0:n.trim(),badge_type:r,include:a,exclude:o,chains:s},t.n=1,xr.fetchWallets(c);case 1:return u=t.v,l=u.data,Pr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:null!=r?r:"",search:null!=n?n:""}}),d=l.map(function(e){return e.image_id}).filter(Boolean),t.n=2,Promise.allSettled([].concat(P(d.map(function(e){return xr._fetchWalletImage(e)})),[Qn.wait(300)]));case 2:Tr.search=xr._filterOutExtensions(l);case 3:return t.a(2)}},t)}))()},initPromise:function(e,t){var n=Tr.promises[e];return n||(Tr.promises[e]=t())},prefetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fetchConnectorImages,n=void 0===t||t,r=e.fetchFeaturedWallets,i=void 0===r||r,a=e.fetchRecommendedWallets,o=void 0===a||a,s=e.fetchNetworkImages,c=void 0===s||s,u=[n&&xr.initPromise("connectorImages",xr.fetchConnectorImages),i&&xr.initPromise("featuredWallets",xr.fetchFeaturedWallets),o&&xr.initPromise("recommendedWallets",xr.fetchRecommendedWallets),c&&xr.initPromise("networkImages",xr.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(u)},prefetchAnalyticsConfig:function(){var e;null!==(e=ar.state.features)&&void 0!==e&&e.analytics&&xr.fetchAnalyticsConfig()},fetchAnalyticsConfig:function(){return q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,_r.get({path:"/getAnalyticsConfig",params:xr._getSdkProperties()});case 1:t=e.v,n=t.isAnalyticsEnabled,ar.setFeatures({analytics:n}),e.n=3;break;case 2:e.p=2,e.v,ar.setFeatures({analytics:!1});case 3:return e.a(2)}},e,null,[[0,2]])}))()},filterByNamespaces:function(e){if(null==e||!e.length)return Tr.featured=Tr.allFeatured,void(Tr.recommended=Tr.allRecommended);var t=li.getRequestedCaipNetworkIds().join(",");Tr.featured=Tr.allFeatured.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})}),Tr.recommended=Tr.allRecommended.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})}),Tr.filteredWallets=Tr.wallets.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})})},clearFilterByNamespaces:function(){Tr.filteredWallets=[]},setFilterByNamespace:function(e){if(!e)return Tr.featured=Tr.allFeatured,void(Tr.recommended=Tr.allRecommended);var t=li.getRequestedCaipNetworkIds().join(",");Tr.featured=Tr.allFeatured.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})}),Tr.recommended=Tr.allRecommended.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})}),Tr.filteredWallets=Tr.wallets.filter(function(e){var n;return null===(n=e.chains)||void 0===n?void 0:n.some(function(e){return t.includes(e)})})}}),Rr=nt({view:"Connect",history:["Connect"],transactionStack:[]}),Ur=h("R",fr({state:Rr,subscribeKey:function(e,t){return ot(Rr,e,t)},pushTransactionStack:function(e){Rr.transactionStack.push(e)},popTransactionStack:function(e){var t=Rr.transactionStack.pop();if(t){var n=t.onSuccess,r=t.onError,i=t.onCancel;switch(e){case"success":null==n||n();break;case"error":null==r||r(),Ur.goBack();break;case"cancel":null==i||i(),Ur.goBack()}}},push:function(e,t){e!==Rr.view&&(Rr.view=e,Rr.history.push(e),Rr.data=t)},reset:function(e,t){Rr.view=e,Rr.history=[e],Rr.data=t},replace:function(e,t){Rr.history.at(-1)===e||(Rr.view=e,Rr.history[Rr.history.length-1]=e,Rr.data=t)},goBack:function(){var e,t=li.state.activeCaipAddress,n="ConnectingFarcaster"===Ur.state.view,r=!t&&n;if(Rr.history.length>1){Rr.history.pop();var i=S(Rr.history.slice(-1),1)[0];if(i){var a="Connect"===i;Rr.view=t&&a?"Account":i}}else bi.close();null!==(e=Rr.data)&&void 0!==e&&e.wallet&&(Rr.data.wallet=void 0),setTimeout(function(){if(r){var e,t,n;mi.setFarcasterUrl(void 0,li.state.activeChain);var i=zr.getAuthConnector();null==i||null===(e=i.provider)||void 0===e||e.reload();var a=it(ar.state);null==i||null===(t=i.provider)||void 0===t||null===(n=t.syncDappData)||void 0===n||n.call(t,{metadata:a.metadata,sdkVersion:a.sdkVersion,projectId:a.projectId,sdkType:a.sdkType})}},100)},goBackToIndex:function(e){if(Rr.history.length>1){Rr.history=Rr.history.slice(0,e+1);var t=S(Rr.history.slice(-1),1)[0];t&&(Rr.view=t)}},goBackOrCloseModal:function(){Ur.state.history.length>1?Ur.goBack():bi.close()}})),Dr=nt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),jr={state:Dr,subscribe:function(e){return rt(Dr,function(){return e(Dr)})},setThemeMode:function(e){Dr.themeMode=e;try{var t=zr.getAuthConnector();if(t){var n=jr.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:n,w3mThemeVariables:Jn(n,e)})}}catch(r){console.info("Unable to sync theme to auth connector")}},setThemeVariables:function(e){Dr.themeVariables=D(D({},Dr.themeVariables),e);try{var t=zr.getAuthConnector();if(t){var n=jr.getSnapshot().themeVariables;t.provider.syncTheme({themeVariables:n,w3mThemeVariables:Jn(Dr.themeVariables,Dr.themeMode)})}}catch(r){console.info("Unable to sync theme to auth connector")}},getSnapshot:function(){return it(Dr)}},Mr=h("T",fr(jr)),Lr={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},qr=nt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:D({},Lr),filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Br={state:qr,subscribe:function(e){return rt(qr,function(){e(qr)})},subscribeKey:function(e,t){return ot(qr,e,t)},initialize:function(e){e.forEach(function(e){var t=Zn.getConnectedConnectorId(e);t&&zr.setConnectorId(t,e)})},setActiveConnector:function(e){e&&(qr.activeConnector=at(e))},setConnectors:function(e){e.filter(function(e){return!qr.allConnectors.some(function(t){return t.id===e.id&&zr.getConnectorName(t.name)===zr.getConnectorName(e.name)&&t.chain===e.chain})}).forEach(function(e){"MULTI_CHAIN"!==e.type&&qr.allConnectors.push(at(e))});var t=zr.getEnabledNamespaces(),n=zr.getEnabledConnectors(t);qr.connectors=zr.mergeMultiChainConnectors(n)},filterByNamespaces:function(e){Object.keys(qr.filterByNamespaceMap).forEach(function(e){qr.filterByNamespaceMap[e]=!1}),e.forEach(function(e){qr.filterByNamespaceMap[e]=!0}),zr.updateConnectorsForEnabledNamespaces()},filterByNamespace:function(e,t){qr.filterByNamespaceMap[e]=t,zr.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces:function(){var e=zr.getEnabledNamespaces(),t=zr.getEnabledConnectors(e),n=zr.areAllNamespacesEnabled();qr.connectors=zr.mergeMultiChainConnectors(t),n?xr.clearFilterByNamespaces():xr.filterByNamespaces(e)},getEnabledNamespaces:function(){return Object.entries(qr.filterByNamespaceMap).filter(function(e){var t=S(e,2);t[0];return t[1]}).map(function(e){return S(e,1)[0]})},getEnabledConnectors:function(e){return qr.allConnectors.filter(function(t){return e.includes(t.chain)})},areAllNamespacesEnabled:function(){return Object.values(qr.filterByNamespaceMap).every(function(e){return e})},mergeMultiChainConnectors:function(e){var t=zr.generateConnectorMapByName(e),n=[];return t.forEach(function(e){var t=e[0],r=(null==t?void 0:t.id)===yn.CONNECTOR_ID.AUTH;e.length>1&&t?n.push({name:t.name,imageUrl:t.imageUrl,imageId:t.imageId,connectors:P(e),type:r?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(null==t?void 0:t.id)||""}):t&&n.push(t)}),n},generateConnectorMapByName:function(e){var t=new Map;return e.forEach(function(e){var n=e.name,r=zr.getConnectorName(n);if(r){var i=t.get(r)||[],a=i.find(function(t){return t.chain===e.chain});a||i.push(e),t.set(r,i)}}),t},getConnectorName:function(e){if(!e)return e;return{"Trust Wallet":"Trust"}[e]||e},getUniqueConnectorsByName:function(e){var t=[];return e.forEach(function(e){t.find(function(t){return t.chain===e.chain})||t.push(e)}),t},addConnector:function(e){if(e.id===yn.CONNECTOR_ID.AUTH){var t,n,r,i=e,a=it(ar.state),o=Mr.getSnapshot().themeMode,s=Mr.getSnapshot().themeVariables;null==i||null===(t=i.provider)||void 0===t||null===(n=t.syncDappData)||void 0===n||n.call(t,{metadata:a.metadata,sdkVersion:a.sdkVersion,projectId:a.projectId,sdkType:a.sdkType}),null==i||null===(r=i.provider)||void 0===r||r.syncTheme({themeMode:o,themeVariables:s,w3mThemeVariables:Jn(s,o)}),zr.setConnectors([e])}else zr.setConnectors([e])},getAuthConnector:function(e){var t,n=e||li.state.activeChain,r=qr.connectors.find(function(e){return e.id===yn.CONNECTOR_ID.AUTH});if(r){if(null!=r&&null!==(t=r.connectors)&&void 0!==t&&t.length){var i=r.connectors.find(function(e){return e.chain===n});return i}return r}},getAnnouncedConnectorRdns:function(){return qr.connectors.filter(function(e){return"ANNOUNCED"===e.type}).map(function(e){var t;return null===(t=e.info)||void 0===t?void 0:t.rdns})},getConnectorById:function(e){return qr.allConnectors.find(function(t){return t.id===e})},getConnector:function(e,t){var n=qr.allConnectors.filter(function(e){return e.chain===li.state.activeChain});return n.find(function(n){var r;return n.explorerId===e||(null===(r=n.info)||void 0===r?void 0:r.rdns)===t})},syncIfAuthConnector:function(e){var t,n;if("ID_AUTH"===e.id){var r=e,i=it(ar.state),a=Mr.getSnapshot().themeMode,o=Mr.getSnapshot().themeVariables;null==r||null===(t=r.provider)||void 0===t||null===(n=t.syncDappData)||void 0===n||n.call(t,{metadata:i.metadata,sdkVersion:i.sdkVersion,sdkType:i.sdkType,projectId:i.projectId}),r.provider.syncTheme({themeMode:a,themeVariables:o,w3mThemeVariables:Jn(o,a)})}},getConnectorsByNamespace:function(e){var t=qr.allConnectors.filter(function(t){return t.chain===e});return zr.mergeMultiChainConnectors(t)},selectWalletConnector:function(e){var t=zr.getConnector(e.id,e.rdns),n=li.state.activeChain;gr((null==t?void 0:t.explorerId)||e.id,n),t?Ur.push("ConnectingExternal",{connector:t}):Ur.push("ConnectingWalletConnect",{wallet:e})},getConnectors:function(e){return e?zr.getConnectorsByNamespace(e):zr.mergeMultiChainConnectors(qr.allConnectors)},setFilterByNamespace:function(e){qr.filterByNamespace=e,qr.connectors=zr.getConnectors(e),xr.setFilterByNamespace(e)},setConnectorId:function(e,t){e&&(qr.activeConnectorIds=D(D({},qr.activeConnectorIds),{},j({},t,e)),Zn.setConnectedConnectorId(t,e))},removeConnectorId:function(e){qr.activeConnectorIds=D(D({},qr.activeConnectorIds),{},j({},e,void 0)),Zn.deleteConnectedConnectorId(e)},getConnectorId:function(e){if(e)return qr.activeConnectorIds[e]},isConnected:function(e){return e?Boolean(qr.activeConnectorIds[e]):Object.values(qr.activeConnectorIds).some(function(e){return Boolean(e)})},resetConnectorIds:function(){qr.activeConnectorIds=D({},Lr)}},zr=h("y",fr(Br)),Fr={SMART_ACCOUNT:"smartAccount"},Wr=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Hr=nt(D({},Wr)),Vr={state:Hr,subscribeKey:function(e,t){return ot(Hr,e,t)},showLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._showMessage(D({message:e,variant:"loading"},t))},showSuccess:function(e){this._showMessage({message:e,variant:"success"})},showSvg:function(e,t){this._showMessage({message:e,svg:t})},showError:function(e){var t=Qn.parseError(e);this._showMessage({message:t,variant:"error"})},hide:function(){Hr.message=Wr.message,Hr.variant=Wr.variant,Hr.svg=Wr.svg,Hr.open=Wr.open,Hr.autoClose=Wr.autoClose},_showMessage:function(e){var t=e.message,n=e.svg,r=e.variant,i=void 0===r?"success":r,a=e.autoClose,o=void 0===a?Wr.autoClose:a;Hr.open?(Hr.open=!1,setTimeout(function(){Hr.message=t,Hr.variant=i,Hr.svg=n,Hr.open=!0,Hr.autoClose=o},150)):(Hr.message=t,Hr.variant=i,Hr.svg=n,Hr.open=!0,Hr.autoClose=o)}},Kr=h("B",Vr),$r=nt({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Gr={state:$r,subscribe:function(e){return rt($r,function(){return e($r)})},setLastNetworkInView:function(e){$r.lastNetworkInView=e},fetchTransactions:function(e,t){return q(x().m(function n(){var r,i,a,o,s,c,u;return x().w(function(n){for(;;)switch(n.p=n.n){case 0:if(e){n.n=1;break}throw new Error("Transactions can't be fetched without an accountAddress");case 1:return $r.loading=!0,n.p=2,n.n=3,hi.fetchTransactions({account:e,cursor:$r.next,onramp:t,cache:"coinbase"===t?"no-cache":void 0,chainId:null===(r=li.state.activeCaipNetwork)||void 0===r?void 0:r.caipNetworkId});case 3:i=n.v,a=Jr.filterSpamTransactions(i.data),o=Jr.filterByConnectedChain(a),s=[].concat(P($r.transactions),P(o)),$r.loading=!1,"coinbase"===t?$r.coinbaseTransactions=Jr.groupTransactionsByYearAndMonth($r.coinbaseTransactions,i.data):($r.transactions=s,$r.transactionsByYear=Jr.groupTransactionsByYearAndMonth($r.transactionsByYear,o)),$r.empty=0===s.length,$r.next=i.next?i.next:void 0,n.n=5;break;case 4:n.p=4,n.v,u=li.state.activeChain,Pr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:ar.state.projectId,cursor:$r.next,isSmartAccount:(null===(c=mi.state.preferredAccountTypes)||void 0===c?void 0:c[u])===Fr.SMART_ACCOUNT}}),Kr.showError("Failed to fetch transactions"),$r.loading=!1,$r.empty=!0,$r.next=void 0;case 5:return n.a(2)}},n,null,[[2,4]])}))()},groupTransactionsByYearAndMonth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach(function(t){var n,r,i=new Date(t.metadata.minedAt).getFullYear(),a=new Date(t.metadata.minedAt).getMonth(),o=null!==(n=e[i])&&void 0!==n?n:{},s=(null!==(r=o[a])&&void 0!==r?r:[]).filter(function(e){return e.id!==t.id});e[i]=D(D({},o),{},j({},a,[].concat(P(s),[t]).sort(function(e,t){return new Date(t.metadata.minedAt).getTime()-new Date(e.metadata.minedAt).getTime()})))}),e},filterSpamTransactions:function(e){return e.filter(function(e){return!e.transfers.every(function(e){var t;return!0===(null===(t=e.nft_info)||void 0===t?void 0:t.flags.is_spam)})})},filterByConnectedChain:function(e){var t,n=null===(t=li.state.activeCaipNetwork)||void 0===t?void 0:t.caipNetworkId;return e.filter(function(e){return e.metadata.chain===n})},clearCursor:function(){$r.next=void 0},resetTransactions:function(){$r.transactions=[],$r.transactionsByYear={},$r.lastNetworkInView=void 0,$r.loading=!1,$r.empty=!1,$r.next=void 0}},Jr=fr(Gr,"API_ERROR"),Yr=nt({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"}),Xr={state:Yr,subscribeKey:function(e,t){return ot(Yr,e,t)},_getClient:function(){return Yr._client},setClient:function(e){Yr._client=at(e)},connectWalletConnect:function(){return q(x().m(function e(){var t,n,r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(!(Qn.isTelegram()||Qn.isSafari()&&Qn.isIos())){e.n=5;break}if(!pr){e.n=2;break}return e.n=1,pr;case 1:return pr=void 0,e.a(2);case 2:if(Qn.isPairingExpired(null==Yr?void 0:Yr.wcPairingExpiry)){e.n=3;break}return r=Yr.wcUri,Yr.wcUri=r,e.a(2);case 3:return pr=null===(t=Zr._getClient())||void 0===t||null===(n=t.connectWalletConnect)||void 0===n?void 0:n.call(t).catch(function(){}),Zr.state.status="connecting",e.n=4,pr;case 4:pr=void 0,Yr.wcPairingExpiry=void 0,Zr.state.status="connected",e.n=6;break;case 5:return e.n=6,null===(i=Zr._getClient())||void 0===i||null===(a=i.connectWalletConnect)||void 0===a?void 0:a.call(i);case 6:return e.a(2)}},e)}))()},connectExternal:function(e,t){var n=arguments;return q(x().m(function r(){var i,a,o;return x().w(function(r){for(;;)switch(r.n){case 0:return o=!(n.length>2&&void 0!==n[2])||n[2],r.n=1,null===(i=Zr._getClient())||void 0===i||null===(a=i.connectExternal)||void 0===a?void 0:a.call(i,e);case 1:o&&li.setActiveNamespace(t);case 2:return r.a(2)}},r)}))()},reconnectExternal:function(e){return q(x().m(function t(){var n,r,i;return x().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,null===(n=Zr._getClient())||void 0===n||null===(r=n.reconnectExternal)||void 0===r?void 0:r.call(n,e);case 1:(i=e.chain||li.state.activeChain)&&zr.setConnectorId(e.id,i);case 2:return t.a(2)}},t)}))()},setPreferredAccountType:function(e,t){return q(x().m(function n(){var r,i,a;return x().w(function(n){for(;;)switch(n.n){case 0:if(bi.setLoading(!0,li.state.activeChain),a=zr.getAuthConnector()){n.n=1;break}return n.a(2);case 1:return mi.setPreferredAccountType(e,t),n.n=2,a.provider.setPreferredAccount(e);case 2:return Zn.setPreferredAccountTypes(null!==(r=mi.state.preferredAccountTypes)&&void 0!==r?r:j({},t,e)),n.n=3,Zr.reconnectExternal(a);case 3:bi.setLoading(!1,li.state.activeChain),Pr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:(null===(i=li.state.activeCaipNetwork)||void 0===i?void 0:i.caipNetworkId)||""}});case 4:return n.a(2)}},n)}))()},signMessage:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)if(0===t.n)return t.a(2,null===(n=Zr._getClient())||void 0===n?void 0:n.signMessage(e))},t)}))()},parseUnits:function(e,t){var n;return null===(n=Zr._getClient())||void 0===n?void 0:n.parseUnits(e,t)},formatUnits:function(e,t){var n;return null===(n=Zr._getClient())||void 0===n?void 0:n.formatUnits(e,t)},sendTransaction:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)if(0===t.n)return t.a(2,null===(n=Zr._getClient())||void 0===n?void 0:n.sendTransaction(e))},t)}))()},getCapabilities:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)if(0===t.n)return t.a(2,null===(n=Zr._getClient())||void 0===n?void 0:n.getCapabilities(e))},t)}))()},grantPermissions:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)if(0===t.n)return t.a(2,null===(n=Zr._getClient())||void 0===n?void 0:n.grantPermissions(e))},t)}))()},walletGetAssets:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)if(0===t.n)return t.a(2,null!==(n=null===(r=Zr._getClient())||void 0===r?void 0:r.walletGetAssets(e))&&void 0!==n?n:{})},t)}))()},estimateGas:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)if(0===t.n)return t.a(2,null===(n=Zr._getClient())||void 0===n?void 0:n.estimateGas(e))},t)}))()},writeContract:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)if(0===t.n)return t.a(2,null===(n=Zr._getClient())||void 0===n?void 0:n.writeContract(e))},t)}))()},getEnsAddress:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)if(0===t.n)return t.a(2,null===(n=Zr._getClient())||void 0===n?void 0:n.getEnsAddress(e))},t)}))()},getEnsAvatar:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)if(0===t.n)return t.a(2,null===(n=Zr._getClient())||void 0===n?void 0:n.getEnsAvatar(e))},t)}))()},checkInstalled:function(e){var t,n;return(null===(t=Zr._getClient())||void 0===t||null===(n=t.checkInstalled)||void 0===n?void 0:n.call(t,e))||!1},resetWcConnection:function(){Yr.wcUri=void 0,Yr.wcPairingExpiry=void 0,Yr.wcLinking=void 0,Yr.recentWallet=void 0,Yr.status="disconnected",Jr.resetTransactions(),Zn.deleteWalletConnectDeepLink()},resetUri:function(){Yr.wcUri=void 0,Yr.wcPairingExpiry=void 0,pr=void 0},finalizeWcConnection:function(){var e,t=Zr.state,n=t.wcLinking,r=t.recentWallet;n&&Zn.setWalletConnectDeepLink(n),r&&Zn.setAppKitRecent(r),Pr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:n?"mobile":"qrcode",name:(null===(e=Ur.state.data)||void 0===e||null===(e=e.wallet)||void 0===e?void 0:e.name)||"Unknown"}})},setWcBasic:function(e){Yr.wcBasic=e},setUri:function(e){Yr.wcUri=e,Yr.wcPairingExpiry=Qn.getPairingExpiry()},setWcLinking:function(e){Yr.wcLinking=e},setWcError:function(e){Yr.wcError=e,Yr.buffering=!1},setRecentWallet:function(e){Yr.recentWallet=e},setBuffering:function(e){Yr.buffering=e},setStatus:function(e){Yr.status=e},disconnect:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,null===(n=Zr._getClient())||void 0===n?void 0:n.disconnect(e);case 1:t.n=3;break;case 2:throw t.p=2,r=t.v,new lr("Failed to disconnect","INTERNAL_SDK_ERROR",r);case 3:return t.a(2)}},t,null,[[0,2]])}))()},setConnections:function(e,t){Yr.connections.set(t,e)},switchAccount:function(e){var t=e.connection,n=e.address,r=e.namespace;if(zr.state.activeConnectorIds[r]===t.connectorId){var i=li.state.activeCaipNetwork;if(i){var a="".concat(r,":").concat(i.id,":").concat(n);mi.setCaipAddress(a,r)}else console.warn('No current network found for namespace "'.concat(r,'"'))}else{var o=zr.getConnector(t.connectorId);o?Zr.connectExternal(o,r):console.warn('No connector found for namespace "'.concat(r,'"'))}}},Zr=h("Q",fr(Xr)),Qr=nt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),ei={state:Qr,subscribe:function(e){return rt(Qr,function(){return e(Qr)})},subscribeOpen:function(e){return ot(Qr,"open",e)},set:function(e){Object.assign(Qr,D(D({},Qr),e))}},ti={createBalance:function(e,t){var n={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:t,address:"native"===e.address?void 0:this.convertAddressToCAIP10Address(e.address,t),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance:function(e){var t=e.hex,n=e.decimals;return R(BigInt(t),n)},convertAddressToCAIP10Address:function(e,t){return"".concat(t,":").concat(e)},createCAIP2ChainId:function(e,t){return"".concat(t,":").concat(parseInt(e,16))},getChainIdHexFromCAIP2ChainId:function(e){var t=e.split(":");if(t.length<2||!t[1])return"0x0";var n=t[1],r=parseInt(n,10);return isNaN(r)?"0x0":"0x".concat(r.toString(16))},isWalletGetAssetsResponse:function(e){var t=this;return"object"===T(e)&&null!==e&&Object.values(e).every(function(e){return Array.isArray(e)&&e.every(function(e){return t.isValidAsset(e)})})},isValidAsset:function(e){return"object"===T(e)&&null!==e&&"string"==typeof e.address&&"string"==typeof e.balance&&("ERC20"===e.type||"NATIVE"===e.type)&&"object"===T(e.metadata)&&null!==e.metadata&&"string"==typeof e.metadata.name&&"string"==typeof e.metadata.symbol&&"number"==typeof e.metadata.decimals&&"number"==typeof e.metadata.price&&"string"==typeof e.metadata.iconUrl}},ni={getMyTokensWithBalance:function(e){var t=this;return q(x().m(function n(){var r,i,a,o;return x().w(function(n){for(;;)switch(n.n){case 0:if(r=mi.state.address,i=li.state.activeCaipNetwork,r&&i){n.n=1;break}return n.a(2,[]);case 1:if("eip155"!==i.chainNamespace){n.n=3;break}return n.n=2,t.getEIP155Balances(r,i);case 2:if(!(a=n.v)){n.n=3;break}return n.a(2,t.filterLowQualityTokens(a));case 3:return n.n=4,hi.getBalance(r,i.caipNetworkId,e);case 4:return o=n.v,n.a(2,t.filterLowQualityTokens(o.balances))}},n)}))()},getEIP155Balances:function(e,t){return q(x().m(function n(){var r,i,a,o,s;return x().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,i=ti.getChainIdHexFromCAIP2ChainId(t.caipNetworkId),n.n=1,Zr.getCapabilities(e);case 1:if(null!=(a=n.v)&&null!==(r=a[i])&&void 0!==r&&null!==(r=r.assetDiscovery)&&void 0!==r&&r.supported){n.n=2;break}return n.a(2,null);case 2:return n.n=3,Zr.walletGetAssets({account:e,chainFilter:[i]});case 3:if(o=n.v,ti.isWalletGetAssetsResponse(o)){n.n=4;break}return n.a(2,null);case 4:return s=o[i]||[],n.a(2,s.map(function(e){return ti.createBalance(e,t.caipNetworkId)}));case 5:return n.p=5,n.v,n.a(2,null)}},n,null,[[0,5]])}))()},filterLowQualityTokens:function(e){return e.filter(function(e){return"0"!==e.quantity.decimals})},mapBalancesToSwapTokens:function(e){return(null==e?void 0:e.map(function(e){return D(D({},e),{},{address:null!=e&&e.address?e.address:li.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})}))||[]}},ri=nt({tokenBalances:[],loading:!1}),ii={state:ri,subscribe:function(e){return rt(ri,function(){return e(ri)})},subscribeKey:function(e,t){return ot(ri,e,t)},setToken:function(e){e&&(ri.token=at(e))},setTokenAmount:function(e){ri.sendTokenAmount=e},setReceiverAddress:function(e){ri.receiverAddress=e},setReceiverProfileImageUrl:function(e){ri.receiverProfileImageUrl=e},setReceiverProfileName:function(e){ri.receiverProfileName=e},setNetworkBalanceInUsd:function(e){ri.networkBalanceInUSD=e},setLoading:function(e){ri.loading=e},sendToken:function(){return q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,ai.setLoading(!0),n=null===(t=li.state.activeCaipNetwork)||void 0===t?void 0:t.chainNamespace,e.n="eip155"===n?1:"solana"===n?3:5;break;case 1:return e.n=2,ai.sendEvmToken();case 2:case 4:case 7:return e.a(2);case 3:return e.n=4,ai.sendSolanaToken();case 5:throw new Error("Unsupported chain");case 6:return e.p=6,ai.setLoading(!1),e.f(6)}},e,null,[[0,,6,7]])}))()},sendEvmToken:function(){return q(x().m(function e(){var t,n,r,i,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:if(r=li.state.activeChain,i=null===(t=mi.state.preferredAccountTypes)||void 0===t?void 0:t[r],ai.state.sendTokenAmount&&ai.state.receiverAddress){e.n=1;break}throw new Error("An amount and receiver address are required");case 1:if(ai.state.token){e.n=2;break}throw new Error("A token is required");case 2:if(null===(n=ai.state.token)||void 0===n||!n.address){e.n=4;break}return Pr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:i===Fr.SMART_ACCOUNT,token:ai.state.token.address,amount:ai.state.sendTokenAmount,network:(null===(a=li.state.activeCaipNetwork)||void 0===a?void 0:a.caipNetworkId)||""}}),e.n=3,ai.sendERC20Token({receiverAddress:ai.state.receiverAddress,tokenAddress:ai.state.token.address,sendTokenAmount:ai.state.sendTokenAmount,decimals:ai.state.token.quantity.decimals});case 3:e.n=5;break;case 4:return Pr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:i===Fr.SMART_ACCOUNT,token:ai.state.token.symbol||"",amount:ai.state.sendTokenAmount,network:(null===(o=li.state.activeCaipNetwork)||void 0===o?void 0:o.caipNetworkId)||""}}),e.n=5,ai.sendNativeToken({receiverAddress:ai.state.receiverAddress,sendTokenAmount:ai.state.sendTokenAmount,decimals:ai.state.token.quantity.decimals});case 5:return e.a(2)}},e)}))()},fetchTokenBalance:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c,u;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(ri.loading=!0,i=null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId,a=null===(r=li.state.activeCaipNetwork)||void 0===r?void 0:r.chainNamespace,o=li.state.activeCaipAddress,s=o?Qn.getPlainAddress(o):void 0,!ri.lastRetry||Qn.isAllowedRetry(ri.lastRetry,30*Xn.ONE_SEC_MS)){t.n=1;break}return ri.loading=!1,t.a(2,[]);case 1:if(t.p=1,!(s&&i&&a)){t.n=3;break}return t.n=2,ni.getMyTokensWithBalance();case 2:return c=t.v,ri.tokenBalances=c,ri.lastRetry=void 0,t.a(2,c);case 3:t.n=5;break;case 4:t.p=4,u=t.v,ri.lastRetry=Date.now(),null==e||e(u),Kr.showError("Token Balance Unavailable");case 5:return t.p=5,ri.loading=!1,t.f(5);case 6:return t.a(2,[])}},t,null,[[1,4,5,6]])}))()},fetchNetworkBalance:function(){if(0!==ri.tokenBalances.length){var e=ni.mapBalancesToSwapTokens(ri.tokenBalances);if(e){var t=e.find(function(e){return e.address===li.getActiveNetworkTokenAddress()});t&&(ri.networkBalanceInUSD=t?En(t.quantity.numeric,t.price).toString():"0")}}},sendNativeToken:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c;return x().w(function(t){for(;;)switch(t.n){case 0:return Ur.pushTransactionStack({}),o=e.receiverAddress,s=mi.state.address,c=Zr.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),t.n=1,Zr.sendTransaction({chainNamespace:"eip155",to:o,address:s,data:"0x",value:null!=c?c:BigInt(0)});case 1:Pr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:(null===(n=mi.state.preferredAccountTypes)||void 0===n?void 0:n.eip155)===Fr.SMART_ACCOUNT,token:(null===(r=ai.state.token)||void 0===r?void 0:r.symbol)||"",amount:e.sendTokenAmount,network:(null===(i=li.state.activeCaipNetwork)||void 0===i?void 0:i.caipNetworkId)||""}}),null===(a=Zr._getClient())||void 0===a||a.updateBalance("eip155"),ai.resetSend();case 2:return t.a(2)}},t)}))()},sendERC20Token:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.n){case 0:if(Ur.pushTransactionStack({onSuccess:function(){Ur.replace("Account")}}),n=Zr.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),!(mi.state.address&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress)){t.n=2;break}return r=Qn.getPlainAddress(e.tokenAddress),t.n=1,Zr.writeContract({fromAddress:mi.state.address,tokenAddress:r,args:[e.receiverAddress,null!=n?n:BigInt(0)],method:"transfer",abi:Nn(r),chainNamespace:"eip155"});case 1:ai.resetSend();case 2:return t.a(2)}},t)}))()},sendSolanaToken:function(){return q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:if(ai.state.sendTokenAmount&&ai.state.receiverAddress){e.n=1;break}throw new Error("An amount and receiver address are required");case 1:return Ur.pushTransactionStack({onSuccess:function(){Ur.replace("Account")}}),e.n=2,Zr.sendTransaction({chainNamespace:"solana",to:ai.state.receiverAddress,value:ai.state.sendTokenAmount});case 2:null===(t=Zr._getClient())||void 0===t||t.updateBalance("solana"),ai.resetSend();case 3:return e.a(2)}},e)}))()},resetSend:function(){ri.token=void 0,ri.sendTokenAmount=void 0,ri.receiverAddress=void 0,ri.receiverProfileImageUrl=void 0,ri.receiverProfileName=void 0,ri.loading=!1,ri.tokenBalances=[]}},ai=fr(ii),oi={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},si={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ci=nt({chains:(hr=nt(j(function(e,t,n,r){var i={configurable:!0,enumerable:!0};return i[e]=r,Object.defineProperty(t,n,i)}("get",{data:Array.from([]),has:function(e){return this.data.some(function(t){return t[0]===e})},set:function(e,t){var n=this.data.find(function(t){return t[0]===e});return n?n[1]=t:this.data.push([e,t]),this},get:function(e){var t;return null==(t=this.data.find(function(t){return t[0]===e}))?void 0:t[1]},delete:function(e){var t=this.data.findIndex(function(t){return t[0]===e});return-1!==t&&(this.data.splice(t,1),!0)},clear:function(){this.data.splice(0)},get size(){return this.data.length},toJSON:function(){return new Map(this.data)},forEach:function(e){var t=this;this.data.forEach(function(n){e(n[1],n[0],t)})},keys:function(){return this.data.map(function(e){return e[0]}).values()},values:function(){return this.data.map(function(e){return e[1]}).values()},entries:function(){return new Map(this.data).entries()}},Symbol.toStringTag,function(){return"Map"}),Symbol.iterator,function(){return this.entries()})),Object.defineProperties(hr,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(hr),hr),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),ui={state:ci,subscribe:function(e){return rt(ci,function(){e(ci)})},subscribeKey:function(e,t){return ot(ci,e,t)},subscribeChainProp:function(e,t,n){var r=void 0;return rt(ci.chains,function(){var i=n||ci.activeChain;if(i){var a,o=null===(a=ci.chains.get(i))||void 0===a?void 0:a[e];r!==o&&(r=o,t(o))}})},initialize:function(e,t,n){var r,i=Zn.getActiveNetworkProps(),a=i.chainId,o=i.namespace,s=null==t?void 0:t.find(function(e){return e.id.toString()===(null==a?void 0:a.toString())}),c=e.find(function(e){return(null==e?void 0:e.namespace)===o})||(null==e?void 0:e[0]),u=e.map(function(e){return e.namespace}).filter(function(e){return void 0!==e}),l=ar.state.enableEmbedded?new Set(P(u)):new Set(P(null!==(r=null==t?void 0:t.map(function(e){return e.chainNamespace}))&&void 0!==r?r:[]));0!==(null==e?void 0:e.length)&&c||(ci.noAdapters=!0),ci.noAdapters||(ci.activeChain=null==c?void 0:c.namespace,ci.activeCaipNetwork=s,li.setChainNetworkData(null==c?void 0:c.namespace,{caipNetwork:s}),ci.activeChain&&ei.set({activeChain:null==c?void 0:c.namespace})),l.forEach(function(e){var r=null==t?void 0:t.filter(function(t){return t.chainNamespace===e});li.state.chains.set(e,D({namespace:e,networkState:nt(D(D({},si),{},{caipNetwork:null==r?void 0:r[0]})),accountState:nt(oi),caipNetworks:null!=r?r:[]},n)),li.setRequestedCaipNetworks(null!=r?r:[],e)})},removeAdapter:function(e){if(ci.activeChain===e){var t=Array.from(ci.chains.entries()).find(function(t){return S(t,1)[0]!==e});if(t){var n,r=null===(n=t[1])||void 0===n||null===(n=n.caipNetworks)||void 0===n?void 0:n[0];r&&li.setActiveCaipNetwork(r)}}ci.chains.delete(e)},addAdapter:function(e,t,n){var r,i=t.networkControllerClient,a=t.connectionControllerClient;ci.chains.set(e.namespace,{namespace:e.namespace,networkState:D(D({},si),{},{caipNetwork:n[0]}),accountState:oi,caipNetworks:n,connectionControllerClient:a,networkControllerClient:i}),li.setRequestedCaipNetworks(null!==(r=null==n?void 0:n.filter(function(t){return t.chainNamespace===e.namespace}))&&void 0!==r?r:[],e.namespace)},addNetwork:function(e){var t=ci.chains.get(e.chainNamespace);if(t){var n,r=P(t.caipNetworks||[]);null!==(n=t.caipNetworks)&&void 0!==n&&n.find(function(t){return t.id===e.id})||r.push(e),ci.chains.set(e.chainNamespace,D(D({},t),{},{caipNetworks:r})),li.setRequestedCaipNetworks(r,e.chainNamespace),zr.filterByNamespace(e.chainNamespace,!0)}},removeNetwork:function(e,t){var n=ci.chains.get(e);if(n){var r,i,a,o=(null===(r=ci.activeCaipNetwork)||void 0===r?void 0:r.id)===t,s=P((null===(i=n.caipNetworks)||void 0===i?void 0:i.filter(function(e){return e.id!==t}))||[]);o&&null!=n&&null!==(a=n.caipNetworks)&&void 0!==a&&a[0]&&li.setActiveCaipNetwork(n.caipNetworks[0]),ci.chains.set(e,D(D({},n),{},{caipNetworks:s})),li.setRequestedCaipNetworks(s||[],e),0===s.length&&zr.filterByNamespace(e,!1)}},setAdapterNetworkState:function(e,t){var n=ci.chains.get(e);n&&(n.networkState=D(D({},n.networkState||si),t),ci.chains.set(e,n))},setChainAccountData:function(e,t){if(!e)throw new Error("Chain is required to update chain account data");var n=ci.chains.get(e);if(n){var r=D(D({},n.accountState||oi),t);ci.chains.set(e,D(D({},n),{},{accountState:r})),1!==ci.chains.size&&ci.activeChain!==e||(t.caipAddress&&(ci.activeCaipAddress=t.caipAddress),mi.replaceState(r))}},setChainNetworkData:function(e,t){if(e){var n=ci.chains.get(e);if(n){var r=D(D({},n.networkState||si),t);ci.chains.set(e,D(D({},n),{},{networkState:r}))}}},setAccountProp:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];li.setChainAccountData(n,j({},e,t),r),"status"===e&&"disconnected"===t&&n&&zr.removeConnectorId(n)},setActiveNamespace:function(e){var t;ci.activeChain=e;var n,r=e?ci.chains.get(e):void 0,i=null==r||null===(t=r.networkState)||void 0===t?void 0:t.caipNetwork;null!=i&&i.id&&e&&(ci.activeCaipAddress=null==r||null===(n=r.accountState)||void 0===n?void 0:n.caipAddress,ci.activeCaipNetwork=i,li.setChainNetworkData(e,{caipNetwork:i}),Zn.setActiveCaipNetworkId(null==i?void 0:i.caipNetworkId),ei.set({activeChain:e,selectedNetworkId:null==i?void 0:i.caipNetworkId}))},setActiveCaipNetwork:function(e){var t,n;if(e){ci.activeChain!==e.chainNamespace&&li.setIsSwitchingNamespace(!0);var r,i=ci.chains.get(e.chainNamespace);if(ci.activeChain=e.chainNamespace,ci.activeCaipNetwork=e,li.setChainNetworkData(e.chainNamespace,{caipNetwork:e}),null!=i&&null!==(t=i.accountState)&&void 0!==t&&t.address)ci.activeCaipAddress="".concat(e.chainNamespace,":").concat(e.id,":").concat(null==i||null===(r=i.accountState)||void 0===r?void 0:r.address);else ci.activeCaipAddress=void 0;li.setAccountProp("caipAddress",ci.activeCaipAddress,e.chainNamespace),i&&mi.replaceState(i.accountState),ai.resetSend(),ei.set({activeChain:ci.activeChain,selectedNetworkId:null===(n=ci.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId}),Zn.setActiveCaipNetworkId(e.caipNetworkId),li.checkIfSupportedNetwork(e.chainNamespace)||!ar.state.enableNetworkSwitch||ar.state.allowUnsupportedChain||Zr.state.wcBasic||li.showUnsupportedChainUI()}},addCaipNetwork:function(e){if(e){var t,n=ci.chains.get(e.chainNamespace);if(n)null==n||null===(t=n.caipNetworks)||void 0===t||t.push(e)}},switchActiveNamespace:function(e){return q(x().m(function t(){var n,r,i,a;return x().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return t.a(2);case 1:if(r=e!==li.state.activeChain,i=null===(n=li.getNetworkData(e))||void 0===n?void 0:n.caipNetwork,a=li.getCaipNetworkByNamespace(e,null==i?void 0:i.id),!r||!a){t.n=2;break}return t.n=2,li.switchActiveNetwork(a);case 2:return t.a(2)}},t)}))()},switchActiveNetwork:function(e){return q(x().m(function t(){var n,r,i,a;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(r=li.state.chains.get(li.state.activeChain),i=!(null!=r&&null!==(n=r.caipNetworks)&&void 0!==n&&n.some(function(e){var t;return e.id===(null===(t=ci.activeCaipNetwork)||void 0===t?void 0:t.id)})),!(a=li.getNetworkControllerClient(e.chainNamespace))){t.n=5;break}return t.p=1,t.n=2,a.switchCaipNetwork(e);case 2:i&&bi.close(),t.n=4;break;case 3:t.p=3,t.v,Ur.goBack();case 4:Pr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}});case 5:return t.a(2)}},t,null,[[1,3]])}))()},getNetworkControllerClient:function(e){var t=e||ci.activeChain,n=ci.chains.get(t);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient:function(e){var t=e||ci.activeChain;if(!t)throw new Error("Chain is required to get connection controller client");var n=ci.chains.get(t);if(null==n||!n.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp:function(e,t){var n,r=ci.activeChain;if(t&&(r=t),r){var i=null===(n=ci.chains.get(r))||void 0===n?void 0:n.accountState;if(i)return i[e]}},getNetworkProp:function(e,t){var n,r=null===(n=ci.chains.get(t))||void 0===n?void 0:n.networkState;if(r)return r[e]},getRequestedCaipNetworks:function(e){var t=ci.chains.get(e),n=(null==t?void 0:t.networkState)||{},r=n.approvedCaipNetworkIds,i=void 0===r?[]:r,a=n.requestedCaipNetworks,o=void 0===a?[]:a;return Qn.sortRequestedNetworks(i,o)},getAllRequestedCaipNetworks:function(){var e=[];return ci.chains.forEach(function(t){var n=li.getRequestedCaipNetworks(t.namespace);e.push.apply(e,P(n))}),e},setRequestedCaipNetworks:function(e,t){li.setAdapterNetworkState(t,{requestedCaipNetworks:e});var n=li.getAllRequestedCaipNetworks().map(function(e){return e.chainNamespace}),r=Array.from(new Set(n));zr.filterByNamespaces(r)},getAllApprovedCaipNetworkIds:function(){var e=[];return ci.chains.forEach(function(t){var n=li.getApprovedCaipNetworkIds(t.namespace);e.push.apply(e,P(n))}),e},getActiveCaipNetwork:function(){return ci.activeCaipNetwork},getActiveCaipAddress:function(){return ci.activeCaipAddress},getApprovedCaipNetworkIds:function(e){var t,n=ci.chains.get(e);return(null==n||null===(t=n.networkState)||void 0===t?void 0:t.approvedCaipNetworkIds)||[]},setApprovedCaipNetworksData:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.n){case 0:return n=li.getNetworkControllerClient(),t.n=1,null==n?void 0:n.getApprovedCaipNetworksData();case 1:r=t.v,li.setAdapterNetworkState(e,{approvedCaipNetworkIds:null==r?void 0:r.approvedCaipNetworkIds,supportsAllNetworks:null==r?void 0:r.supportsAllNetworks});case 2:return t.a(2)}},t)}))()},checkIfSupportedNetwork:function(e,t){var n=t||ci.activeCaipNetwork,r=li.getRequestedCaipNetworks(e);return!r.length||(null==r?void 0:r.some(function(e){return e.id===(null==n?void 0:n.id)}))},checkIfSupportedChainId:function(e){if(!ci.activeChain)return!0;var t=li.getRequestedCaipNetworks(ci.activeChain);return null==t?void 0:t.some(function(t){return t.id===e})},setSmartAccountEnabledNetworks:function(e,t){li.setAdapterNetworkState(t,{smartAccountEnabledNetworks:e})},checkIfSmartAccountEnabled:function(){var e,t=bn(null===(e=ci.activeCaipNetwork)||void 0===e?void 0:e.caipNetworkId),n=ci.activeChain;if(!n||!t)return!1;var r=li.getNetworkProp("smartAccountEnabledNetworks",n);return Boolean(null==r?void 0:r.includes(Number(t)))},getActiveNetworkTokenAddress:function(){var e,t,n=(null===(e=ci.activeCaipNetwork)||void 0===e?void 0:e.chainNamespace)||"eip155",r=(null===(t=ci.activeCaipNetwork)||void 0===t?void 0:t.id)||1,i=Xn.NATIVE_TOKEN_ADDRESS[n];return"".concat(n,":").concat(r,":").concat(i)},showUnsupportedChainUI:function(){bi.open({view:"UnsupportedChain"})},checkIfNamesSupported:function(){var e=ci.activeCaipNetwork;return Boolean((null==e?void 0:e.chainNamespace)&&Xn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork:function(e){li.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount:function(e){var t=e;if(!t)throw new Error("Chain is required to set account prop");ci.activeCaipAddress=void 0,li.setChainAccountData(t,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),zr.removeConnectorId(t)},setIsSwitchingNamespace:function(e){ci.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector:function(){var e=[];if(ci.chains.forEach(function(t){yn.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(function(e){return e===t.namespace})&&t.namespace&&e.push(t.namespace)}),e.length>0){var t,n=e[0];return n?null===(t=ci.chains.get(n))||void 0===t||null===(t=t.caipNetworks)||void 0===t?void 0:t[0]:void 0}},getAccountData:function(e){var t;return e?null===(t=li.state.chains.get(e))||void 0===t?void 0:t.accountState:mi.state},getNetworkData:function(e){var t,n=e||ci.activeChain;if(n)return null===(t=li.state.chains.get(n))||void 0===t?void 0:t.networkState},getCaipNetworkByNamespace:function(e,t){var n,r,i;if(e){var a=li.state.chains.get(e),o=null==a||null===(n=a.caipNetworks)||void 0===n?void 0:n.find(function(e){return e.id===t});return o||((null==a||null===(r=a.networkState)||void 0===r?void 0:r.caipNetwork)||(null==a||null===(i=a.caipNetworks)||void 0===i?void 0:i[0]))}},getRequestedCaipNetworkIds:function(){var e=zr.state.filterByNamespace;return(e?[ci.chains.get(e)]:Array.from(ci.chains.values())).flatMap(function(e){return(null==e?void 0:e.caipNetworks)||[]}).map(function(e){return e.caipNetworkId})},getCaipNetworks:function(e){return e?li.getRequestedCaipNetworks(e):li.getAllRequestedCaipNetworks()}},li=h("C",fr(ui)),di={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},fi=Qn.getBlockchainApiUrl(),pi=nt({clientId:null,api:new nr({baseUrl:fi,clientId:null}),supportedChains:{http:[],ws:[]}}),hi={state:pi,get:function(e){return q(x().m(function t(){var n,r,i,a,o;return x().w(function(t){for(;;)if(0===t.n)return n=hi.getSdkProperties(),r=n.st,i=n.sv,a=ar.state.projectId,o=D(D({},e.params||{}),{},{st:r,sv:i,projectId:a}),t.a(2,pi.api.get(D(D({},e),{},{params:o})))},t)}))()},getSdkProperties:function(){var e=ar.state;return{st:e.sdkType||"unknown",sv:e.sdkVersion||"unknown"}},isNetworkSupported:function(e){return q(x().m(function t(){return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e){t.n=1;break}return t.a(2,!1);case 1:if(t.p=1,pi.supportedChains.http.length){t.n=2;break}return t.n=2,hi.getSupportedNetworks();case 2:t.n=4;break;case 3:return t.p=3,t.v,t.a(2,!1);case 4:return t.a(2,pi.supportedChains.http.includes(e))}},t,null,[[1,3]])}))()},getSupportedNetworks:function(){return q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,hi.get({path:"v1/supported-chains"});case 1:return t=e.v,pi.supportedChains=t,e.a(2,t);case 2:return e.p=2,e.v,e.a(2,pi.supportedChains)}},e,null,[[0,2]])}))()},fetchIdentity:function(e){return q(x().m(function t(){var n,r,i,a;return x().w(function(t){for(;;)switch(t.n){case 0:return n=e.address,r=e.caipNetworkId,t.n=1,hi.isNetworkSupported(r);case 1:if(t.v){t.n=2;break}return t.a(2,{avatar:"",name:""});case 2:if(!(i=Zn.getIdentityFromCacheForAddress(n))){t.n=3;break}return t.a(2,i);case 3:return t.n=4,hi.get({path:"/v1/identity/".concat(n),params:{sender:li.state.activeCaipAddress?Qn.getPlainAddress(li.state.activeCaipAddress):void 0}});case 4:return a=t.v,Zn.updateIdentityCache({address:n,identity:a,timestamp:Date.now()}),t.a(2,a)}},t)}))()},fetchTransactions:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.account,i=e.cursor,a=e.onramp,o=e.signal,s=e.cache,c=e.chainId,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,{data:[],next:void 0});case 2:return t.a(2,hi.get({path:"/v1/account/".concat(r,"/history"),params:{cursor:i,onramp:a,chainId:c},signal:o,cache:s}))}},t)}))()},fetchSwapQuote:function(e){return q(x().m(function t(){var n,r,i,a,o,s;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.amount,i=e.userAddress,a=e.from,o=e.to,s=e.gasPrice,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,{quotes:[]});case 2:return t.a(2,hi.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:r,userAddress:i,from:a,to:o,gasPrice:s}}))}},t)}))()},fetchSwapTokens:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.chainId,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,{tokens:[]});case 2:return t.a(2,hi.get({path:"/v1/convert/tokens",params:{chainId:r}}))}},t)}))()},fetchTokenPrice:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.addresses,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,{fungibles:[]});case 2:return t.a(2,pi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:r,projectId:ar.state.projectId},headers:{"Content-Type":"application/json"}}))}},t)}))()},fetchSwapAllowance:function(e){return q(x().m(function t(){var n,r,i;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.tokenAddress,i=e.userAddress,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,{allowance:"0"});case 2:return t.a(2,hi.get({path:"/v1/convert/allowance",params:{tokenAddress:r,userAddress:i},headers:{"Content-Type":"application/json"}}))}},t)}))()},fetchGasPrice:function(e){return q(x().m(function t(){var n,r,i,a,o;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.chainId,i=hi.getSdkProperties(),a=i.st,o=i.sv,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}throw new Error("Network not supported for Gas Price");case 2:return t.a(2,hi.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:r,st:a,sv:o}}))}},t)}))()},generateSwapCalldata:function(e){return q(x().m(function t(){var n,r,i,a,o,s;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.amount,i=e.from,a=e.to,o=e.userAddress,s=e.disableEstimate,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}throw new Error("Network not supported for Swaps");case 2:return t.a(2,pi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:r,eip155:{slippage:Xn.CONVERT_SLIPPAGE_TOLERANCE},projectId:ar.state.projectId,from:i,to:a,userAddress:o,disableEstimate:s}}))}},t)}))()},generateApproveCalldata:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.from,i=e.to,a=e.userAddress,o=hi.getSdkProperties(),s=o.st,c=o.sv,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}throw new Error("Network not supported for Swaps");case 2:return t.a(2,hi.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:a,from:r,to:i,st:s,sv:c}}))}},t)}))()},getBalance:function(e,t,n){return q(x().m(function r(){var i,a,o,s,c,u,l;return x().w(function(r){for(;;)switch(r.n){case 0:return a=hi.getSdkProperties(),o=a.st,s=a.sv,r.n=1,hi.isNetworkSupported(null===(i=li.state.activeCaipNetwork)||void 0===i?void 0:i.caipNetworkId);case 1:if(r.v){r.n=2;break}return Kr.showError("Token Balance Unavailable"),r.a(2,{balances:[]});case 2:if(c="".concat(t,":").concat(e),!(u=Zn.getBalanceCacheForCaipAddress(c))){r.n=3;break}return r.a(2,u);case 3:return r.n=4,hi.get({path:"/v1/account/".concat(e,"/balance"),params:{currency:"usd",chainId:t,forceUpdate:n,st:o,sv:s}});case 4:return l=r.v,Zn.updateBalanceCache({caipAddress:c,balance:l,timestamp:Date.now()}),r.a(2,l)}},r)}))()},lookupEnsName:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,{addresses:{},attributes:[]});case 2:return t.a(2,hi.get({path:"/v1/profile/account/".concat(e),params:{apiVersion:"2"}}))}},t)}))()},reverseLookupEnsName:function(e){return q(x().m(function t(){var n,r;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.address,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,[]);case 2:return t.a(2,hi.get({path:"/v1/profile/reverse/".concat(r),params:{sender:mi.state.address,apiVersion:"2"}}))}},t)}))()},getEnsNameSuggestions:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,{suggestions:[]});case 2:return t.a(2,hi.get({path:"/v1/profile/suggestions/".concat(e),params:{zone:"reown.id"}}))}},t)}))()},registerEnsName:function(e){return q(x().m(function t(){var n,r,i,a,o;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.coinType,i=e.address,a=e.message,o=e.signature,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,{success:!1});case 2:return t.a(2,pi.api.post({path:"/v1/profile/account",body:{coin_type:r,address:i,message:a,signature:o},headers:{"Content-Type":"application/json"}}))}},t)}))()},generateOnRampURL:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c;return x().w(function(t){for(;;)switch(t.n){case 0:return r=e.destinationWallets,i=e.partnerUserId,a=e.defaultNetwork,o=e.purchaseAmount,s=e.paymentAmount,t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,"");case 2:return t.n=3,pi.api.post({path:"/v1/generators/onrampurl",params:{projectId:ar.state.projectId},body:{destinationWallets:r,defaultNetwork:a,partnerUserId:i,defaultExperience:"buy",presetCryptoAmount:o,presetFiatAmount:s}});case 3:return c=t.v,t.a(2,c.url)}},t)}))()},getOnrampOptions:function(){return q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,hi.isNetworkSupported(null===(t=li.state.activeCaipNetwork)||void 0===t?void 0:t.caipNetworkId);case 1:if(e.v){e.n=2;break}return e.a(2,{paymentCurrencies:[],purchaseCurrencies:[]});case 2:return e.p=2,e.n=3,hi.get({path:"/v1/onramp/options"});case 3:return n=e.v,e.a(2,n);case 4:return e.p=4,e.v,e.a(2,di)}},e,null,[[2,4]])}))()},getOnrampQuote:function(e){return q(x().m(function t(){var n,r,i,a,o,s;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=e.purchaseCurrency,r=e.paymentCurrency,i=e.amount,a=e.network,t.p=1,t.n=2,hi.isNetworkSupported(null===(o=li.state.activeCaipNetwork)||void 0===o?void 0:o.caipNetworkId);case 2:if(t.v){t.n=3;break}return t.a(2,null);case 3:return t.n=4,pi.api.post({path:"/v1/onramp/quote",params:{projectId:ar.state.projectId},body:{purchaseCurrency:n,paymentCurrency:r,amount:i,network:a}});case 4:return s=t.v,t.a(2,s);case 5:return t.p=5,t.v,t.a(2,{coinbaseFee:{amount:i,currency:r.id},networkFee:{amount:i,currency:r.id},paymentSubtotal:{amount:i,currency:r.id},paymentTotal:{amount:i,currency:r.id},purchaseAmount:{amount:i,currency:r.id},quoteId:"mocked-quote-id"})}},t,null,[[1,5]])}))()},getSmartSessions:function(e){return q(x().m(function t(){var n;return x().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,hi.isNetworkSupported(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId);case 1:if(t.v){t.n=2;break}return t.a(2,[]);case 2:return t.a(2,hi.get({path:"/v1/sessions/".concat(e)}))}},t)}))()},revokeSmartSession:function(e,t,n){return q(x().m(function r(){var i;return x().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,hi.isNetworkSupported(null===(i=li.state.activeCaipNetwork)||void 0===i?void 0:i.caipNetworkId);case 1:if(r.v){r.n=2;break}return r.a(2,{success:!1});case 2:return r.a(2,pi.api.post({path:"/v1/sessions/".concat(e,"/revoke"),params:{projectId:ar.state.projectId},body:{pci:t,signature:n}}))}},r)}))()},setClientId:function(e){pi.clientId=e,pi.api=new nr({baseUrl:fi,clientId:e})}},vi=nt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),gi={state:vi,replaceState:function(e){e&&Object.assign(vi,at(e))},subscribe:function(e){return li.subscribeChainProp("accountState",function(t){if(t)return e(t)})},subscribeKey:function(e,t,n){var r=void 0;return li.subscribeChainProp("accountState",function(n){if(n){var i=n[e];r!==i&&(r=i,t(i))}},n)},setStatus:function(e,t){li.setAccountProp("status",e,t)},getCaipAddress:function(e){return li.getAccountProp("caipAddress",e)},setCaipAddress:function(e,t){var n=e?Qn.getPlainAddress(e):void 0;t===li.state.activeChain&&(li.state.activeCaipAddress=e),li.setAccountProp("caipAddress",e,t),li.setAccountProp("address",n,t)},setBalance:function(e,t,n){li.setAccountProp("balance",e,n),li.setAccountProp("balanceSymbol",t,n)},setProfileName:function(e,t){li.setAccountProp("profileName",e,t)},setProfileImage:function(e,t){li.setAccountProp("profileImage",e,t)},setUser:function(e,t){li.setAccountProp("user",e,t)},setAddressExplorerUrl:function(e,t){li.setAccountProp("addressExplorerUrl",e,t)},setSmartAccountDeployed:function(e,t){li.setAccountProp("smartAccountDeployed",e,t)},setCurrentTab:function(e){li.setAccountProp("currentTab",e,li.state.activeChain)},setTokenBalance:function(e,t){e&&li.setAccountProp("tokenBalance",e,t)},setShouldUpdateToAddress:function(e,t){li.setAccountProp("shouldUpdateToAddress",e,t)},setAllAccounts:function(e,t){li.setAccountProp("allAccounts",e,t)},addAddressLabel:function(e,t,n){var r=li.getAccountProp("addressLabels",n)||new Map;r.set(e,t),li.setAccountProp("addressLabels",r,n)},removeAddressLabel:function(e,t){var n=li.getAccountProp("addressLabels",t)||new Map;n.delete(e),li.setAccountProp("addressLabels",n,t)},setConnectedWalletInfo:function(e,t){li.setAccountProp("connectedWalletInfo",e,t,!1)},setPreferredAccountType:function(e,t){li.setAccountProp("preferredAccountTypes",D(D({},vi.preferredAccountTypes),{},j({},t,e)),t)},setPreferredAccountTypes:function(e){vi.preferredAccountTypes=e},setSocialProvider:function(e,t){e&&li.setAccountProp("socialProvider",e,t)},setSocialWindow:function(e,t){li.setAccountProp("socialWindow",e?at(e):void 0,t)},setFarcasterUrl:function(e,t){li.setAccountProp("farcasterUrl",e,t)},fetchTokenBalance:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c,u,l;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(vi.balanceLoading=!0,i=null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.caipNetworkId,a=null===(r=li.state.activeCaipNetwork)||void 0===r?void 0:r.chainNamespace,o=li.state.activeCaipAddress,s=o?Qn.getPlainAddress(o):void 0,!vi.lastRetry||Qn.isAllowedRetry(vi.lastRetry,30*Xn.ONE_SEC_MS)){t.n=1;break}return vi.balanceLoading=!1,t.a(2,[]);case 1:if(t.p=1,!(s&&i&&a)){t.n=3;break}return t.n=2,hi.getBalance(s,i);case 2:return c=t.v,u=c.balances.filter(function(e){return"0"!==e.quantity.decimals}),mi.setTokenBalance(u,a),vi.lastRetry=void 0,vi.balanceLoading=!1,t.a(2,u);case 3:t.n=5;break;case 4:t.p=4,l=t.v,vi.lastRetry=Date.now(),null==e||e(l),Kr.showError("Token Balance Unavailable");case 5:return t.p=5,vi.balanceLoading=!1,t.f(5);case 6:return t.a(2,[])}},t,null,[[1,4,5,6]])}))()},resetAccount:function(e){li.resetAccount(e)}},mi=h("z",fr(gi)),wi=function(e){var t=e.network,n=e.ignoreSwitchConfirmation,r=void 0!==n&&n,i=li.state.activeCaipNetwork,a=Ur.state.data;if(!(t.id===(null==i?void 0:i.id))){var o=mi.getCaipAddress(li.state.activeChain),s=t.chainNamespace!==li.state.activeChain,c=mi.getCaipAddress(t.chainNamespace),u=zr.getConnectorId(li.state.activeChain)===yn.CONNECTOR_ID.AUTH,l=yn.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(function(e){return e===t.chainNamespace});r||u&&l?Ur.push("SwitchNetwork",D(D({},a),{},{network:t})):o&&s&&!c?Ur.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ur.push("SwitchNetwork",D(D({},a),{},{network:t}))}},yi=nt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),bi=h("M",fr({state:yi,subscribe:function(e){return rt(yi,function(){return e(yi)})},subscribeKey:function(e,t){return ot(yi,e,t)},open:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c,u,l;return x().w(function(t){for(;;)switch(t.n){case 0:if(r="connected"===mi.state.status,i=null==e?void 0:e.namespace,a=li.state.activeChain,o=i&&i!==a,s=null===(n=li.getAccountData(null==e?void 0:e.namespace))||void 0===n?void 0:n.caipAddress,!Zr.state.wcBasic){t.n=1;break}xr.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}),t.n=2;break;case 1:return t.n=2,xr.prefetch({fetchConnectorImages:!r,fetchFeaturedWallets:!r,fetchRecommendedWallets:!r});case 2:zr.setFilterByNamespace(null==e?void 0:e.namespace),bi.setLoading(!0,i),i&&o?(u=(null===(c=li.getNetworkData(i))||void 0===c?void 0:c.caipNetwork)||li.getRequestedCaipNetworks(i)[0])&&wi({network:u,ignoreSwitchConfirmation:!0}):(l=li.state.noAdapters,ar.state.manualWCControl||l&&!s?Qn.isMobile()?Ur.reset("AllWallets"):Ur.reset("ConnectingWalletConnectBasic"):null!=e&&e.view?Ur.reset(e.view,e.data):s?Ur.reset("Account"):Ur.reset("Connect")),yi.open=!0,ei.set({open:!0}),Pr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:Boolean(s)}});case 3:return t.a(2)}},t)}))()},close:function(){var e=ar.state.enableEmbedded,t=Boolean(li.state.activeCaipAddress);yi.open&&Pr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),yi.open=!1,Ur.reset("Connect"),bi.clearLoading(),e?t?Ur.replace("Account"):Ur.push("Connect"):ei.set({open:!1}),Zr.resetUri()},setLoading:function(e,t){t&&yi.loadingNamespaceMap.set(t,e),yi.loading=e,ei.set({loading:e})},clearLoading:function(){yi.loadingNamespaceMap.clear(),yi.loading=!1},shake:function(){yi.shake||(yi.shake=!0,setTimeout(function(){yi.shake=!1},500))}})),ki={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},Ei={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},Ci=nt({providers:Yn,selectedProvider:null,error:null,purchaseCurrency:ki,paymentCurrency:Ei,purchaseCurrencies:[ki],paymentCurrencies:[],quotesLoading:!1}),Ii=fr({state:Ci,subscribe:function(e){return rt(Ci,function(){return e(Ci)})},subscribeKey:function(e,t){return ot(Ci,e,t)},setSelectedProvider:function(e){if(e&&"meld"===e.name){var t,n=li.state.activeChain===yn.CHAIN.SOLANA?"SOL":"USDC",r=null!==(t=mi.state.address)&&void 0!==t?t:"",i=new URL(e.url);i.searchParams.append("publicKey","WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU"),i.searchParams.append("destinationCurrencyCode",n),i.searchParams.append("walletAddress",r),i.searchParams.append("externalCustomerId",ar.state.projectId),Ci.selectedProvider=D(D({},e),{},{url:i.toString()})}else Ci.selectedProvider=e},setOnrampProviders:function(e){if(Array.isArray(e)&&e.every(function(e){return"string"==typeof e})){var t=e,n=Yn.filter(function(e){return t.includes(e.name)});Ci.providers=n}else Ci.providers=[]},setPurchaseCurrency:function(e){Ci.purchaseCurrency=e},setPaymentCurrency:function(e){Ci.paymentCurrency=e},setPurchaseAmount:function(e){Ii.state.purchaseAmount=e},setPaymentAmount:function(e){Ii.state.paymentAmount=e},getAvailableCurrencies:function(){return q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,hi.getOnrampOptions();case 1:return t=e.v,Ci.purchaseCurrencies=t.purchaseCurrencies,Ci.paymentCurrencies=t.paymentCurrencies,Ci.paymentCurrency=t.paymentCurrencies[0]||Ei,Ci.purchaseCurrency=t.purchaseCurrencies[0]||ki,e.n=2,xr.fetchCurrencyImages(t.paymentCurrencies.map(function(e){return e.id}));case 2:return e.n=3,xr.fetchTokenImages(t.purchaseCurrencies.map(function(e){return e.symbol}));case 3:return e.a(2)}},e)}))()},getQuote:function(){return q(x().m(function e(){var t,n,r,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return Ci.quotesLoading=!0,e.p=1,e.n=2,hi.getOnrampQuote({purchaseCurrency:Ci.purchaseCurrency,paymentCurrency:Ci.paymentCurrency,amount:(null===(t=Ci.paymentAmount)||void 0===t?void 0:t.toString())||"0",network:null===(n=Ci.purchaseCurrency)||void 0===n?void 0:n.symbol});case 2:return r=e.v,Ci.quotesLoading=!1,Ci.purchaseAmount=Number(null==r?void 0:r.purchaseAmount.amount),e.a(2,r);case 3:return e.p=3,i=e.v,Ci.error=i.message,Ci.quotesLoading=!1,e.a(2,null);case 4:return e.p=4,Ci.quotesLoading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},resetState:function(){Ci.selectedProvider=null,Ci.error=null,Ci.purchaseCurrency=ki,Ci.paymentCurrency=Ei,Ci.purchaseCurrencies=[ki],Ci.paymentCurrencies=[],Ci.paymentAmount=void 0,Ci.purchaseAmount=void 0,Ci.quotesLoading=!1}}),Ni=2147483648,Ai=function(e){if(e>=Ni)throw new Error("Invalid chainId");return(Ni|e)>>>0},Si=nt({suggestions:[],loading:!1}),Pi=fr({state:Si,subscribe:function(e){return rt(Si,function(){return e(Si)})},subscribeKey:function(e,t){return ot(Si,e,t)},resolveName:function(e){return q(x().m(function t(){var n,r,i;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,hi.lookupEnsName(e);case 1:return t.a(2,t.v);case 2:throw t.p=2,i=t.v,r=i,new Error((null==r||null===(n=r.reasons)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.description)||"Error resolving name");case 3:return t.a(2)}},t,null,[[0,2]])}))()},isNameRegistered:function(e){return q(x().m(function t(){return x().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,hi.lookupEnsName(e);case 1:return t.a(2,!0);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])}))()},getSuggestions:function(e){return q(x().m(function t(){var n,r,i;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,Si.loading=!0,Si.suggestions=[],t.n=1,hi.getEnsNameSuggestions(e);case 1:return n=t.v,Si.suggestions=n.suggestions.map(function(e){return D(D({},e),{},{name:e.name})})||[],t.a(2,Si.suggestions);case 2:throw t.p=2,i=t.v,r=Pi.parseEnsApiError(i,"Error fetching name suggestions"),new Error(r);case 3:return t.p=3,Si.loading=!1,t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}))()},getNamesForAddress:function(e){return q(x().m(function t(){var n,r,i,a;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,li.state.activeCaipNetwork){t.n=1;break}return t.a(2,[]);case 1:if(!(n=Zn.getEnsFromCacheForAddress(e))){t.n=2;break}return t.a(2,n);case 2:return t.n=3,hi.reverseLookupEnsName({address:e});case 3:return r=t.v,Zn.updateEnsCache({address:e,ens:r,timestamp:Date.now()}),t.a(2,r);case 4:throw t.p=4,a=t.v,i=Pi.parseEnsApiError(a,"Error fetching names for address"),new Error(i);case 5:return t.a(2)}},t,null,[[0,4]])}))()},registerName:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c,u,l;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=li.state.activeCaipNetwork){t.n=1;break}throw new Error("Network not found");case 1:if(r=mi.state.address,i=zr.getAuthConnector(),r&&i){t.n=2;break}throw new Error("Address or auth connector not found");case 2:return Si.loading=!0,t.p=3,a=JSON.stringify({name:e,attributes:{},timestamp:Math.floor(Date.now()/1e3)}),Ur.pushTransactionStack({onCancel:function(){Ur.replace("RegisterAccountName")}}),t.n=4,Zr.signMessage(a);case 4:if(o=t.v,Si.loading=!1,s=n.id){t.n=5;break}throw new Error("Network not found");case 5:return c=Ai(Number(s)),t.n=6,hi.registerEnsName({coinType:c,address:r,signature:o,message:a});case 6:mi.setProfileName(e,n.chainNamespace),Ur.replace("RegisterAccountNameSuccess"),t.n=8;break;case 7:throw t.p=7,l=t.v,u=Pi.parseEnsApiError(l,"Error registering name ".concat(e)),Ur.replace("RegisterAccountName"),new Error(u);case 8:return t.p=8,Si.loading=!1,t.f(8);case 9:return t.a(2)}},t,null,[[3,7,8,9]])}))()},validateName:function(e){return/^[\x2D0-9A-Za-z]{4,}$/.test(e)},parseEnsApiError:function(e,t){var n,r=e;return(null==r||null===(n=r.reasons)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.description)||t}}),Oi=Object.defineProperty,_i=function(e,t,n){return function(e,t,n){return t in e?Oi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Ti=function(e){function t(e){var n;return I(this,t),(n=v(this,t)).opts=e,_i(m(n),"protocol","wc"),_i(m(n),"version",2),n}return w(t,e),A(t)}(z),xi=Object.defineProperty,Ri=function(e,t,n){return function(e,t,n){return t in e?xi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,t+"",n)},Ui=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t)).core=e,r.logger=n,Ri(m(r),"records",new Map),r}return w(t,e),A(t)}(z),Di=A(function e(t,n){I(this,e),this.logger=t,this.core=n}),ji=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t)).relayer=e,r.logger=n,r}return w(t,e),A(t)}(z),Mi=function(e){function t(e){return I(this,t),v(this,t)}return w(t,e),A(t)}(z),Li=A(function e(t,n,r,i){I(this,e),this.core=t,this.logger=n,this.name=r}),qi=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t)).relayer=e,r.logger=n,r}return w(t,e),A(t)}(z),Bi=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t)).core=e,r.logger=n,r}return w(t,e),A(t)}(z),zi=A(function e(t,n,r){I(this,e),this.core=t,this.logger=n,this.store=r}),Fi=A(function e(t,n){I(this,e),this.projectId=t,this.logger=n}),Wi=A(function e(t,n,r){I(this,e),this.core=t,this.logger=n,this.telemetryEnabled=r}),Hi=Object.defineProperty,Vi=function(e,t,n){return function(e,t,n){return t in e?Hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Ki=A(function e(t){I(this,e),this.opts=t,Vi(this,"protocol","wc"),Vi(this,"version",2)}),$i=A(function e(t){I(this,e),this.client=t});function Gi(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).strict;return!!e&&("string"==typeof e&&(void 0===t||t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}function Ji(e){return Gi(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}var Yi="2.23.2",Xi={getDocsUrl:function(e){var t=e.docsBaseUrl,n=e.docsPath,r=void 0===n?"":n,i=e.docsSlug;return r?"".concat(null!=t?t:"https://viem.sh").concat(r).concat(i?"#".concat(i):""):void 0},version:"viem@".concat(Yi)},Zi=function(e){function t(e){var n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I(this,t);var o,s=a.cause instanceof t?a.cause.details:null!==(o=a.cause)&&void 0!==o&&o.message?a.cause.message:a.details,c=a.cause instanceof t&&a.cause.docsPath||a.docsPath,u=null===(n=Xi.getDocsUrl)||void 0===n?void 0:n.call(Xi,D(D({},a),{},{docsPath:c}));return i=v(this,t,[[e||"An error occurred.",""].concat(P(a.metaMessages?[].concat(P(a.metaMessages),[""]):[]),P(u?["Docs: ".concat(u)]:[]),P(s?["Details: ".concat(s)]:[]),P(Xi.version?["Version: ".concat(Xi.version)]:[])).join("\n"),a.cause?{cause:a.cause}:void 0]),Object.defineProperty(i,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),i.details=s,i.docsPath=c,i.metaMessages=a.metaMessages,i.name=null!==(r=a.name)&&void 0!==r?r:i.name,i.shortMessage=e,i.version=Yi,i}return w(t,e),A(t,[{key:"walk",value:function(e){return Qi(this,e)}}])}(y(Error));function Qi(e,t){return null!=t&&t(e)?e:e&&"object"===T(e)&&"cause"in e&&void 0!==e.cause?Qi(e.cause,t):t?null:e}var ea=function(e){function t(e){var n=e.size,r=e.targetSize,i=e.type;return I(this,t),v(this,t,["".concat(i.charAt(0).toUpperCase()).concat(i.slice(1).toLowerCase()," size (").concat(n,") exceeds padding size (").concat(r,")."),{name:"SizeExceedsPaddingSizeError"}])}return w(t,e),A(t)}(Zi);function ta(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dir,r=t.size,i=void 0===r?32:r;return"string"==typeof e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dir,r=t.size,i=void 0===r?32:r;if(null===i)return e;var a=e.replace("0x","");if(a.length>2*i)throw new ea({size:Math.ceil(a.length/2),targetSize:i,type:"hex"});return"0x".concat(a["right"===n?"padEnd":"padStart"](2*i,"0"))}(e,{dir:n,size:i}):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dir,r=t.size,i=void 0===r?32:r;if(null===i)return e;if(e.length>i)throw new ea({size:e.length,targetSize:i,type:"bytes"});for(var a=new Uint8Array(i),o=0;o<i;o++){var s="right"===n;a[s?o:i-o-1]=e[s?o:e.length-o-1]}return a}(e,{dir:n,size:i})}var na=function(e){function t(e){var n=e.max,r=e.min,i=e.signed,a=e.size,o=e.value;return I(this,t),v(this,t,['Number "'.concat(o,'" is not in safe ').concat(a?"".concat(8*a,"-bit ").concat(i?"signed":"unsigned"," "):"","integer range ").concat(n?"(".concat(r," to ").concat(n,")"):"(above ".concat(r,")")),{name:"IntegerOutOfRangeError"}])}return w(t,e),A(t)}(Zi),ra=function(e){function t(e){var n=e.givenSize,r=e.maxSize;return I(this,t),v(this,t,["Size cannot exceed ".concat(r," bytes. Given size: ").concat(n," bytes."),{name:"SizeOverflowError"}])}return w(t,e),A(t)}(Zi);function ia(e,t){var n=t.size;if(Ji(e)>n)throw new ra({givenSize:Ji(e),maxSize:n})}function aa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.signed;t.size&&ia(e,{size:t.size});var r=BigInt(e);if(!n)return r;var i=(e.length-2)/2;return r<=(1n<<8n*BigInt(i)-1n)-1n?r:r-BigInt("0x".concat("f".padStart(2*i,"f")))-1n}function oa(e){return Number(aa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}var sa=Array.from({length:256},function(e,t){return t.toString(16).padStart(2,"0")});function ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"==typeof e||"bigint"==typeof e?la(e,t):"string"==typeof e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=da.encode(e);return ua(n,t)}(e,t):"boolean"==typeof e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="0x".concat(Number(e));if("number"==typeof t.size)return ia(n,{size:t.size}),ta(n,{size:t.size});return n}(e,t):ua(e,t)}function ua(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="",r=0;r<e.length;r++)n+=sa[e[r]];var i="0x".concat(n);return"number"==typeof t.size?(ia(i,{size:t.size}),ta(i,{dir:"right",size:t.size})):i}function la(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.signed,i=n.size,a=BigInt(e);i?t=r?(1n<<8n*BigInt(i)-1n)-1n:Math.pow(2n,8n*BigInt(i))-1n:"number"==typeof e&&(t=BigInt(Number.MAX_SAFE_INTEGER));var o="bigint"==typeof t&&r?-t-1n:0;if(t&&a>t||a<o){var s="bigint"==typeof e?"n":"";throw new na({max:t?"".concat(t).concat(s):void 0,min:"".concat(o).concat(s),signed:r,size:i,value:"".concat(e).concat(s)})}var c="0x".concat((r&&a<0?(1n<<BigInt(8*i))+BigInt(a):a).toString(16));return i?ta(c,{size:i}):c}var da=new TextEncoder;var fa=new TextEncoder;function pa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"number"==typeof e||"bigint"==typeof e?function(e,t){var n=la(e,t);return ga(n)}(e,t):"boolean"==typeof e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Uint8Array(1);if(n[0]=Number(e),"number"==typeof t.size)return ia(n,{size:t.size}),ta(n,{size:t.size});return n}(e,t):Gi(e)?ga(e,t):ma(e,t)}var ha={zero:48,nine:57,A:65,F:70,a:97,f:102};function va(e){return e>=ha.zero&&e<=ha.nine?e-ha.zero:e>=ha.A&&e<=ha.F?e-(ha.A-10):e>=ha.a&&e<=ha.f?e-(ha.a-10):void 0}function ga(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;t.size&&(ia(n,{size:t.size}),n=ta(n,{dir:"right",size:t.size}));var r=n.slice(2);r.length%2&&(r="0".concat(r));for(var i=r.length/2,a=new Uint8Array(i),o=0,s=0;o<i;o++){var c=va(r.charCodeAt(s++)),u=va(r.charCodeAt(s++));if(void 0===c||void 0===u)throw new Zi('Invalid byte sequence ("'.concat(r[s-2]).concat(r[s-1],'" in "').concat(r,'").'));a[o]=16*c+u}return a}function ma(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=fa.encode(e);return"number"==typeof t.size?(ia(n,{size:t.size}),ta(n,{dir:"right",size:t.size})):n}function wa(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ya(e){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Uint8Array expected of length "+n+", got length="+e.length)}function ba(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ka(e,t){ya(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}var Ea=BigInt(Math.pow(2,32)-1),Ca=BigInt(32);function Ia(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&Ea),l:Number(e>>Ca&Ea)}:{h:0|Number(e>>Ca&Ea),l:0|Number(e&Ea)}}function Na(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length),i=0;i<e.length;i++){var a=Ia(e[i],t),o=[a.h,a.l];n[i]=o[0],r[i]=o[1]}return[n,r]}var Aa="object"===("undefined"==typeof globalThis?"undefined":T(globalThis))&&"crypto"in globalThis?globalThis.crypto:void 0;var Sa=function(){return 68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]}();function Pa(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Oa(e){for(var t=0;t<e.length;t++)e[t]=Pa(e[t])}function _a(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+T(e));return new Uint8Array((new TextEncoder).encode(e))}(e)),ya(e),e}var Ta=function(){return A(function e(){I(this,e)},[{key:"clone",value:function(){return this._cloneInto()}}])}();function xa(e){var t=function(t){return e().update(_a(t)).digest()},n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(){return e()},t}h("H",Ta);for(var Ra=[],Ua=[],Da=[],ja=BigInt(0),Ma=BigInt(1),La=BigInt(2),qa=BigInt(7),Ba=BigInt(256),za=BigInt(113),Fa=0,Wa=Ma,Ha=1,Va=0;Fa<24;Fa++){var Ka=[Va,(2*Ha+3*Va)%5];Ha=Ka[0],Va=Ka[1],Ra.push(2*(5*Va+Ha)),Ua.push((Fa+1)*(Fa+2)/2%64);for(var $a=ja,Ga=0;Ga<7;Ga++)(Wa=(Wa<<Ma^(Wa>>qa)*za)%Ba)&La&&($a^=Ma<<(Ma<<BigInt(Ga))-Ma);Da.push($a)}var Ja=S(Na(Da,!0),2),Ya=Ja[0],Xa=Ja[1],Za=function(e,t,n){return n>32?function(e,t,n){return t<<n-32|e>>>64-n}(e,t,n):function(e,t,n){return e<<n|t>>>32-n}(e,t,n)},Qa=function(e,t,n){return n>32?function(e,t,n){return e<<n-32|t>>>64-n}(e,t,n):function(e,t,n){return t<<n|e>>>32-n}(e,t,n)};var eo=function(e){function t(e,n,r){var i,a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(I(this,t),(i=v(this,t)).blockLen=e,i.suffix=n,i.outputLen=r,i.enableXOF=o,i.rounds=s,i.pos=0,i.posOut=0,i.finished=!1,i.destroyed=!1,wa(r),0>=i.blockLen||i.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");return i.state=new Uint8Array(200),i.state32=(a=i.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))),i}return w(t,e),A(t,[{key:"keccak",value:function(){Sa||Oa(this.state32),function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=new Uint32Array(10),r=24-t;r<24;r++){for(var i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(var a=0;a<10;a+=2)for(var o=(a+8)%10,s=(a+2)%10,c=n[s],u=n[s+1],l=Za(c,u,1)^n[o],d=Qa(c,u,1)^n[o+1],f=0;f<50;f+=10)e[a+f]^=l,e[a+f+1]^=d;for(var p=e[2],h=e[3],v=0;v<24;v++){var g=Ua[v],m=Za(p,h,g),w=Qa(p,h,g),y=Ra[v];p=e[y],h=e[y+1],e[y]=m,e[y+1]=w}for(var b=0;b<50;b+=10){for(var k=0;k<10;k++)n[k]=e[b+k];for(var E=0;E<10;E++)e[b+E]^=~n[(E+2)%10]&n[(E+4)%10]}e[0]^=Ya[r],e[1]^=Xa[r]}n.fill(0)}(this.state32,this.rounds),Sa||Oa(this.state32),this.posOut=0,this.pos=0}},{key:"update",value:function(e){ba(this);for(var t=this.blockLen,n=this.state,r=(e=_a(e)).length,i=0;i<r;){for(var a=Math.min(t-this.pos,r-i),o=0;o<a;o++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}},{key:"finish",value:function(){if(!this.finished){this.finished=!0;var e=this.state,t=this.suffix,n=this.pos,r=this.blockLen;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}}},{key:"writeInto",value:function(e){ba(this,!1),ya(e),this.finish();for(var t=this.state,n=this.blockLen,r=0,i=e.length;r<i;){this.posOut>=n&&this.keccak();var a=Math.min(n-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+a),r),this.posOut+=a,r+=a}return e}},{key:"xofInto",value:function(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}},{key:"xof",value:function(e){return wa(e),this.xofInto(new Uint8Array(e))}},{key:"digestInto",value:function(e){if(ka(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}},{key:"digest",value:function(){return this.digestInto(new Uint8Array(this.outputLen))}},{key:"destroy",value:function(){this.destroyed=!0,this.state.fill(0)}},{key:"_cloneInto",value:function(e){var n=this.blockLen,r=this.suffix,i=this.outputLen,a=this.rounds,o=this.enableXOF;return e||(e=new t(n,r,i,o,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}])}(Ta),to=function(e,t,n){return xa(function(){return new eo(t,e,n)})}(1,136,32);function no(e,t){var n=t||"hex",r=to(Gi(e,{strict:!1})?pa(e):e);return"bytes"===n?r:ca(r)}var ro=function(e){function t(e){var n;return I(this,t),n=v(this,t),Object.defineProperty(n,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.maxSize=e,n}return w(t,e),A(t,[{key:"get",value:function(e){var n=p(t,"get",this,3)([e]);return p(t,"has",this,3)([e])&&void 0!==n&&(this.delete(e),p(t,"set",this,3)([e,n])),n}},{key:"set",value:function(e,n){if(p(t,"set",this,3)([e,n]),this.maxSize&&this.size>this.maxSize){var r=this.keys().next().value;r&&this.delete(r)}return this}}])}(y(Map)),io=new ro(8192);function ao(e){var t=no("0x".concat(e.substring(4))).substring(26);return function(e,t){if(io.has("".concat(e,".").concat(t)))return io.get("".concat(e,".").concat(t));for(var n=e.substring(2).toLowerCase(),r=no(ma(n),"bytes"),i=n.split(""),a=0;a<40;a+=2)r[a>>1]>>4>=8&&i[a]&&(i[a]=i[a].toUpperCase()),(15&r[a>>1])>=8&&i[a+1]&&(i[a+1]=i[a+1].toUpperCase());var o="0x".concat(i.join(""));return io.set("".concat(e,".").concat(t),o),o}("0x".concat(t))}function oo(e){return so.apply(this,arguments)}function so(){return so=q(x().m(function e(t){var n,r,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.hash,r=t.signature,i=Gi(n)?n:ca(n),e.n=1,U(q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,b.import("./secp256k1-legacy-CbvGMXtf.js");case 1:return t=e.v,n=t.secp256k1,e.a(2,{secp256k1:n})}},e)})),void 0);case 1:return a=e.v,o=a.secp256k1,s=function(){if("object"===T(r)&&"r"in r&&"s"in r){var e=r.r,t=r.s,n=r.v,i=r.yParity,a=co(Number(null!=i?i:n));return new o.Signature(aa(e),aa(t)).addRecoveryBit(a)}var s=Gi(r)?r:ca(r),c=co(oa("0x".concat(s.slice(130))));return o.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(c)}(),c=s.recoverPublicKey(i.substring(2)).toHex(!1),e.a(2,"0x".concat(c))}},e)})),so.apply(this,arguments)}function co(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}function uo(e){return lo.apply(this,arguments)}function lo(){return(lo=q(x().m(function e(t){var n,r,i;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.hash,r=t.signature,i=ao,e.n=1,oo({hash:n,signature:r});case 1:return e.a(2,i(e.v))}},e)}))).apply(this,arguments)}var fo=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),a=i.charCodeAt(0);if(255!==t[a])throw new TypeError(i+" is ambiguous");t[a]=r}var o=e.length,s=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,r=0,i=0;e[n]===s;)r++,n++;for(var a=(e.length-n)*c+1>>>0,u=new Uint8Array(a);n<e.length;){var l=e.charCodeAt(n);if(l>255)return;var d=t[l];if(255===d)return;for(var f=0,p=a-1;(0!==d||f<i)&&-1!==p;p--,f++)d+=o*u[p]>>>0,u[p]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");i=f,n++}for(var h=a-i;h!==a&&0===u[h];)h++;for(var v=new Uint8Array(r+(a-h)),g=r;h!==a;)v[g++]=u[h++];return v}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,a=t.length;i!==a&&0===t[i];)i++,n++;for(var c=(a-i)*u+1>>>0,l=new Uint8Array(c);i!==a;){for(var d=t[i],f=0,p=c-1;(0!==d||f<r)&&-1!==p;p--,f++)d+=256*l[p]>>>0,l[p]=d%o>>>0,d=d/o>>>0;if(0!==d)throw new Error("Non-zero carry");r=f,i++}for(var h=c-r;h!==c&&0===l[h];)h++;for(var v=s.repeat(n);h<c;++h)v+=e.charAt(l[h]);return v},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),po={};function ho(e){var t=S(e.split(":"),2);return{namespace:t[0],reference:t[1]}}function vo(e,t){return e.includes(":")?[e]:t.chains||[]}var go=Object.defineProperty,mo=Object.defineProperties,wo=Object.getOwnPropertyDescriptors,yo=Object.getOwnPropertySymbols,bo=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,Eo=function(e,t,n){return t in e?go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Co=function(e,t){for(var n in t||(t={}))bo.call(t,n)&&Eo(e,n,t[n]);if(yo){var r,i=C(yo(t));try{for(i.s();!(r=i.n()).done;){n=r.value;ko.call(t,n)&&Eo(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},Io="react-native",No="node",Ao="browser",So="unknown",Po="js";function Oo(){return("undefined"==typeof process?"undefined":T(process))<"u"&&T(process.versions)<"u"&&T(process.versions.node)<"u"}function _o(){return!K.getDocument()&&!!K.getNavigator()&&"ReactNative"===navigator.product}function To(){return!Oo()&&!!K.getNavigator()&&!!K.getDocument()}function xo(){return _o()?Io:Oo()?No:To()?Ao:So}function Ro(){var e;try{return _o()&&("undefined"==typeof global?"undefined":T(global))<"u"&&T(null==global?void 0:global.Application)<"u"?null==(e=global.Application)?void 0:e.applicationId:void 0}catch(t){return}}function Uo(e){var t,n,r=Do();try{return null!=e&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn("The configured WalletConnect 'metadata.url':".concat(e.url," differs from the actual page url:").concat(r.url,". This is probably unintended and can lead to issues.")),e.url=r.url),null!=(t=null==e?void 0:e.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(function(e){return""!==e})),function(e,t){return mo(e,wo(t))}(Co(Co({},r),e),{url:(null==e?void 0:e.url)||r.url,name:(null==e?void 0:e.name)||r.name,description:(null==e?void 0:e.description)||r.description,icons:null!=(n=null==e?void 0:e.icons)&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(mn){return console.warn("Error populating app metadata",mn),e||r}}function Do(){return F.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function jo(e,t,n){var r=function(){if(xo()===Io&&("undefined"==typeof global?"undefined":T(global))<"u"&&T(null==global?void 0:global.Platform)<"u"){var e=global.Platform;return[e.OS,e.Version].join("-")}var t=G();if(null===t)return"unknown";var n=t.os?t.os.replace(" ","").toLowerCase():"unknown";return"browser"===t.type?[n,t.name,t.version].join("-"):[n,t.version].join("-")}(),i=function(){var e,t=xo();return t===Ao?[t,(null==(e=K.getLocation())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[Po,n].join("-"),r,i].join("/")}function Mo(e){var t=e.protocol,n=e.version,r=e.relayUrl,i=e.sdkVersion,a=e.auth,o=e.projectId,s=e.useOnCloseEvent,c=e.bundleId,u=e.packageName,l=r.split("?"),d={auth:a,ua:jo(t,n,i),projectId:o,useOnCloseEvent:s,packageName:u||void 0,bundleId:c||void 0},f=function(e,t){var n,r=new URLSearchParams(e),i=C(Object.keys(t).sort());try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t.hasOwnProperty(a)){var o=t[a];void 0!==o&&r.set(a,o)}}}catch(s){i.e(s)}finally{i.f()}return r.toString()}(l[1]||"",d);return l[0]+"?"+f}function Lo(e,t){return e.filter(function(e){return t.includes(e)}).length===e.length}function qo(e){return Object.fromEntries(e.entries())}function Bo(e){return new Map(Object.entries(e))}function zo(){var e,t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V.FIVE_MINUTES,a=arguments.length>1?arguments[1]:void 0,o=V.toMiliseconds(i||V.FIVE_MINUTES);return{resolve:function(t){n&&e&&(clearTimeout(n),e(t),r=Promise.resolve(t))},reject:function(e){n&&t&&(clearTimeout(n),t(e))},done:function(){return new Promise(function(i,s){if(r)return i(r);n=setTimeout(function(){var e=new Error(a);r=Promise.reject(e),s(e)},o),e=i,t=s})}}}function Fo(e,t,n){return new Promise(function(){var r=q(x().m(function r(i,a){var o,s,c;return x().w(function(r){for(;;)switch(r.p=r.n){case 0:return o=setTimeout(function(){return a(new Error(n))},t),r.p=1,r.n=2,e;case 2:s=r.v,i(s),r.n=4;break;case 3:r.p=3,c=r.v,a(c);case 4:clearTimeout(o);case 5:return r.a(2)}},r,null,[[1,3]])}));return function(e,t){return r.apply(this,arguments)}}())}function Wo(e,t){if("string"==typeof t&&t.startsWith("".concat(e,":")))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return"topic:".concat(t)}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return"id:".concat(t)}throw new Error("Unknown expirer target type: ".concat(e))}function Ho(e){var t=S(e.split(":"),2),n=t[0],r=t[1],i={id:void 0,topic:void 0};if("topic"===n&&"string"==typeof r)i.topic=r;else{if("id"!==n||!Number.isInteger(Number(r)))throw new Error("Invalid target, expected id:number or topic:string, got ".concat(n,":").concat(r));i.id=Number(r)}return i}function Vo(e,t){return V.fromMiliseconds(Date.now()+V.toMiliseconds(e))}function Ko(e){return Date.now()>=V.toMiliseconds(e)}function $o(e,t){return"".concat(e).concat(t?":".concat(t):"")}function Go(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return P(new Set([].concat(P(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),P(e))))}function Jo(e){return Yo.apply(this,arguments)}function Yo(){return Yo=q(x().m(function e(t){var n,r,i,a,o,s,c,u,l;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=t.id,r=t.topic,i=t.wcDeepLink,e.p=1,i){e.n=2;break}return e.a(2);case 2:if(o="string"==typeof i?JSON.parse(i):i,"string"==typeof(s=null==o?void 0:o.href)){e.n=3;break}return e.a(2);case 3:if(c=Xo(s,n,r),(u=xo())!==Ao){e.n=5;break}if(null!=(a=K.getDocument())&&a.hasFocus()){e.n=4;break}return console.warn("Document does not have focus, skipping deeplink."),e.a(2);case 4:Zo(c),e.n=6;break;case 5:if(!(u===Io&&T(null==global?void 0:global.Linking)<"u")){e.n=6;break}return e.n=6,global.Linking.openURL(c);case 6:e.n=8;break;case 7:e.p=7,l=e.v,console.error(l);case 8:return e.a(2)}},e,null,[[1,7]])})),Yo.apply(this,arguments)}function Xo(e,t,n){var r="requestId=".concat(t,"&sessionTopic=").concat(n);e.endsWith("/")&&(e=e.slice(0,-1));var i="".concat(e);if(e.startsWith("https://t.me")){var a=e.includes("?")?"&startapp=":"?startapp=";i="".concat(i).concat(a).concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}(r,!0))}else i="".concat(i,"/wc?").concat(r);return i}function Zo(e){var t="_self";!function(){try{return window.self!==window.top}catch(e){return!1}}()?(("undefined"==typeof window?"undefined":T(window))<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"):t="_top",window.open(e,t,"noreferrer noopener")}function Qo(e,t){return es.apply(this,arguments)}function es(){return es=q(x().m(function e(t,n){var r,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r="",e.p=1,!To()||!(r=localStorage.getItem(n))){e.n=2;break}return e.a(2,r);case 2:return e.n=3,t.getItem(n);case 3:r=e.v,e.n=5;break;case 4:e.p=4,i=e.v,console.error(i);case 5:return e.a(2,r)}},e,null,[[1,4]])})),es.apply(this,arguments)}function ts(e,t){if(!e.includes(t))return null;var n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function ns(){return("undefined"==typeof crypto?"undefined":T(crypto))<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function rs(){return("undefined"==typeof process?"undefined":T(process))<"u"&&"true"===po.IS_VITEST}function is(e){return Buffer.from(e,"base64").toString("utf-8")}function as(e){return new Promise(function(t){return setTimeout(t,e)})}function os(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ss(e){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Uint8Array expected of length "+n+", got length="+e.length)}function cs(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");os(e.outputLen),os(e.blockLen)}function us(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ls(e,t){ss(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}var ds=BigInt(Math.pow(2,32)-1),fs=BigInt(32);function ps(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&ds),l:Number(e>>fs&ds)}:{h:0|Number(e>>fs&ds),l:0|Number(e&ds)}}var hs="object"==("undefined"==typeof globalThis?"undefined":T(globalThis))&&"crypto"in globalThis?globalThis.crypto:void 0;function vs(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function gs(e,t){return e<<32-t|e>>>t}var ms=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function ws(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function ys(e){for(var t=0;t<e.length;t++)e[t]=ws(e[t])}function bs(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+T(e));return new Uint8Array((new TextEncoder).encode(e))}(e)),ss(e),e}function ks(){for(var e=0,t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];ss(n),e+=n.length}for(var r=new Uint8Array(e),i=0,a=0;i<arguments.length;i++){var o=i<0||arguments.length<=i?void 0:arguments[i];r.set(o,a),a+=o.length}return r}var Es=function(){return A(function e(){I(this,e)},[{key:"clone",value:function(){return this._cloneInto()}}])}();function Cs(e){var t=function(t){return e().update(bs(t)).digest()},n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(){return e()},t}function Is(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(hs&&"function"==typeof hs.getRandomValues)return hs.getRandomValues(new Uint8Array(e));if(hs&&"function"==typeof hs.randomBytes)return hs.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}for(var Ns=[],As=[],Ss=[],Ps=BigInt(0),Os=BigInt(1),_s=BigInt(2),Ts=BigInt(7),xs=BigInt(256),Rs=BigInt(113),Us=0,Ds=Os,js=1,Ms=0;Us<24;Us++){var Ls;js=(Ls=[Ms,(2*js+3*Ms)%5])[0],Ms=Ls[1],Ns.push(2*(5*Ms+js)),As.push((Us+1)*(Us+2)/2%64);for(var qs=Ps,Bs=0;Bs<7;Bs++)(Ds=(Ds<<Os^(Ds>>Ts)*Rs)%xs)&_s&&(qs^=Os<<(Os<<BigInt(Bs))-Os);Ss.push(qs)}var zs=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length),i=0;i<e.length;i++){var a=ps(e[i],t),o=[a.h,a.l];n[i]=o[0],r[i]=o[1]}return[n,r]}(Ss,!0),Fs=S(zs,2),Ws=Fs[0],Hs=Fs[1],Vs=function(e,t,n){return n>32?function(e,t,n){return t<<n-32|e>>>64-n}(e,t,n):function(e,t,n){return e<<n|t>>>32-n}(e,t,n)},Ks=function(e,t,n){return n>32?function(e,t,n){return e<<n-32|t>>>64-n}(e,t,n):function(e,t,n){return t<<n|e>>>32-n}(e,t,n)};var $s=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(I(this,t),(i=v(this,t)).blockLen=e,i.suffix=n,i.outputLen=r,i.enableXOF=a,i.rounds=o,i.pos=0,i.posOut=0,i.finished=!1,i.destroyed=!1,os(r),0>=i.blockLen||i.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");return i.state=new Uint8Array(200),i.state32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}(i.state),i}return w(t,e),A(t,[{key:"keccak",value:function(){ms||ys(this.state32),function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=new Uint32Array(10),r=24-t;r<24;r++){for(var i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(var a=0;a<10;a+=2)for(var o=(a+8)%10,s=(a+2)%10,c=n[s],u=n[s+1],l=Vs(c,u,1)^n[o],d=Ks(c,u,1)^n[o+1],f=0;f<50;f+=10)e[a+f]^=l,e[a+f+1]^=d;for(var p=e[2],h=e[3],v=0;v<24;v++){var g=As[v],m=Vs(p,h,g),w=Ks(p,h,g),y=Ns[v];p=e[y],h=e[y+1],e[y]=m,e[y+1]=w}for(var b=0;b<50;b+=10){for(var k=0;k<10;k++)n[k]=e[b+k];for(var E=0;E<10;E++)e[b+E]^=~n[(E+2)%10]&n[(E+4)%10]}e[0]^=Ws[r],e[1]^=Hs[r]}n.fill(0)}(this.state32,this.rounds),ms||ys(this.state32),this.posOut=0,this.pos=0}},{key:"update",value:function(e){us(this);for(var t=this.blockLen,n=this.state,r=(e=bs(e)).length,i=0;i<r;){for(var a=Math.min(t-this.pos,r-i),o=0;o<a;o++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}},{key:"finish",value:function(){if(!this.finished){this.finished=!0;var e=this.state,t=this.suffix,n=this.pos,r=this.blockLen;e[n]^=t,!!(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}}},{key:"writeInto",value:function(e){us(this,!1),ss(e),this.finish();for(var t=this.state,n=this.blockLen,r=0,i=e.length;r<i;){this.posOut>=n&&this.keccak();var a=Math.min(n-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+a),r),this.posOut+=a,r+=a}return e}},{key:"xofInto",value:function(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}},{key:"xof",value:function(e){return os(e),this.xofInto(new Uint8Array(e))}},{key:"digestInto",value:function(e){if(ls(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}},{key:"digest",value:function(){return this.digestInto(new Uint8Array(this.outputLen))}},{key:"destroy",value:function(){this.destroyed=!0,this.state.fill(0)}},{key:"_cloneInto",value:function(e){var n=this.blockLen,r=this.suffix,i=this.outputLen,a=this.rounds,o=this.enableXOF;return e||(e=new t(n,r,i,o,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}])}(Es),Gs=function(e,t,n){return Cs(function(){return new $s(t,e,n)})}(1,136,32);function Js(e){var t="Ethereum Signed Message:\n".concat(e.length),n=(new TextEncoder).encode(t+e);return"0x"+Buffer.from(Gs(n)).toString("hex")}function Ys(e,t,n,r,i,a){return Xs.apply(this,arguments)}function Xs(){return Xs=q(x().m(function e(t,n,r,i,a,o){var s;return x().w(function(e){for(;;)switch(e.n){case 0:s=r.t,e.n="eip191"===s?1:"eip1271"===s?3:5;break;case 1:return e.n=2,Zs(t,n,r.s);case 2:case 4:return e.a(2,e.v);case 3:return e.n=4,ec(t,n,r.s,i,a,o);case 5:throw new Error("verifySignature failed: Attempted to verify CacaoSignature with unknown type: ".concat(r.t));case 6:return e.a(2)}},e)})),Xs.apply(this,arguments)}function Zs(e,t,n){return Qs.apply(this,arguments)}function Qs(){return Qs=q(x().m(function e(t,n,r){var i,a;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,uo({hash:Js(n),signature:r});case 1:return i=e.v.toLowerCase(),a=t.toLowerCase(),e.a(2,i===a)}},e)})),Qs.apply(this,arguments)}function ec(e,t,n,r,i,a){return tc.apply(this,arguments)}function tc(){return tc=q(x().m(function e(t,n,r,i,a,o){var s,c,u,l,d,f,p,h,v;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if((s=ho(i)).namespace&&s.reference){e.n=1;break}throw new Error("isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ".concat(i));case 1:return e.p=1,c="0x1626ba7e",u=r.substring(2),l=Js(n).substring(2),d=c+l+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+u,e.n=2,fetch("".concat(o||"https://rpc.walletconnect.org/v1","/?chainId=").concat(i,"&projectId=").concat(a),{method:"POST",body:JSON.stringify({id:nc(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:d},"latest"]})});case 2:return f=e.v,e.n=3,f.json();case 3:return p=e.v,h=p.result,e.a(2,!!h&&h.slice(0,c.length).toLowerCase()===c.toLowerCase());case 4:return e.p=4,v=e.v,e.a(2,(console.error("isValidEip1271Signature: ",v),!1))}},e,null,[[1,4]])})),tc.apply(this,arguments)}function nc(){return Date.now()+Math.floor(1e3*Math.random())}var rc=Object.defineProperty,ic=Object.defineProperties,ac=Object.getOwnPropertyDescriptors,oc=Object.getOwnPropertySymbols,sc=Object.prototype.hasOwnProperty,cc=Object.prototype.propertyIsEnumerable,uc=function(e,t,n){return t in e?rc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},lc=function(e){return null==e?void 0:e.split(":")},dc=function(e){var t=e&&lc(e);if(t)return t[2]+":"+t[3]},fc=function(e){var t=e&&lc(e);if(t)return t.pop()};function pc(e){return hc.apply(this,arguments)}function hc(){return hc=q(x().m(function e(t){var n,r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.cacao,r=t.projectId,i=n.s,a=n.p,o=vc(a,a.iss),s=fc(a.iss),e.n=1,Ys(s,o,i,dc(a.iss),r);case 1:return e.a(2,e.v)}},e)})),hc.apply(this,arguments)}var vc=function(e,t){var n="".concat(e.domain," wants you to sign in with your Ethereum account:"),r=fc(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");var i=e.statement||void 0,a="URI: ".concat(e.aud||e.uri),o="Version: ".concat(e.version),s="Chain ID: ".concat(function(e){var t=e&&lc(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]}(t)),c="Nonce: ".concat(e.nonce),u="Issued At: ".concat(e.iat),l=e.exp?"Expiration Time: ".concat(e.exp):void 0,d=e.nbf?"Not Before: ".concat(e.nbf):void 0,f=e.requestId?"Request ID: ".concat(e.requestId):void 0,p=e.resources?"Resources:".concat(e.resources.map(function(e){return"\n- ".concat(e)}).join("")):void 0,h=Ic(e.resources);h&&(i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;gc(t);var n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;var r=[],i=0;Object.keys(t.att).forEach(function(e){var n=Object.keys(t.att[e]).map(function(e){return{ability:e.split("/")[0],action:e.split("/")[1]}});n.sort(function(e,t){return e.action.localeCompare(t.action)});var a={};n.forEach(function(e){a[e.ability]||(a[e.ability]=[]),a[e.ability].push(e.action)});var o=Object.keys(a).map(function(t){return i++,"(".concat(i,") '").concat(t,"': '").concat(a[t].join("', '"),"' for '").concat(e,"'.")});r.push(o.join(", ").replace(".,","."))});var a=r.join(" "),o="".concat(n).concat(a);return"".concat(e?e+" ":"").concat(o)}(i,yc(h)));return[n,r,"",i,"",a,o,s,c,u,l,d,f,p].filter(function(e){return null!=e}).join("\n")};function gc(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");var t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach(function(t){var n=e.att[t];if(Array.isArray(n))throw new Error("Resource must be an object: ".concat(t));if("object"!=T(n))throw new Error("Resource must be an object: ".concat(t));if(!Object.keys(n).length)throw new Error("Resource object is empty: ".concat(t));Object.keys(n).forEach(function(e){var t=n[e];if(!Array.isArray(t))throw new Error("Ability limits ".concat(e," must be an array of objects, found: ").concat(t));if(!t.length)throw new Error("Value of ".concat(e," is empty array, must be an array with objects"));t.forEach(function(t){if("object"!=T(t))throw new Error("Ability limits (".concat(e,") must be an array of objects, found: ").concat(t))})})})}function mc(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=null===(n=t)||void 0===n?void 0:n.sort(function(e,t){return e.localeCompare(t)});var i=t.map(function(t){return j({},"".concat(e,"/").concat(t),[r])});return Object.assign.apply(Object,[{}].concat(P(i)))}function wc(e){return gc(e),"urn:recap:".concat(function(e){return Buffer.from(JSON.stringify(e)).toString("base64")}(e).replace(/=/g,""))}function yc(e){var t=function(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}(e.replace("urn:recap:",""));return gc(t),t}function bc(e,t,n){var r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null!=n&&n.sort(function(e,t){return e.localeCompare(t)}),{att:j({},e,mc(t,n,r))}}(e,t,n);return wc(r)}function kc(e,t){var n=function(e,t){gc(e),gc(t);var n=Object.keys(e.att).concat(Object.keys(t.att)).sort(function(e,t){return e.localeCompare(t)}),r={att:{}};return n.forEach(function(n){var i,a;Object.keys((null==(i=e.att)?void 0:i[n])||{}).concat(Object.keys((null==(a=t.att)?void 0:a[n])||{})).sort(function(e,t){return e.localeCompare(t)}).forEach(function(i){var a,o;r.att[n]=function(e,t){return ic(e,ac(t))}(function(e,t){for(var n in t||(t={}))sc.call(t,n)&&uc(e,n,t[n]);if(oc){var r,i=C(oc(t));try{for(i.s();!(r=i.n()).done;)n=r.value,cc.call(t,n)&&uc(e,n,t[n])}catch(a){i.e(a)}finally{i.f()}}return e}({},r.att[n]),j({},i,(null==(a=e.att[n])?void 0:a[i])||(null==(o=t.att[n])?void 0:o[i])))})}),r}(yc(e),yc(t));return wc(n)}function Ec(e){var t,n=yc(e);gc(n);var r=null==(t=n.att)?void 0:t.eip155;return r?Object.keys(r).map(function(e){return e.split("/")[1]}):[]}function Cc(e){var t=yc(e);gc(t);var n=[];return Object.values(t.att).forEach(function(e){Object.values(e).forEach(function(e){var t;null!=(t=null==e?void 0:e[0])&&t.chains&&n.push(e[0].chains)})}),P(new Set(n.flat()))}function Ic(e){if(e){var t=null==e?void 0:e[e.length-1];return function(e){return e&&e.includes("urn:recap:")}(t)?t:void 0}}function Nc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ac(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Sc(e){if(!Ac(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Uint8Array expected of length "+n+", got length="+e.length)}function Pc(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Oc(e){if("boolean"!=typeof e)throw new Error("boolean expected, not ".concat(e))}var _c=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))};if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Tc(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!Ac(e))throw new Error("Uint8Array expected, got "+T(e));e=Uc(e)}return e}function xc(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!function(e){return e.byteOffset%4==0}(t))throw new Error("invalid output, must be aligned");return t}function Rc(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);var i=BigInt(32),a=BigInt(4294967295),o=Number(n>>i&a),s=Number(n&a);e.setUint32(t+4,o,r),e.setUint32(t+0,s,r)}function Uc(e){return Uint8Array.from(e)}function Dc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)t[r].fill(0)}var jc=function(e){return Uint8Array.from(e.split("").map(function(e){return e.charCodeAt(0)}))},Mc=jc("expand 16-byte k"),Lc=jc("expand 32-byte k"),qc=_c(Mc),Bc=_c(Lc);function zc(e,t){return e<<t|e>>>32-t}function Fc(e){return e.byteOffset%4==0}var Wc=Math.pow(2,32)-1,Hc=new Uint32Array;var Vc=function(e,t){return 255&e[t++]|(255&e[t++])<<8},Kc=function(){return A(function e(t){I(this,e),this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Sc(t=Tc(t),32);var n=Vc(t,0),r=Vc(t,2),i=Vc(t,4),a=Vc(t,6),o=Vc(t,8),s=Vc(t,10),c=Vc(t,12),u=Vc(t,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|a<<9),this.r[4]=255&(a>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|s<<2),this.r[7]=8065&(s>>>11|c<<5),this.r[8]=8191&(c>>>8|u<<8),this.r[9]=u>>>5&127;for(var l=0;l<8;l++)this.pad[l]=Vc(t,16+2*l)},[{key:"process",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?0:2048,r=this.h,i=this.r,a=i[0],o=i[1],s=i[2],c=i[3],u=i[4],l=i[5],d=i[6],f=i[7],p=i[8],h=i[9],v=Vc(e,t+0),g=Vc(e,t+2),m=Vc(e,t+4),w=Vc(e,t+6),y=Vc(e,t+8),b=Vc(e,t+10),k=Vc(e,t+12),E=Vc(e,t+14),C=r[0]+(8191&v),I=r[1]+(8191&(v>>>13|g<<3)),N=r[2]+(8191&(g>>>10|m<<6)),A=r[3]+(8191&(m>>>7|w<<9)),S=r[4]+(8191&(w>>>4|y<<12)),P=r[5]+(y>>>1&8191),O=r[6]+(8191&(y>>>14|b<<2)),_=r[7]+(8191&(b>>>11|k<<5)),T=r[8]+(8191&(k>>>8|E<<8)),x=r[9]+(E>>>5|n),R=0,U=R+C*a+I*(5*h)+N*(5*p)+A*(5*f)+S*(5*d);R=U>>>13,U&=8191;var D=(R+=(U+=P*(5*l)+O*(5*u)+_*(5*c)+T*(5*s)+x*(5*o))>>>13)+C*o+I*a+N*(5*h)+A*(5*p)+S*(5*f);R=D>>>13,D&=8191,R+=(D+=P*(5*d)+O*(5*l)+_*(5*u)+T*(5*c)+x*(5*s))>>>13,D&=8191;var j=R+C*s+I*o+N*a+A*(5*h)+S*(5*p);R=j>>>13,j&=8191,R+=(j+=P*(5*f)+O*(5*d)+_*(5*l)+T*(5*u)+x*(5*c))>>>13,j&=8191;var M=R+C*c+I*s+N*o+A*a+S*(5*h);R=M>>>13,M&=8191,R+=(M+=P*(5*p)+O*(5*f)+_*(5*d)+T*(5*l)+x*(5*u))>>>13,M&=8191;var L=R+C*u+I*c+N*s+A*o+S*a;R=L>>>13,L&=8191,R+=(L+=P*(5*h)+O*(5*p)+_*(5*f)+T*(5*d)+x*(5*l))>>>13,L&=8191;var q=R+C*l+I*u+N*c+A*s+S*o;R=q>>>13,q&=8191,R+=(q+=P*a+O*(5*h)+_*(5*p)+T*(5*f)+x*(5*d))>>>13,q&=8191;var B=R+C*d+I*l+N*u+A*c+S*s;R=B>>>13,B&=8191,R+=(B+=P*o+O*a+_*(5*h)+T*(5*p)+x*(5*f))>>>13,B&=8191;var z=R+C*f+I*d+N*l+A*u+S*c;R=z>>>13,z&=8191,R+=(z+=P*s+O*o+_*a+T*(5*h)+x*(5*p))>>>13,z&=8191;var F=R+C*p+I*f+N*d+A*l+S*u;R=F>>>13,F&=8191,R+=(F+=P*c+O*s+_*o+T*a+x*(5*h))>>>13,F&=8191;var W=R+C*h+I*p+N*f+A*d+S*l;R=W>>>13,W&=8191,R+=(W+=P*u+O*c+_*s+T*o+x*a)>>>13,W&=8191,U=8191&(R=(R=(R<<2)+R|0)+(U&=8191)|0),D+=R>>>=13,r[0]=U,r[1]=D,r[2]=j,r[3]=M,r[4]=L,r[5]=q,r[6]=B,r[7]=z,r[8]=F,r[9]=W}},{key:"finalize",value:function(){var e=this.h,t=this.pad,n=new Uint16Array(10),r=e[1]>>>13;e[1]&=8191;for(var i=2;i<10;i++)e[i]+=r,r=e[i]>>>13,e[i]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(var a=1;a<10;a++)n[a]=e[a]+r,r=n[a]>>>13,n[a]&=8191;n[9]-=8192;for(var o=(1^r)-1,s=0;s<10;s++)n[s]&=o;o=~o;for(var c=0;c<10;c++)e[c]=e[c]&o|n[c];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);var u=e[0]+t[0];e[0]=65535&u;for(var l=1;l<8;l++)u=(e[l]+t[l]|0)+(u>>>16)|0,e[l]=65535&u;Dc(n)}},{key:"update",value:function(e){Pc(this);for(var t=this.buffer,n=this.blockLen,r=(e=Tc(e)).length,i=0;i<r;){var a=Math.min(n-this.pos,r-i);if(a!==n)t.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-i;i+=n)this.process(e,i)}return this}},{key:"destroy",value:function(){Dc(this.h,this.r,this.buffer,this.pad)}},{key:"digestInto",value:function(e){Pc(this),function(e,t){Sc(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(e,this),this.finished=!0;var t=this.buffer,n=this.h,r=this.pos;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();for(var i=0,a=0;a<8;a++)e[i++]=n[a]>>>0,e[i++]=n[a]>>>8;return e}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}}])}();var $c=function(e){var t=function(t,n){return e(n).update(Tc(t)).digest()},n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t){return e(t)},t}(function(e){return new Kc(e)});var Gc=function(e,t){var n=function(e,t){if(null==t||"object"!=T(t))throw new Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t),r=n.allowShortKeys,i=n.extendNonceFn,a=n.counterLength,o=n.counterRight,s=n.rounds;if("function"!=typeof e)throw new Error("core must be a function");return Nc(a),Nc(s),Oc(o),Oc(r),function(t,n,c,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Sc(t),Sc(n),Sc(c);var d=c.length;if(void 0===u&&(u=new Uint8Array(d)),Sc(u),Nc(l),l<0||l>=Wc)throw new Error("arx: counter overflow");if(u.length<d)throw new Error("arx: output (".concat(u.length,") is shorter than data (").concat(d,")"));var f,p,h=[],v=t.length;if(32===v)h.push(f=Uc(t)),p=Bc;else{if(16!==v||!r)throw new Error("arx: invalid 32-byte key, got length=".concat(v));(f=new Uint8Array(32)).set(t),f.set(t,16),p=qc,h.push(f)}Fc(n)||h.push(n=Uc(n));var g=_c(f);if(i){if(24!==n.length)throw new Error("arx: extended nonce must be 24 bytes");i(p,g,_c(n.subarray(0,16)),g),n=n.subarray(16)}var m=16-a;if(m!==n.length)throw new Error("arx: nonce must be ".concat(m," or 16 bytes"));if(12!==m){var w=new Uint8Array(12);w.set(n,o?0:12-n.length),n=w,h.push(n)}var y=_c(n);return function(e,t,n,r,i,a,o,s){for(var c=i.length,u=new Uint8Array(64),l=_c(u),d=Fc(i)&&Fc(a),f=d?_c(i):Hc,p=d?_c(a):Hc,h=0;h<c;o++){if(e(t,n,r,l,o,s),o>=Wc)throw new Error("arx: counter overflow");var v=Math.min(64,c-h);if(d&&64===v){var g=h/4;if(h%4!=0)throw new Error("arx: invalid block position");for(var m,w=0;w<16;w++)p[m=g+w]=f[m]^l[w];h+=64}else{for(var y,b=0;b<v;b++)a[y=h+b]=i[y]^u[b];h+=v}}}(e,p,g,y,c,u,l,s),Dc.apply(void 0,h),u}}(function(e,t,n,r,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,o=e[0],s=e[1],c=e[2],u=e[3],l=t[0],d=t[1],f=t[2],p=t[3],h=t[4],v=t[5],g=t[6],m=t[7],w=i,y=n[0],b=n[1],k=n[2],E=o,C=s,I=c,N=u,A=l,S=d,P=f,O=p,_=h,T=v,x=g,R=m,U=w,D=y,j=b,M=k,L=0;L<a;L+=2)U=zc(U^(E=E+A|0),16),A=zc(A^(_=_+U|0),12),U=zc(U^(E=E+A|0),8),A=zc(A^(_=_+U|0),7),D=zc(D^(C=C+S|0),16),S=zc(S^(T=T+D|0),12),D=zc(D^(C=C+S|0),8),S=zc(S^(T=T+D|0),7),j=zc(j^(I=I+P|0),16),P=zc(P^(x=x+j|0),12),j=zc(j^(I=I+P|0),8),P=zc(P^(x=x+j|0),7),M=zc(M^(N=N+O|0),16),O=zc(O^(R=R+M|0),12),M=zc(M^(N=N+O|0),8),O=zc(O^(R=R+M|0),7),M=zc(M^(E=E+S|0),16),S=zc(S^(x=x+M|0),12),M=zc(M^(E=E+S|0),8),S=zc(S^(x=x+M|0),7),U=zc(U^(C=C+P|0),16),P=zc(P^(R=R+U|0),12),U=zc(U^(C=C+P|0),8),P=zc(P^(R=R+U|0),7),D=zc(D^(I=I+O|0),16),O=zc(O^(_=_+D|0),12),D=zc(D^(I=I+O|0),8),O=zc(O^(_=_+D|0),7),j=zc(j^(N=N+A|0),16),A=zc(A^(T=T+j|0),12),j=zc(j^(N=N+A|0),8),A=zc(A^(T=T+j|0),7);var q=0;r[q++]=o+E|0,r[q++]=s+C|0,r[q++]=c+I|0,r[q++]=u+N|0,r[q++]=l+A|0,r[q++]=d+S|0,r[q++]=f+P|0,r[q++]=p+O|0,r[q++]=h+_|0,r[q++]=v+T|0,r[q++]=g+x|0,r[q++]=m+R|0,r[q++]=w+U|0,r[q++]=y+D|0,r[q++]=b+j|0,r[q++]=k+M|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),Jc=new Uint8Array(16),Yc=function(e,t){e.update(t);var n=t.length%16;n&&e.update(Jc.subarray(n))},Xc=new Uint8Array(32);function Zc(e,t,n,r,i){var a=e(t,n,Xc),o=$c.create(a);i&&Yc(o,i),Yc(o,r);var s=new Uint8Array(16),c=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}(s);Rc(c,0,BigInt(i?i.length:0),!0),Rc(c,8,BigInt(r.length),!0),o.update(s);var u=o.digest();return Dc(a,s),u}var Qc=function(e,t){function n(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(Sc(n),void 0!==e.nonceLength){var o=i[0];if(!o)throw new Error("nonce / iv required");e.varSizeNonce?Sc(o):Sc(o,e.nonceLength)}var s=e.tagLength;s&&void 0!==i[1]&&Sc(i[1]);var c=t.apply(void 0,[n].concat(i)),u=function(e,t){if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");Sc(t)}},l=!1;return{encrypt:function(e,t){if(l)throw new Error("cannot encrypt() twice with same key + nonce");return l=!0,Sc(e),u(c.encrypt.length,t),c.encrypt(e,t)},decrypt:function(e,t){if(Sc(e),s&&e.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return u(c.decrypt.length,t),c.decrypt(e,t)}}}return Object.assign(n,e),n}({blockSize:64,nonceLength:12,tagLength:16},function(e){return function(t,n,r){return{encrypt:function(i,a){var o=i.length;(a=xc(o+16,a,!1)).set(i);var s=a.subarray(0,-16);e(t,n,s,s,1);var c=Zc(e,t,n,s,r);return a.set(c,o),Dc(c),a},decrypt:function(i,a){a=xc(i.length-16,a,!1);var o=i.subarray(0,-16),s=i.subarray(-16),c=Zc(e,t,n,o,r);if(!function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}(s,c))throw new Error("invalid tag");return a.set(i.subarray(0,-16)),e(t,n,a,a,1),Dc(c),a}}}}(Gc)),eu=function(e){function t(e,n){var r;I(this,t),(r=v(this,t)).finished=!1,r.destroyed=!1,cs(e);var i=bs(n);if(r.iHash=e.create(),"function"!=typeof r.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");r.blockLen=r.iHash.blockLen,r.outputLen=r.iHash.outputLen;var a=r.blockLen,o=new Uint8Array(a);o.set(i.length>a?e.create().update(i).digest():i);for(var s=0;s<o.length;s++)o[s]^=54;r.iHash.update(o),r.oHash=e.create();for(var c=0;c<o.length;c++)o[c]^=106;return r.oHash.update(o),o.fill(0),r}return w(t,e),A(t,[{key:"update",value:function(e){return us(this),this.iHash.update(e),this}},{key:"digestInto",value:function(e){us(this),ss(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}},{key:"digest",value:function(){var e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}},{key:"_cloneInto",value:function(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));var t=this.oHash,n=this.iHash,r=this.finished,i=this.destroyed,a=this.blockLen,o=this.outputLen;return e.finished=r,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}},{key:"destroy",value:function(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}])}(Es),tu=function(e,t,n){return new eu(e,t).update(n).digest()};tu.create=function(e,t){return new eu(e,t)};var nu=new Uint8Array([0]),ru=new Uint8Array;var iu=function(e,t,n,r,i){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;if(cs(e),os(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");var i=Math.ceil(r/e.outputLen);void 0===n&&(n=ru);for(var a=new Uint8Array(i*e.outputLen),o=tu.create(e,t),s=o._cloneInto(),c=new Uint8Array(o.outputLen),u=0;u<i;u++)nu[0]=u+1,s.update(0===u?ru:c).update(n).update(nu).digestInto(c),a.set(c,e.outputLen*u),o._cloneInto(s);return o.destroy(),s.destroy(),c.fill(0),nu.fill(0),a.slice(0,r)}(e,function(e,t,n){return cs(e),void 0===n&&(n=new Uint8Array(e.outputLen)),tu(e,bs(n),bs(t))}(e,t,n),r,i)};function au(e,t,n){return e&t^~e&n}function ou(e,t,n){return e&t^e&n^t&n}var su=function(e){function t(e,n,r,i){var a;return I(this,t),(a=v(this,t)).blockLen=e,a.outputLen=n,a.padOffset=r,a.isLE=i,a.finished=!1,a.length=0,a.pos=0,a.destroyed=!1,a.buffer=new Uint8Array(e),a.view=vs(a.buffer),a}return w(t,e),A(t,[{key:"update",value:function(e){us(this);for(var t=this.view,n=this.buffer,r=this.blockLen,i=(e=bs(e)).length,a=0;a<i;){var o=Math.min(r-this.pos,i-a);if(o!==r)n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===r&&(this.process(t,0),this.pos=0);else for(var s=vs(e);r<=i-a;a+=r)this.process(s,a)}return this.length+=e.length,this.roundClean(),this}},{key:"digestInto",value:function(e){us(this),ls(e,this),this.finished=!0;var t=this.buffer,n=this.view,r=this.blockLen,i=this.isLE,a=this.pos;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(n,0),a=0);for(var o=a;o<r;o++)t[o]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);var i=BigInt(32),a=BigInt(4294967295),o=Number(n>>i&a),s=Number(n&a),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,s,r)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);var s=vs(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(var d=0;d<u;d++)s.setUint32(4*d,l[d],i)}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}},{key:"_cloneInto",value:function(e){var t;e||(e=new this.constructor),(t=e).set.apply(t,P(this.get()));var n=this.blockLen,r=this.buffer,i=this.length,a=this.finished,o=this.destroyed,s=this.pos;return e.length=i,e.pos=s,e.finished=a,e.destroyed=o,i%n&&e.buffer.set(r),e}}])}(Es),cu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),uu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lu=new Uint32Array(64),du=function(e){function t(){var e;return I(this,t),(e=v(this,t,[64,32,8,!1])).A=0|uu[0],e.B=0|uu[1],e.C=0|uu[2],e.D=0|uu[3],e.E=0|uu[4],e.F=0|uu[5],e.G=0|uu[6],e.H=0|uu[7],e}return w(t,e),A(t,[{key:"get",value:function(){return[this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H]}},{key:"set",value:function(e,t,n,r,i,a,o,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|a,this.G=0|o,this.H=0|s}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)lu[n]=e.getUint32(t,!1);for(var r=16;r<64;r++){var i=lu[r-15],a=lu[r-2],o=gs(i,7)^gs(i,18)^i>>>3,s=gs(a,17)^gs(a,19)^a>>>10;lu[r]=s+lu[r-7]+o+lu[r-16]|0}for(var c=this.A,u=this.B,l=this.C,d=this.D,f=this.E,p=this.F,h=this.G,v=this.H,g=0;g<64;g++){var m=v+(gs(f,6)^gs(f,11)^gs(f,25))+au(f,p,h)+cu[g]+lu[g]|0,w=(gs(c,2)^gs(c,13)^gs(c,22))+ou(c,u,l)|0;v=h,h=p,p=f,f=d+m|0,d=l,l=u,u=c,c=m+w|0}c=c+this.A|0,u=u+this.B|0,l=l+this.C|0,d=d+this.D|0,f=f+this.E|0,p=p+this.F|0,h=h+this.G|0,v=v+this.H|0,this.set(c,u,l,d,f,p,h,v)}},{key:"roundClean",value:function(){lu.fill(0)}},{key:"destroy",value:function(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}])}(su),fu=Cs(function(){return new du}),pu=BigInt(0),hu=BigInt(1),vu=BigInt(2);function gu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function mu(e){if(!gu(e))throw new Error("Uint8Array expected")}function wu(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}var yu=Array.from({length:256},function(e,t){return t.toString(16).padStart(2,"0")});function bu(e){mu(e);for(var t="",n=0;n<e.length;n++)t+=yu[e[n]];return t}function ku(e){var t=e.toString(16);return 1&t.length?"0"+t:t}function Eu(e){if("string"!=typeof e)throw new Error("hex string expected, got "+T(e));return""===e?pu:BigInt("0x"+e)}var Cu=48,Iu=57,Nu=65,Au=70,Su=97,Pu=102;function Ou(e){return e>=Cu&&e<=Iu?e-Cu:e>=Nu&&e<=Au?e-(Nu-10):e>=Su&&e<=Pu?e-(Su-10):void 0}function _u(e){if("string"!=typeof e)throw new Error("hex string expected, got "+T(e));var t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(n),i=0,a=0;i<n;i++,a+=2){var o=Ou(e.charCodeAt(a)),s=Ou(e.charCodeAt(a+1));if(void 0===o||void 0===s){var c=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+a)}r[i]=16*o+s}return r}function Tu(e){return Eu(bu(e))}function xu(e){return mu(e),Eu(bu(Uint8Array.from(e).reverse()))}function Ru(e,t){return _u(e.toString(16).padStart(2*t,"0"))}function Uu(e,t){return Ru(e,t).reverse()}function Du(e,t,n){var r;if("string"==typeof t)try{r=_u(t)}catch(Vi){throw new Error(e+" must be hex string or Uint8Array, cause: "+Vi)}else{if(!gu(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}var i=r.length;if("number"==typeof n&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function ju(){for(var e=0,t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];mu(n),e+=n.length}for(var r=new Uint8Array(e),i=0,a=0;i<arguments.length;i++){var o=i<0||arguments.length<=i?void 0:arguments[i];r.set(o,a),a+=o.length}return r}var Mu=function(e){return"bigint"==typeof e&&pu<=e};function Lu(e,t,n){return Mu(e)&&Mu(t)&&Mu(n)&&t<=e&&e<n}function qu(e,t,n,r){if(!Lu(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Bu(e){var t;for(t=0;e>pu;e>>=hu,t+=1);return t}var zu=function(e){return(vu<<BigInt(e-1))-hu},Fu=function(e){return new Uint8Array(e)},Wu=function(e){return Uint8Array.from(e)};function Hu(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");var r=Fu(e),i=Fu(e),a=0,o=function(){r.fill(1),i.fill(0),a=0},s=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.apply(void 0,[i,r].concat(t))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fu();i=s(Wu([0]),e),r=s(),0!==e.length&&(i=s(Wu([1]),e),r=s())},u=function(){if(a++>=1e3)throw new Error("drbg: tried 1000 values");for(var e=0,n=[];e<t;){var i=(r=s()).slice();n.push(i),e+=r.length}return ju.apply(void 0,n)};return function(e,t){var n;for(o(),c(e);!(n=t(u()));)c();return o(),n}}var Vu={bigint:function(e){return"bigint"==typeof e},function:function(e){return"function"==typeof e},boolean:function(e){return"boolean"==typeof e},string:function(e){return"string"==typeof e},stringOrUint8Array:function(e){return"string"==typeof e||gu(e)},isSafeInteger:function(e){return Number.isSafeInteger(e)},array:function(e){return Array.isArray(e)},field:function(e,t){return t.Fp.isValid(e)},hash:function(e){return"function"==typeof e&&Number.isSafeInteger(e.outputLen)}};function Ku(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(t,n,r){var i=Vu[n];if("function"!=typeof i)throw new Error("invalid validator function");var a=e[t];if(!(r&&void 0===a||i(a,e)))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+a)},i=0,a=Object.entries(t);i<a.length;i++){var o=S(a[i],2);r(o[0],o[1],!1)}for(var s=0,c=Object.entries(n);s<c.length;s++){var u=S(c[s],2);r(u[0],u[1],!0)}return e}function $u(e){var t=new WeakMap;return function(n){var r=t.get(n);if(void 0!==r)return r;for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];var s=e.apply(void 0,[n].concat(a));return t.set(n,s),s}}var Gu=Object.freeze({__proto__:null,isBytes:gu,abytes:mu,abool:wu,bytesToHex:bu,numberToHexUnpadded:ku,hexToNumber:Eu,hexToBytes:_u,bytesToNumberBE:Tu,bytesToNumberLE:xu,numberToBytesBE:Ru,numberToBytesLE:Uu,numberToVarBytesBE:function(e){return _u(ku(e))},ensureBytes:Du,concatBytes:ju,equalBytes:function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},inRange:Lu,aInRange:qu,bitLen:Bu,bitGet:function(e,t){return e>>BigInt(t)&hu},bitSet:function(e,t,n){return e|(n?hu:pu)<<BigInt(t)},bitMask:zu,createHmacDrbg:Hu,validateObject:Ku,notImplemented:function(){throw new Error("not implemented")},memoized:$u}),Ju=BigInt(0),Yu=BigInt(1),Xu=BigInt(2),Zu=BigInt(3),Qu=BigInt(4),el=BigInt(5),tl=BigInt(8);function nl(e,t){var n=e%t;return n>=Ju?n:t+n}function rl(e,t,n){if(t<Ju)throw new Error("invalid exponent, negatives unsupported");if(n<=Ju)throw new Error("invalid modulus");if(n===Yu)return Ju;for(var r=Yu;t>Ju;)t&Yu&&(r=r*e%n),e=e*e%n,t>>=Yu;return r}function il(e,t,n){for(var r=e;t-- >Ju;)r*=r,r%=n;return r}function al(e,t){if(e===Ju)throw new Error("invert: expected non-zero number");if(t<=Ju)throw new Error("invert: expected positive modulus, got "+t);for(var n=nl(e,t),r=t,i=Ju,a=Yu;n!==Ju;){var o=r%n,s=i-a*(r/n);r=n,n=o,i=a,a=s}if(r!==Yu)throw new Error("invert: does not exist");return nl(i,t)}function ol(e){if(e%Qu===Zu){var t=(e+Yu)/Qu;return function(e,n){var r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%tl===el){var n=(e-el)/tl;return function(e,t){var r=e.mul(t,Xu),i=e.pow(r,n),a=e.mul(t,i),o=e.mul(e.mul(a,Xu),i),s=e.mul(a,e.sub(o,e.ONE));if(!e.eql(e.sqr(s),t))throw new Error("Cannot find square root");return s}}return function(e){var t,n,r,i=(e-Yu)/Xu;for(t=e-Yu,n=0;t%Xu===Ju;t/=Xu,n++);for(r=Xu;r<e&&rl(r,i,e)!==e-Yu;r++)if(r>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){var a=(e+Yu)/Qu;return function(e,t){var n=e.pow(t,a);if(!e.eql(e.sqr(n),t))throw new Error("Cannot find square root");return n}}var o=(t+Yu)/Xu;return function(e,a){if(e.pow(a,i)===e.neg(e.ONE))throw new Error("Cannot find square root");for(var s=n,c=e.pow(e.mul(e.ONE,r),t),u=e.pow(a,o),l=e.pow(a,t);!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;for(var d=1,f=e.sqr(l);d<s&&!e.eql(f,e.ONE);d++)f=e.sqr(f);var p=e.pow(c,Yu<<BigInt(s-d-1));c=e.sqr(p),u=e.mul(u,p),l=e.mul(l,c),s=d}return u}}(e)}var sl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cl(e,t){var n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function ul(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=Ju)throw new Error("invalid field: expected ORDER > 0, got "+e);var i,a=cl(e,t),o=a.nBitLength,s=a.nByteLength;if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");var c=Object.freeze({ORDER:e,isLE:n,BITS:o,BYTES:s,MASK:zu(o),ZERO:Ju,ONE:Yu,create:function(t){return nl(t,e)},isValid:function(t){if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+T(t));return Ju<=t&&t<e},is0:function(e){return e===Ju},isOdd:function(e){return(e&Yu)===Yu},neg:function(t){return nl(-t,e)},eql:function(e,t){return e===t},sqr:function(t){return nl(t*t,e)},add:function(t,n){return nl(t+n,e)},sub:function(t,n){return nl(t-n,e)},mul:function(t,n){return nl(t*n,e)},pow:function(e,t){return function(e,t,n){if(n<Ju)throw new Error("invalid exponent, negatives unsupported");if(n===Ju)return e.ONE;if(n===Yu)return t;for(var r=e.ONE,i=t;n>Ju;)n&Yu&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Yu;return r}(c,e,t)},div:function(t,n){return nl(t*al(n,e),e)},sqrN:function(e){return e*e},addN:function(e,t){return e+t},subN:function(e,t){return e-t},mulN:function(e,t){return e*t},inv:function(t){return al(t,e)},sqrt:r.sqrt||function(t){return i||(i=ol(e)),i(c,t)},invertBatch:function(e){return function(e,t){var n=new Array(t.length),r=t.reduce(function(t,r,i){return e.is0(r)?t:(n[i]=t,e.mul(t,r))},e.ONE),i=e.inv(r);return t.reduceRight(function(t,r,i){return e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))},i),n}(c,e)},cmov:function(e,t,n){return n?t:e},toBytes:function(e){return n?Uu(e,s):Ru(e,s)},fromBytes:function(e){if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return n?xu(e):Tu(e)}});return Object.freeze(c)}function ll(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");var t=e.toString(2).length;return Math.ceil(t/8)}function dl(e){var t=ll(e);return t+Math.ceil(t/2)}var fl=BigInt(0),pl=BigInt(1);function hl(e,t){var n=t.negate();return e?n:t}function vl(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function gl(e,t){return vl(e,t),{windows:Math.ceil(t/e)+1,windowSize:Math.pow(2,e-1)}}var ml=new WeakMap,wl=new WeakMap;function yl(e){return wl.get(e)||1}function bl(e,t,n,r){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(function(e,n){if(!(e instanceof t))throw new Error("invalid point at index "+n)})}(n,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(function(e,n){if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");for(var i=e.ZERO,a=Bu(BigInt(n.length)),o=a>12?a-3:a>4?a-2:a?2:1,s=(1<<o)-1,c=new Array(s+1).fill(i),u=i,l=Math.floor((t.BITS-1)/o)*o;l>=0;l-=o){c.fill(i);for(var d=0;d<r.length;d++){var f=r[d],p=Number(f>>BigInt(l)&BigInt(s));c[p]=c[p].add(n[d])}for(var h=i,v=c.length-1,g=i;v>0;v--)g=g.add(c[v]),h=h.add(g);if(u=u.add(h),0!==l)for(var m=0;m<o;m++)u=u.double()}return u}function kl(e){return function(e){var t=sl.reduce(function(e,t){return e[t]="function",e},{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});Ku(e,t)}(e.Fp),Ku(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(D(D(D({},cl(e.n,e.nBitLength)),e),{},{p:e.Fp.ORDER}))}BigInt(0),BigInt(1),BigInt(2),BigInt(8);var El=BigInt(0),Cl=BigInt(1);var Il=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);var Nl=BigInt(1),Al=BigInt(2),Sl=BigInt(3),Pl=BigInt(5);BigInt(8);var Ol=function(e){var t=function(e){return Ku(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze(D({},e))}(e),n=t.P,r=function(e){return nl(e,n)},i=t.montgomeryBits,a=Math.ceil(i/8),o=t.nByteLength,s=t.adjustScalarBytes||function(e){return e},c=t.powPminus2||function(e){return rl(e,n-BigInt(2),n)};function u(e,t,n){var i=r(e*(t-n));return[t=r(t-i),n=r(n+i)]}var l=(t.a-BigInt(2))/BigInt(4);function d(e){return Uu(r(e),a)}function f(e,t){var f=function(e){var t=Du("u coordinate",e,a);return 32===o&&(t[31]&=127),xu(t)}(t),p=function(e){var t=Du("scalar",e),n=t.length;if(n!==a&&n!==o)throw new Error("invalid scalar, expected "+a+" or "+o+" bytes, got "+n);return xu(s(t))}(e),h=function(e,t){qu("u",e,El,n),qu("scalar",t,El,n);for(var a,o=t,s=e,d=Cl,f=El,p=e,h=Cl,v=El,g=BigInt(i-1);g>=El;g--){var m=o>>g&Cl;d=(a=u(v^=m,d,p))[0],p=a[1],f=(a=u(v,f,h))[0],h=a[1],v=m;var w=d+f,y=r(w*w),b=d-f,k=r(b*b),E=y-k,C=p+h,I=r((p-h)*w),N=r(C*b),A=I+N,S=I-N;p=r(A*A),h=r(s*r(S*S)),d=r(y*k),f=r(E*(y+r(l*E)))}d=(a=u(v,d,p))[0],p=a[1],f=(a=u(v,f,h))[0],h=a[1];var P=c(f);return r(d*P)}(f,p);if(h===El)throw new Error("invalid private or public key received");return d(h)}var p=d(t.Gu);function h(e){return f(e,p)}return{scalarMult:f,scalarMultBase:h,getSharedSecret:function(e,t){return f(e,t)},getPublicKey:function(e){return h(e)},utils:{randomPrivateKey:function(){return t.randomBytes(t.nByteLength)}},GuBytes:p}}({P:Il,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:function(e){var t=Il,n=function(e){var t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),a=Il,o=e*e%a*e%a,s=il(o,Al,a)*o%a,c=il(s,Nl,a)*e%a,u=il(c,Pl,a)*c%a,l=il(u,t,a)*u%a,d=il(l,n,a)*l%a,f=il(d,r,a)*d%a,p=il(f,i,a)*f%a,h=il(p,i,a)*f%a,v=il(h,t,a)*u%a;return{pow_p_5_8:il(v,Al,a)*e%a,b2:o}}(e),r=n.pow_p_5_8,i=n.b2;return nl(il(r,Sl,t)*i,t)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:Is});function _l(e){void 0!==e.lowS&&wu("lowS",e.lowS),void 0!==e.prehash&&wu("prehash",e.prehash)}var Tl=Gu.bytesToNumberBE,xl=Gu.hexToBytes,Rl=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return I(this,t),v(this,t,[e])}return w(t,e),A(t)}(y(Error)),Ul={Err:Rl,_tlv:{encode:function(e,t){var n=Ul.Err;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");var r=t.length/2,i=ku(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");var a=r>127?ku(i.length/2|128):"";return ku(e)+a+i+t},decode:function(e,t){var n=Ul.Err,r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");var i=t[r++],a=0;if(!!(128&i)){var o=127&i;if(!o)throw new n("tlv.decode(long): indefinite length not supported");if(o>4)throw new n("tlv.decode(long): byte length is too big");var s=t.subarray(r,r+o);if(s.length!==o)throw new n("tlv.decode: length bytes not complete");if(0===s[0])throw new n("tlv.decode(long): zero leftmost byte");var c,u=C(s);try{for(u.s();!(c=u.n()).done;){a=a<<8|c.value}}catch(d){u.e(d)}finally{u.f()}if(r+=o,a<128)throw new n("tlv.decode(long): not minimal encoding")}else a=i;var l=t.subarray(r,r+a);if(l.length!==a)throw new n("tlv.decode: wrong value length");return{v:l,l:t.subarray(r+a)}}},_int:{encode:function(e){var t=Ul.Err;if(e<Dl)throw new t("integer: negative integers are not allowed");var n=ku(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode:function(e){var t=Ul.Err;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return Tl(e)}},toSig:function(e){var t=Ul.Err,n=Ul._int,r=Ul._tlv,i="string"==typeof e?xl(e):e;mu(i);var a=r.decode(48,i),o=a.v;if(a.l.length)throw new t("invalid signature: left bytes after parsing");var s=r.decode(2,o),c=s.v,u=s.l,l=r.decode(2,u),d=l.v;if(l.l.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(d)}},hexFromSig:function(e){var t=Ul._tlv,n=Ul._int,r=t.encode(2,n.encode(e.r))+t.encode(2,n.encode(e.s));return t.encode(48,r)}},Dl=BigInt(0),jl=BigInt(1);BigInt(2);var Ml=BigInt(3);function Ll(e){var t=function(e){var t=kl(e);Ku(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});var n=t.endo,r=t.Fp,i=t.a;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=T(n)||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze(D({},t))}(e),n=t.Fp,r=ul(t.n,t.nBitLength),i=t.toBytes||function(e,t,r){var i=t.toAffine();return ju(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))},a=t.fromBytes||function(e){var t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}};function o(e){var r=t.a,i=t.b,a=n.sqr(e),o=n.mul(a,e);return n.add(n.add(o,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(e){var n,r=t.allowedPrivateKeyLengths,i=t.nByteLength,a=t.wrapPrivateKey,o=t.n;if(r&&"bigint"!=typeof e){if(gu(e)&&(e=bu(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*i,"0")}try{n="bigint"==typeof e?e:Tu(Du("private key",e,i))}catch(s){throw new Error("invalid private key, expected hex or "+i+" bytes, got "+T(e))}return a&&(n=nl(n,o)),qu("private key",n,jl,o),n}function c(e){if(!(e instanceof d))throw new Error("ProjectivePoint expected")}var u=$u(function(e,t){var r=e.px,i=e.py,a=e.pz;if(n.eql(a,n.ONE))return{x:r,y:i};var o=e.is0();null==t&&(t=o?n.ONE:n.inv(a));var s=n.mul(r,t),c=n.mul(i,t),u=n.mul(a,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:s,y:c}}),l=$u(function(e){if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}var r=e.toAffine(),i=r.x,a=r.y;if(!n.isValid(i)||!n.isValid(a))throw new Error("bad point: x or y not FE");var s=n.sqr(a),c=o(i);if(!n.eql(s,c))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}),d=function(){function e(t,r,i){if(I(this,e),this.px=t,this.py=r,this.pz=i,null==t||!n.isValid(t))throw new Error("x required");if(null==r||!n.isValid(r))throw new Error("y required");if(null==i||!n.isValid(i))throw new Error("z required");Object.freeze(this)}return A(e,[{key:"x",get:function(){return this.toAffine().x}},{key:"y",get:function(){return this.toAffine().y}},{key:"_setWindowSize",value:function(e){p.setWindowSize(this,e)}},{key:"assertValidity",value:function(){l(this)}},{key:"hasEvenY",value:function(){var e=this.toAffine().y;if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}},{key:"equals",value:function(e){c(e);var t=this.px,r=this.py,i=this.pz,a=e.px,o=e.py,s=e.pz,u=n.eql(n.mul(t,s),n.mul(a,i)),l=n.eql(n.mul(r,s),n.mul(o,i));return u&&l}},{key:"negate",value:function(){return new e(this.px,n.neg(this.py),this.pz)}},{key:"double",value:function(){var r=t.a,i=t.b,a=n.mul(i,Ml),o=this.px,s=this.py,c=this.pz,u=n.ZERO,l=n.ZERO,d=n.ZERO,f=n.mul(o,o),p=n.mul(s,s),h=n.mul(c,c),v=n.mul(o,s);return v=n.add(v,v),d=n.mul(o,c),d=n.add(d,d),u=n.mul(r,d),l=n.mul(a,h),l=n.add(u,l),u=n.sub(p,l),l=n.add(p,l),l=n.mul(u,l),u=n.mul(v,u),d=n.mul(a,d),h=n.mul(r,h),v=n.sub(f,h),v=n.mul(r,v),v=n.add(v,d),d=n.add(f,f),f=n.add(d,f),f=n.add(f,h),f=n.mul(f,v),l=n.add(l,f),h=n.mul(s,c),h=n.add(h,h),f=n.mul(h,v),u=n.sub(u,f),d=n.mul(h,p),d=n.add(d,d),new e(u,l,d=n.add(d,d))}},{key:"add",value:function(r){c(r);var i=this.px,a=this.py,o=this.pz,s=r.px,u=r.py,l=r.pz,d=n.ZERO,f=n.ZERO,p=n.ZERO,h=t.a,v=n.mul(t.b,Ml),g=n.mul(i,s),m=n.mul(a,u),w=n.mul(o,l),y=n.add(i,a),b=n.add(s,u);y=n.mul(y,b),b=n.add(g,m),y=n.sub(y,b),b=n.add(i,o);var k=n.add(s,l);return b=n.mul(b,k),k=n.add(g,w),b=n.sub(b,k),k=n.add(a,o),d=n.add(u,l),k=n.mul(k,d),d=n.add(m,w),k=n.sub(k,d),p=n.mul(h,b),d=n.mul(v,w),p=n.add(d,p),d=n.sub(m,p),p=n.add(m,p),f=n.mul(d,p),m=n.add(g,g),m=n.add(m,g),w=n.mul(h,w),b=n.mul(v,b),m=n.add(m,w),w=n.sub(g,w),w=n.mul(h,w),b=n.add(b,w),g=n.mul(m,b),f=n.add(f,g),g=n.mul(k,b),d=n.mul(y,d),d=n.sub(d,g),g=n.mul(y,m),p=n.mul(k,p),new e(d,f,p=n.add(p,g))}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"is0",value:function(){return this.equals(e.ZERO)}},{key:"wNAF",value:function(t){return p.wNAFCached(this,t,e.normalizeZ)}},{key:"multiplyUnsafe",value:function(r){var i=t.endo,a=t.n;qu("scalar",r,Dl,a);var o=e.ZERO;if(r===Dl)return o;if(this.is0()||r===jl)return this;if(!i||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,r,e.normalizeZ);for(var s=i.splitScalar(r),c=s.k1neg,u=s.k1,l=s.k2neg,d=s.k2,f=o,h=o,v=this;u>Dl||d>Dl;)u&jl&&(f=f.add(v)),d&jl&&(h=h.add(v)),v=v.double(),u>>=jl,d>>=jl;return c&&(f=f.negate()),l&&(h=h.negate()),h=new e(n.mul(h.px,i.beta),h.py,h.pz),f.add(h)}},{key:"multiply",value:function(r){var i,a,o=t.endo,s=t.n;if(qu("scalar",r,jl,s),o){var c=o.splitScalar(r),u=c.k1neg,l=c.k1,d=c.k2neg,f=c.k2,h=this.wNAF(l),v=h.p,g=h.f,m=this.wNAF(f),w=m.p,y=m.f;v=p.constTimeNegate(u,v),w=p.constTimeNegate(d,w),w=new e(n.mul(w.px,o.beta),w.py,w.pz),i=v.add(w),a=g.add(y)}else{var b=this.wNAF(r);i=b.p,a=b.f}return e.normalizeZ([i,a])[0]}},{key:"multiplyAndAddUnsafe",value:function(t,n,r){var i=e.BASE,a=function(e,t){return t!==Dl&&t!==jl&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t)},o=a(this,n).add(a(t,r));return o.is0()?void 0:o}},{key:"toAffine",value:function(e){return u(this,e)}},{key:"isTorsionFree",value:function(){var n=t.h,r=t.isTorsionFree;if(n===jl)return!0;if(r)return r(e,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}},{key:"clearCofactor",value:function(){var n=t.h,r=t.clearCofactor;return n===jl?this:r?r(e,this):this.multiplyUnsafe(t.h)}},{key:"toRawBytes",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return wu("isCompressed",t),this.assertValidity(),i(e,this,t)}},{key:"toHex",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return wu("isCompressed",e),bu(this.toRawBytes(e))}}],[{key:"fromAffine",value:function(t){var r=t||{},i=r.x,a=r.y;if(!t||!n.isValid(i)||!n.isValid(a))throw new Error("invalid affine point");if(t instanceof e)throw new Error("projective point not allowed");var o=function(e){return n.eql(e,n.ZERO)};return o(i)&&o(a)?e.ZERO:new e(i,a,n.ONE)}},{key:"normalizeZ",value:function(t){var r=n.invertBatch(t.map(function(e){return e.pz}));return t.map(function(e,t){return e.toAffine(r[t])}).map(e.fromAffine)}},{key:"fromHex",value:function(t){var n=e.fromAffine(a(Du("pointHex",t)));return n.assertValidity(),n}},{key:"fromPrivateKey",value:function(t){return e.BASE.multiply(s(t))}},{key:"msm",value:function(t,n){return bl(e,r,t,n)}}])}();d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);var f=t.nBitLength,p=function(e,t){return{constTimeNegate:hl,hasPrecomputes:function(e){return 1!==yl(e)},unsafeLadder:function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.ZERO,i=t;n>fl;)n&pl&&(r=r.add(i)),i=i.double(),n>>=pl;return r},precomputeWindow:function(e,n){for(var r=gl(n,t),i=r.windows,a=r.windowSize,o=[],s=e,c=s,u=0;u<i;u++){c=s,o.push(c);for(var l=1;l<a;l++)c=c.add(s),o.push(c);s=c.double()}return o},wNAF:function(n,r,i){for(var a=gl(n,t),o=a.windows,s=a.windowSize,c=e.ZERO,u=e.BASE,l=BigInt(Math.pow(2,n)-1),d=Math.pow(2,n),f=BigInt(n),p=0;p<o;p++){var h=p*s,v=Number(i&l);i>>=f,v>s&&(v-=d,i+=pl);var g=h,m=h+Math.abs(v)-1,w=p%2!=0,y=v<0;0===v?u=u.add(hl(w,r[g])):c=c.add(hl(y,r[m]))}return{p:c,f:u}},wNAFUnsafe:function(n,r,i){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.ZERO,o=gl(n,t),s=o.windows,c=o.windowSize,u=BigInt(Math.pow(2,n)-1),l=Math.pow(2,n),d=BigInt(n),f=0;f<s;f++){var p=f*c;if(i===fl)break;var h=Number(i&u);if(i>>=d,h>c&&(h-=l,i+=pl),0!==h){var v=r[p+Math.abs(h)-1];h<0&&(v=v.negate()),a=a.add(v)}}return a},getPrecomputes:function(e,t,n){var r=ml.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&ml.set(t,n(r))),r},wNAFCached:function(e,t,n){var r=yl(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe:function(e,t,n,r){var i=yl(e);return 1===i?this.unsafeLadder(e,t,r):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),t,r)},setWindowSize:function(e,n){vl(n,t),wl.set(e,n),ml.delete(e)}}}(d,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:s,weierstrassEquation:o,isWithinCurveOrder:function(e){return Lu(e,jl,t.n)}}}function ql(e){var t=function(e){var t=kl(e);return Ku(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(D({lowS:!0},t))}(e),n=t.Fp,r=t.n,i=n.BYTES+1,a=2*n.BYTES+1;function o(e){return nl(e,r)}function s(e){return al(e,r)}var c=Ll(D(D({},t),{},{toBytes:function(e,t,r){var i=t.toAffine(),a=n.toBytes(i.x),o=ju;return wu("isCompressed",r),r?o(Uint8Array.from([t.hasEvenY()?2:3]),a):o(Uint8Array.from([4]),a,n.toBytes(i.y))},fromBytes:function(e){var t=e.length,r=e[0],o=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===a&&4===r)return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+a+", got "+t)}var s=Tu(o);if(!Lu(s,jl,n.ORDER))throw new Error("Point is not on curve");var c,u=d(s);try{c=n.sqrt(u)}catch(uy){var l=uy instanceof Error?": "+uy.message:"";throw new Error("Point is not on curve"+l)}return!(1&~r)!==((c&jl)===jl)&&(c=n.neg(c)),{x:s,y:c}}})),u=c.ProjectivePoint,l=c.normPrivateKeyToScalar,d=c.weierstrassEquation,f=c.isWithinCurveOrder,p=function(e){return bu(Ru(e,t.nByteLength))};function h(e){return e>r>>jl}var v=function(e,t,n){return Tu(e.slice(t,n))},g=function(){function e(t,n,r){I(this,e),this.r=t,this.s=n,this.recovery=r,this.assertValidity()}return A(e,[{key:"assertValidity",value:function(){qu("r",this.r,jl,r),qu("s",this.s,jl,r)}},{key:"addRecoveryBit",value:function(t){return new e(this.r,this.s,t)}},{key:"recoverPublicKey",value:function(e){var r=this.r,i=this.s,a=this.recovery,c=b(Du("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw new Error("recovery id invalid");var l=2===a||3===a?r+t.n:r;if(l>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");var d=1&a?"03":"02",f=u.fromHex(d+p(l)),h=s(l),v=o(-c*h),g=o(i*h),m=u.BASE.multiplyAndAddUnsafe(f,v,g);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}},{key:"hasHighS",value:function(){return h(this.s)}},{key:"normalizeS",value:function(){return this.hasHighS()?new e(this.r,o(-this.s),this.recovery):this}},{key:"toDERRawBytes",value:function(){return _u(this.toDERHex())}},{key:"toDERHex",value:function(){return Ul.hexFromSig({r:this.r,s:this.s})}},{key:"toCompactRawBytes",value:function(){return _u(this.toCompactHex())}},{key:"toCompactHex",value:function(){return p(this.r)+p(this.s)}}],[{key:"fromCompact",value:function(n){var r=t.nByteLength;return n=Du("compactSignature",n,2*r),new e(v(n,0,r),v(n,r,2*r))}},{key:"fromDER",value:function(t){var n=Ul.toSig(Du("DER",t));return new e(n.r,n.s)}}])}(),m={isValidPrivateKey:function(e){try{return l(e),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:function(){var e=dl(t.n);return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.length,i=ll(t),a=dl(t);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);var o=nl(n?xu(e):Tu(e),t-Yu)+Yu;return n?Uu(o,i):Ru(o,i)}(t.randomBytes(e),t.n)},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function w(e){var t=gu(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===a:n?r===2*i||r===2*a:e instanceof u}var y=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");var n=Tu(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},b=t.bits2int_modN||function(e){return o(y(e))},k=zu(t.nBitLength);function E(e){return qu("num < 2^"+t.nBitLength,e,Dl,k),Ru(e,t.nByteLength)}function C(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N;if(["recovered","canonical"].some(function(e){return e in i}))throw new Error("sign() legacy options not supported");var a=t.hash,c=t.randomBytes,d=i.lowS,p=i.prehash,v=i.extraEntropy;null==d&&(d=!0),e=Du("msgHash",e),_l(i),p&&(e=Du("prehashed msgHash",a(e)));var m=b(e),w=l(r),k=[E(w),E(m)];if(null!=v&&!1!==v){var C=!0===v?c(n.BYTES):v;k.push(Du("extraEntropy",C))}var I=ju.apply(void 0,k),A=m;return{seed:I,k2sig:function(e){var t=y(e);if(f(t)){var n=s(t),r=u.BASE.multiply(t).toAffine(),i=o(r.x);if(i!==Dl){var a=o(n*o(A+i*w));if(a!==Dl){var c=(r.x===i?0:2)|Number(r.y&jl),l=a;return d&&h(a)&&(l=function(e){return h(e)?o(-e):e}(a),c^=1),new g(i,l,c)}}}}}}var N={lowS:t.lowS,prehash:!1},S={lowS:t.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(w(e))throw new Error("first arg must be private key");if(!w(t))throw new Error("second arg must be public key");return u.fromHex(t).multiply(l(e)).toRawBytes(n)},sign:function(e,n){var r=C(e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:N),i=r.seed,a=r.k2sig,o=t;return Hu(o.hash.outputLen,o.nByteLength,o.hmac)(i,a)},verify:function(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S,c=e;n=Du("msgHash",n),r=Du("publicKey",r);var l=a.lowS,d=a.prehash,f=a.format;if(_l(a),"strict"in a)throw new Error("options.strict was renamed to lowS");if(void 0!==f&&"compact"!==f&&"der"!==f)throw new Error("format must be compact or der");var p,h,v="string"==typeof c||gu(c),m=!v&&!f&&"object"==T(c)&&null!==c&&"bigint"==typeof c.r&&"bigint"==typeof c.s;if(!v&&!m)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(m&&(p=new g(c.r,c.s)),v){try{"compact"!==f&&(p=g.fromDER(c))}catch(yw){if(!(yw instanceof Ul.Err))throw yw}!p&&"der"!==f&&(p=g.fromCompact(c))}h=u.fromHex(r)}catch(P){return!1}if(!p||l&&p.hasHighS())return!1;d&&(n=t.hash(n));var w=p,y=w.r,k=w.s,E=b(n),C=s(k),I=o(E*C),N=o(y*C),A=null===(i=u.BASE.multiplyAndAddUnsafe(h,I,N))||void 0===i?void 0:i.toAffine();return!!A&&o(A.x)===y},ProjectivePoint:u,Signature:g,utils:m}}function Bl(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return tu(e,t,ks.apply(void 0,r))},randomBytes:Is}}BigInt(4);var zl=ul(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Fl=function(e,t){var n=function(t){return ql(D(D({},e),Bl(t)))};return D(D({},n(t)),{},{create:n})}({a:zl.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:zl,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},fu),Wl="base10",Hl="base16",Vl="base64pad",Kl="base64url",$l="utf8";function Gl(){var e=Is(32);return H(e,Hl)}function Jl(e){var t=fu(W(e,Hl));return H(t,Hl)}function Yl(e){var t=fu(W(e,$l));return H(t,Hl)}function Xl(e){return W("".concat(e),Wl)}function Zl(e){return Number(H(e,Wl))}function Ql(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ed(e){var t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function td(e){var t=Xl(T(e.type)<"u"?e.type:0);if(1===Zl(t)&&T(e.senderPublicKey)>"u")throw new Error("Missing sender public key for type 1 envelope");var n=T(e.senderPublicKey)<"u"?W(e.senderPublicKey,Hl):void 0,r=T(e.iv)<"u"?W(e.iv,Hl):Is(12),i=W(e.symKey,Hl),a=ad({type:t,sealed:Qc(i,r).encrypt(W(e.message,$l)),iv:r,senderPublicKey:n});return e.encoding===Kl?Ql(a):a}function nd(e){var t=W(e.symKey,Hl),n=od({encoded:e.encoded,encoding:e.encoding}),r=n.sealed,i=n.iv,a=Qc(t,i).decrypt(r);if(null===a)throw new Error("Failed to decrypt");return H(a,$l)}function rd(e,t){var n=Xl(2),r=Is(12),i=ad({type:n,sealed:W(e,$l),iv:r});return t===Kl?Ql(i):i}function id(e,t){var n=od({encoded:e,encoding:t}).sealed;return H(n,$l)}function ad(e){if(2===Zl(e.type))return H(J([e.type,e.sealed]),Vl);if(1===Zl(e.type)){if(T(e.senderPublicKey)>"u")throw new Error("Missing sender public key for type 1 envelope");return H(J([e.type,e.senderPublicKey,e.iv,e.sealed]),Vl)}return H(J([e.type,e.iv,e.sealed]),Vl)}function od(e){var t=(e.encoding||Vl)===Kl?ed(e.encoded):e.encoded,n=W(t,Vl),r=n.slice(0,1);if(1===Zl(r)){var i=n.slice(1,33),a=n.slice(33,45);return{type:r,sealed:n.slice(45),iv:a,senderPublicKey:i}}if(2===Zl(r))return{type:r,sealed:n.slice(1),iv:Is(12)};var o=n.slice(1,13);return{type:r,sealed:n.slice(13),iv:o}}function sd(e,t){var n=od({encoded:e,encoding:null==t?void 0:t.encoding});return cd({type:Zl(n.type),senderPublicKey:T(n.senderPublicKey)<"u"?H(n.senderPublicKey,Hl):void 0,receiverPublicKey:null==t?void 0:t.receiverPublicKey})}function cd(e){var t=(null==e?void 0:e.type)||0;if(1===t){if(T(null==e?void 0:e.senderPublicKey)>"u")throw new Error("missing sender public key");if(T(null==e?void 0:e.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:null==e?void 0:e.senderPublicKey,receiverPublicKey:null==e?void 0:e.receiverPublicKey}}function ud(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function ld(e){return 2===e.type}function dd(e,t){var n=S(e.split("."),3),r=n[0],i=n[1],a=n[2],o=Buffer.from(ed(a),"base64");if(64!==o.length)throw new Error("Invalid signature length");var s=o.slice(0,32),c=o.slice(32,64),u="".concat(r,".").concat(i),l=fu(u),d=function(e){var t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return J([new Uint8Array([4]),t,n])}(t);if(!Fl.verify(J([s,c]),l,d))throw new Error("Invalid signature");return Y(e).payload}function fd(e){return(null==e?void 0:e.relay)||{protocol:"irn"}}function pd(e){var t=$[e];if(T(t)>"u")throw new Error("Relay Protocol not supported: ".concat(e));return t}function hd(e){var t={},n="relay"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-");return Object.keys(e).forEach(function(r){if(r.startsWith(n)){var i=r.replace(n,""),a=e[r];t[i]=a}}),t}function vd(e){if(!e.includes("wc:")){var t=is(e);null!=t&&t.includes("wc:")&&(e=t)}var n=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,i=e.substring(0,n),a=e.substring(n+1,r).split("@"),o=T(r)<"u"?e.substring(r):"",s=new URLSearchParams(o),c={};s.forEach(function(e,t){c[t]=e});var u="string"==typeof c.methods?c.methods.split(","):void 0;return{protocol:i,topic:gd(a[0]),version:parseInt(a[1],10),symKey:c.symKey,relay:hd(c),methods:u,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function gd(e){return e.startsWith("//")?e.substring(2):e}function md(e){var t=new URLSearchParams,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={};return Object.keys(e).forEach(function(r){var i=r,a="relay"+t+i;e[i]&&(n[a]=e[i])}),n}(e.relay);Object.keys(n).sort().forEach(function(e){t.set(e,n[e])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));var r=t.toString();return"".concat(e.protocol,":").concat(e.topic,"@").concat(e.version,"?").concat(r)}function wd(e,t,n){return"".concat(e,"?wc_ev=").concat(n,"&topic=").concat(t)}var yd=Object.defineProperty,bd=Object.defineProperties,kd=Object.getOwnPropertyDescriptors,Ed=Object.getOwnPropertySymbols,Cd=Object.prototype.hasOwnProperty,Id=Object.prototype.propertyIsEnumerable,Nd=function(e,t,n){return t in e?yd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ad=function(e,t){for(var n in t||(t={}))Cd.call(t,n)&&Nd(e,n,t[n]);if(Ed){var r,i=C(Ed(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Id.call(t,n)&&Nd(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},Sd=function(e,t){return bd(e,kd(t))};function Pd(e){var t=[];return e.forEach(function(e){var n=S(e.split(":"),2),r=n[0],i=n[1];t.push("".concat(r,":").concat(i))}),t}function Od(e){return e.includes(":")}function _d(e){return Od(e)?e.split(":")[0]:e}function Td(e){var t,n,r,i={};if(!qd(e))return i;for(var a=0,o=Object.entries(e);a<o.length;a++){var s=S(o[a],2),c=s[0],u=s[1],l=Od(c)?[c]:u.chains,d=u.methods||[],f=u.events||[],p=_d(c);i[p]=Sd(Ad({},i[p]),{chains:Go(l,null==(t=i[p])?void 0:t.chains),methods:Go(d,null==(n=i[p])?void 0:n.methods),events:Go(f,null==(r=i[p])?void 0:r.events)})}return i}function xd(e,t){t=t.map(function(e){return e.replace("did:pkh:","")});for(var n=function(e){var t={};return null!=e&&e.forEach(function(e){var n,r=S(e.split(":"),2),i=r[0],a=r[1];t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(e),null==(n=t[i].chains)||n.push("".concat(i,":").concat(a))}),t}(t),r=0,i=Object.entries(n);r<i.length;r++){var a=S(i[r],2),o=(a[0],a[1]);o.methods?o.methods=Go(o.methods,e):o.methods=e,o.events=["chainChanged","accountsChanged"]}return n}function Rd(e,t){var n,r,i,a,o,s,c,u=Td(e),l=Td(t),d={},f=C(Object.keys(u).concat(Object.keys(l)));try{for(f.s();!(c=f.n()).done;){var p=c.value;d[p]={chains:Go(null==(n=u[p])?void 0:n.chains,null==(r=l[p])?void 0:r.chains),methods:Go(null==(i=u[p])?void 0:i.methods,null==(a=l[p])?void 0:a.methods),events:Go(null==(o=u[p])?void 0:o.events,null==(s=l[p])?void 0:s.events)}}}catch(h){f.e(h)}finally{f.f()}return d}var Ud={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Dd={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function jd(e,t){var n=Dd[e],r=n.message,i=n.code;return{message:t?"".concat(r," ").concat(t):r,code:i}}function Md(e,t){var n=Ud[e],r=n.message,i=n.code;return{message:t?"".concat(r," ").concat(t):r,code:i}}function Ld(e,t){return!!Array.isArray(e)}function qd(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Bd(e){return T(e)>"u"}function zd(e,t){return!(!t||!Bd(e))||"string"==typeof e&&!!e.trim().length}function Fd(e,t){return!(!t||!Bd(e))||"number"==typeof e&&!isNaN(e)}function Wd(e){return!(!zd(e,!1)||!e.includes(":"))&&2===e.split(":").length}function Hd(e){var t;return null==(t=null==e?void 0:e.proposer)?void 0:t.publicKey}function Vd(e){return null==e?void 0:e.topic}function Kd(e){var t=!0;return Ld(e)?e.length&&(t=e.every(function(e){return zd(e,!1)})):t=!1,t}function $d(e,t,n){var r=null;return Object.entries(e).forEach(function(e){var i=S(e,2),a=i[0],o=i[1];if(!r){var s=function(e,t,n){var r=null;return Ld(t)&&t.length?t.forEach(function(e){r||Wd(e)||(r=Md("UNSUPPORTED_CHAINS","".concat(n,", chain ").concat(e,' should be a string and conform to "namespace:chainId" format')))}):Wd(e)||(r=Md("UNSUPPORTED_CHAINS","".concat(n,', chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }'))),r}(a,vo(a,o),"".concat(t," ").concat(n));s&&(r=s)}}),r}function Gd(e,t){var n=null;return Ld(e)?e.forEach(function(e){n||function(e){if(zd(e,!1)&&e.includes(":")){var t=e.split(":");if(3===t.length){var n=t[0]+":"+t[1];return!!t[2]&&Wd(n)}}return!1}(e)||(n=Md("UNSUPPORTED_ACCOUNTS","".concat(t,", account ").concat(e,' should be a string and conform to "namespace:chainId:address" format')))}):n=Md("UNSUPPORTED_ACCOUNTS","".concat(t,', accounts should be an array of strings conforming to "namespace:chainId:address" format')),n}function Jd(e,t){var n=null;return Object.values(e).forEach(function(e){if(!n){var r=function(e,t){var n=null;return Kd(null==e?void 0:e.methods)?Kd(null==e?void 0:e.events)||(n=Md("UNSUPPORTED_EVENTS","".concat(t,", events should be an array of strings or empty array for no events"))):n=Md("UNSUPPORTED_METHODS","".concat(t,", methods should be an array of strings or empty array for no methods")),n}(e,"".concat(t,", namespace"));r&&(n=r)}}),n}function Yd(e,t){var n=null;if(e&&qd(e)){var r=Jd(e,t);r&&(n=r);var i=function(e,t){var n=null;return Object.values(e).forEach(function(e){if(!n){var r=Gd(null==e?void 0:e.accounts,"".concat(t," namespace"));r&&(n=r)}}),n}(e,t);i&&(n=i)}else n=jd("MISSING_OR_INVALID","".concat(t,", namespaces should be an object with data"));return n}function Xd(e){return zd(e.protocol,!0)}function Zd(e,t){var n=!1;return e?e&&Ld(e)&&e.length&&e.forEach(function(e){n=Xd(e)}):n=!0,n}function Qd(e){return"number"==typeof e}function ef(e){return T(e)<"u"&&null!==T(e)}function tf(e){return!!(e&&"object"==T(e)&&e.code&&Fd(e.code,!1)&&e.message&&zd(e.message,!1))}function nf(e){return!(Bd(e)||!zd(e.method,!1))}function rf(e){return!(Bd(e)||Bd(e.result)&&Bd(e.error)||!Fd(e.id,!1)||!zd(e.jsonrpc,!1))}function af(e){return!(Bd(e)||!zd(e.name,!1))}function of(e,t){return!(!Wd(t)||!function(e){var t=[];return Object.values(e).forEach(function(e){t.push.apply(t,P(Pd(e.accounts)))}),t}(e).includes(t))}function sf(e,t,n){return!!zd(n,!1)&&function(e,t){var n=[];return Object.values(e).forEach(function(e){Pd(e.accounts).includes(t)&&n.push.apply(n,P(e.methods))}),n}(e,t).includes(n)}function cf(e,t,n){return!!zd(n,!1)&&function(e,t){var n=[];return Object.values(e).forEach(function(e){Pd(e.accounts).includes(t)&&n.push.apply(n,P(e.events))}),n}(e,t).includes(n)}function uf(e,t,n){var r=null,i=function(e){var t={};return Object.keys(e).forEach(function(n){var r;n.includes(":")?t[n]=e[n]:null==(r=e[n].chains)||r.forEach(function(r){t[r]={methods:e[n].methods,events:e[n].events}})}),t}(e),a=function(e){var t={};return Object.keys(e).forEach(function(n){if(n.includes(":"))t[n]=e[n];else{var r=Pd(e[n].accounts);null==r||r.forEach(function(r){t[r]={accounts:e[n].accounts.filter(function(e){return e.includes("".concat(r,":"))}),methods:e[n].methods,events:e[n].events}})}}),t}(t),o=Object.keys(i),s=Object.keys(a),c=lf(Object.keys(e)),u=lf(Object.keys(t)),l=c.filter(function(e){return!u.includes(e)});return l.length&&(r=jd("NON_CONFORMING_NAMESPACES","".concat(n," namespaces keys don't satisfy requiredNamespaces.\n      Required: ").concat(l.toString(),"\n      Received: ").concat(Object.keys(t).toString()))),Lo(o,s)||(r=jd("NON_CONFORMING_NAMESPACES","".concat(n," namespaces chains don't satisfy required namespaces.\n      Required: ").concat(o.toString(),"\n      Approved: ").concat(s.toString()))),Object.keys(t).forEach(function(e){if(e.includes(":")&&!r){var i=Pd(t[e].accounts);i.includes(e)||(r=jd("NON_CONFORMING_NAMESPACES","".concat(n," namespaces accounts don't satisfy namespace accounts for ").concat(e,"\n        Required: ").concat(e,"\n        Approved: ").concat(i.toString())))}}),o.forEach(function(e){r||(Lo(i[e].methods,a[e].methods)?Lo(i[e].events,a[e].events)||(r=jd("NON_CONFORMING_NAMESPACES","".concat(n," namespaces events don't satisfy namespace events for ").concat(e))):r=jd("NON_CONFORMING_NAMESPACES","".concat(n," namespaces methods don't satisfy namespace methods for ").concat(e)))}),r}function lf(e){return P(new Set(e.map(function(e){return e.includes(":")?e.split(":")[0]:e})))}function df(e,t){return Fd(e,!1)&&e<=t.max&&e>=t.min}function ff(){var e=xo();return new Promise(function(t){switch(e){case Ao:t(To()&&(null===(n=navigator)||void 0===n?void 0:n.onLine));break;case Io:t(function(){return pf.apply(this,arguments)}());break;default:t(!0)}var n})}function pf(){return pf=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:if(!(_o()&&("undefined"==typeof global?"undefined":T(global))<"u"&&null!=global&&global.NetInfo)){e.n=2;break}return e.n=1,null==global?void 0:global.NetInfo.fetch();case 1:return t=e.v,e.a(2,null==t?void 0:t.isConnected);case 2:return e.a(2,!0)}},e)})),pf.apply(this,arguments)}function hf(e){switch(xo()){case Ao:!function(e){!_o()&&To()&&(window.addEventListener("online",function(){return e(!0)}),window.addEventListener("offline",function(){return e(!1)}))}(e);break;case Io:!function(e){var t;_o()&&("undefined"==typeof global?"undefined":T(global))<"u"&&null!=global&&global.NetInfo&&(null===(t=global)||void 0===t||t.NetInfo.addEventListener(function(t){return e(null==t?void 0:t.isConnected)}))}(e)}}function vf(){var e;return!To()||!K.getDocument()||"visible"===(null==(e=K.getDocument())?void 0:e.visibilityState)}var gf={},mf=function(){return A(function e(){I(this,e)},null,[{key:"get",value:function(e){return gf[e]}},{key:"set",value:function(e,t){gf[e]=t}},{key:"delete",value:function(e){delete gf[e]}}])}(),wf={},yf="core",bf="".concat("wc","@2:").concat(yf,":"),kf="error",Ef={database:":memory:"},Cf="client_ed25519_seed",If=V.ONE_DAY,Nf=V.SIX_HOURS,Af="wss://relay.walletconnect.org",Sf="relayer_message",Pf="relayer_message_ack",Of="relayer_connect",_f="relayer_disconnect",Tf="relayer_error",xf="relayer_connection_stalled",Rf="relayer_publish",Uf="payload",Df="connect",jf="disconnect",Mf="error",Lf="2.21.0",qf="link_mode",Bf="relay",zf="inbound",Ff="outbound",Wf="WALLETCONNECT_LINK_MODE_APPS",Hf="subscription_created",Vf="subscription_deleted",Kf="subscription_sync",$f="subscription_resubscribed",Gf={wc_pairingDelete:{req:{ttl:V.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:V.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:V.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:V.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:V.ONE_DAY,prompt:!1,tag:0},res:{ttl:V.ONE_DAY,prompt:!1,tag:0}}},Jf="pairing_create",Yf="pairing_expire",Xf="pairing_delete",Zf="pairing_ping",Qf="history_created",ep="history_updated",tp="history_deleted",np="history_sync",rp="expirer_created",ip="expirer_deleted",ap="expirer_expired",op="expirer_sync",sp="https://verify.walletconnect.org",cp=sp,up="".concat(cp,"/v3"),lp=["https://verify.walletconnect.com",sp],dp="pairing_started",fp="pairing_uri_validation_success",pp="pairing_uri_not_expired",hp="store_new_pairing",vp="subscribing_pairing_topic",gp="subscribe_pairing_topic_success",mp="existing_pairing",wp="pairing_not_expired",yp="emit_inactive_pairing",bp="emit_session_proposal",kp="no_internet_connection",Ep="malformed_pairing_uri",Cp="active_pairing_already_exists",Ip="subscribe_pairing_topic_failure",Np="pairing_expired",Ap="proposal_listener_not_found",Sp="session_approve_started",Pp="session_namespaces_validation_success",Op="subscribing_session_topic",_p="subscribe_session_topic_success",Tp="publishing_session_approve",xp="session_approve_publish_success",Rp="store_session",Up="publishing_session_settle",Dp="session_settle_publish_success",jp="no_internet_connection",Mp="proposal_expired",Lp="subscribe_session_topic_failure",qp="session_approve_publish_failure",Bp="session_settle_publish_failure",zp="session_approve_namespace_validation_failure",Fp="proposal_not_found",Wp="authenticated_session_approve_started",Hp="create_authenticated_session_topic",Vp="cacaos_verified",Kp="store_authenticated_session",$p="subscribing_authenticated_session_topic",Gp="subscribe_authenticated_session_topic_success",Jp="publishing_authenticated_session_approve",Yp="no_internet_connection",Xp="invalid_cacao",Zp="subscribe_authenticated_session_topic_failure",Qp="authenticated_session_approve_publish_failure",eh="authenticated_session_pending_request_not_found";var th=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),o=a.charCodeAt(0);if(255!==n[o])throw new TypeError(a+" is ambiguous");n[o]=i}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,i=0;e[t]===c;)r++,t++;for(var a=(e.length-t)*u+1>>>0,o=new Uint8Array(a);e[t];){var l=n[e.charCodeAt(t)];if(255===l)return;for(var d=0,f=a-1;(0!==l||d<i)&&-1!==f;f--,d++)l+=s*o[f]>>>0,o[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var p=a-i;p!==a&&0===o[p];)p++;for(var h=new Uint8Array(r+(a-p)),v=r;p!==a;)h[v++]=o[p++];return h}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,a=t.length;i!==a&&0===t[i];)i++,n++;for(var o=(a-i)*l+1>>>0,u=new Uint8Array(o);i!==a;){for(var d=t[i],f=0,p=o-1;(0!==d||f<r)&&-1!==p;p--,f++)d+=256*u[p]>>>0,u[p]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");r=f,i++}for(var h=o-r;h!==o&&0===u[h];)h++;for(var v=c.repeat(n);h<o;++h)v+=e.charAt(u[h]);return v},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error("Non-".concat(t," character"))}}},nh=th,rh=function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},ih=function(){return A(function e(t,n,r){I(this,e),this.name=t,this.prefix=n,this.baseEncode=r},[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}])}(),ah=function(){return A(function e(t,n,r){if(I(this,e),this.name=t,this.prefix=n,void 0===n.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r},[{key:"decode",value:function(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(e){return sh(this,e)}}])}(),oh=function(){return A(function e(t){I(this,e),this.decoders=t},[{key:"or",value:function(e){return sh(this,e)}},{key:"decode",value:function(e){var t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}])}(),sh=function(e,t){return new oh(D(D({},e.decoders||j({},e.prefix,e)),t.decoders||j({},t.prefix,t)))},ch=function(){return A(function e(t,n,r,i){I(this,e),this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new ih(t,n,r),this.decoder=new ah(t,n,i)},[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}])}(),uh=function(e){var t=e.name,n=e.prefix,r=e.encode,i=e.decode;return new ch(t,n,r,i)},lh=function(e){var t=e.prefix,n=e.name,r=e.alphabet,i=nh(r,n),a=i.encode,o=i.decode;return uh({prefix:t,name:n,encode:a,decode:function(e){return rh(o(e))}})},dh=function(e){var t=e.name,n=e.prefix,r=e.bitsPerChar,i=e.alphabet;return uh({prefix:n,name:t,encode:function(e){return function(e,t,n){for(var r="="===t[t.length-1],i=(1<<n)-1,a="",o=0,s=0,c=0;c<e.length;++c)for(s=s<<8|e[c],o+=8;o>n;)a+=t[i&s>>(o-=n)];if(o&&(a+=t[i&s<<n-o]),r)for(;a.length*n&7;)a+="=";return a}(e,i,r)},decode:function(e){return function(e,t,n,r){for(var i={},a=0;a<t.length;++a)i[t[a]]=a;for(var o=e.length;"="===e[o-1];)--o;for(var s=new Uint8Array(o*n/8|0),c=0,u=0,l=0,d=0;d<o;++d){var f=i[e[d]];if(void 0===f)throw new SyntaxError("Non-".concat(r," character"));u=u<<n|f,(c+=n)>=8&&(c-=8,s[l++]=255&u>>c)}if(c>=n||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return s}(e,i,r,t)}})},fh=uh({prefix:"\0",name:"identity",encode:function(e){return function(e){return(new TextDecoder).decode(e)}(e)},decode:function(e){return function(e){return(new TextEncoder).encode(e)}(e)}}),ph=Object.freeze({__proto__:null,identity:fh}),hh=dh({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),vh=Object.freeze({__proto__:null,base2:hh}),gh=dh({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),mh=Object.freeze({__proto__:null,base8:gh}),wh=lh({prefix:"9",name:"base10",alphabet:"0123456789"}),yh=Object.freeze({__proto__:null,base10:wh}),bh=dh({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),kh=dh({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Eh=Object.freeze({__proto__:null,base16:bh,base16upper:kh}),Ch=dh({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ih=dh({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Nh=dh({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ah=dh({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Sh=dh({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ph=dh({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Oh=dh({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_h=dh({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Th=dh({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),xh=Object.freeze({__proto__:null,base32:Ch,base32upper:Ih,base32pad:Nh,base32padupper:Ah,base32hex:Sh,base32hexupper:Ph,base32hexpad:Oh,base32hexpadupper:_h,base32z:Th}),Rh=lh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Uh=lh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Dh=Object.freeze({__proto__:null,base36:Rh,base36upper:Uh}),jh=lh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Mh=lh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Lh=Object.freeze({__proto__:null,base58btc:jh,base58flickr:Mh}),qh=dh({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Bh=dh({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zh=dh({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fh=dh({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Wh=Object.freeze({__proto__:null,base64:qh,base64pad:Bh,base64url:zh,base64urlpad:Fh}),Hh=Array.from(""),Vh=Hh.reduce(function(e,t,n){return e[n]=t,e},[]),Kh=Hh.reduce(function(e,t,n){return e[t.codePointAt(0)]=n,e},[]);var $h=uh({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(function(e,t){return e+=Vh[t]},"")},decode:function(e){var t,n=[],r=C(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=Kh[i.codePointAt(0)];if(void 0===a)throw new Error("Non-base256emoji character: ".concat(i));n.push(a)}}catch(o){r.e(o)}finally{r.f()}return new Uint8Array(n)}}),Gh=Object.freeze({__proto__:null,base256emoji:$h}),Jh=function e(t,n,r){n=n||[];for(var i=r=r||0;t>=Zh;)n[r++]=255&t|Yh,t/=128;for(;t&Xh;)n[r++]=255&t|Yh,t>>>=7;return n[r]=0|t,e.bytes=r-i+1,n},Yh=128,Xh=-128,Zh=Math.pow(2,31);var Qh=function e(t,n){var r,i=0,a=(n=n||0,0),o=n,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");r=t[o++],i+=a<28?(r&tv)<<a:(r&tv)*Math.pow(2,a),a+=7}while(r>=ev);return e.bytes=o-n,i},ev=128,tv=127;var nv=Math.pow(2,7),rv=Math.pow(2,14),iv=Math.pow(2,21),av=Math.pow(2,28),ov=Math.pow(2,35),sv=Math.pow(2,42),cv=Math.pow(2,49),uv=Math.pow(2,56),lv=Math.pow(2,63),dv={encode:Jh,decode:Qh,encodingLength:function(e){return e<nv?1:e<rv?2:e<iv?3:e<av?4:e<ov?5:e<sv?6:e<cv?7:e<uv?8:e<lv?9:10}},fv=dv,pv=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return fv.encode(e,t,n),t},hv=function(e){return fv.encodingLength(e)},vv=function(e,t){var n=t.byteLength,r=hv(e),i=r+hv(n),a=new Uint8Array(i+n);return pv(e,a,0),pv(n,a,r),a.set(t,i),new gv(e,n,t,a)},gv=A(function e(t,n,r,i){I(this,e),this.code=t,this.size=n,this.digest=r,this.bytes=i}),mv=function(e){var t=e.name,n=e.code,r=e.encode;return new wv(t,n,r)},wv=function(){return A(function e(t,n,r){I(this,e),this.name=t,this.code=n,this.encode=r},[{key:"digest",value:function(e){var t=this;if(e instanceof Uint8Array){var n=this.encode(e);return n instanceof Uint8Array?vv(this.code,n):n.then(function(e){return vv(t.code,e)})}throw Error("Unknown type, must be binary type")}}])}(),yv=function(e){return function(){var t=q(x().m(function t(n){var r,i;return x().w(function(t){for(;;)switch(t.n){case 0:return r=Uint8Array,t.n=1,crypto.subtle.digest(e,n);case 1:return i=t.v,t.a(2,new r(i))}},t)}));return function(e){return t.apply(this,arguments)}}()},bv=mv({name:"sha2-256",code:18,encode:yv("SHA-256")}),kv=mv({name:"sha2-512",code:19,encode:yv("SHA-512")}),Ev=Object.freeze({__proto__:null,sha256:bv,sha512:kv}),Cv=rh,Iv={code:0,name:"identity",encode:Cv,digest:function(e){return vv(0,Cv(e))}},Nv=Object.freeze({__proto__:null,identity:Iv});new TextEncoder,new TextDecoder;var Av=D(D(D(D(D(D(D(D(D(D({},ph),vh),mh),yh),Eh),xh),Dh),Lh),Wh),Gh);function Sv(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}D(D({},Ev),Nv);var Pv=Sv("utf8","u",function(e){return"u"+new TextDecoder("utf8").decode(e)},function(e){return(new TextEncoder).encode(e.substring(1))}),Ov=Sv("ascii","a",function(e){for(var t="a",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},function(e){for(var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),_v=D({utf8:Pv,"utf-8":Pv,hex:Av.base16,latin1:Ov,ascii:Ov,binary:Ov},Av);function Tv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",n=_v[t];if(!n)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode("".concat(n.prefix).concat(e)):globalThis.Buffer.from(e,"utf8")}var xv=Object.defineProperty,Rv=function(e,t,n){return function(e,t,n){return t in e?xv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Uv=function(){return A(function e(t,n){var r=this;I(this,e),this.core=t,this.logger=n,Rv(this,"keychain",new Map),Rv(this,"name","keychain"),Rv(this,"version","0.3"),Rv(this,"initialized",!1),Rv(this,"storagePrefix",bf),Rv(this,"init",q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:if(r.initialized){e.n=2;break}return e.n=1,r.getKeyChain();case 1:T(t=e.v)<"u"&&(r.keychain=t),r.initialized=!0;case 2:return e.a(2)}},e)}))),Rv(this,"has",function(e){return r.isInitialized(),r.keychain.has(e)}),Rv(this,"set",function(){var e=q(x().m(function e(t,n){return x().w(function(e){for(;;)switch(e.n){case 0:return r.isInitialized(),r.keychain.set(t,n),e.n=1,r.persist();case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),Rv(this,"get",function(e){r.isInitialized();var t=r.keychain.get(e);if(T(t)>"u"){var n=jd("NO_MATCHING_KEY","".concat(r.name,": ").concat(e)).message;throw new Error(n)}return t}),Rv(this,"del",function(){var e=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return r.isInitialized(),r.keychain.delete(t),e.n=1,r.persist();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),this.core=t,this.logger=ee(n,this.name)},[{key:"context",get:function(){return re(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"setKeyChain",value:(n=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.setItem(this.storageKey,qo(t));case 1:return e.a(2)}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getKeyChain",value:(t=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.getItem(this.storageKey);case 1:return t=e.v,e.a(2,T(t)<"u"?Bo(t):void 0)}},e,this)})),function(){return t.apply(this,arguments)})},{key:"persist",value:(e=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.setKeyChain(this.keychain);case 1:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"isInitialized",value:function(){if(!this.initialized){var e=jd("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]);var e,t,n}(),Dv=Object.defineProperty,jv=function(e,t,n){return function(e,t,n){return t in e?Dv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Mv=function(){return A(function e(t,n,r){var i=this;I(this,e),this.core=t,this.logger=n,jv(this,"name","crypto"),jv(this,"keychain"),jv(this,"randomSessionIdentifier",Gl()),jv(this,"initialized",!1),jv(this,"init",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(i.initialized){e.n=2;break}return e.n=1,i.keychain.init();case 1:i.initialized=!0;case 2:return e.a(2)}},e)}))),jv(this,"hasKeys",function(e){return i.isInitialized(),i.keychain.has(e)}),jv(this,"getClientId",q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.n){case 0:return i.isInitialized(),e.n=1,i.getClientSeed();case 1:return t=e.v,n=pe(t),e.a(2,he(n.publicKey))}},e)}))),jv(this,"generateKeyPair",function(){i.isInitialized();var e=function(){var e=Ol.utils.randomPrivateKey(),t=Ol.getPublicKey(e);return{privateKey:H(e,Hl),publicKey:H(t,Hl)}}();return i.setPrivateKey(e.publicKey,e.privateKey)}),jv(this,"signJWT",function(){var e=q(x().m(function e(t){var n,r,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:return i.isInitialized(),e.n=1,i.getClientSeed();case 1:return n=e.v,r=pe(n),a=i.randomSessionIdentifier,o=If,e.n=2,ve(a,t,o,r);case 2:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}()),jv(this,"generateSharedKey",function(e,t,n){i.isInitialized();var r=function(e,t){var n=Ol.getSharedSecret(W(e,Hl),W(t,Hl)),r=iu(fu,n,void 0,void 0,32);return H(r,Hl)}(i.getPrivateKey(e),t);return i.setSymKey(r,n)}),jv(this,"setSymKey",function(){var e=q(x().m(function e(t,n){var r;return x().w(function(e){for(;;)switch(e.n){case 0:return i.isInitialized(),r=n||Jl(t),e.n=1,i.keychain.set(r,t);case 1:return e.a(2,r)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),jv(this,"deleteKeyPair",function(){var e=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return i.isInitialized(),e.n=1,i.keychain.del(t);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),jv(this,"deleteSymKey",function(){var e=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return i.isInitialized(),e.n=1,i.keychain.del(t);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),jv(this,"encode",function(){var e=q(x().m(function e(t,n,r){var a,o,s,c,u,l,d;return x().w(function(e){for(;;)switch(e.n){case 0:if(i.isInitialized(),a=cd(r),o=ge(n),!ld(a)){e.n=1;break}return e.a(2,rd(o,null==r?void 0:r.encoding));case 1:if(!ud(a)){e.n=3;break}return s=a.senderPublicKey,c=a.receiverPublicKey,e.n=2,i.generateSharedKey(s,c);case 2:t=e.v;case 3:return u=i.getSymKey(t),l=a.type,d=a.senderPublicKey,e.a(2,td({type:l,symKey:u,message:o,senderPublicKey:d,encoding:null==r?void 0:r.encoding}))}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),jv(this,"decode",function(){var e=q(x().m(function e(t,n,r){var a,o,s,c,u,l,d,f,p;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i.isInitialized(),!ld(a=sd(n,r))){e.n=1;break}return o=id(n,null==r?void 0:r.encoding),e.a(2,me(o));case 1:if(!ud(a)){e.n=3;break}return s=a.receiverPublicKey,c=a.senderPublicKey,e.n=2,i.generateSharedKey(s,c);case 2:t=e.v;case 3:return e.p=3,u=i.getSymKey(t),l=nd({symKey:u,encoded:n,encoding:null==r?void 0:r.encoding}),e.a(2,me(l));case 4:return e.p=4,d=e.v,f=i.logger,p="Failed to decode message from topic: '".concat(t,"', clientId: '"),e.n=5,i.getClientId();case 5:f.error.call(f,p.concat.call(p,e.v,"'")),i.logger.error(d);case 6:return e.a(2)}},e,null,[[3,4]])}));return function(t,n,r){return e.apply(this,arguments)}}()),jv(this,"getPayloadType",function(e){return Zl(od({encoded:e,encoding:arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vl}).type)}),jv(this,"getPayloadSenderPublicKey",function(e){var t=od({encoded:e,encoding:arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vl});return t.senderPublicKey?H(t.senderPublicKey,Hl):void 0}),this.core=t,this.logger=ee(n,this.name),this.keychain=r||new Uv(this.core,this.logger)},[{key:"context",get:function(){return re(this.logger)}},{key:"setPrivateKey",value:(t=q(x().m(function e(t,n){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.keychain.set(t,n);case 1:return e.a(2,t)}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"getPrivateKey",value:function(e){return this.keychain.get(e)}},{key:"getClientSeed",value:(e=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:t="",e.p=1,t=this.keychain.get(Cf),e.n=3;break;case 2:return e.p=2,e.v,t=Gl(),e.n=3,this.keychain.set(Cf,t);case 3:return e.a(2,Tv(t,"base16"))}},e,this,[[1,2]])})),function(){return e.apply(this,arguments)})},{key:"getSymKey",value:function(e){return this.keychain.get(e)}},{key:"isInitialized",value:function(){if(!this.initialized){var e=jd("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]);var e,t}(),Lv=Object.defineProperty,qv=Object.defineProperties,Bv=Object.getOwnPropertyDescriptors,zv=Object.getOwnPropertySymbols,Fv=Object.prototype.hasOwnProperty,Wv=Object.prototype.propertyIsEnumerable,Hv=function(e,t,n){return t in e?Lv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Vv=function(e,t){for(var n in t||(t={}))Fv.call(t,n)&&Hv(e,n,t[n]);if(zv){var r,i=C(zv(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Wv.call(t,n)&&Hv(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},Kv=function(e,t){return qv(e,Bv(t))},$v=function(e,t,n){return Hv(e,"symbol"!=T(t)?t+"":t,n)},Gv=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t,[e,n])).logger=e,r.core=n,$v(m(r),"messages",new Map),$v(m(r),"messagesWithoutClientAck",new Map),$v(m(r),"name","messages"),$v(m(r),"version","0.3"),$v(m(r),"initialized",!1),$v(m(r),"storagePrefix",bf),$v(m(r),"init",q(x().m(function e(){var t,n,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r.initialized){e.n=6;break}return r.logger.trace("Initialized"),e.p=1,e.n=2,r.getRelayerMessages();case 2:return T(t=e.v)<"u"&&(r.messages=t),e.n=3,r.getRelayerMessagesWithoutClientAck();case 3:T(n=e.v)<"u"&&(r.messagesWithoutClientAck=n),r.logger.debug("Successfully Restored records for ".concat(r.name)),r.logger.trace({type:"method",method:"restore",size:r.messages.size}),e.n=5;break;case 4:e.p=4,i=e.v,r.logger.debug("Failed to Restore records for ".concat(r.name)),r.logger.error(i);case 5:return e.p=5,r.initialized=!0,e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}))),$v(m(r),"set",function(){var e=q(x().m(function e(t,n,i){var a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:if(r.isInitialized(),a=Yl(n),T(o=r.messages.get(t))>"u"&&(o={}),!(T(o[a])<"u")){e.n=1;break}return e.a(2,a);case 1:return o[a]=n,r.messages.set(t,o),i===zf&&(s=r.messagesWithoutClientAck.get(t)||{},r.messagesWithoutClientAck.set(t,Kv(Vv({},s),j({},a,n)))),e.n=2,r.persist();case 2:return e.a(2,a)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),$v(m(r),"get",function(e){r.isInitialized();var t=r.messages.get(e);return T(t)>"u"&&(t={}),t}),$v(m(r),"getWithoutAck",function(e){r.isInitialized();var t,n={},i=C(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.messagesWithoutClientAck.get(a)||{};n[a]=Object.values(o)}}catch(s){i.e(s)}finally{i.f()}return n}),$v(m(r),"has",function(e,t){return r.isInitialized(),T(r.get(e)[Yl(t)])<"u"}),$v(m(r),"ack",function(){var e=q(x().m(function e(t,n){var i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(r.isInitialized(),!(T(i=r.messagesWithoutClientAck.get(t))>"u")){e.n=1;break}return e.a(2);case 1:return a=Yl(n),delete i[a],0===Object.keys(i).length?r.messagesWithoutClientAck.delete(t):r.messagesWithoutClientAck.set(t,i),e.n=2,r.persist();case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),$v(m(r),"del",function(){var e=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return r.isInitialized(),r.messages.delete(t),r.messagesWithoutClientAck.delete(t),e.n=1,r.persist();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),r.logger=ee(e,r.name),r.core=n,r}return w(t,e),A(t,[{key:"context",get:function(){return re(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"storageKeyWithoutClientAck",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}},{key:"setRelayerMessages",value:(o=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.setItem(this.storageKey,qo(t));case 1:return e.a(2)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"setRelayerMessagesWithoutClientAck",value:(a=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.setItem(this.storageKeyWithoutClientAck,qo(t));case 1:return e.a(2)}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getRelayerMessages",value:(i=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.getItem(this.storageKey);case 1:return t=e.v,e.a(2,T(t)<"u"?Bo(t):void 0)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"getRelayerMessagesWithoutClientAck",value:(r=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.getItem(this.storageKeyWithoutClientAck);case 1:return t=e.v,e.a(2,T(t)<"u"?Bo(t):void 0)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"persist",value:(n=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.setRelayerMessages(this.messages);case 1:return e.n=2,this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck);case 2:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"isInitialized",value:function(){if(!this.initialized){var e=jd("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]);var n,r,i,a,o}(Di),Jv=Object.defineProperty,Yv=Object.defineProperties,Xv=Object.getOwnPropertyDescriptors,Zv=Object.getOwnPropertySymbols,Qv=Object.prototype.hasOwnProperty,eg=Object.prototype.propertyIsEnumerable,tg=function(e,t,n){return t in e?Jv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ng=function(e,t){for(var n in t||(t={}))Qv.call(t,n)&&tg(e,n,t[n]);if(Zv){var r,i=C(Zv(t));try{for(i.s();!(r=i.n()).done;){n=r.value;eg.call(t,n)&&tg(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},rg=function(e,t){return Yv(e,Xv(t))},ig=function(e,t,n){return tg(e,"symbol"!=T(t)?t+"":t,n)},ag=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t,[e,n])).relayer=e,r.logger=n,ig(m(r),"events",new X.EventEmitter),ig(m(r),"name","publisher"),ig(m(r),"queue",new Map),ig(m(r),"publishTimeout",V.toMiliseconds(V.ONE_MINUTE)),ig(m(r),"initialPublishTimeout",V.toMiliseconds(15*V.ONE_SECOND)),ig(m(r),"needsTransportRestart",!1),ig(m(r),"publish",function(){var e=q(x().m(function e(t,n,i){var a,o,s,c,u,l,d,f,p,h;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return r.logger.debug("Publishing Payload"),r.logger.trace({type:"method",method:"publish",params:{topic:t,message:n,opts:i}}),o=(null==i?void 0:i.ttl)||Nf,s=fd(i),c=(null==i?void 0:i.prompt)||!1,u=(null==i?void 0:i.tag)||0,l=(null==i?void 0:i.id)||we().toString(),d={topic:t,message:n,opts:{ttl:o,relay:s,prompt:c,tag:u,id:l,attestation:null==i?void 0:i.attestation,tvf:null==i?void 0:i.tvf}},f="Failed to publish payload, please try again. id:".concat(l," tag:").concat(u),e.p=1,p=new Promise(function(){var e=q(x().m(function e(a){var s,f,p;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return s=function(e){var t=e.id;d.opts.id===t&&(r.removeRequestFromQueue(t),r.relayer.events.removeListener(Rf,s),a(d))},r.relayer.events.on(Rf,s),f=Fo(new Promise(function(e,a){r.rpcPublish({topic:t,message:n,ttl:o,prompt:c,tag:u,id:l,attestation:null==i?void 0:i.attestation,tvf:null==i?void 0:i.tvf}).then(e).catch(function(e){r.logger.warn(e,null==e?void 0:e.message),a(e)})}),r.initialPublishTimeout,"Failed initial publish, retrying.... id:".concat(l," tag:").concat(u)),e.p=1,e.n=2,f;case 2:r.events.removeListener(Rf,s),e.n=4;break;case 3:e.p=3,p=e.v,r.queue.set(l,rg(ng({},d),{attempt:1})),r.logger.warn(p,null==p?void 0:p.message);case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()),r.logger.trace({type:"method",method:"publish",params:{id:l,topic:t,message:n,opts:i}}),e.n=2,Fo(p,r.publishTimeout,f);case 2:e.n=4;break;case 3:if(e.p=3,h=e.v,r.logger.debug("Failed to Publish Payload"),r.logger.error(h),null==(a=null==i?void 0:i.internal)||!a.throwOnFailedPublish){e.n=4;break}throw h;case 4:return e.p=4,r.queue.delete(l),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t,n,r){return e.apply(this,arguments)}}()),ig(m(r),"on",function(e,t){r.events.on(e,t)}),ig(m(r),"once",function(e,t){r.events.once(e,t)}),ig(m(r),"off",function(e,t){r.events.off(e,t)}),ig(m(r),"removeListener",function(e,t){r.events.removeListener(e,t)}),r.relayer=e,r.logger=ee(n,r.name),r.registerEventListeners(),r}return w(t,e),A(t,[{key:"context",get:function(){return re(this.logger)}},{key:"rpcPublish",value:(n=q(x().m(function e(t){var n,r,i,a,o,s,c,u,l,d,f,p,h,v,g;return x().w(function(e){for(;;)switch(e.n){case 0:return o=t.topic,s=t.message,c=t.ttl,u=void 0===c?Nf:c,l=t.prompt,d=t.tag,f=t.id,p=t.attestation,h=t.tvf,v={method:pd(fd().protocol).publish,params:ng({topic:o,message:s,ttl:u,prompt:l,tag:d,attestation:p},h),id:f},Bd(null==(n=v.params)?void 0:n.prompt)&&(null==(r=v.params)||delete r.prompt),Bd(null==(i=v.params)?void 0:i.tag)&&(null==(a=v.params)||delete a.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:v}),e.n=1,this.relayer.request(v);case 1:return g=e.v,e.a(2,(this.relayer.events.emit(Rf,t),this.logger.debug("Successfully Published Payload"),g))}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"removeRequestFromQueue",value:function(e){this.queue.delete(e)}},{key:"checkQueue",value:function(){var e=this;this.queue.forEach(function(){var t=q(x().m(function t(n,r){var i,a,o,s,c;return x().w(function(t){for(;;)switch(t.n){case 0:return i=n.attempt+1,e.queue.set(r,rg(ng({},n),{attempt:i})),a=n.topic,o=n.message,s=n.opts,c=n.attestation,e.logger.warn({},"Publisher: queue->publishing: ".concat(n.opts.id,", tag: ").concat(n.opts.tag,", attempt: ").concat(i)),t.n=1,e.rpcPublish(rg(ng({},n),{topic:a,message:o,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:c,tvf:s.tvf}));case 1:e.logger.warn({},"Publisher: queue->published: ".concat(n.opts.id));case 2:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}())}},{key:"registerEventListeners",value:function(){var e=this;this.relayer.core.heartbeat.on(ae.pulse,function(){if(e.needsTransportRestart)return e.needsTransportRestart=!1,void e.relayer.events.emit(xf);e.checkQueue()}),this.relayer.on(Pf,function(t){e.removeRequestFromQueue(t.id.toString())})}}]);var n}(ji),og=Object.defineProperty,sg=function(e,t,n){return function(e,t,n){return t in e?og(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},cg=function(){return A(function e(){var t=this;I(this,e),sg(this,"map",new Map),sg(this,"set",function(e,n){var r=t.get(e);t.exists(e,n)||t.map.set(e,[].concat(P(r),[n]))}),sg(this,"get",function(e){return t.map.get(e)||[]}),sg(this,"exists",function(e,n){return t.get(e).includes(n)}),sg(this,"delete",function(e,n){if(T(n)>"u")t.map.delete(e);else if(t.map.has(e)){var r=t.get(e);if(t.exists(e,n)){var i=r.filter(function(e){return e!==n});i.length?t.map.set(e,i):t.map.delete(e)}}}),sg(this,"clear",function(){t.map.clear()})},[{key:"topics",get:function(){return Array.from(this.map.keys())}}])}(),ug=Object.defineProperty,lg=Object.defineProperties,dg=Object.getOwnPropertyDescriptors,fg=Object.getOwnPropertySymbols,pg=Object.prototype.hasOwnProperty,hg=Object.prototype.propertyIsEnumerable,vg=function(e,t,n){return t in e?ug(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},gg=function(e,t){for(var n in t||(t={}))pg.call(t,n)&&vg(e,n,t[n]);if(fg){var r,i=C(fg(t));try{for(i.s();!(r=i.n()).done;){n=r.value;hg.call(t,n)&&vg(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},mg=function(e,t){return lg(e,dg(t))},wg=function(e,t,n){return vg(e,"symbol"!=T(t)?t+"":t,n)},yg=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t,[e,n])).relayer=e,r.logger=n,wg(m(r),"subscriptions",new Map),wg(m(r),"topicMap",new cg),wg(m(r),"events",new X.EventEmitter),wg(m(r),"name","subscription"),wg(m(r),"version","0.3"),wg(m(r),"pending",new Map),wg(m(r),"cached",[]),wg(m(r),"initialized",!1),wg(m(r),"storagePrefix",bf),wg(m(r),"subscribeTimeout",V.toMiliseconds(V.ONE_MINUTE)),wg(m(r),"initialSubscribeTimeout",V.toMiliseconds(15*V.ONE_SECOND)),wg(m(r),"clientId"),wg(m(r),"batchSubscribeTopicsLimit",500),wg(m(r),"init",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(r.initialized){e.n=1;break}return r.logger.trace("Initialized"),r.registerEventListeners(),e.n=1,r.restore();case 1:r.initialized=!0;case 2:return e.a(2)}},e)}))),wg(m(r),"subscribe",function(){var e=q(x().m(function e(t,n){var i,a,o,s;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return r.isInitialized(),r.logger.debug("Subscribing Topic"),r.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:n}}),e.p=1,i=fd(n),a={topic:t,relay:i,transportType:null==n?void 0:n.transportType},r.pending.set(t,a),e.n=2,r.rpcSubscribe(t,i,n);case 2:return o=e.v,e.a(2,("string"==typeof o&&(r.onSubscribe(o,a),r.logger.debug("Successfully Subscribed Topic"),r.logger.trace({type:"method",method:"subscribe",params:{topic:t,opts:n}})),o));case 3:throw e.p=3,s=e.v,r.logger.debug("Failed to Subscribe Topic"),r.logger.error(s),s;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t,n){return e.apply(this,arguments)}}()),wg(m(r),"unsubscribe",function(){var e=q(x().m(function e(t,n){return x().w(function(e){for(;;)switch(e.n){case 0:if(r.isInitialized(),!(T(null==n?void 0:n.id)<"u")){e.n=2;break}return e.n=1,r.unsubscribeById(t,n.id,n);case 1:e.n=3;break;case 2:return e.n=3,r.unsubscribeByTopic(t,n);case 3:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),wg(m(r),"isSubscribed",function(e){return new Promise(function(t){t(r.topicMap.topics.includes(e))})}),wg(m(r),"isKnownTopic",function(e){return new Promise(function(t){t(r.topicMap.topics.includes(e)||r.pending.has(e)||r.cached.some(function(t){return t.topic===e}))})}),wg(m(r),"on",function(e,t){r.events.on(e,t)}),wg(m(r),"once",function(e,t){r.events.once(e,t)}),wg(m(r),"off",function(e,t){r.events.off(e,t)}),wg(m(r),"removeListener",function(e,t){r.events.removeListener(e,t)}),wg(m(r),"start",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.onConnect();case 1:return e.a(2)}},e)}))),wg(m(r),"stop",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.onDisconnect();case 1:return e.a(2)}},e)}))),wg(m(r),"restart",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.restore();case 1:return e.n=2,r.onRestart();case 2:return e.a(2)}},e)}))),wg(m(r),"checkPending",q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:if(0!==r.pending.size||r.initialized&&r.relayer.connected){e.n=1;break}return e.a(2);case 1:return t=[],r.pending.forEach(function(e){t.push(e)}),e.n=2,r.batchSubscribe(t);case 2:return e.a(2)}},e)}))),wg(m(r),"registerEventListeners",function(){r.relayer.core.heartbeat.on(ae.pulse,q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.checkPending();case 1:return e.a(2)}},e)}))),r.events.on(Hf,function(){var e=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:return n=Hf,r.logger.info("Emitting ".concat(n)),r.logger.debug({type:"event",event:n,data:t}),e.n=1,r.persist();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),r.events.on(Vf,function(){var e=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:return n=Vf,r.logger.info("Emitting ".concat(n)),r.logger.debug({type:"event",event:n,data:t}),e.n=1,r.persist();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())}),r.relayer=e,r.logger=ee(n,r.name),r.clientId="",r}return w(t,e),A(t,[{key:"context",get:function(){return re(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}},{key:"length",get:function(){return this.subscriptions.size}},{key:"ids",get:function(){return Array.from(this.subscriptions.keys())}},{key:"values",get:function(){return Array.from(this.subscriptions.values())}},{key:"topics",get:function(){return this.topicMap.topics}},{key:"hasAnyTopics",get:function(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}},{key:"hasSubscription",value:function(e,t){var n=!1;try{n=this.getSubscription(e).topic===t}catch(r){}return n}},{key:"reset",value:function(){this.cached=[],this.initialized=!0}},{key:"onDisable",value:function(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}},{key:"unsubscribeByTopic",value:(k=q(x().m(function e(t,n){var r,i=this;return x().w(function(e){for(;;)switch(e.n){case 0:return r=this.topicMap.get(t),e.n=1,Promise.all(r.map(function(){var e=q(x().m(function e(r){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,i.unsubscribeById(t,r,n);case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:return e.a(2)}},e,this)})),function(e,t){return k.apply(this,arguments)})},{key:"unsubscribeById",value:(b=q(x().m(function e(t,n,r){var i,a,o;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}}),e.p=1,i=fd(r),e.n=2,this.restartToComplete({topic:t,id:n,relay:i});case 2:return e.n=3,this.rpcUnsubscribe(t,n,i);case 3:return a=Md("USER_DISCONNECTED","".concat(this.name,", ").concat(t)),e.n=4,this.onUnsubscribe(t,n,a);case 4:this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:r}}),e.n=6;break;case 5:throw e.p=5,o=e.v,this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o;case 6:return e.a(2)}},e,this,[[1,5]])})),function(e,t,n){return b.apply(this,arguments)})},{key:"rpcSubscribe",value:(y=q(x().m(function e(t,n,r){var i,a,o,s,c,u,l,d=this;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r&&(null==r?void 0:r.transportType)!==Bf){e.n=1;break}return e.n=1,this.restartToComplete({topic:t,id:t,relay:n});case 1:return a={method:pd(n.protocol).subscribe,params:{topic:t}},this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),o=null==(i=null==r?void 0:r.internal)?void 0:i.throwOnFailedPublish,e.p=2,e.n=3,this.getSubscriptionId(t);case 3:if(s=e.v,(null==r?void 0:r.transportType)!==qf){e.n=4;break}return e.a(2,(setTimeout(function(){(d.relayer.connected||d.relayer.connecting)&&d.relayer.request(a).catch(function(e){return d.logger.warn(e)})},V.toMiliseconds(V.ONE_SECOND)),s));case 4:return c=new Promise(function(){var e=q(x().m(function e(n){var r,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=function(e){e.topic===t&&(d.events.removeListener(Hf,r),n(e.id))},d.events.on(Hf,r),e.p=1,e.n=2,Fo(new Promise(function(e,t){d.relayer.request(a).catch(function(e){d.logger.warn(e,null==e?void 0:e.message),t(e)}).then(e)}),d.initialSubscribeTimeout,"Subscribing to ".concat(t," failed, please try again"));case 2:i=e.v,d.events.removeListener(Hf,r),n(i),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()),e.n=5,Fo(c,this.subscribeTimeout,"Subscribing to ".concat(t," failed, please try again"));case 5:if((u=e.v)||!o){e.n=6;break}throw new Error("Subscribing to ".concat(t," failed, please try again"));case 6:return e.a(2,u?s:null);case 7:if(e.p=7,l=e.v,this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(xf),!o){e.n=8;break}throw l;case 8:return e.a(2,null)}},e,this,[[2,7]])})),function(e,t,n){return y.apply(this,arguments)})},{key:"rpcBatchSubscribe",value:(g=q(x().m(function e(t){var n,r,i=this;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.length){e.n=1;break}return e.a(2);case 1:return n=t[0].relay,r={method:pd(n.protocol).batchSubscribe,params:{topics:t.map(function(e){return e.topic})}},this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),e.p=2,e.n=3,Fo(new Promise(function(e){i.relayer.request(r).catch(function(e){return i.logger.warn(e)}).then(e)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again");case 3:return e.n=4,e.v;case 4:e.n=6;break;case 5:e.p=5,e.v,this.relayer.events.emit(xf);case 6:return e.a(2)}},e,this,[[2,5]])})),function(e){return g.apply(this,arguments)})},{key:"rpcBatchFetchMessages",value:(h=q(x().m(function e(t){var n,r,i,a=this;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.length){e.n=1;break}return e.a(2);case 1:return n=t[0].relay,r={method:pd(n.protocol).batchFetchMessages,params:{topics:t.map(function(e){return e.topic})}},this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),e.p=2,e.n=3,Fo(new Promise(function(e,t){a.relayer.request(r).catch(function(e){a.logger.warn(e),t(e)}).then(e)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again");case 3:return e.n=4,e.v;case 4:i=e.v,e.n=6;break;case 5:e.p=5,e.v,this.relayer.events.emit(xf);case 6:return e.a(2,i)}},e,this,[[2,5]])})),function(e){return h.apply(this,arguments)})},{key:"rpcUnsubscribe",value:function(e,t,n){var r={method:pd(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),this.relayer.request(r)}},{key:"onSubscribe",value:function(e,t){this.setSubscription(e,mg(gg({},t),{id:e})),this.pending.delete(t.topic)}},{key:"onBatchSubscribe",value:function(e){var t=this;e.length&&e.forEach(function(e){t.setSubscription(e.id,gg({},e)),t.pending.delete(e.topic)})}},{key:"onUnsubscribe",value:(p=q(x().m(function e(t,n,r){return x().w(function(e){for(;;)switch(e.n){case 0:return this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,r),e.n=1,this.relayer.messages.del(t);case 1:return e.a(2)}},e,this)})),function(e,t,n){return p.apply(this,arguments)})},{key:"setRelayerSubscriptions",value:(f=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.relayer.core.storage.setItem(this.storageKey,t);case 1:return e.a(2)}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"getRelayerSubscriptions",value:(d=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.relayer.core.storage.getItem(this.storageKey);case 1:return e.a(2,e.v)}},e,this)})),function(){return d.apply(this,arguments)})},{key:"setSubscription",value:function(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}},{key:"addSubscription",value:function(e,t){this.subscriptions.set(e,gg({},t)),this.topicMap.set(t.topic,e),this.events.emit(Hf,t)}},{key:"getSubscription",value:function(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});var t=this.subscriptions.get(e);if(!t){var n=jd("NO_MATCHING_KEY","".concat(this.name,": ").concat(e)).message;throw new Error(n)}return t}},{key:"deleteSubscription",value:function(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});var n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Vf,mg(gg({},n),{reason:t}))}},{key:"persist",value:(l=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.setRelayerSubscriptions(this.values);case 1:this.events.emit(Kf);case 2:return e.a(2)}},e,this)})),function(){return l.apply(this,arguments)})},{key:"onRestart",value:(u=q(x().m(function e(){var t,n,r,i;return x().w(function(e){for(;;)switch(e.n){case 0:if(!this.cached.length){e.n=3;break}t=P(this.cached),n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit),r=0;case 1:if(!(r<n)){e.n=3;break}return i=t.splice(0,this.batchSubscribeTopicsLimit),e.n=2,this.batchSubscribe(i);case 2:r++,e.n=1;break;case 3:this.events.emit($f);case 4:return e.a(2)}},e,this)})),function(){return u.apply(this,arguments)})},{key:"restore",value:(c=q(x().m(function e(){var t,n,r,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.getRelayerSubscriptions();case 1:if(!(T(t=e.v)>"u")&&t.length){e.n=2;break}return e.a(2);case 2:if(!this.subscriptions.size){e.n=3;break}throw n=jd("RESTORE_WILL_OVERRIDE",this.name),r=n.message,this.logger.error(r),this.logger.error("".concat(this.name,": ").concat(JSON.stringify(this.values))),new Error(r);case 3:this.cached=t,this.logger.debug("Successfully Restored subscriptions for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",subscriptions:this.values}),e.n=5;break;case 4:e.p=4,i=e.v,this.logger.debug("Failed to Restore subscriptions for ".concat(this.name)),this.logger.error(i);case 5:return e.a(2)}},e,this,[[0,4]])})),function(){return c.apply(this,arguments)})},{key:"batchSubscribe",value:(s=q(x().m(function e(t){var n,r=this;return x().w(function(e){for(;;)switch(e.n){case 0:if(!t.length){e.n=3;break}return e.n=1,this.rpcBatchSubscribe(t);case 1:return n=this,e.n=2,Promise.all(t.map(function(){var e=q(x().m(function e(t){var n,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:return n=mg,i=gg({},t),e.n=1,r.getSubscriptionId(t.topic);case 1:return a=e.v,e.a(2,n(i,{id:a}))}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:n.onBatchSubscribe.call(n,e.v);case 3:return e.a(2)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"batchFetchMessages",value:(o=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:if(t.length){e.n=1;break}return e.a(2);case 1:return this.logger.trace("Fetching batch messages for ".concat(t.length," subscriptions")),e.n=2,this.rpcBatchFetchMessages(t);case 2:if(!(n=e.v)||!n.messages){e.n=4;break}return e.n=3,as(V.toMiliseconds(V.ONE_SECOND));case 3:return e.n=4,this.relayer.handleBatchMessageEvents(n.messages);case 4:return e.a(2)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"onConnect",value:(a=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.restart();case 1:this.reset();case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"onDisconnect",value:function(){this.onDisable()}},{key:"isInitialized",value:function(){if(!this.initialized){var e=jd("NOT_INITIALIZED",this.name).message;throw new Error(e)}}},{key:"restartToComplete",value:(i=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:if(this.relayer.connected||this.relayer.connecting){e.n=1;break}return this.cached.push(t),e.n=1,this.relayer.transportOpen();case 1:return e.a(2)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getClientId",value:(r=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(this.clientId){e.n=2;break}return e.n=1,this.relayer.core.crypto.getClientId();case 1:this.clientId=e.v;case 2:return e.a(2,this.clientId)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getSubscriptionId",value:(n=q(x().m(function e(t){var n,r,i;return x().w(function(e){for(;;)switch(e.n){case 0:return n=Yl,r=t,e.n=1,this.getClientId();case 1:return i=e.v,e.a(2,n(r+i))}},e,this)})),function(e){return n.apply(this,arguments)})}]);var n,r,i,a,o,s,c,u,l,d,f,p,h,g,y,b,k}(qi),bg=Object.defineProperty,kg=Object.getOwnPropertySymbols,Eg=Object.prototype.hasOwnProperty,Cg=Object.prototype.propertyIsEnumerable,Ig=function(e,t,n){return t in e?bg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ng=function(e,t){for(var n in t||(t={}))Eg.call(t,n)&&Ig(e,n,t[n]);if(kg){var r,i=C(kg(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Cg.call(t,n)&&Ig(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},Ag=function(e,t,n){return Ig(e,"symbol"!=T(t)?t+"":t,n)},Sg=function(e){function t(e){var n;return I(this,t),n=v(this,t,[e]),Ag(m(n),"protocol","wc"),Ag(m(n),"version",2),Ag(m(n),"core"),Ag(m(n),"logger"),Ag(m(n),"events",new X.EventEmitter),Ag(m(n),"provider"),Ag(m(n),"messages"),Ag(m(n),"subscriber"),Ag(m(n),"publisher"),Ag(m(n),"name","relayer"),Ag(m(n),"transportExplicitlyClosed",!1),Ag(m(n),"initialized",!1),Ag(m(n),"connectionAttemptInProgress",!1),Ag(m(n),"relayUrl"),Ag(m(n),"projectId"),Ag(m(n),"packageName"),Ag(m(n),"bundleId"),Ag(m(n),"hasExperiencedNetworkDisruption",!1),Ag(m(n),"pingTimeout"),Ag(m(n),"heartBeatTimeout",V.toMiliseconds(V.THIRTY_SECONDS+V.FIVE_SECONDS)),Ag(m(n),"reconnectTimeout"),Ag(m(n),"connectPromise"),Ag(m(n),"reconnectInProgress",!1),Ag(m(n),"requestsInFlight",[]),Ag(m(n),"connectTimeout",V.toMiliseconds(15*V.ONE_SECOND)),Ag(m(n),"request",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.logger.debug("Publishing Request Payload"),a=t.id||we().toString(),e.n=1,n.toEstablishConnection();case 1:return e.p=1,n.logger.trace({id:a,method:t.method,topic:null==(r=t.params)?void 0:r.topic},"relayer.request - publishing..."),o="".concat(a,":").concat((null==(i=t.params)?void 0:i.tag)||""),n.requestsInFlight.push(o),e.n=2,n.provider.request(t);case 2:return s=e.v,e.a(2,(n.requestsInFlight=n.requestsInFlight.filter(function(e){return e!==o}),s));case 3:throw e.p=3,c=e.v,n.logger.debug("Failed to Publish Request: ".concat(a)),c;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()),Ag(m(n),"resetPingTimeout",function(){Oo()&&(clearTimeout(n.pingTimeout),n.pingTimeout=setTimeout(function(){var e,t,r,i;try{n.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(i=null==(r=null==(t=null==(e=n.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||i.call(r)}catch(mn){n.logger.warn(mn,null==mn?void 0:mn.message)}},n.heartBeatTimeout))}),Ag(m(n),"onPayloadHandler",function(e){n.onProviderPayload(e),n.resetPingTimeout()}),Ag(m(n),"onConnectHandler",function(){n.logger.warn({},"Relayer connected "),n.startPingTimeout(),n.events.emit(Of)}),Ag(m(n),"onDisconnectHandler",function(){n.logger.warn({},"Relayer disconnected "),n.requestsInFlight=[],n.onProviderDisconnect()}),Ag(m(n),"onProviderErrorHandler",function(e){n.logger.fatal("Fatal socket error: ".concat(e.message)),n.events.emit(Tf,e),n.logger.fatal("Fatal socket error received, closing transport"),n.transportClose()}),Ag(m(n),"registerProviderListeners",function(){n.provider.on(Uf,n.onPayloadHandler),n.provider.on(Df,n.onConnectHandler),n.provider.on(jf,n.onDisconnectHandler),n.provider.on(Mf,n.onProviderErrorHandler)}),n.core=e.core,n.logger=T(e.logger)<"u"&&"string"!=typeof e.logger?ee(e.logger,n.name):oe(Z({level:e.logger||"error"})),n.messages=new Gv(n.logger,e.core),n.subscriber=new yg(m(n),n.logger),n.publisher=new ag(m(n),n.logger),n.relayUrl=(null==e?void 0:e.relayUrl)||Af,n.projectId=e.projectId,_o()&&("undefined"==typeof global?"undefined":T(global))<"u"&&T(null==global?void 0:global.Platform)<"u"&&"android"===(null==global?void 0:global.Platform.OS)?n.packageName=Ro():_o()&&("undefined"==typeof global?"undefined":T(global))<"u"&&T(null==global?void 0:global.Platform)<"u"&&"ios"===(null==global?void 0:global.Platform.OS)&&(n.bundleId=Ro()),n.provider={},n}return w(t,e),A(t,[{key:"init",value:(P=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return this.logger.trace("Initialized"),this.registerEventListeners(),e.n=1,Promise.all([this.messages.init(),this.subscriber.init()]);case 1:if(this.initialized=!0,!this.subscriber.hasAnyTopics){e.n=5;break}return e.p=2,e.n=3,this.transportOpen();case 3:e.n=5;break;case 4:e.p=4,t=e.v,this.logger.warn(t,null==t?void 0:t.message);case 5:return e.a(2)}},e,this,[[2,4]])})),function(){return P.apply(this,arguments)})},{key:"context",get:function(){return re(this.logger)}},{key:"connected",get:function(){var e,t,n;return 1===(null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.readyState)||!1}},{key:"connecting",get:function(){var e,t,n;return 0===(null==(n=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:n.readyState)||void 0!==this.connectPromise||!1}},{key:"publish",value:(S=q(x().m(function e(t,n,r){return x().w(function(e){for(;;)switch(e.n){case 0:return this.isInitialized(),e.n=1,this.publisher.publish(t,n,r);case 1:return e.n=2,this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now(),transportType:Bf},Ff);case 2:return e.a(2)}},e,this)})),function(e,t,n){return S.apply(this,arguments)})},{key:"subscribe",value:(N=q(x().m(function e(t,n){var r,i,a,o,s,c,u,l=this;return x().w(function(e){for(;;)switch(e.n){case 0:if(this.isInitialized(),null!=n&&n.transportType&&"relay"!==(null==n?void 0:n.transportType)){e.n=1;break}return e.n=1,this.toEstablishConnection();case 1:return o=T(null==(r=null==n?void 0:n.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(i=null==n?void 0:n.internal)?void 0:i.throwOnFailedPublish),s=(null==(a=this.subscriber.topicMap.get(t))?void 0:a[0])||"",u=function(e){e.topic===t&&(l.subscriber.off(Hf,u),c())},e.n=2,Promise.all([new Promise(function(e){c=e,l.subscriber.on(Hf,u)}),new Promise(function(){var e=q(x().m(function e(r,i){var a;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l.subscriber.subscribe(t,Ng({internal:{throwOnFailedPublish:o}},n)).catch(function(e){o&&i(e)});case 1:if(a=e.v){e.n=2;break}a=s;case 2:s=a,r();case 3:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}())]);case 2:return e.a(2,s)}},e,this)})),function(e,t){return N.apply(this,arguments)})},{key:"unsubscribe",value:(E=q(x().m(function e(t,n){return x().w(function(e){for(;;)switch(e.n){case 0:return this.isInitialized(),e.n=1,this.subscriber.unsubscribe(t,n);case 1:return e.a(2)}},e,this)})),function(e,t){return E.apply(this,arguments)})},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}},{key:"off",value:function(e,t){this.events.off(e,t)}},{key:"removeListener",value:function(e,t){this.events.removeListener(e,t)}},{key:"transportDisconnect",value:(k=q(x().m(function e(){var t=this;return x().w(function(e){for(;;)switch(e.n){case 0:if(!this.provider.disconnect||!this.hasExperiencedNetworkDisruption&&!this.connected){e.n=2;break}return e.n=1,Fo(this.provider.disconnect(),2e3,"provider.disconnect()").catch(function(){return t.onProviderDisconnect()});case 1:e.n=3;break;case 2:this.onProviderDisconnect();case 3:return e.a(2)}},e,this)})),function(){return k.apply(this,arguments)})},{key:"transportClose",value:(b=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return this.transportExplicitlyClosed=!0,e.n=1,this.transportDisconnect();case 1:return e.a(2)}},e,this)})),function(){return b.apply(this,arguments)})},{key:"transportOpen",value:(y=q(x().m(function e(t){var n=this;return x().w(function(e){for(;;)switch(e.n){case 0:if(this.subscriber.hasAnyTopics){e.n=1;break}return this.logger.warn("Starting WS connection skipped because the client has no topics to work with."),e.a(2);case 1:if(!this.connectPromise){e.n=3;break}return this.logger.debug({},"Waiting for existing connection attempt to resolve..."),e.n=2,this.connectPromise;case 2:this.logger.debug({},"Existing connection attempt resolved"),e.n=4;break;case 3:return this.connectPromise=new Promise(function(){var e=q(x().m(function e(r,i){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n.connect(t).then(r).catch(i).finally(function(){n.connectPromise=void 0});case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),e.n=4,this.connectPromise;case 4:if(this.connected){e.n=5;break}throw new Error("Couldn't establish socket connection to the relay server: ".concat(this.relayUrl));case 5:return e.a(2)}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"restartTransport",value:(g=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:if(this.logger.debug({},"Restarting transport..."),this.connectionAttemptInProgress){e.n=3;break}return this.relayUrl=t||this.relayUrl,e.n=1,this.confirmOnlineStateOrThrow();case 1:return e.n=2,this.transportClose();case 2:return e.n=3,this.transportOpen();case 3:return e.a(2)}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"confirmOnlineStateOrThrow",value:(h=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ff();case 1:if(e.v){e.n=2;break}throw new Error("No internet connection detected. Please restart your network and try again.");case 2:return e.a(2)}},e)})),function(){return h.apply(this,arguments)})},{key:"handleBatchMessageEvents",value:(p=q(x().m(function e(t){var n,r,i,a,o,s;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(0!==(null==t?void 0:t.length)){e.n=1;break}return this.logger.trace("Batch message events is empty. Ignoring..."),e.a(2);case 1:n=t.sort(function(e,t){return e.publishedAt-t.publishedAt}),this.logger.debug("Batch of ".concat(n.length," message events sorted")),r=C(n),e.p=2,r.s();case 3:if((i=r.n()).done){e.n=8;break}return a=i.value,e.p=4,e.n=5,this.onMessageEvent(a);case 5:e.n=7;break;case 6:e.p=6,o=e.v,this.logger.warn(o,"Error while processing batch message event: "+(null==o?void 0:o.message));case 7:e.n=3;break;case 8:e.n=10;break;case 9:e.p=9,s=e.v,r.e(s);case 10:return e.p=10,r.f(),e.f(10);case 11:this.logger.trace("Batch of ".concat(n.length," message events processed"));case 12:return e.a(2)}},e,this,[[4,6],[2,9,10,11]])})),function(e){return p.apply(this,arguments)})},{key:"onLinkMessageEvent",value:(f=q(x().m(function e(t,n){var r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(r=t.topic,n.sessionExists){e.n=1;break}return i=Vo(V.FIVE_MINUTES),a={topic:r,expiry:i,relay:{protocol:"irn"},active:!1},e.n=1,this.core.pairing.pairings.set(r,a);case 1:return this.events.emit(Sf,t),e.n=2,this.recordMessageEvent(t,zf);case 2:return e.a(2)}},e,this)})),function(e,t){return f.apply(this,arguments)})},{key:"connect",value:(d=q(x().m(function e(t){var n,r,i,a=this;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,this.confirmOnlineStateOrThrow();case 1:if(!t||t===this.relayUrl){e.n=2;break}return this.relayUrl=t,e.n=2,this.transportDisconnect();case 2:this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1,n=1;case 3:if(!(n<6)){e.n=15;break}if(e.p=4,!this.transportExplicitlyClosed){e.n=5;break}return e.a(3,15);case 5:return this.logger.debug({},"Connecting to ".concat(this.relayUrl,", attempt: ").concat(n,"...")),e.n=6,this.createProvider();case 6:return e.n=7,new Promise(function(){var e=q(x().m(function e(t,n){var r;return x().w(function(e){for(;;)switch(e.n){case 0:return r=function(){n(new Error("Connection interrupted while trying to subscribe"))},a.provider.once(jf,r),e.n=1,Fo(new Promise(function(e,t){a.provider.connect().then(e).catch(t)}),a.connectTimeout,"Socket stalled when trying to connect to ".concat(a.relayUrl)).catch(function(e){n(e)}).finally(function(){a.provider.off(jf,r),clearTimeout(a.reconnectTimeout)});case 1:return e.n=2,new Promise(function(){var e=q(x().m(function e(t,n){var r;return x().w(function(e){for(;;)switch(e.n){case 0:return r=function(){n(new Error("Connection interrupted while trying to subscribe"))},a.provider.once(jf,r),e.n=1,a.subscriber.start().then(t).catch(n).finally(function(){a.provider.off(jf,r)});case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 2:a.hasExperiencedNetworkDisruption=!1,t();case 3:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 7:e.n=10;break;case 8:return e.p=8,i=e.v,e.n=9,this.subscriber.stop();case 9:r=i,this.logger.warn({},r.message),this.hasExperiencedNetworkDisruption=!0;case 10:return e.p=10,this.connectionAttemptInProgress=!1,e.f(10);case 11:if(!this.connected){e.n=12;break}return this.logger.debug({},"Connected to ".concat(this.relayUrl," successfully on attempt: ").concat(n)),e.a(3,15);case 12:return e.n=13,new Promise(function(e){return setTimeout(e,V.toMiliseconds(1*n))});case 13:n++;case 14:e.n=3;break;case 15:return e.a(2)}},e,this,[[4,8,10,11]])})),function(e){return d.apply(this,arguments)})},{key:"startPingTimeout",value:function(){var e,t,n,r,i,a=this;if(Oo())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(i=null==(r=null==(n=this.provider)?void 0:n.connection)?void 0:r.socket)||i.on("ping",function(){a.resetPingTimeout()})),this.resetPingTimeout()}catch(mn){this.logger.warn(mn,null==mn?void 0:mn.message)}}},{key:"createProvider",value:(l=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:return this.provider.connection&&this.unregisterProviderListeners(),e.n=1,this.core.crypto.signJWT(this.relayUrl);case 1:t=e.v,this.provider=new se(new ce(Mo({sdkVersion:Lf,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners();case 2:return e.a(2)}},e,this)})),function(){return l.apply(this,arguments)})},{key:"recordMessageEvent",value:(u=q(x().m(function e(t,n){var r,i;return x().w(function(e){for(;;)switch(e.n){case 0:return r=t.topic,i=t.message,e.n=1,this.messages.set(r,i,n);case 1:return e.a(2)}},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"shouldIgnoreMessageEvent",value:(c=q(x().m(function e(t){var n,r,i;return x().w(function(e){for(;;)switch(e.n){case 0:if(n=t.topic,(r=t.message)&&0!==r.length){e.n=1;break}return e.a(2,(this.logger.warn("Ignoring invalid/empty message: ".concat(r)),!0));case 1:return e.n=2,this.subscriber.isKnownTopic(n);case 2:if(e.v){e.n=3;break}return e.a(2,(this.logger.warn("Ignoring message for unknown topic ".concat(n)),!0));case 3:return i=this.messages.has(n,r),e.a(2,(i&&this.logger.warn("Ignoring duplicate message: ".concat(r)),i))}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"onProviderPayload",value:(s=q(x().m(function e(t){var n,r,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),!ue(t)){e.n=4;break}if(t.method.endsWith("_subscription")){e.n=1;break}return e.a(2);case 1:return n=t.params,r=n.data,i=r.topic,a=r.message,o=r.publishedAt,s=r.attestation,c={topic:i,message:a,publishedAt:o,transportType:Bf,attestation:s},this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ng({type:"event",event:n.id},c)),this.events.emit(n.id,c),e.n=2,this.acknowledgePayload(t);case 2:return e.n=3,this.onMessageEvent(c);case 3:e.n=5;break;case 4:le(t)&&this.events.emit(Pf,t);case 5:return e.a(2)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"onMessageEvent",value:(o=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.shouldIgnoreMessageEvent(t);case 1:if(e.v){e.n=3;break}return e.n=2,this.recordMessageEvent(t,zf);case 2:this.events.emit(Sf,t);case 3:return e.a(2)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"acknowledgePayload",value:(a=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:return n=de(t.id,!0),e.n=1,this.provider.connection.send(n);case 1:return e.a(2)}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"unregisterProviderListeners",value:function(){this.provider.off(Uf,this.onPayloadHandler),this.provider.off(Df,this.onConnectHandler),this.provider.off(jf,this.onDisconnectHandler),this.provider.off(Mf,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}},{key:"registerEventListeners",value:(i=q(x().m(function e(){var t,n=this;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ff();case 1:t=e.v,hf(function(){var e=q(x().m(function e(r){return x().w(function(e){for(;;)switch(e.n){case 0:if(t===r){e.n=4;break}if(t=r,!r){e.n=2;break}return e.n=1,n.transportOpen().catch(function(e){return n.logger.error(e,null==e?void 0:e.message)});case 1:e.n=4;break;case 2:return n.hasExperiencedNetworkDisruption=!0,e.n=3,n.transportDisconnect();case 3:n.transportExplicitlyClosed=!1;case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),this.core.heartbeat.on(ae.pulse,q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.transportExplicitlyClosed||n.connected||!vf()){e.n=5;break}return e.p=1,e.n=2,n.confirmOnlineStateOrThrow();case 2:return e.n=3,n.transportOpen();case 3:e.n=5;break;case 4:e.p=4,t=e.v,n.logger.warn(t,null==t?void 0:t.message);case 5:return e.a(2)}},e,null,[[1,4]])})));case 2:return e.a(2)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"onProviderDisconnect",value:(r=q(x().m(function e(){var t=this;return x().w(function(e){for(;;)switch(e.n){case 0:if(clearTimeout(this.pingTimeout),this.events.emit(_f),this.connectionAttemptInProgress=!1,this.reconnectInProgress){e.n=2;break}return this.reconnectInProgress=!0,e.n=1,this.subscriber.stop();case 1:this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.transportOpen().catch(function(e){return t.logger.error(e,null==e?void 0:e.message)});case 1:t.reconnectTimeout=void 0,t.reconnectInProgress=!1;case 2:return e.a(2)}},e)})),V.toMiliseconds(.1))));case 2:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"isInitialized",value:function(){if(!this.initialized){var e=jd("NOT_INITIALIZED",this.name).message;throw new Error(e)}}},{key:"toEstablishConnection",value:(n=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.confirmOnlineStateOrThrow();case 1:if(this.connected){e.n=4;break}if(!this.connectPromise){e.n=3;break}return e.n=2,this.connectPromise;case 2:case 4:return e.a(2);case 3:return e.n=4,this.connect()}},e,this)})),function(){return n.apply(this,arguments)})}]);var n,r,i,a,o,s,c,u,l,d,f,p,h,g,y,b,k,E,N,S,P}(Mi);function Pg(){}function Og(e){if(!e||"object"!=T(e))return!1;var t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function _g(e){return Object.getOwnPropertySymbols(e).filter(function(t){return Object.prototype.propertyIsEnumerable.call(e,t)})}function Tg(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var xg="[object Arguments]",Rg="[object Object]";function Ug(e,t,n,r,i,a,o){var s=o(e,t,n,r,i,a);if(void 0!==s)return s;if(T(e)==T(t))switch(T(e)){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return Dg(e,t,a,o)}return Dg(e,t,a,o)}function Dg(e,t,n,r){if(Object.is(e,t))return!0;var i=Tg(e),a=Tg(t);if(i===xg&&(i=Rg),a===xg&&(a=Rg),i!==a)return!1;switch(i){case"[object String]":return e.toString()===t.toString();case"[object Number]":return function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e.valueOf(),t.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(e.valueOf(),t.valueOf());case"[object RegExp]":return e.source===t.source&&e.flags===t.flags;case"[object Function]":return e===t}var o=(n=null!=n?n:new Map).get(e),s=n.get(t);if(null!=o&&null!=s)return o===t;n.set(e,t),n.set(t,e);try{switch(i){case"[object Map]":if(e.size!==t.size)return!1;var c,u=C(e.entries());try{for(u.s();!(c=u.n()).done;){var l=S(c.value,2),d=l[0],f=l[1];if(!t.has(d)||!Ug(f,t.get(d),d,e,t,n,r))return!1}}catch(N){u.e(N)}finally{u.f()}return!0;case"[object Set]":if(e.size!==t.size)return!1;for(var p,h=Array.from(e.values()),v=Array.from(t.values()),g=function(){var i=h[m],a=v.findIndex(function(a){return Ug(i,a,void 0,e,t,n,r)});if(-1===a)return{v:!1};v.splice(a,1)},m=0;m<h.length;m++)if(p=g())return p.v;return!0;case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(("undefined"==typeof Buffer?"undefined":T(Buffer))<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(var w=0;w<e.length;w++)if(!Ug(e[w],t[w],w,e,t,n,r))return!1;return!0;case"[object ArrayBuffer]":return e.byteLength===t.byteLength&&Dg(new Uint8Array(e),new Uint8Array(t),n,r);case"[object DataView]":return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&Dg(new Uint8Array(e),new Uint8Array(t),n,r);case"[object Error]":return e.name===t.name&&e.message===t.message;case Rg:if(!(Dg(e.constructor,t.constructor,n,r)||Og(e)&&Og(t)))return!1;var y=[].concat(P(Object.keys(e)),P(_g(e))),b=[].concat(P(Object.keys(t)),P(_g(t)));if(y.length!==b.length)return!1;for(var k=0;k<y.length;k++){var E=y[k],I=e[E];if(!Object.hasOwn(t,E))return!1;if(!Ug(I,t[E],E,e,t,n,r))return!1}return!0;default:return!1}}finally{n.delete(e),n.delete(t)}}function jg(e,t){return function(e,t,n){return Ug(e,t,void 0,void 0,void 0,void 0,n)}(e,t,Pg)}var Mg=Object.defineProperty,Lg=Object.getOwnPropertySymbols,qg=Object.prototype.hasOwnProperty,Bg=Object.prototype.propertyIsEnumerable,zg=function(e,t,n){return t in e?Mg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Fg=function(e,t){for(var n in t||(t={}))qg.call(t,n)&&zg(e,n,t[n]);if(Lg){var r,i=C(Lg(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Bg.call(t,n)&&zg(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},Wg=function(e,t,n){return zg(e,"symbol"!=T(t)?t+"":t,n)},Hg=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bf,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return I(this,t),(i=v(this,t,[e,n,r,a])).core=e,i.logger=n,i.name=r,Wg(m(i),"map",new Map),Wg(m(i),"version","0.3"),Wg(m(i),"cached",[]),Wg(m(i),"initialized",!1),Wg(m(i),"getKey"),Wg(m(i),"storagePrefix",bf),Wg(m(i),"recentlyDeleted",[]),Wg(m(i),"recentlyDeletedLimit",200),Wg(m(i),"init",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(i.initialized){e.n=2;break}return i.logger.trace("Initialized"),e.n=1,i.restore();case 1:i.cached.forEach(function(e){i.getKey&&null!==e&&!Bd(e)?i.map.set(i.getKey(e),e):Hd(e)?i.map.set(e.id,e):Vd(e)&&i.map.set(e.topic,e)}),i.cached=[],i.initialized=!0;case 2:return e.a(2)}},e)}))),Wg(m(i),"set",function(){var e=q(x().m(function e(t,n){return x().w(function(e){for(;;)switch(e.n){case 0:if(i.isInitialized(),!i.map.has(t)){e.n=2;break}return e.n=1,i.update(t,n);case 1:e.n=3;break;case 2:return i.logger.debug("Setting value"),i.logger.trace({type:"method",method:"set",key:t,value:n}),i.map.set(t,n),e.n=3,i.persist();case 3:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),Wg(m(i),"get",function(e){return i.isInitialized(),i.logger.debug("Getting value"),i.logger.trace({type:"method",method:"get",key:e}),i.getData(e)}),Wg(m(i),"getAll",function(e){return i.isInitialized(),e?i.values.filter(function(t){return Object.keys(e).every(function(n){return jg(t[n],e[n])})}):i.values}),Wg(m(i),"update",function(){var e=q(x().m(function e(t,n){var r;return x().w(function(e){for(;;)switch(e.n){case 0:return i.isInitialized(),i.logger.debug("Updating value"),i.logger.trace({type:"method",method:"update",key:t,update:n}),r=Fg(Fg({},i.getData(t)),n),i.map.set(t,r),e.n=1,i.persist();case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),Wg(m(i),"delete",function(){var e=q(x().m(function e(t,n){return x().w(function(e){for(;;)switch(e.n){case 0:if(i.isInitialized(),!i.map.has(t)){e.n=1;break}return i.logger.debug("Deleting value"),i.logger.trace({type:"method",method:"delete",key:t,reason:n}),i.map.delete(t),i.addToRecentlyDeleted(t),e.n=1,i.persist();case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),i.logger=ee(n,i.name),i.storagePrefix=a,i.getKey=o,i}return w(t,e),A(t,[{key:"context",get:function(){return re(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"length",get:function(){return this.map.size}},{key:"keys",get:function(){return Array.from(this.map.keys())}},{key:"values",get:function(){return Array.from(this.map.values())}},{key:"addToRecentlyDeleted",value:function(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}},{key:"setDataStore",value:(a=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.setItem(this.storageKey,t);case 1:return e.a(2)}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getDataStore",value:(i=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.getItem(this.storageKey);case 1:return e.a(2,e.v)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"getData",value:function(e){var t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){var n=jd("MISSING_OR_INVALID","Record was recently deleted - ".concat(this.name,": ").concat(e)).message;throw this.logger.error(n),new Error(n)}var r=jd("NO_MATCHING_KEY","".concat(this.name,": ").concat(e)).message;throw this.logger.error(r),new Error(r)}return t}},{key:"persist",value:(r=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.setDataStore(this.values);case 1:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"restore",value:(n=q(x().m(function e(){var t,n,r,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.getDataStore();case 1:if(!(T(t=e.v)>"u")&&t.length){e.n=2;break}return e.a(2);case 2:if(!this.map.size){e.n=3;break}throw n=jd("RESTORE_WILL_OVERRIDE",this.name),r=n.message,this.logger.error(r),new Error(r);case 3:this.cached=t,this.logger.debug("Successfully Restored value for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",value:this.values}),e.n=5;break;case 4:e.p=4,i=e.v,this.logger.debug("Failed to Restore value for ".concat(this.name)),this.logger.error(i);case 5:return e.a(2)}},e,this,[[0,4]])})),function(){return n.apply(this,arguments)})},{key:"isInitialized",value:function(){if(!this.initialized){var e=jd("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]);var n,r,i,a}(Li),Vg=Object.defineProperty,Kg=function(e,t,n){return function(e,t,n){return t in e?Vg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},$g=function(){return A(function e(t,n){var r=this;I(this,e),this.core=t,this.logger=n,Kg(this,"name","pairing"),Kg(this,"version","0.3"),Kg(this,"events",new fe),Kg(this,"pairings"),Kg(this,"initialized",!1),Kg(this,"storagePrefix",bf),Kg(this,"ignoredPayloadTypes",[1]),Kg(this,"registeredMethods",[]),Kg(this,"init",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(r.initialized){e.n=3;break}return e.n=1,r.pairings.init();case 1:return e.n=2,r.cleanup();case 2:r.registerRelayerEvents(),r.registerExpirerEvents(),r.initialized=!0,r.logger.trace("Initialized");case 3:return e.a(2)}},e)}))),Kg(this,"register",function(e){var t=e.methods;r.isInitialized(),r.registeredMethods=P(new Set([].concat(P(r.registeredMethods),P(t))))}),Kg(this,"create",function(){var e=q(x().m(function e(t){var n,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:return r.isInitialized(),n=Gl(),e.n=1,r.core.crypto.setSymKey(n);case 1:return i=e.v,a=Vo(V.FIVE_MINUTES),s={topic:i,expiry:a,relay:o={protocol:"irn"},active:!1,methods:null==t?void 0:t.methods},c=md({protocol:r.core.protocol,version:r.core.version,topic:i,symKey:n,relay:o,expiryTimestamp:a,methods:null==t?void 0:t.methods}),r.events.emit(Jf,s),r.core.expirer.set(i,a),e.n=2,r.pairings.set(i,s);case 2:return e.n=3,r.core.relayer.subscribe(i,{transportType:null==t?void 0:t.transportType});case 3:return e.a(2,{topic:i,uri:c})}},e)}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"pair",function(){var e=q(x().m(function e(t){var n,i,a,o,s,c,u,l,d,f,p;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r.isInitialized(),n=r.core.eventClient.createEvent({properties:{topic:null==t?void 0:t.uri,trace:[dp]}}),r.isValidPair(t,n),i=vd(t.uri),a=i.topic,o=i.symKey,s=i.relay,c=i.expiryTimestamp,u=i.methods,n.props.properties.topic=a,n.addTrace(fp),n.addTrace(pp),!r.pairings.keys.includes(a)){e.n=2;break}if(l=r.pairings.get(a),n.addTrace(mp),!l.active){e.n=1;break}throw n.setError(Cp),new Error("Pairing already exists: ".concat(a,". Please try again with a new connection URI."));case 1:n.addTrace(wp);case 2:return d=c||Vo(V.FIVE_MINUTES),f={topic:a,relay:s,expiry:d,active:!1,methods:u},r.core.expirer.set(a,d),e.n=3,r.pairings.set(a,f);case 3:if(n.addTrace(hp),!t.activatePairing){e.n=4;break}return e.n=4,r.activate({topic:a});case 4:if(r.events.emit(Jf,f),n.addTrace(yp),r.core.crypto.keychain.has(a)){e.n=5;break}return e.n=5,r.core.crypto.setSymKey(o,a);case 5:return n.addTrace(vp),e.p=6,e.n=7,r.core.relayer.confirmOnlineStateOrThrow();case 7:e.n=9;break;case 8:e.p=8,e.v,n.setError(kp);case 9:return e.p=9,e.n=10,r.core.relayer.subscribe(a,{relay:s});case 10:e.n=12;break;case 11:throw e.p=11,p=e.v,n.setError(Ip),p;case 12:return e.a(2,(n.addTrace(gp),f))}},e,null,[[9,11],[6,8]])}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"activate",function(){var e=q(x().m(function e(t){var n,i;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.topic,r.isInitialized(),i=Vo(V.FIVE_MINUTES),r.core.expirer.set(n,i),e.n=1,r.pairings.update(n,{active:!0,expiry:i});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"ping",function(){var e=q(x().m(function e(t){var n,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:return r.isInitialized(),e.n=1,r.isValidPing(t);case 1:if(r.logger.warn("ping() is deprecated and will be removed in the next major release."),n=t.topic,!r.pairings.keys.includes(n)){e.n=3;break}return e.n=2,r.sendRequest(n,"wc_pairingPing",{});case 2:return i=e.v,a=zo(),o=a.done,s=a.resolve,c=a.reject,r.events.once($o("pairing_ping",i),function(e){var t=e.error;t?c(t):s()}),e.n=3,o();case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"updateExpiry",function(){var e=q(x().m(function e(t){var n,i;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.topic,i=t.expiry,r.isInitialized(),e.n=1,r.pairings.update(n,{expiry:i});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"updateMetadata",function(){var e=q(x().m(function e(t){var n,i;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.topic,i=t.metadata,r.isInitialized(),e.n=1,r.pairings.update(n,{peerMetadata:i});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"getPairings",function(){return r.isInitialized(),r.pairings.values}),Kg(this,"disconnect",function(){var e=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:return r.isInitialized(),e.n=1,r.isValidDisconnect(t);case 1:if(n=t.topic,!r.pairings.keys.includes(n)){e.n=3;break}return e.n=2,r.sendRequest(n,"wc_pairingDelete",Md("USER_DISCONNECTED"));case 2:return e.n=3,r.deletePairing(n);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"formatUriFromPairing",function(e){r.isInitialized();var t=e.topic,n=e.relay,i=e.expiry,a=e.methods,o=r.core.crypto.keychain.get(t);return md({protocol:r.core.protocol,version:r.core.version,topic:t,symKey:o,relay:n,expiryTimestamp:i,methods:a})}),Kg(this,"sendRequest",function(){var e=q(x().m(function e(t,n,i){var a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:return a=ie(n,i),e.n=1,r.core.crypto.encode(t,a);case 1:return o=e.v,s=Gf[n].req,e.a(2,(r.core.history.set(t,a),r.core.relayer.publish(t,o,s),a.id))}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),Kg(this,"sendResult",function(){var e=q(x().m(function e(t,n,i){var a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:return a=de(t,i),e.n=1,r.core.crypto.encode(n,a);case 1:return o=e.v,e.n=2,r.core.history.get(n,t);case 2:return s=e.v.request.method,c=Gf[s].res,e.n=3,r.core.relayer.publish(n,o,c);case 3:return e.n=4,r.core.history.resolve(a);case 4:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),Kg(this,"sendError",function(){var e=q(x().m(function e(t,n,i){var a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:return a=ye(t,i),e.n=1,r.core.crypto.encode(n,a);case 1:return o=e.v,e.n=2,r.core.history.get(n,t);case 2:return s=e.v.request.method,c=Gf[s]?Gf[s].res:Gf.unregistered_method.res,e.n=3,r.core.relayer.publish(n,o,c);case 3:return e.n=4,r.core.history.resolve(a);case 4:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),Kg(this,"deletePairing",function(){var e=q(x().m(function e(t,n){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.core.relayer.unsubscribe(t);case 1:return e.n=2,Promise.all([r.pairings.delete(t,Md("USER_DISCONNECTED")),r.core.crypto.deleteSymKey(t),n?Promise.resolve():r.core.expirer.del(t)]);case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),Kg(this,"cleanup",q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:return t=r.pairings.getAll().filter(function(e){return Ko(e.expiry)}),e.n=1,Promise.all(t.map(function(e){return r.deletePairing(e.topic)}));case 1:return e.a(2)}},e)}))),Kg(this,"onRelayEventRequest",function(){var e=q(x().m(function e(t){var n,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:n=t.topic,i=t.payload,a=i.method,e.n="wc_pairingPing"===a?1:"wc_pairingDelete"===a?3:5;break;case 1:return e.n=2,r.onPairingPingRequest(n,i);case 2:case 4:case 6:return e.a(2,e.v);case 3:return e.n=4,r.onPairingDeleteRequest(n,i);case 5:return e.n=6,r.onUnknownRpcMethodRequest(n,i);case 7:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"onRelayEventResponse",function(){var e=q(x().m(function e(t){var n,i,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.topic,i=t.payload,e.n=1,r.core.history.get(n,i.id);case 1:a=e.v.request.method,o=a,e.n="wc_pairingPing"===o?2:3;break;case 2:return e.a(2,r.onPairingPingResponse(n,i));case 3:return e.a(2,r.onUnknownRpcMethodResponse(a));case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"onPairingPingRequest",function(){var e=q(x().m(function e(t,n){var i,a;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=n.id,e.p=1,r.isValidPing({topic:t}),e.n=2,r.sendResult(i,t,!0);case 2:r.events.emit(Zf,{id:i,topic:t}),e.n=5;break;case 3:return e.p=3,a=e.v,e.n=4,r.sendError(i,t,a);case 4:r.logger.error(a);case 5:return e.a(2)}},e,null,[[1,3]])}));return function(t,n){return e.apply(this,arguments)}}()),Kg(this,"onPairingPingResponse",function(e,t){var n=t.id;setTimeout(function(){be(t)?r.events.emit($o("pairing_ping",n),{}):ke(t)&&r.events.emit($o("pairing_ping",n),{error:t.error})},500)}),Kg(this,"onPairingDeleteRequest",function(){var e=q(x().m(function e(t,n){var i,a;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=n.id,e.p=1,r.isValidDisconnect({topic:t}),e.n=2,r.deletePairing(t);case 2:r.events.emit(Xf,{id:i,topic:t}),e.n=5;break;case 3:return e.p=3,a=e.v,e.n=4,r.sendError(i,t,a);case 4:r.logger.error(a);case 5:return e.a(2)}},e,null,[[1,3]])}));return function(t,n){return e.apply(this,arguments)}}()),Kg(this,"onUnknownRpcMethodRequest",function(){var e=q(x().m(function e(t,n){var i,a,o,s;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=n.id,a=n.method,e.p=1,!r.registeredMethods.includes(a)){e.n=2;break}return e.a(2);case 2:return o=Md("WC_METHOD_UNSUPPORTED",a),e.n=3,r.sendError(i,t,o);case 3:r.logger.error(o),e.n=6;break;case 4:return e.p=4,s=e.v,e.n=5,r.sendError(i,t,s);case 5:r.logger.error(s);case 6:return e.a(2)}},e,null,[[1,4]])}));return function(t,n){return e.apply(this,arguments)}}()),Kg(this,"onUnknownRpcMethodResponse",function(e){r.registeredMethods.includes(e)||r.logger.error(Md("WC_METHOD_UNSUPPORTED",e))}),Kg(this,"isValidPair",function(e,t){var n;if(!ef(e)){var r=jd("MISSING_OR_INVALID","pair() params: ".concat(e)).message;throw t.setError(Ep),new Error(r)}if(!function(e){function t(e){try{return T(new URL(e))<"u"}catch(t){return!1}}try{if(zd(e,!1))return!!t(e)||t(is(e))}catch(n){}return!1}(e.uri)){var i=jd("MISSING_OR_INVALID","pair() uri: ".concat(e.uri)).message;throw t.setError(Ep),new Error(i)}var a=vd(null==e?void 0:e.uri);if(null==(n=null==a?void 0:a.relay)||!n.protocol){var o=jd("MISSING_OR_INVALID","pair() uri#relay-protocol").message;throw t.setError(Ep),new Error(o)}if(null==a||!a.symKey){var s=jd("MISSING_OR_INVALID","pair() uri#symKey").message;throw t.setError(Ep),new Error(s)}if(null!=a&&a.expiryTimestamp&&V.toMiliseconds(null==a?void 0:a.expiryTimestamp)<Date.now()){t.setError(Np);var c=jd("EXPIRED","pair() URI has expired. Please try again with a new connection URI.").message;throw new Error(c)}}),Kg(this,"isValidPing",function(){var e=q(x().m(function e(t){var n,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw n=jd("MISSING_OR_INVALID","ping() params: ".concat(t)),i=n.message,new Error(i);case 1:return a=t.topic,e.n=2,r.isValidPairingTopic(a);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"isValidDisconnect",function(){var e=q(x().m(function e(t){var n,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw n=jd("MISSING_OR_INVALID","disconnect() params: ".concat(t)),i=n.message,new Error(i);case 1:return a=t.topic,e.n=2,r.isValidPairingTopic(a);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Kg(this,"isValidPairingTopic",function(){var e=q(x().m(function e(t){var n,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:if(zd(t,!1)){e.n=1;break}throw n=jd("MISSING_OR_INVALID","pairing topic should be a string: ".concat(t)),i=n.message,new Error(i);case 1:if(r.pairings.keys.includes(t)){e.n=2;break}throw a=jd("NO_MATCHING_KEY","pairing topic doesn't exist: ".concat(t)),o=a.message,new Error(o);case 2:if(!Ko(r.pairings.get(t).expiry)){e.n=4;break}return e.n=3,r.deletePairing(t);case 3:throw s=jd("EXPIRED","pairing topic: ".concat(t)),c=s.message,new Error(c);case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),this.core=t,this.logger=ee(n,this.name),this.pairings=new Hg(this.core,this.logger,this.name,this.storagePrefix)},[{key:"context",get:function(){return re(this.logger)}},{key:"isInitialized",value:function(){if(!this.initialized){var e=jd("NOT_INITIALIZED",this.name).message;throw new Error(e)}}},{key:"registerRelayerEvents",value:function(){var e=this;this.core.relayer.on(Sf,function(){var t=q(x().m(function t(n){var r,i,a,o,s;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(r=n.topic,i=n.message,a=n.transportType,!e.pairings.keys.includes(r)||a===qf||e.ignoredPayloadTypes.includes(e.core.crypto.getPayloadType(i))){t.n=10;break}return t.p=1,t.n=2,e.core.crypto.decode(r,i);case 2:if(o=t.v,!ue(o)){t.n=4;break}return e.core.history.set(r,o),t.n=3,e.onRelayEventRequest({topic:r,payload:o});case 3:t.n=7;break;case 4:if(!le(o)){t.n=7;break}return t.n=5,e.core.history.resolve(o);case 5:return t.n=6,e.onRelayEventResponse({topic:r,payload:o});case 6:e.core.history.delete(r,o.id);case 7:return t.n=8,e.core.relayer.messages.ack(r,i);case 8:t.n=10;break;case 9:t.p=9,s=t.v,e.logger.error(s);case 10:return t.a(2)}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}())}},{key:"registerExpirerEvents",value:function(){var e=this;this.core.expirer.on(ap,function(){var t=q(x().m(function t(n){var r,i;return x().w(function(t){for(;;)switch(t.n){case 0:if(r=Ho(n.target),i=r.topic,!(i&&e.pairings.keys.includes(i))){t.n=2;break}return t.n=1,e.deletePairing(i,!0);case 1:e.events.emit(Yf,{topic:i});case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())}}])}(),Gg=Object.defineProperty,Jg=function(e,t,n){return function(e,t,n){return t in e?Gg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Yg=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t,[e,n])).core=e,r.logger=n,Jg(m(r),"records",new Map),Jg(m(r),"events",new X.EventEmitter),Jg(m(r),"name","history"),Jg(m(r),"version","0.3"),Jg(m(r),"cached",[]),Jg(m(r),"initialized",!1),Jg(m(r),"storagePrefix",bf),Jg(m(r),"init",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(r.initialized){e.n=2;break}return r.logger.trace("Initialized"),e.n=1,r.restore();case 1:r.cached.forEach(function(e){return r.records.set(e.id,e)}),r.cached=[],r.registerEventListeners(),r.initialized=!0;case 2:return e.a(2)}},e)}))),Jg(m(r),"set",function(e,t,n){if(r.isInitialized(),r.logger.debug("Setting JSON-RPC request history record"),r.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:n}),!r.records.has(t.id)){var i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:n,expiry:Vo(V.THIRTY_DAYS)};r.records.set(i.id,i),r.persist(),r.events.emit(Qf,i)}}),Jg(m(r),"resolve",function(){var e=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:if(r.isInitialized(),r.logger.debug("Updating JSON-RPC response history record"),r.logger.trace({type:"method",method:"update",response:t}),r.records.has(t.id)){e.n=1;break}return e.a(2);case 1:return e.n=2,r.getRecord(t.id);case 2:T((n=e.v).response)>"u"&&(n.response=ke(t)?{error:t.error}:{result:t.result},r.records.set(n.id,n),r.persist(),r.events.emit(ep,n));case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Jg(m(r),"get",function(){var e=q(x().m(function e(t,n){return x().w(function(e){for(;;)switch(e.n){case 0:return r.isInitialized(),r.logger.debug("Getting record"),r.logger.trace({type:"method",method:"get",topic:t,id:n}),e.n=1,r.getRecord(n);case 1:return e.a(2,e.v)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),Jg(m(r),"delete",function(e,t){r.isInitialized(),r.logger.debug("Deleting record"),r.logger.trace({type:"method",method:"delete",id:t}),r.values.forEach(function(n){if(n.topic===e){if(T(t)<"u"&&n.id!==t)return;r.records.delete(n.id),r.events.emit(tp,n)}}),r.persist()}),Jg(m(r),"exists",function(){var e=q(x().m(function e(t,n){var i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(r.isInitialized(),!r.records.has(n)){e.n=2;break}return e.n=1,r.getRecord(n);case 1:a=e.v.topic,i=a===t,e.n=3;break;case 2:i=!1;case 3:return e.a(2,i)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),Jg(m(r),"on",function(e,t){r.events.on(e,t)}),Jg(m(r),"once",function(e,t){r.events.once(e,t)}),Jg(m(r),"off",function(e,t){r.events.off(e,t)}),Jg(m(r),"removeListener",function(e,t){r.events.removeListener(e,t)}),r.logger=ee(n,r.name),r}return w(t,e),A(t,[{key:"context",get:function(){return re(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"size",get:function(){return this.records.size}},{key:"keys",get:function(){return Array.from(this.records.keys())}},{key:"values",get:function(){return Array.from(this.records.values())}},{key:"pending",get:function(){var e=[];return this.values.forEach(function(t){if(!(T(t.response)<"u")){var n={topic:t.topic,request:ie(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}}),e}},{key:"setJsonRpcRecords",value:(a=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.setItem(this.storageKey,t);case 1:return e.a(2)}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getJsonRpcRecords",value:(i=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.getItem(this.storageKey);case 1:return e.a(2,e.v)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"getRecord",value:function(e){this.isInitialized();var t=this.records.get(e);if(!t){var n=jd("NO_MATCHING_KEY","".concat(this.name,": ").concat(e)).message;throw new Error(n)}return t}},{key:"persist",value:(r=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.setJsonRpcRecords(this.values);case 1:this.events.emit(np);case 2:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"restore",value:(n=q(x().m(function e(){var t,n,r,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.getJsonRpcRecords();case 1:if(!(T(t=e.v)>"u")&&t.length){e.n=2;break}return e.a(2);case 2:if(!this.records.size){e.n=3;break}throw n=jd("RESTORE_WILL_OVERRIDE",this.name),r=n.message,this.logger.error(r),new Error(r);case 3:this.cached=t,this.logger.debug("Successfully Restored records for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",records:this.values}),e.n=5;break;case 4:e.p=4,i=e.v,this.logger.debug("Failed to Restore records for ".concat(this.name)),this.logger.error(i);case 5:return e.a(2)}},e,this,[[0,4]])})),function(){return n.apply(this,arguments)})},{key:"registerEventListeners",value:function(){var e=this;this.events.on(Qf,function(t){var n=Qf;e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,record:t})}),this.events.on(ep,function(t){var n=ep;e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,record:t})}),this.events.on(tp,function(t){var n=tp;e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,record:t})}),this.core.heartbeat.on(ae.pulse,function(){e.cleanup()})}},{key:"cleanup",value:function(){var e=this;try{this.isInitialized();var t=!1;this.records.forEach(function(n){V.toMiliseconds(n.expiry||0)-Date.now()<=0&&(e.logger.info("Deleting expired history log: ".concat(n.id)),e.records.delete(n.id),e.events.emit(tp,n,!1),t=!0)}),t&&this.persist()}catch(Rt){this.logger.warn(Rt)}}},{key:"isInitialized",value:function(){if(!this.initialized){var e=jd("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]);var n,r,i,a}(Ui),Xg=Object.defineProperty,Zg=function(e,t,n){return function(e,t,n){return t in e?Xg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Qg=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t,[e,n])).core=e,r.logger=n,Zg(m(r),"expirations",new Map),Zg(m(r),"events",new X.EventEmitter),Zg(m(r),"name","expirer"),Zg(m(r),"version","0.3"),Zg(m(r),"cached",[]),Zg(m(r),"initialized",!1),Zg(m(r),"storagePrefix",bf),Zg(m(r),"init",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(r.initialized){e.n=2;break}return r.logger.trace("Initialized"),e.n=1,r.restore();case 1:r.cached.forEach(function(e){return r.expirations.set(e.target,e)}),r.cached=[],r.registerEventListeners(),r.initialized=!0;case 2:return e.a(2)}},e)}))),Zg(m(r),"has",function(e){try{var t=r.formatTarget(e);return T(r.getExpiration(t))<"u"}catch(n){return!1}}),Zg(m(r),"set",function(e,t){r.isInitialized();var n=r.formatTarget(e),i={target:n,expiry:t};r.expirations.set(n,i),r.checkExpiry(n,i),r.events.emit(rp,{target:n,expiration:i})}),Zg(m(r),"get",function(e){r.isInitialized();var t=r.formatTarget(e);return r.getExpiration(t)}),Zg(m(r),"del",function(e){if(r.isInitialized(),r.has(e)){var t=r.formatTarget(e),n=r.getExpiration(t);r.expirations.delete(t),r.events.emit(ip,{target:t,expiration:n})}}),Zg(m(r),"on",function(e,t){r.events.on(e,t)}),Zg(m(r),"once",function(e,t){r.events.once(e,t)}),Zg(m(r),"off",function(e,t){r.events.off(e,t)}),Zg(m(r),"removeListener",function(e,t){r.events.removeListener(e,t)}),r.logger=ee(n,r.name),r}return w(t,e),A(t,[{key:"context",get:function(){return re(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"length",get:function(){return this.expirations.size}},{key:"keys",get:function(){return Array.from(this.expirations.keys())}},{key:"values",get:function(){return Array.from(this.expirations.values())}},{key:"formatTarget",value:function(e){if("string"==typeof e)return function(e){return Wo("topic",e)}(e);if("number"==typeof e)return function(e){return Wo("id",e)}(e);var t=jd("UNKNOWN_TYPE","Target type: ".concat(T(e))).message;throw new Error(t)}},{key:"setExpirations",value:(a=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.setItem(this.storageKey,t);case 1:return e.a(2)}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getExpirations",value:(i=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.core.storage.getItem(this.storageKey);case 1:return e.a(2,e.v)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"persist",value:(r=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.setExpirations(this.values);case 1:this.events.emit(op);case 2:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"restore",value:(n=q(x().m(function e(){var t,n,r,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.getExpirations();case 1:if(!(T(t=e.v)>"u")&&t.length){e.n=2;break}return e.a(2);case 2:if(!this.expirations.size){e.n=3;break}throw n=jd("RESTORE_WILL_OVERRIDE",this.name),r=n.message,this.logger.error(r),new Error(r);case 3:this.cached=t,this.logger.debug("Successfully Restored expirations for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",expirations:this.values}),e.n=5;break;case 4:e.p=4,i=e.v,this.logger.debug("Failed to Restore expirations for ".concat(this.name)),this.logger.error(i);case 5:return e.a(2)}},e,this,[[0,4]])})),function(){return n.apply(this,arguments)})},{key:"getExpiration",value:function(e){var t=this.expirations.get(e);if(!t){var n=jd("NO_MATCHING_KEY","".concat(this.name,": ").concat(e)).message;throw this.logger.warn(n),new Error(n)}return t}},{key:"checkExpiry",value:function(e,t){var n=t.expiry;V.toMiliseconds(n)-Date.now()<=0&&this.expire(e,t)}},{key:"expire",value:function(e,t){this.expirations.delete(e),this.events.emit(ap,{target:e,expiration:t})}},{key:"checkExpirations",value:function(){var e=this;this.core.relayer.connected&&this.expirations.forEach(function(t,n){return e.checkExpiry(n,t)})}},{key:"registerEventListeners",value:function(){var e=this;this.core.heartbeat.on(ae.pulse,function(){return e.checkExpirations()}),this.events.on(rp,function(t){var n=rp;e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,data:t}),e.persist()}),this.events.on(ap,function(t){var n=ap;e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,data:t}),e.persist()}),this.events.on(ip,function(t){var n=ip;e.logger.info("Emitting ".concat(n)),e.logger.debug({type:"event",event:n,data:t}),e.persist()})}},{key:"isInitialized",value:function(){if(!this.initialized){var e=jd("NOT_INITIALIZED",this.name).message;throw new Error(e)}}}]);var n,r,i,a}(Bi),em=Object.defineProperty,tm=function(e,t,n){return function(e,t,n){return t in e?em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},nm=function(e){function t(e,n,r){var i;return I(this,t),(i=v(this,t,[e,n,r])).core=e,i.logger=n,i.store=r,tm(m(i),"name","verify-api"),tm(m(i),"abortController"),tm(m(i),"isDevEnv"),tm(m(i),"verifyUrlV3",up),tm(m(i),"storagePrefix",bf),tm(m(i),"version",2),tm(m(i),"publicKey"),tm(m(i),"fetchPromise"),tm(m(i),"init",q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:if(i.isDevEnv){e.n=2;break}return e.n=1,i.store.getItem(i.storeKey);case 1:if(i.publicKey=e.v,!(i.publicKey&&V.toMiliseconds(null==(t=i.publicKey)?void 0:t.expiresAt)<Date.now())){e.n=2;break}return i.logger.debug("verify v2 public key expired"),e.n=2,i.removePublicKey();case 2:return e.a(2)}},e)}))),tm(m(i),"register",function(){var e=q(x().m(function e(t){var n,r,a,o,s,c,u,l;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(To()&&!i.isDevEnv){e.n=1;break}return e.a(2);case 1:return n=window.location.origin,r=t.id,a=t.decryptedId,o="".concat(i.verifyUrlV3,"/attestation?projectId=").concat(i.core.projectId,"&origin=").concat(n,"&id=").concat(r,"&decryptedId=").concat(a),e.p=2,s=K.getDocument(),c=i.startAbortTimer(5*V.ONE_SECOND),e.n=3,new Promise(function(e,t){var n=function(){window.removeEventListener("message",u),s.body.removeChild(a),t("attestation aborted")};i.abortController.signal.addEventListener("abort",n);var a=s.createElement("iframe");a.src=o,a.style.display="none",a.addEventListener("error",n,{signal:i.abortController.signal});var u=function(t){if(t.data&&"string"==typeof t.data)try{var o=JSON.parse(t.data);if("verify_attestation"===o.type){if(Y(o.attestation).payload.id!==r)return;clearInterval(c),s.body.removeChild(a),i.abortController.signal.removeEventListener("abort",n),window.removeEventListener("message",u),e(null===o.attestation?"":o.attestation)}}catch($y){i.logger.warn($y)}};s.body.appendChild(a),window.addEventListener("message",u,{signal:i.abortController.signal})});case 3:return u=e.v,e.a(2,(i.logger.debug("jwt attestation",u),u));case 4:return e.p=4,l=e.v,i.logger.warn(l),e.a(2,"")}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}()),tm(m(i),"resolve",function(){var e=q(x().m(function e(t){var n,r,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:if(!i.isDevEnv){e.n=1;break}return e.a(2,"");case 1:if(n=t.attestationId,r=t.hash,a=t.encryptedId,""!==n){e.n=2;break}return i.logger.debug("resolve: attestationId is empty, skipping"),e.a(2);case 2:if(!n){e.n=6;break}if(Y(n).payload.id===a){e.n=3;break}return e.a(2);case 3:return e.n=4,i.isValidJwtAttestation(n);case 4:if(!(o=e.v)){e.n=6;break}if(o.isVerified){e.n=5;break}return i.logger.warn("resolve: jwt attestation: origin url not verified"),e.a(2);case 5:return e.a(2,o);case 6:if(r){e.n=7;break}return e.a(2);case 7:return s=i.getVerifyUrl(null==t?void 0:t.verifyUrl),e.a(2,i.fetchAttestation(r,s))}},e)}));return function(t){return e.apply(this,arguments)}}()),tm(m(i),"fetchAttestation",function(){var e=q(x().m(function e(t,n){var r,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:return i.logger.debug("resolving attestation: ".concat(t," from url: ").concat(n)),r=i.startAbortTimer(5*V.ONE_SECOND),e.n=1,fetch("".concat(n,"/attestation/").concat(t,"?v2Supported=true"),{signal:i.abortController.signal});case 1:if(a=e.v,clearTimeout(r),200!==a.status){e.n=3;break}return e.n=2,a.json();case 2:o=e.v,e.n=4;break;case 3:o=void 0;case 4:return e.a(2,o)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),tm(m(i),"getVerifyUrl",function(e){var t=e||cp;return lp.includes(t)||(i.logger.info("verify url: ".concat(t,", not included in trusted list, assigning default: ").concat(cp)),t=cp),t}),tm(m(i),"fetchPublicKey",q(x().m(function e(){var t,n,r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,i.logger.debug("fetching public key from: ".concat(i.verifyUrlV3)),t=i.startAbortTimer(V.FIVE_SECONDS),e.n=1,fetch("".concat(i.verifyUrlV3,"/public-key"),{signal:i.abortController.signal});case 1:return n=e.v,clearTimeout(t),e.n=2,n.json();case 2:return e.a(2,e.v);case 3:e.p=3,r=e.v,i.logger.warn(r);case 4:return e.a(2)}},e,null,[[0,3]])}))),tm(m(i),"persistPublicKey",function(){var e=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return i.logger.debug("persisting public key to local storage",t),e.n=1,i.store.setItem(i.storeKey,t);case 1:i.publicKey=t;case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),tm(m(i),"removePublicKey",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return i.logger.debug("removing verify v2 public key from storage"),e.n=1,i.store.removeItem(i.storeKey);case 1:i.publicKey=void 0;case 2:return e.a(2)}},e)}))),tm(m(i),"isValidJwtAttestation",function(){var e=q(x().m(function e(t){var n,r,a,o;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,i.getPublicKey();case 1:if(n=e.v,e.p=2,!n){e.n=3;break}return e.a(2,i.validateAttestation(t,n));case 3:e.n=5;break;case 4:e.p=4,a=e.v,i.logger.error(a),i.logger.warn("error validating attestation");case 5:return e.n=6,i.fetchAndPersistPublicKey();case 6:if(r=e.v,e.p=7,!r){e.n=8;break}return e.a(2,i.validateAttestation(t,r));case 8:e.n=10;break;case 9:e.p=9,o=e.v,i.logger.error(o),i.logger.warn("error validating attestation");case 10:return e.a(2)}},e,null,[[7,9],[2,4]])}));return function(t){return e.apply(this,arguments)}}()),tm(m(i),"getPublicKey",q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:if(!i.publicKey){e.n=1;break}t=i.publicKey,e.n=3;break;case 1:return e.n=2,i.fetchAndPersistPublicKey();case 2:t=e.v;case 3:return e.a(2,t)}},e)}))),tm(m(i),"fetchAndPersistPublicKey",q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:if(!i.fetchPromise){e.n=2;break}return e.n=1,i.fetchPromise;case 1:return e.a(2,i.publicKey);case 2:return i.fetchPromise=new Promise(function(){var e=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,i.fetchPublicKey();case 1:if(n=e.v,!n){e.n=3;break}return e.n=2,i.persistPublicKey(n);case 2:t(n);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),e.n=3,i.fetchPromise;case 3:return t=e.v,e.a(2,(i.fetchPromise=void 0,t))}},e)}))),tm(m(i),"validateAttestation",function(e,t){var n=dd(e,t.publicKey),r={hasExpired:V.toMiliseconds(n.exp)<Date.now(),payload:n};if(r.hasExpired)throw i.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:r.payload.origin,isScam:r.payload.isScam,isVerified:r.payload.isVerified}}),i.logger=ee(n,i.name),i.abortController=new AbortController,i.isDevEnv=rs(),i.init(),i}return w(t,e),A(t,[{key:"storeKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}},{key:"context",get:function(){return re(this.logger)}},{key:"startAbortTimer",value:function(e){var t=this;return this.abortController=new AbortController,setTimeout(function(){return t.abortController.abort()},V.toMiliseconds(e))}}])}(zi),rm=Object.defineProperty,im=function(e,t,n){return function(e,t,n){return t in e?rm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},am=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t,[e,n])).projectId=e,r.logger=n,im(m(r),"context","echo"),im(m(r),"registerDeviceToken",function(){var e=q(x().m(function e(t){var n,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:return n=t.clientId,i=t.token,a=t.notificationType,o=t.enableEncrypted,s=void 0!==o&&o,c="".concat("https://echo.walletconnect.com","/").concat(r.projectId,"/clients"),e.n=1,fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,type:a,token:i,always_raw:s})});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),r.logger=ee(n,r.context),r}return w(t,e),A(t)}(Fi),om=Object.defineProperty,sm=Object.getOwnPropertySymbols,cm=Object.prototype.hasOwnProperty,um=Object.prototype.propertyIsEnumerable,lm=function(e,t,n){return t in e?om(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},dm=function(e,t){for(var n in t||(t={}))cm.call(t,n)&&lm(e,n,t[n]);if(sm){var r,i=C(sm(t));try{for(i.s();!(r=i.n()).done;){n=r.value;um.call(t,n)&&lm(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},fm=function(e,t,n){return lm(e,"symbol"!=T(t)?t+"":t,n)},pm=function(e){function t(e,n){var r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return I(this,t),(r=v(this,t,[e,n,i])).core=e,r.logger=n,fm(m(r),"context","event-client"),fm(m(r),"storagePrefix",bf),fm(m(r),"storageVersion",.1),fm(m(r),"events",new Map),fm(m(r),"shouldPersist",!1),fm(m(r),"init",q(x().m(function e(){var t,n,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(rs()){e.n=5;break}return e.p=1,n=ns(),i=Date.now(),a=r.getAppDomain(),e.n=2,r.core.crypto.getClientId();case 2:return o=e.v,s=jo(r.core.relayer.protocol,r.core.relayer.version,Lf),t={eventId:n,timestamp:i,domain:a,props:{event:"INIT",type:"",properties:{client_id:o,user_agent:s}}},e.n=3,r.sendEvent([t]);case 3:e.n=5;break;case 4:e.p=4,c=e.v,r.logger.warn(c);case 5:return e.a(2)}},e,null,[[1,4]])}))),fm(m(r),"createEvent",function(e){var t=e.event,n=void 0===t?"ERROR":t,i=e.type,a=void 0===i?"":i,o=e.properties,s=o.topic,c=o.trace,u=ns(),l=r.core.projectId||"",d=Date.now(),f=dm({eventId:u,timestamp:d,props:{event:n,type:a,properties:{topic:s,trace:c}},bundleId:l,domain:r.getAppDomain()},r.setMethods(u));return r.telemetryEnabled&&(r.events.set(u,f),r.shouldPersist=!0),f}),fm(m(r),"getEvent",function(e){var t=e.eventId,n=e.topic;if(t)return r.events.get(t);var i=Array.from(r.events.values()).find(function(e){return e.props.properties.topic===n});return i?dm(dm({},i),r.setMethods(i.eventId)):void 0}),fm(m(r),"deleteEvent",function(e){var t=e.eventId;r.events.delete(t),r.shouldPersist=!0}),fm(m(r),"setEventListeners",function(){r.core.heartbeat.on(ae.pulse,q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(!r.shouldPersist){e.n=1;break}return e.n=1,r.persist();case 1:r.events.forEach(function(e){V.fromMiliseconds(Date.now())-V.fromMiliseconds(e.timestamp)>86400&&(r.events.delete(e.eventId),r.shouldPersist=!0)});case 2:return e.a(2)}},e)})))}),fm(m(r),"setMethods",function(e){return{addTrace:function(t){return r.addTrace(e,t)},setError:function(t){return r.setError(e,t)}}}),fm(m(r),"addTrace",function(e,t){var n=r.events.get(e);n&&(n.props.properties.trace.push(t),r.events.set(e,n),r.shouldPersist=!0)}),fm(m(r),"setError",function(e,t){var n=r.events.get(e);n&&(n.props.type=t,n.timestamp=Date.now(),r.events.set(e,n),r.shouldPersist=!0)}),fm(m(r),"persist",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.core.storage.setItem(r.storageKey,Array.from(r.events.values()));case 1:r.shouldPersist=!1;case 2:return e.a(2)}},e)}))),fm(m(r),"restore",q(x().m(function e(){var t,n,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r.core.storage.getItem(r.storageKey);case 1:if(n=e.v){e.n=2;break}n=[];case 2:if((t=n).length){e.n=3;break}return e.a(2);case 3:t.forEach(function(e){r.events.set(e.eventId,dm(dm({},e),r.setMethods(e.eventId)))}),e.n=5;break;case 4:e.p=4,i=e.v,r.logger.warn(i);case 5:return e.a(2)}},e,null,[[0,4]])}))),fm(m(r),"submit",q(x().m(function e(){var t,n,i,a,o,s,c,u,l;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r.telemetryEnabled&&0!==r.events.size){e.n=1;break}return e.a(2);case 1:t=[],n=C(r.events);try{for(n.s();!(i=n.n()).done;)a=S(i.value,2),a[0],(o=a[1]).props.type&&t.push(o)}catch(d){n.e(d)}finally{n.f()}if(0===t.length){e.n=6;break}return e.p=2,e.n=3,r.sendEvent(t);case 3:if(!e.v.ok){e.n=4;break}s=C(t);try{for(s.s();!(c=s.n()).done;)u=c.value,r.events.delete(u.eventId),r.shouldPersist=!0}catch(d){s.e(d)}finally{s.f()}case 4:e.n=6;break;case 5:e.p=5,l=e.v,r.logger.warn(l);case 6:return e.a(2)}},e,null,[[2,5]])}))),fm(m(r),"sendEvent",function(){var e=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:return n=r.getAppDomain()?"":"&sp=desktop",e.n=1,fetch("".concat("https://pulse.walletconnect.org/batch","?projectId=").concat(r.core.projectId,"&st=events_sdk&sv=js-").concat(Lf).concat(n),{method:"POST",body:JSON.stringify(t)});case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}()),fm(m(r),"getAppDomain",function(){return Do().url}),r.logger=ee(n,r.context),r.telemetryEnabled=i,i?r.restore().then(q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.submit();case 1:r.setEventListeners();case 2:return e.a(2)}},e)}))):r.persist(),r}return w(t,e),A(t,[{key:"storageKey",get:function(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}])}(Wi),hm=Object.defineProperty,vm=Object.getOwnPropertySymbols,gm=Object.prototype.hasOwnProperty,mm=Object.prototype.propertyIsEnumerable,wm=function(e,t,n){return t in e?hm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ym=function(e,t){for(var n in t||(t={}))gm.call(t,n)&&wm(e,n,t[n]);if(vm){var r,i=C(vm(t));try{for(i.s();!(r=i.n()).done;){n=r.value;mm.call(t,n)&&wm(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},bm=function(e,t,n){return wm(e,"symbol"!=T(t)?t+"":t,n)},km=function(e){function t(e){var n,r;I(this,t),n=v(this,t,[e]),bm(m(n),"protocol","wc"),bm(m(n),"version",2),bm(m(n),"name",yf),bm(m(n),"relayUrl"),bm(m(n),"projectId"),bm(m(n),"customStoragePrefix"),bm(m(n),"events",new X.EventEmitter),bm(m(n),"logger"),bm(m(n),"heartbeat"),bm(m(n),"relayer"),bm(m(n),"crypto"),bm(m(n),"storage"),bm(m(n),"history"),bm(m(n),"expirer"),bm(m(n),"pairing"),bm(m(n),"verify"),bm(m(n),"echoClient"),bm(m(n),"linkModeSupportedApps"),bm(m(n),"eventClient"),bm(m(n),"initialized",!1),bm(m(n),"logChunkController"),bm(m(n),"on",function(e,t){return n.events.on(e,t)}),bm(m(n),"once",function(e,t){return n.events.once(e,t)}),bm(m(n),"off",function(e,t){return n.events.off(e,t)}),bm(m(n),"removeListener",function(e,t){return n.events.removeListener(e,t)}),bm(m(n),"dispatchEnvelope",function(e){var t=e.topic,r=e.message,i=e.sessionExists;if(t&&r){var a={topic:t,message:r,publishedAt:Date.now(),transportType:qf};n.relayer.onLinkMessageEvent(a,{sessionExists:i})}});var i=n.getGlobalCore(null==e?void 0:e.customStoragePrefix);if(i)try{return g(n,(n.customStoragePrefix=i.customStoragePrefix,n.logger=i.logger,n.heartbeat=i.heartbeat,n.crypto=i.crypto,n.history=i.history,n.expirer=i.expirer,n.storage=i.storage,n.relayer=i.relayer,n.pairing=i.pairing,n.verify=i.verify,n.echoClient=i.echoClient,n.linkModeSupportedApps=i.linkModeSupportedApps,n.eventClient=i.eventClient,n.initialized=i.initialized,n.logChunkController=i.logChunkController,i))}catch(Oi){console.warn("Failed to copy global core",Oi)}n.projectId=null==e?void 0:e.projectId,n.relayUrl=(null==e?void 0:e.relayUrl)||Af,n.customStoragePrefix=null!=e&&e.customStoragePrefix?":".concat(e.customStoragePrefix):"";var a=Z({level:"string"==typeof(null==e?void 0:e.logger)&&e.logger?e.logger:kf,name:yf}),o=Q({opts:a,maxSizeInBytes:null==e?void 0:e.maxLogBlobSizeInBytes,loggerOverride:null==e?void 0:e.logger}),s=o.logger,c=o.chunkLoggerController;return n.logChunkController=c,null!=(r=n.logChunkController)&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=q(x().m(function e(){var t,r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(!(null!=(t=n.logChunkController)&&t.downloadLogsBlobInBrowser)){e.n=2;break}if(null==(r=n.logChunkController)){e.n=2;break}return i=r,e.n=1,n.crypto.getClientId();case 1:a=e.v,i.downloadLogsBlobInBrowser.call(i,{clientId:a});case 2:return e.a(2)}},e)}))),n.logger=ee(s,n.name),n.heartbeat=new te,n.crypto=new Mv(n,n.logger,null==e?void 0:e.keychain),n.history=new Yg(n,n.logger),n.expirer=new Qg(n,n.logger),n.storage=null!=e&&e.storage?e.storage:new ne(ym(ym({},Ef),null==e?void 0:e.storageOptions)),n.relayer=new Sg({core:n,logger:n.logger,relayUrl:n.relayUrl,projectId:n.projectId}),n.pairing=new $g(n,n.logger),n.verify=new nm(n,n.logger,n.storage),n.echoClient=new am(n.projectId||"",n.logger),n.linkModeSupportedApps=[],n.eventClient=new pm(n,n.logger,null==e?void 0:e.telemetryEnabled),n.setGlobalCore(n),n}return w(t,e),A(t,[{key:"context",get:function(){return re(this.logger)}},{key:"start",value:(o=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(this.initialized){e.n=1;break}return e.n=1,this.initialize();case 1:return e.a(2)}},e,this)})),function(){return o.apply(this,arguments)})},{key:"getLogsBlob",value:(a=q(x().m(function e(){var t,n,r,i;return x().w(function(e){for(;;)switch(e.n){case 0:if(null!=(t=this.logChunkController)){e.n=1;break}n=void 0,e.n=3;break;case 1:return r=t,e.n=2,this.crypto.getClientId();case 2:i=e.v,n=r.logsToBlob.call(r,{clientId:i});case 3:return e.a(2,n)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"addLinkModeSupportedApp",value:(i=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:if(this.linkModeSupportedApps.includes(t)){e.n=1;break}return this.linkModeSupportedApps.push(t),e.n=1,this.storage.setItem(Wf,this.linkModeSupportedApps);case 1:return e.a(2)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"initialize",value:(r=q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return this.logger.trace("Initialized"),e.p=1,e.n=2,this.crypto.init();case 2:return e.n=3,this.history.init();case 3:return e.n=4,this.expirer.init();case 4:return e.n=5,this.relayer.init();case 5:return e.n=6,this.heartbeat.init();case 6:return e.n=7,this.pairing.init();case 7:return e.n=8,this.storage.getItem(Wf);case 8:if(t=e.v){e.n=9;break}t=[];case 9:this.linkModeSupportedApps=t,this.initialized=!0,this.logger.info("Core Initialization Success"),e.n=11;break;case 10:throw e.p=10,n=e.v,this.logger.warn("Core Initialization Failure at epoch ".concat(Date.now()),n),this.logger.error(n.message),n;case 11:return e.a(2)}},e,this,[[1,10]])})),function(){return r.apply(this,arguments)})},{key:"getGlobalCore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{if(this.isGlobalCoreDisabled())return;var t="_walletConnectCore_".concat(e),n="".concat(t,"_count");return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn("WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ".concat(globalThis[n]," times.")),globalThis[t]}catch(t){return void console.warn("Failed to get global WalletConnect core",t)}}},{key:"setGlobalCore",value:function(e){var t;try{if(this.isGlobalCoreDisabled())return;var n="_walletConnectCore_".concat((null==(t=e.opts)?void 0:t.customStoragePrefix)||"");globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}},{key:"isGlobalCoreDisabled",value:function(){try{return("undefined"==typeof process?"undefined":T(process))<"u"&&"true"===wf.DISABLE_GLOBAL_CORE}catch(e){return!0}}}],[{key:"init",value:(n=q(x().m(function e(n){var r,i;return x().w(function(e){for(;;)switch(e.n){case 0:return r=new t(n),e.n=1,r.initialize();case 1:return e.n=2,r.crypto.getClientId();case 2:return i=e.v,e.n=3,r.storage.setItem("WALLETCONNECT_CLIENT_ID",i);case 3:return e.a(2,r)}},e)})),function(e){return n.apply(this,arguments)})}]);var n,r,i,a,o}(Ti),Em=km,Cm="client",Im="".concat("wc","@").concat(2,":").concat(Cm,":"),Nm=Cm,Am="error",Sm="WALLETCONNECT_DEEPLINK_CHOICE",Pm="Proposal expired",Om=V.SEVEN_DAYS,_m={wc_sessionPropose:{req:{ttl:V.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:V.ONE_DAY,prompt:!1,tag:1104},res:{ttl:V.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:V.ONE_DAY,prompt:!1,tag:1106},res:{ttl:V.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:V.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:V.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:V.ONE_DAY,prompt:!1,tag:1112},res:{ttl:V.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:V.ONE_DAY,prompt:!1,tag:1114},res:{ttl:V.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:V.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:V.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:V.FIVE_MINUTES,prompt:!1,tag:1119}}},Tm={min:V.FIVE_MINUTES,max:V.SEVEN_DAYS},xm="IDLE",Rm="ACTIVE",Um={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},Dm=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],jm="".concat("wc","@",1.5,":").concat("auth",":"),Mm="".concat(jm,":PUB_KEY"),Lm=Object.defineProperty,qm=Object.defineProperties,Bm=Object.getOwnPropertyDescriptors,zm=Object.getOwnPropertySymbols,Fm=Object.prototype.hasOwnProperty,Wm=Object.prototype.propertyIsEnumerable,Hm=function(e,t,n){return t in e?Lm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Vm=function(e,t){for(var n in t||(t={}))Fm.call(t,n)&&Hm(e,n,t[n]);if(zm){var r,i=C(zm(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Wm.call(t,n)&&Hm(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},Km=function(e,t){return qm(e,Bm(t))},$m=function(e,t,n){return Hm(e,"symbol"!=T(t)?t+"":t,n)},Gm=function(e){function t(e){var n;return I(this,t),n=v(this,t,[e]),$m(m(n),"name","engine"),$m(m(n),"events",new fe),$m(m(n),"initialized",!1),$m(m(n),"requestQueue",{state:xm,queue:[]}),$m(m(n),"sessionRequestQueue",{state:xm,queue:[]}),$m(m(n),"requestQueueDelay",V.ONE_SECOND),$m(m(n),"expectedPairingMethodMap",new Map),$m(m(n),"recentlyDeletedMap",new Map),$m(m(n),"recentlyDeletedLimit",200),$m(m(n),"relayMessageCache",[]),$m(m(n),"pendingSessions",new Map),$m(m(n),"init",q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(n.initialized){e.n=3;break}return e.n=1,n.cleanup();case 1:return n.registerRelayerEvents(),n.registerExpirerEvents(),n.registerPairingEvents(),e.n=2,n.registerLinkModeListeners();case 2:n.client.core.pairing.register({methods:Object.keys(_m)}),n.initialized=!0,setTimeout(q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n.processPendingMessageEvents();case 1:n.sessionRequestQueue.queue=n.getPendingSessionRequests(),n.processSessionRequestQueue();case 2:return e.a(2)}},e)})),V.toMiliseconds(n.requestQueueDelay));case 3:return e.a(2)}},e)}))),$m(m(n),"connect",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w,y,b,k,E,C,I,N,A,S,P,O;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.isInitialized(),e.n=1,n.confirmOnlineStateOrThrow();case 1:return r=Km(Vm({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}}),e.n=2,n.isValidConnect(r);case 2:r.optionalNamespaces=Rd(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={},i=r.pairingTopic,a=r.requiredNamespaces,o=r.optionalNamespaces,s=r.sessionProperties,c=r.scopedProperties,u=r.relays,l=i,f=!1,e.p=3,l&&(p=n.client.core.pairing.pairings.get(l),n.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=p.active),e.n=5;break;case 4:throw e.p=4,O=e.v,n.client.logger.error("connect() -> pairing.get(".concat(l,") failed")),O;case 5:if(l&&f){e.n=7;break}return e.n=6,n.client.core.pairing.create();case 6:h=e.v,v=h.topic,g=h.uri,l=v,d=g;case 7:if(l){e.n=8;break}throw m=jd("NO_MATCHING_KEY","connect() pairing topic: ".concat(l)),w=m.message,new Error(w);case 8:return e.n=9,n.client.core.crypto.generateKeyPair();case 9:return y=e.v,b=_m.wc_sessionPropose.req.ttl||V.FIVE_MINUTES,k=Vo(b),E=Km(Vm(Vm({requiredNamespaces:a,optionalNamespaces:o,relays:null!=u?u:[{protocol:"irn"}],proposer:{publicKey:y,metadata:n.client.metadata},expiryTimestamp:k,pairingTopic:l},s&&{sessionProperties:s}),c&&{scopedProperties:c}),{id:Ee()}),C=$o("session_connect",E.id),I=zo(b,Pm),N=I.reject,A=I.resolve,S=I.done,P=function(e){e.id===E.id&&(n.client.events.off("proposal_expire",P),n.pendingSessions.delete(E.id),n.events.emit(C,{error:{message:Pm,code:0}}))},n.client.events.on("proposal_expire",P),n.events.once(C,function(e){var t=e.error,r=e.session;n.client.events.off("proposal_expire",P),t?N(t):r&&A(r)}),e.n=10,n.sendRequest({topic:l,method:"wc_sessionPropose",params:E,throwOnFailedPublish:!0,clientRpcId:E.id});case 10:return e.n=11,n.setProposal(E.id,E);case 11:return e.a(2,{uri:d,approval:S})}},e,null,[[3,4]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"pair",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.isInitialized(),e.n=1,n.confirmOnlineStateOrThrow();case 1:return e.p=1,e.n=2,n.client.core.pairing.pair(t);case 2:return e.a(2,e.v);case 3:throw e.p=3,r=e.v,n.client.logger.error("pair() failed"),r;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"approve",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w,y,b,k,E,C,I,N,A,S,P,O;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=n.client.core.eventClient.createEvent({properties:{topic:null==(r=null==t?void 0:t.id)?void 0:r.toString(),trace:[Sp]}}),e.p=1,n.isInitialized(),e.n=2,n.confirmOnlineStateOrThrow();case 2:e.n=4;break;case 3:throw e.p=3,N=e.v,o.setError(jp),N;case 4:return e.p=4,e.n=5,n.isValidProposalId(null==t?void 0:t.id);case 5:e.n=7;break;case 6:throw e.p=6,A=e.v,n.client.logger.error("approve() -> proposal.get(".concat(null==t?void 0:t.id,") failed")),o.setError(Fp),A;case 7:return e.p=7,e.n=8,n.isValidApprove(t);case 8:e.n=10;break;case 9:throw e.p=9,S=e.v,n.client.logger.error("approve() -> isValidApprove() failed"),o.setError(zp),S;case 10:return s=t.id,c=t.relayProtocol,u=t.namespaces,l=t.sessionProperties,d=t.scopedProperties,f=t.sessionConfig,p=n.client.proposal.get(s),n.client.core.eventClient.deleteEvent({eventId:o.eventId}),h=p.pairingTopic,v=p.proposer,g=p.requiredNamespaces,m=p.optionalNamespaces,(w=null==(i=n.client.core.eventClient)?void 0:i.getEvent({topic:h}))||(w=null==(a=n.client.core.eventClient)?void 0:a.createEvent({type:Sp,properties:{topic:h,trace:[Sp,Pp]}})),e.n=11,n.client.core.crypto.generateKeyPair();case 11:return y=e.v,b=v.publicKey,e.n=12,n.client.core.crypto.generateSharedKey(y,b);case 12:return k=e.v,E=Vm(Vm(Vm({relay:{protocol:null!=c?c:"irn"},namespaces:u,controller:{publicKey:y,metadata:n.client.metadata},expiry:Vo(Om)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),C=Bf,w.addTrace(Op),e.p=13,e.n=14,n.client.core.relayer.subscribe(k,{transportType:C});case 14:e.n=16;break;case 15:throw e.p=15,P=e.v,w.setError(Lp),P;case 16:return w.addTrace(_p),I=Km(Vm({},E),{topic:k,requiredNamespaces:g,optionalNamespaces:m,pairingTopic:h,acknowledged:!1,self:E.controller,peer:{publicKey:v.publicKey,metadata:v.metadata},controller:y,transportType:Bf}),e.n=17,n.client.session.set(k,I);case 17:return w.addTrace(Rp),e.p=18,w.addTrace(Up),e.n=19,n.sendRequest({topic:k,method:"wc_sessionSettle",params:E,throwOnFailedPublish:!0}).catch(function(e){var t;throw null!==(t=w)&&void 0!==t&&t.setError(Bp),e});case 19:return w.addTrace(Dp),w.addTrace(Tp),e.n=20,n.sendResult({id:s,topic:h,result:{relay:{protocol:null!=c?c:"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch(function(e){var t;throw null!==(t=w)&&void 0!==t&&t.setError(qp),e});case 20:w.addTrace(xp),e.n=23;break;case 21:return e.p=21,O=e.v,n.client.logger.error(O),n.client.session.delete(k,Md("USER_DISCONNECTED")),e.n=22,n.client.core.relayer.unsubscribe(k);case 22:throw O;case 23:return n.client.core.eventClient.deleteEvent({eventId:w.eventId}),e.n=24,n.client.core.pairing.updateMetadata({topic:h,metadata:v.metadata});case 24:return e.n=25,n.client.proposal.delete(s,Md("USER_DISCONNECTED"));case 25:return e.n=26,n.client.core.pairing.activate({topic:h});case 26:return e.n=27,n.setExpiry(k,Vo(Om));case 27:return e.a(2,{topic:k,acknowledged:function(){return Promise.resolve(n.client.session.get(k))}})}},e,null,[[18,21],[13,15],[7,9],[4,6],[1,3]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"reject",function(){var e=q(x().m(function e(t){var r,i,a,o,s;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.isInitialized(),e.n=1,n.confirmOnlineStateOrThrow();case 1:return e.p=1,e.n=2,n.isValidReject(t);case 2:e.n=4;break;case 3:throw e.p=3,o=e.v,n.client.logger.error("reject() -> isValidReject() failed"),o;case 4:r=t.id,i=t.reason,e.p=5,a=n.client.proposal.get(r).pairingTopic,e.n=7;break;case 6:throw e.p=6,s=e.v,n.client.logger.error("reject() -> proposal.get(".concat(r,") failed")),s;case 7:if(!a){e.n=9;break}return e.n=8,n.sendError({id:r,topic:a,error:i,rpcOpts:_m.wc_sessionPropose.reject});case 8:return e.n=9,n.client.proposal.delete(r,Md("USER_DISCONNECTED"));case 9:return e.a(2)}},e,null,[[5,6],[1,3]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"update",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.isInitialized(),e.n=1,n.confirmOnlineStateOrThrow();case 1:return e.p=1,e.n=2,n.isValidUpdate(t);case 2:e.n=4;break;case 3:throw e.p=3,f=e.v,n.client.logger.error("update() -> isValidUpdate() failed"),f;case 4:return r=t.topic,i=t.namespaces,a=zo(),o=a.done,s=a.resolve,c=a.reject,u=Ee(),l=we().toString(),d=n.client.session.get(r).namespaces,n.events.once($o("session_update",u),function(e){var t=e.error;t?c(t):s()}),e.n=5,n.client.session.update(r,{namespaces:i});case 5:return e.n=6,n.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:l}).catch(function(e){n.client.logger.error(e),n.client.session.update(r,{namespaces:d}),c(e)});case 6:return e.a(2,{acknowledged:o})}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"extend",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.isInitialized(),e.n=1,n.confirmOnlineStateOrThrow();case 1:return e.p=1,e.n=2,n.isValidExtend(t);case 2:e.n=4;break;case 3:throw e.p=3,u=e.v,n.client.logger.error("extend() -> isValidExtend() failed"),u;case 4:return r=t.topic,i=Ee(),a=zo(),o=a.done,s=a.resolve,c=a.reject,n.events.once($o("session_extend",i),function(e){var t=e.error;t?c(t):s()}),e.n=5,n.setExpiry(r,Vo(Om));case 5:return n.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(function(e){c(e)}),e.a(2,{acknowledged:o})}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"request",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w,y;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.isInitialized(),e.p=1,e.n=2,n.isValidRequest(t);case 2:e.n=4;break;case 3:throw e.p=3,y=e.v,n.client.logger.error("request() -> isValidRequest() failed"),y;case 4:if(r=t.chainId,i=t.request,a=t.topic,o=t.expiry,s=void 0===o?_m.wc_sessionRequest.req.ttl:o,c=n.client.session.get(a),!((null==c?void 0:c.transportType)===Bf)){e.n=5;break}return e.n=5,n.confirmOnlineStateOrThrow();case 5:if(u=Ee(),l=we().toString(),d=zo(s,"Request expired. Please try again."),f=d.done,p=d.resolve,h=d.reject,n.events.once($o("session_request",u),function(e){var t=e.error,n=e.result;t?h(t):p(n)}),v="wc_sessionRequest",!(g=n.getAppLinkIfEnabled(c.peer.metadata,c.transportType))){e.n=8;break}return e.n=6,n.sendRequest({clientRpcId:u,relayRpcId:l,topic:a,method:v,params:{request:Km(Vm({},i),{expiryTimestamp:Vo(s)}),chainId:r},expiry:s,throwOnFailedPublish:!0,appLink:g}).catch(function(e){return h(e)});case 6:return n.client.events.emit("session_request_sent",{topic:a,request:i,chainId:r,id:u}),e.n=7,f();case 7:case 9:return e.a(2,e.v);case 8:return m={request:Km(Vm({},i),{expiryTimestamp:Vo(s)}),chainId:r},w=n.shouldSetTVF(v,m),e.n=9,Promise.all([new Promise(function(){var e=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n.sendRequest(Vm({clientRpcId:u,relayRpcId:l,topic:a,method:v,params:m,expiry:s,throwOnFailedPublish:!0},w&&{tvf:n.getTVFParams(u,m)})).catch(function(e){return h(e)});case 1:n.client.events.emit("session_request_sent",{topic:a,request:i,chainId:r,id:u}),t();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),new Promise(function(){var e=q(x().m(function e(t){var r,i;return x().w(function(e){for(;;)switch(e.n){case 0:if(null!=(r=c.sessionConfig)&&r.disableDeepLink){e.n=2;break}return e.n=1,Qo(n.client.core.storage,Sm);case 1:return i=e.v,e.n=2,Jo({id:u,topic:a,wcDeepLink:i});case 2:t();case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),f()]).then(function(e){return e[2]})}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"respond",function(){var e=q(x().m(function e(t){var r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:return n.isInitialized(),e.n=1,n.isValidRespond(t);case 1:if(r=t.topic,i=t.response,a=i.id,o=n.client.session.get(r),!(o.transportType===Bf)){e.n=2;break}return e.n=2,n.confirmOnlineStateOrThrow();case 2:if(s=n.getAppLinkIfEnabled(o.peer.metadata,o.transportType),!be(i)){e.n=4;break}return e.n=3,n.sendResult({id:a,topic:r,result:i.result,throwOnFailedPublish:!0,appLink:s});case 3:e.n=5;break;case 4:if(!ke(i)){e.n=5;break}return e.n=5,n.sendError({id:a,topic:r,error:i.error,appLink:s});case 5:n.cleanupAfterResponse(t);case 6:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"ping",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n.isInitialized(),e.n=1,n.confirmOnlineStateOrThrow();case 1:return e.p=1,e.n=2,n.isValidPing(t);case 2:e.n=4;break;case 3:throw e.p=3,l=e.v,n.client.logger.error("ping() -> isValidPing() failed"),l;case 4:if(r=t.topic,!n.client.session.keys.includes(r)){e.n=6;break}return i=Ee(),a=we().toString(),o=zo(),s=o.done,c=o.resolve,u=o.reject,n.events.once($o("session_ping",i),function(e){var t=e.error;t?u(t):c()}),e.n=5,Promise.all([n.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:a}),s()]);case 5:e.n=7;break;case 6:if(!n.client.core.pairing.pairings.keys.includes(r)){e.n=7;break}return n.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),e.n=7,n.client.core.pairing.ping({topic:r});case 7:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"emit",function(){var e=q(x().m(function e(t){var r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:return n.isInitialized(),e.n=1,n.confirmOnlineStateOrThrow();case 1:return e.n=2,n.isValidEmit(t);case 2:return r=t.topic,i=t.event,a=t.chainId,o=we().toString(),s=Ee(),e.n=3,n.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:a},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:s});case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"disconnect",function(){var e=q(x().m(function e(t){var r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:return n.isInitialized(),e.n=1,n.confirmOnlineStateOrThrow();case 1:return e.n=2,n.isValidDisconnect(t);case 2:if(r=t.topic,!n.client.session.keys.includes(r)){e.n=5;break}return e.n=3,n.sendRequest({topic:r,method:"wc_sessionDelete",params:Md("USER_DISCONNECTED"),throwOnFailedPublish:!0});case 3:return e.n=4,n.deleteSession({topic:r,emitEvent:!1});case 4:case 6:e.n=8;break;case 5:if(!n.client.core.pairing.pairings.keys.includes(r)){e.n=7;break}return e.n=6,n.client.core.pairing.disconnect({topic:r});case 7:throw i=jd("MISMATCHED_TOPIC","Session or pairing topic not found: ".concat(r)),a=i.message,new Error(a);case 8:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"find",function(e){return n.isInitialized(),n.client.session.getAll().filter(function(t){return function(e,t){var n=t.requiredNamespaces,r=Object.keys(e.namespaces),i=Object.keys(n),a=!0;return!!Lo(i,r)&&(r.forEach(function(t){var r=e.namespaces[t],i=r.accounts,o=r.methods,s=r.events,c=Pd(i),u=n[t];Lo(vo(t,u),c)&&Lo(u.methods,o)&&Lo(u.events,s)||(a=!1)}),a)}(t,e)})}),$m(m(n),"getPendingSessionRequests",function(){return n.client.pendingRequest.getAll()}),$m(m(n),"authenticate",function(){var e=q(x().m(function e(t,r){var i,a,o,s,c,u,l,d,f,p,h,v,g,m,w,y,b,k,E,I,N,A,S,O,_,T,R,U,D,j,M,L,B,z,F,W,H,V,K,$,G;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.isInitialized(),n.isValidAuthenticate(t),a=r&&n.client.core.linkModeSupportedApps.includes(r)&&(null==(i=n.client.metadata.redirect)?void 0:i.linkMode),!((o=a?qf:Bf)===Bf)){e.n=1;break}return e.n=1,n.confirmOnlineStateOrThrow();case 1:return s=t.chains,c=t.statement,u=void 0===c?"":c,l=t.uri,d=t.domain,f=t.nonce,p=t.type,h=t.exp,v=t.nbf,g=t.methods,m=void 0===g?[]:g,w=t.expiry,y=P(t.resources||[]),e.n=2,n.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});case 2:return b=e.v,k=b.topic,E=b.uri,n.client.logger.info({message:"Generated new pairing",pairing:{topic:k,uri:E}}),e.n=3,n.client.core.crypto.generateKeyPair();case 3:return I=e.v,N=Jl(I),e.n=4,Promise.all([n.client.auth.authKeys.set(Mm,{responseTopic:N,publicKey:I}),n.client.auth.pairingTopics.set(N,{topic:N,pairingTopic:k})]);case 4:return e.n=5,n.client.core.relayer.subscribe(N,{transportType:o});case 5:if(n.client.logger.info("sending request to new pairing topic: ".concat(k)),!(m.length>0)){e.n=6;break}A=ho(s[0]),S=A.namespace,O=bc(S,"request",m),Ic(y)&&(O=kc(O,y.pop())),y.push(O);case 6:if(_=w&&w>_m.wc_sessionAuthenticate.req.ttl?w:_m.wc_sessionAuthenticate.req.ttl,T={authPayload:{type:null!=p?p:"caip122",chains:s,statement:u,aud:l,domain:d,version:"1",nonce:f,iat:(new Date).toISOString(),exp:h,nbf:v,resources:y},requester:{publicKey:I,metadata:n.client.metadata},expiryTimestamp:Vo(_)},R={eip155:{chains:s,methods:P(new Set(["personal_sign"].concat(P(m)))),events:["chainChanged","accountsChanged"]}},U={requiredNamespaces:{},optionalNamespaces:R,relays:[{protocol:"irn"}],pairingTopic:k,proposer:{publicKey:I,metadata:n.client.metadata},expiryTimestamp:Vo(_m.wc_sessionPropose.req.ttl),id:Ee()},D=zo(_,"Request expired"),j=D.done,M=D.resolve,L=D.reject,B=Ee(),z=$o("session_connect",U.id),F=$o("session_request",B),W=function(){var e=q(x().m(function e(t){var r,i;return x().w(function(e){for(;;)switch(e.n){case 0:r=t.error,i=t.session,n.events.off(F,H),r?L(r):i&&M({session:i});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=q(x().m(function e(t){var i,a,s,c,u,l,d,f,p,h,v,g,m,w,y,b,E,N,A,S,O,_,T,R;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,n.deletePendingAuthRequest(B,{message:"fulfilled",code:0});case 1:if(!t.error){e.n=2;break}return c=Md("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate"),e.a(2,t.error.code===c.code?void 0:(n.events.off(z,W),L(t.error.message)));case 2:return e.n=3,n.deleteProposal(U.id);case 3:n.events.off(z,W),u=t.result,l=u.cacaos,d=u.responder,f=[],p=[],h=C(l),e.p=4,h.s();case 5:if((v=h.n()).done){e.n=9;break}return g=v.value,e.n=6,pc({cacao:g,projectId:n.client.core.projectId});case 6:if(e.v){e.n=7;break}n.client.logger.error(g,"Signature verification failed"),L(Md("SESSION_SETTLEMENT_FAILED","Signature verification failed"));case 7:for(m=g.p,w=Ic(m.resources),y=[dc(m.iss)],b=fc(m.iss),w&&(E=Ec(w),N=Cc(w),f.push.apply(f,P(E)),y.push.apply(y,P(N))),A=0,S=y;A<S.length;A++)O=S[A],p.push("".concat(O,":").concat(b));case 8:e.n=5;break;case 9:e.n=11;break;case 10:e.p=10,R=e.v,h.e(R);case 11:return e.p=11,h.f(),e.f(11);case 12:return e.n=13,n.client.core.crypto.generateSharedKey(I,d.publicKey);case 13:if(_=e.v,!(f.length>0)){e.n=17;break}return T={topic:_,acknowledged:!0,self:{publicKey:I,metadata:n.client.metadata},peer:d,controller:d.publicKey,expiry:Vo(Om),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:k,namespaces:xd(P(new Set(f)),P(new Set(p))),transportType:o},e.n=14,n.client.core.relayer.subscribe(_,{transportType:o});case 14:return e.n=15,n.client.session.set(_,T);case 15:if(!k){e.n=16;break}return e.n=16,n.client.core.pairing.updateMetadata({topic:k,metadata:d.metadata});case 16:T=n.client.session.get(_);case 17:null!=(i=n.client.metadata.redirect)&&i.linkMode&&null!=(a=d.metadata.redirect)&&a.linkMode&&null!=(s=d.metadata.redirect)&&s.universal&&r&&(n.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),n.client.session.update(_,{transportType:qf})),M({auths:l,session:T});case 18:return e.a(2)}},e,null,[[4,10,11,12]])}));return function(t){return e.apply(this,arguments)}}(),n.events.once(z,W),n.events.once(F,H),e.p=7,!a){e.n=9;break}return K=ie("wc_sessionAuthenticate",T,B),n.client.core.history.set(k,K),e.n=8,n.client.core.crypto.encode("",K,{type:2,encoding:Kl});case 8:$=e.v,V=wd(r,k,$),e.n=10;break;case 9:return e.n=10,Promise.all([n.sendRequest({topic:k,method:"wc_sessionAuthenticate",params:T,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:B}),n.sendRequest({topic:k,method:"wc_sessionPropose",params:U,expiry:_m.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:U.id})]);case 10:e.n=12;break;case 11:throw e.p=11,G=e.v,n.events.off(z,W),n.events.off(F,H),G;case 12:return e.n=13,n.setProposal(U.id,U);case 13:return e.n=14,n.setAuthRequest(B,{request:Km(Vm({},T),{verifyContext:{}}),pairingTopic:k,transportType:o});case 14:return e.a(2,{uri:null!=V?V:E,response:j})}},e,null,[[7,11]])}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"approveSessionAuthenticate",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w,y,b,k,E,I,N,A,S,O,_,T,R,U,D;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:r=t.id,i=t.auths,a=n.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Wp]}}),e.p=1,n.isInitialized(),e.n=3;break;case 2:throw e.p=2,T=e.v,a.setError(Yp),T;case 3:if(o=n.getPendingAuthRequest(r)){e.n=4;break}throw a.setError(eh),new Error("Could not find pending auth request with id ".concat(r));case 4:if(s=o.transportType||Bf,!(s===Bf)){e.n=5;break}return e.n=5,n.confirmOnlineStateOrThrow();case 5:return c=o.requester.publicKey,e.n=6,n.client.core.crypto.generateKeyPair();case 6:u=e.v,l=Jl(c),d={type:1,receiverPublicKey:c,senderPublicKey:u},f=[],p=[],h=C(i),e.p=7,h.s();case 8:if((v=h.n()).done){e.n=13;break}return g=v.value,e.n=9,pc({cacao:g,projectId:n.client.core.projectId});case 9:if(e.v){e.n=11;break}return a.setError(Xp),m=Md("SESSION_SETTLEMENT_FAILED","Signature verification failed"),e.n=10,n.sendError({id:r,topic:l,error:m,encodeOpts:d});case 10:throw new Error(m.message);case 11:for(a.addTrace(Vp),w=g.p,y=Ic(w.resources),b=[dc(w.iss)],k=fc(w.iss),y&&(E=Ec(y),I=Cc(y),f.push.apply(f,P(E)),b.push.apply(b,P(I))),N=0,A=b;N<A.length;N++)S=A[N],p.push("".concat(S,":").concat(k));case 12:e.n=8;break;case 13:e.n=15;break;case 14:e.p=14,R=e.v,h.e(R);case 15:return e.p=15,h.f(),e.f(15);case 16:return e.n=17,n.client.core.crypto.generateSharedKey(u,c);case 17:if(O=e.v,a.addTrace(Hp),!((null==f?void 0:f.length)>0)){e.n=23;break}return _={topic:O,acknowledged:!0,self:{publicKey:u,metadata:n.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Vo(Om),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:xd(P(new Set(f)),P(new Set(p))),transportType:s},a.addTrace($p),e.p=18,e.n=19,n.client.core.relayer.subscribe(O,{transportType:s});case 19:e.n=21;break;case 20:throw e.p=20,U=e.v,a.setError(Zp),U;case 21:return a.addTrace(Gp),e.n=22,n.client.session.set(O,_);case 22:return a.addTrace(Kp),e.n=23,n.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata});case 23:return a.addTrace(Jp),e.p=24,e.n=25,n.sendResult({topic:l,id:r,result:{cacaos:i,responder:{publicKey:u,metadata:n.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:n.getAppLinkIfEnabled(o.requester.metadata,s)});case 25:e.n=27;break;case 26:throw e.p=26,D=e.v,a.setError(Qp),D;case 27:return e.n=28,n.client.auth.requests.delete(r,{message:"fulfilled",code:0});case 28:return e.n=29,n.client.core.pairing.activate({topic:o.pairingTopic});case 29:return n.client.core.eventClient.deleteEvent({eventId:a.eventId}),e.a(2,{session:_})}},e,null,[[24,26],[18,20],[7,14,15,16],[1,2]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"rejectSessionAuthenticate",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.n){case 0:if(n.isInitialized(),r=t.id,i=t.reason,a=n.getPendingAuthRequest(r)){e.n=1;break}throw new Error("Could not find pending auth request with id ".concat(r));case 1:if(!(a.transportType===Bf)){e.n=2;break}return e.n=2,n.confirmOnlineStateOrThrow();case 2:return o=a.requester.publicKey,e.n=3,n.client.core.crypto.generateKeyPair();case 3:return s=e.v,c=Jl(o),u={type:1,receiverPublicKey:o,senderPublicKey:s},e.n=4,n.sendError({id:r,topic:c,error:i,encodeOpts:u,rpcOpts:_m.wc_sessionAuthenticate.reject,appLink:n.getAppLinkIfEnabled(a.requester.metadata,a.transportType)});case 4:return e.n=5,n.client.auth.requests.delete(r,{message:"rejected",code:0});case 5:return e.n=6,n.client.proposal.delete(r,Md("USER_DISCONNECTED"));case 6:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"formatAuthMessage",function(e){n.isInitialized();var t=e.request,r=e.iss;return vc(t,r)}),$m(m(n),"processRelayMessageCache",function(){setTimeout(q(x().m(function e(){var t,r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(0===n.relayMessageCache.length){e.n=6;break}case 1:if(!(n.relayMessageCache.length>0)){e.n=6;break}if(e.p=2,t=n.relayMessageCache.shift(),!t){e.n=3;break}return e.n=3,n.onRelayMessage(t);case 3:e.n=5;break;case 4:e.p=4,r=e.v,n.client.logger.error(r);case 5:e.n=1;break;case 6:return e.a(2)}},e,null,[[2,4]])})),50)}),$m(m(n),"cleanupDuplicatePairings",function(){var e=q(x().m(function e(t){var r,i,a;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!t.pairingTopic){e.n=5;break}if(e.p=1,r=n.client.core.pairing.pairings.get(t.pairingTopic),i=n.client.core.pairing.pairings.getAll().filter(function(e){var n,i;return(null==(n=e.peerMetadata)?void 0:n.url)&&(null==(i=e.peerMetadata)?void 0:i.url)===t.peer.metadata.url&&e.topic&&e.topic!==r.topic}),0!==i.length){e.n=2;break}return e.a(2);case 2:return n.client.logger.info("Cleaning up ".concat(i.length," duplicate pairing(s)")),e.n=3,Promise.all(i.map(function(e){return n.client.core.pairing.disconnect({topic:e.topic})}));case 3:n.client.logger.info("Duplicate pairings clean up finished"),e.n=5;break;case 4:e.p=4,a=e.v,n.client.logger.error(a);case 5:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"deleteSession",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f;return x().w(function(e){for(;;)switch(e.n){case 0:return i=t.topic,a=t.expirerHasDeleted,o=void 0!==a&&a,s=t.emitEvent,c=void 0===s||s,u=t.id,l=void 0===u?0:u,d=n.client.session.get(i),f=d.self,e.n=1,n.client.core.relayer.unsubscribe(i);case 1:return e.n=2,n.client.session.delete(i,Md("USER_DISCONNECTED"));case 2:if(n.addToRecentlyDeleted(i,"session"),!n.client.core.crypto.keychain.has(f.publicKey)){e.n=3;break}return e.n=3,n.client.core.crypto.deleteKeyPair(f.publicKey);case 3:if(!n.client.core.crypto.keychain.has(i)){e.n=4;break}return e.n=4,n.client.core.crypto.deleteSymKey(i);case 4:o||n.client.core.expirer.del(i),n.client.core.storage.removeItem(Sm).catch(function(e){return n.client.logger.warn(e)}),n.getPendingSessionRequests().forEach(function(e){e.topic===i&&n.deletePendingSessionRequest(e.id,Md("USER_DISCONNECTED"))}),i===(null==(r=n.sessionRequestQueue.queue[0])?void 0:r.topic)&&(n.sessionRequestQueue.state=xm),c&&n.client.events.emit("session_delete",{id:l,topic:i});case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"deleteProposal",function(){var e=q(x().m(function e(t,r){var i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(r)try{i=n.client.proposal.get(t),null==(a=n.client.core.eventClient.getEvent({topic:i.pairingTopic}))||a.setError(Mp)}catch(o){}return e.n=1,Promise.all([n.client.proposal.delete(t,Md("USER_DISCONNECTED")),r?Promise.resolve():n.client.core.expirer.del(t)]);case 1:n.addToRecentlyDeleted(t,"proposal");case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"deletePendingSessionRequest",function(){var e=q(x().m(function e(t,r){var i,a=arguments;return x().w(function(e){for(;;)switch(e.n){case 0:return i=a.length>2&&void 0!==a[2]&&a[2],e.n=1,Promise.all([n.client.pendingRequest.delete(t,r),i?Promise.resolve():n.client.core.expirer.del(t)]);case 1:n.addToRecentlyDeleted(t,"request"),n.sessionRequestQueue.queue=n.sessionRequestQueue.queue.filter(function(e){return e.id!==t}),i&&(n.sessionRequestQueue.state=xm,n.client.events.emit("session_request_expire",{id:t}));case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"deletePendingAuthRequest",function(){var e=q(x().m(function e(t,r){var i,a=arguments;return x().w(function(e){for(;;)switch(e.n){case 0:return i=a.length>2&&void 0!==a[2]&&a[2],e.n=1,Promise.all([n.client.auth.requests.delete(t,r),i?Promise.resolve():n.client.core.expirer.del(t)]);case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"setExpiry",function(){var e=q(x().m(function e(t,r){return x().w(function(e){for(;;)switch(e.n){case 0:if(!n.client.session.keys.includes(t)){e.n=1;break}return n.client.core.expirer.set(t,r),e.n=1,n.client.session.update(t,{expiry:r});case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"setProposal",function(){var e=q(x().m(function e(t,r){return x().w(function(e){for(;;)switch(e.n){case 0:return n.client.core.expirer.set(t,Vo(_m.wc_sessionPropose.req.ttl)),e.n=1,n.client.proposal.set(t,r);case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"setAuthRequest",function(){var e=q(x().m(function e(t,r){var i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:return i=r.request,a=r.pairingTopic,o=r.transportType,s=void 0===o?Bf:o,n.client.core.expirer.set(t,i.expiryTimestamp),e.n=1,n.client.auth.requests.set(t,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:t,pairingTopic:a,verifyContext:i.verifyContext,transportType:s});case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"setPendingSessionRequest",function(){var e=q(x().m(function e(t){var r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:return r=t.id,i=t.topic,a=t.params,o=t.verifyContext,s=a.request.expiryTimestamp||Vo(_m.wc_sessionRequest.req.ttl),n.client.core.expirer.set(r,s),e.n=1,n.client.pendingRequest.set(r,{id:r,topic:i,params:a,verifyContext:o});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"sendRequest",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w,y,b,k,E;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=t.topic,i=t.method,a=t.params,o=t.expiry,s=t.relayRpcId,c=t.clientRpcId,u=t.throwOnFailedPublish,l=t.appLink,d=t.tvf,f=ie(i,a,c),h=!!l,e.p=1,v=h?Kl:Vl,e.n=2,n.client.core.crypto.encode(r,f,{encoding:v});case 2:p=e.v,e.n=5;break;case 3:return e.p=3,E=e.v,e.n=4,n.cleanup();case 4:throw n.client.logger.error("sendRequest() -> core.crypto.encode() for topic ".concat(r," failed")),E;case 5:if(!Dm.includes(i)){e.n=7;break}return m=Yl(JSON.stringify(f)),w=Yl(p),e.n=6,n.client.core.verify.register({id:w,decryptedId:m});case 6:g=e.v;case 7:if((y=_m[i].req).attestation=g,o&&(y.ttl=o),s&&(y.id=s),n.client.core.history.set(r,f),!h){e.n=9;break}return b=wd(l,r,p),e.n=8,global.Linking.openURL(b,n.client.name);case 8:e.n=12;break;case 9:if(k=_m[i].req,o&&(k.ttl=o),s&&(k.id=s),k.tvf=Km(Vm({},d),{correlationId:f.id}),!u){e.n=11;break}return k.internal=Km(Vm({},k.internal),{throwOnFailedPublish:!0}),e.n=10,n.client.core.relayer.publish(r,p,k);case 10:e.n=12;break;case 11:n.client.core.relayer.publish(r,p,k).catch(function(e){return n.client.logger.error(e)});case 12:return e.a(2,f.id)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"sendResult",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w,y,b;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=t.id,i=t.topic,a=t.result,o=t.throwOnFailedPublish,s=t.encodeOpts,c=t.appLink,u=de(r,a),d=c&&T(null==global?void 0:global.Linking)<"u",e.p=1,f=d?Kl:Vl,e.n=2,n.client.core.crypto.encode(i,u,Km(Vm({},s||{}),{encoding:f}));case 2:l=e.v,e.n=5;break;case 3:return e.p=3,y=e.v,e.n=4,n.cleanup();case 4:throw n.client.logger.error("sendResult() -> core.crypto.encode() for topic ".concat(i," failed")),y;case 5:return e.p=5,e.n=6,n.client.core.history.get(i,r);case 6:p=e.v,v=p.request;try{n.shouldSetTVF(v.method,v.params)&&(h=n.getTVFParams(r,v.params,a))}catch(w){n.client.logger.warn("sendResult() -> getTVFParams() failed",w)}e.n=8;break;case 7:throw e.p=7,b=e.v,n.client.logger.error("sendResult() -> history.get(".concat(i,", ").concat(r,") failed")),b;case 8:if(!d){e.n=10;break}return g=wd(c,i,l),e.n=9,global.Linking.openURL(g,n.client.name);case 9:e.n=13;break;case 10:if(m=p.request.method,(w=_m[m].res).tvf=Km(Vm({},h),{correlationId:r}),!o){e.n=12;break}return w.internal=Km(Vm({},w.internal),{throwOnFailedPublish:!0}),e.n=11,n.client.core.relayer.publish(i,l,w);case 11:e.n=13;break;case 12:n.client.core.relayer.publish(i,l,w).catch(function(e){return n.client.logger.error(e)});case 13:return e.n=14,n.client.core.history.resolve(u);case 14:return e.a(2)}},e,null,[[5,7],[1,3]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"sendError",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=t.id,i=t.topic,a=t.error,o=t.encodeOpts,s=t.rpcOpts,c=t.appLink,u=ye(r,a),d=c&&T(null==global?void 0:global.Linking)<"u",e.p=1,f=d?Kl:Vl,e.n=2,n.client.core.crypto.encode(i,u,Km(Vm({},o||{}),{encoding:f}));case 2:l=e.v,e.n=5;break;case 3:return e.p=3,m=e.v,e.n=4,n.cleanup();case 4:throw n.client.logger.error("sendError() -> core.crypto.encode() for topic ".concat(i," failed")),m;case 5:return e.p=5,e.n=6,n.client.core.history.get(i,r);case 6:p=e.v,e.n=8;break;case 7:throw e.p=7,w=e.v,n.client.logger.error("sendError() -> history.get(".concat(i,", ").concat(r,") failed")),w;case 8:if(!d){e.n=10;break}return h=wd(c,i,l),e.n=9,global.Linking.openURL(h,n.client.name);case 9:e.n=11;break;case 10:v=p.request.method,g=s||_m[v].res,n.client.core.relayer.publish(i,l,g);case 11:return e.n=12,n.client.core.history.resolve(u);case 12:return e.a(2)}},e,null,[[5,7],[1,3]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"cleanup",q(x().m(function e(){var t,r;return x().w(function(e){for(;;)switch(e.n){case 0:return t=[],r=[],n.client.session.getAll().forEach(function(e){var r=!1;Ko(e.expiry)&&(r=!0),n.client.core.crypto.keychain.has(e.topic)||(r=!0),r&&t.push(e.topic)}),n.client.proposal.getAll().forEach(function(e){Ko(e.expiryTimestamp)&&r.push(e.id)}),e.n=1,Promise.all([].concat(P(t.map(function(e){return n.deleteSession({topic:e})})),P(r.map(function(e){return n.deleteProposal(e)}))));case 1:return e.a(2)}},e)}))),$m(m(n),"onProviderMessageEvent",function(){var e=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:if(n.initialized&&!(n.relayMessageCache.length>0)){e.n=1;break}n.relayMessageCache.push(t),e.n=2;break;case 1:return e.n=2,n.onRelayMessage(t);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"onRelayEventRequest",function(){var e=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return n.requestQueue.queue.push(t),e.n=1,n.processRequestsQueue();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"processRequestsQueue",q(x().m(function e(){var t,r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.requestQueue.state!==Rm){e.n=1;break}return n.client.logger.info("Request queue already active, skipping..."),e.a(2);case 1:n.client.logger.info("Request queue starting with ".concat(n.requestQueue.queue.length," requests"));case 2:if(!(n.requestQueue.queue.length>0)){e.n=7;break}if(n.requestQueue.state=Rm,!(t=n.requestQueue.queue.shift())){e.n=6;break}return e.p=3,e.n=4,n.processRequest(t);case 4:e.n=6;break;case 5:e.p=5,r=e.v,n.client.logger.warn(r);case 6:e.n=2;break;case 7:n.requestQueue.state=xm;case 8:return e.a(2)}},e,null,[[3,5]])}))),$m(m(n),"processRequest",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.n){case 0:if(r=t.topic,i=t.payload,a=t.attestation,o=t.transportType,s=t.encryptedId,c=i.method,n.shouldIgnorePairingRequest({topic:r,requestMethod:c})){e.n=20;break}u=c,e.n="wc_sessionPropose"===u?1:"wc_sessionSettle"===u?3:"wc_sessionUpdate"===u?5:"wc_sessionExtend"===u?7:"wc_sessionPing"===u?9:"wc_sessionDelete"===u?11:"wc_sessionRequest"===u?13:"wc_sessionEvent"===u?15:"wc_sessionAuthenticate"===u?17:19;break;case 1:return e.n=2,n.onSessionProposeRequest({topic:r,payload:i,attestation:a,encryptedId:s});case 2:case 4:case 6:case 8:case 10:case 12:case 14:case 16:case 18:return e.a(2,e.v);case 3:return e.n=4,n.onSessionSettleRequest(r,i);case 5:return e.n=6,n.onSessionUpdateRequest(r,i);case 7:return e.n=8,n.onSessionExtendRequest(r,i);case 9:return e.n=10,n.onSessionPingRequest(r,i);case 11:return e.n=12,n.onSessionDeleteRequest(r,i);case 13:return e.n=14,n.onSessionRequest({topic:r,payload:i,attestation:a,encryptedId:s,transportType:o});case 15:return e.n=16,n.onSessionEventRequest(r,i);case 17:return e.n=18,n.onSessionAuthenticateRequest({topic:r,payload:i,attestation:a,encryptedId:s,transportType:o});case 19:return e.a(2,n.client.logger.info("Unsupported request method ".concat(c)));case 20:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"onRelayEventResponse",function(){var e=q(x().m(function e(t){var r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:return r=t.topic,i=t.payload,a=t.transportType,e.n=1,n.client.core.history.get(r,i.id);case 1:o=e.v.request.method,s=o,e.n="wc_sessionPropose"===s?2:"wc_sessionSettle"===s?3:"wc_sessionUpdate"===s?4:"wc_sessionExtend"===s?5:"wc_sessionPing"===s?6:"wc_sessionRequest"===s?7:"wc_sessionAuthenticate"===s?8:9;break;case 2:return e.a(2,n.onSessionProposeResponse(r,i,a));case 3:return e.a(2,n.onSessionSettleResponse(r,i));case 4:return e.a(2,n.onSessionUpdateResponse(r,i));case 5:return e.a(2,n.onSessionExtendResponse(r,i));case 6:return e.a(2,n.onSessionPingResponse(r,i));case 7:return e.a(2,n.onSessionRequestResponse(r,i));case 8:return e.a(2,n.onSessionAuthenticateResponse(r,i));case 9:return e.a(2,n.client.logger.info("Unsupported response method ".concat(o)));case 10:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"onRelayEventUnknownPayload",function(e){var t=e.topic,n=jd("MISSING_OR_INVALID","Decoded payload on topic ".concat(t," is not identifiable as a JSON-RPC request or a response.")).message;throw new Error(n)}),$m(m(n),"shouldIgnorePairingRequest",function(e){var t=e.topic,r=e.requestMethod,i=n.expectedPairingMethodMap.get(t);return!(!i||i.includes(r))&&!!(i.includes("wc_sessionAuthenticate")&&n.client.events.listenerCount("session_authenticate")>0)}),$m(m(n),"onSessionProposeRequest",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=t.topic,i=t.payload,a=t.attestation,o=t.encryptedId,s=i.params,c=i.id,e.p=1,u=n.client.core.eventClient.getEvent({topic:r}),0===n.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),null!=u&&u.setError(Ap)),n.isValidConnect(Vm({},i.params)),l=s.expiryTimestamp||Vo(_m.wc_sessionPropose.req.ttl),d=Vm({id:c,pairingTopic:r,expiryTimestamp:l},s),e.n=2,n.setProposal(c,d);case 2:return e.n=3,n.getVerifyContext({attestationId:a,hash:Yl(JSON.stringify(i)),encryptedId:o,metadata:d.proposer.metadata});case 3:f=e.v,null!=u&&u.addTrace(bp),n.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f}),e.n=6;break;case 4:return e.p=4,p=e.v,e.n=5,n.sendError({id:c,topic:r,error:p,rpcOpts:_m.wc_sessionPropose.autoReject});case 5:n.client.logger.error(p);case 6:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"onSessionProposeResponse",function(){var e=q(x().m(function e(t,r,i){var a,o,s,c,u,l,d,f;return x().w(function(e){for(;;)switch(e.n){case 0:if(a=r.id,!be(r)){e.n=4;break}return o=r.result,n.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o}),s=n.client.proposal.get(a),n.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s}),c=s.proposer.publicKey,n.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c}),u=o.responderPublicKey,n.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u}),e.n=1,n.client.core.crypto.generateSharedKey(c,u);case 1:return l=e.v,n.pendingSessions.set(a,{sessionTopic:l,pairingTopic:t,proposalId:a,publicKey:c}),e.n=2,n.client.core.relayer.subscribe(l,{transportType:i});case 2:return d=e.v,n.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),e.n=3,n.client.core.pairing.activate({topic:t});case 3:e.n=7;break;case 4:if(!ke(r)){e.n=7;break}return e.n=5,n.client.proposal.delete(a,Md("USER_DISCONNECTED"));case 5:if(f=$o("session_connect",a),0!==n.events.listenerCount(f)){e.n=6;break}throw new Error("emitting ".concat(f," without any listeners, 954"));case 6:n.events.emit(f,{error:r.error});case 7:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),$m(m(n),"onSessionSettleRequest",function(){var e=q(x().m(function e(t,r){var i,a,o,s,c,u,l,d,f,p,h,v,g,m;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=r.id,a=r.params,e.p=1,n.isValidSessionSettleRequest(a),o=r.params,s=o.relay,c=o.controller,u=o.expiry,l=o.namespaces,d=o.sessionProperties,f=o.scopedProperties,p=o.sessionConfig,h=P(n.pendingSessions.values()).find(function(e){return e.sessionTopic===t}),h){e.n=2;break}return e.a(2,n.client.logger.error("Pending session not found for topic ".concat(t)));case 2:return v=n.client.proposal.get(h.proposalId),g=Km(Vm(Vm(Vm({topic:t,relay:s,expiry:u,namespaces:l,acknowledged:!0,pairingTopic:h.pairingTopic,requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces,controller:c.publicKey,self:{publicKey:h.publicKey,metadata:n.client.metadata},peer:{publicKey:c.publicKey,metadata:c.metadata}},d&&{sessionProperties:d}),f&&{scopedProperties:f}),p&&{sessionConfig:p}),{transportType:Bf}),e.n=3,n.client.session.set(g.topic,g);case 3:return e.n=4,n.setExpiry(g.topic,g.expiry);case 4:return e.n=5,n.client.core.pairing.updateMetadata({topic:h.pairingTopic,metadata:g.peer.metadata});case 5:return n.client.events.emit("session_connect",{session:g}),n.events.emit($o("session_connect",h.proposalId),{session:g}),n.pendingSessions.delete(h.proposalId),n.deleteProposal(h.proposalId,!1),n.cleanupDuplicatePairings(g),e.n=6,n.sendResult({id:r.id,topic:t,result:!0,throwOnFailedPublish:!0});case 6:e.n=9;break;case 7:return e.p=7,m=e.v,e.n=8,n.sendError({id:i,topic:t,error:m});case 8:n.client.logger.error(m);case 9:return e.a(2)}},e,null,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"onSessionSettleResponse",function(){var e=q(x().m(function e(t,r){var i;return x().w(function(e){for(;;)switch(e.n){case 0:if(i=r.id,!be(r)){e.n=2;break}return e.n=1,n.client.session.update(t,{acknowledged:!0});case 1:n.events.emit($o("session_approve",i),{}),e.n=4;break;case 2:if(!ke(r)){e.n=4;break}return e.n=3,n.client.session.delete(t,Md("USER_DISCONNECTED"));case 3:n.events.emit($o("session_approve",i),{error:r.error});case 4:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"onSessionUpdateRequest",function(){var e=q(x().m(function e(t,r){var i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=r.params,a=r.id,e.p=1,o="".concat(t,"_session_update"),!(s=mf.get(o))||!n.isRequestOutOfSync(s,a)){e.n=2;break}return n.client.logger.warn("Discarding out of sync request - ".concat(a)),n.sendError({id:a,topic:t,error:Md("INVALID_UPDATE_REQUEST")}),e.a(2);case 2:return n.isValidUpdate(Vm({topic:t},i)),e.p=3,mf.set(o,a),e.n=4,n.client.session.update(t,{namespaces:i.namespaces});case 4:return e.n=5,n.sendResult({id:a,topic:t,result:!0,throwOnFailedPublish:!0});case 5:e.n=7;break;case 6:throw e.p=6,c=e.v,mf.delete(o),c;case 7:n.client.events.emit("session_update",{id:a,topic:t,params:i}),e.n=10;break;case 8:return e.p=8,u=e.v,e.n=9,n.sendError({id:a,topic:t,error:u});case 9:n.client.logger.error(u);case 10:return e.a(2)}},e,null,[[3,6],[1,8]])}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"isRequestOutOfSync",function(e,t){return t.toString().slice(0,-3)<e.toString().slice(0,-3)}),$m(m(n),"onSessionUpdateResponse",function(e,t){var r=t.id,i=$o("session_update",r);if(0===n.events.listenerCount(i))throw new Error("emitting ".concat(i," without any listeners"));be(t)?n.events.emit($o("session_update",r),{}):ke(t)&&n.events.emit($o("session_update",r),{error:t.error})}),$m(m(n),"onSessionExtendRequest",function(){var e=q(x().m(function e(t,r){var i,a;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=r.id,e.p=1,n.isValidExtend({topic:t}),e.n=2,n.setExpiry(t,Vo(Om));case 2:return e.n=3,n.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0});case 3:n.client.events.emit("session_extend",{id:i,topic:t}),e.n=6;break;case 4:return e.p=4,a=e.v,e.n=5,n.sendError({id:i,topic:t,error:a});case 5:n.client.logger.error(a);case 6:return e.a(2)}},e,null,[[1,4]])}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"onSessionExtendResponse",function(e,t){var r=t.id,i=$o("session_extend",r);if(0===n.events.listenerCount(i))throw new Error("emitting ".concat(i," without any listeners"));be(t)?n.events.emit($o("session_extend",r),{}):ke(t)&&n.events.emit($o("session_extend",r),{error:t.error})}),$m(m(n),"onSessionPingRequest",function(){var e=q(x().m(function e(t,r){var i,a;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=r.id,e.p=1,n.isValidPing({topic:t}),e.n=2,n.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0});case 2:n.client.events.emit("session_ping",{id:i,topic:t}),e.n=5;break;case 3:return e.p=3,a=e.v,e.n=4,n.sendError({id:i,topic:t,error:a});case 4:n.client.logger.error(a);case 5:return e.a(2)}},e,null,[[1,3]])}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"onSessionPingResponse",function(e,t){var r=t.id,i=$o("session_ping",r);setTimeout(function(){if(0===n.events.listenerCount(i))throw new Error("emitting ".concat(i," without any listeners 2176"));be(t)?n.events.emit($o("session_ping",r),{}):ke(t)&&n.events.emit($o("session_ping",r),{error:t.error})},500)}),$m(m(n),"onSessionDeleteRequest",function(){var e=q(x().m(function e(t,r){var i;return x().w(function(e){for(;;)switch(e.n){case 0:i=r.id;try{n.isValidDisconnect({topic:t,reason:r.params}),Promise.all([new Promise(function(e){n.client.core.relayer.once(Rf,q(x().m(function r(){var a;return x().w(function(r){for(;;)switch(r.n){case 0:return a=e,r.n=1,n.deleteSession({topic:t,id:i});case 1:a(r.v);case 2:return r.a(2)}},r)})))}),n.sendResult({id:i,topic:t,result:!0,throwOnFailedPublish:!0}),n.cleanupPendingSentRequestsForTopic({topic:t,error:Md("USER_DISCONNECTED")})]).catch(function(e){return n.client.logger.error(e)})}catch(Vi){n.client.logger.error(Vi)}case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"onSessionRequest",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v,g;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=t.topic,s=t.payload,c=t.attestation,u=t.encryptedId,l=t.transportType,d=s.id,f=s.params,e.p=1,e.n=2,n.isValidRequest(Vm({topic:o},f));case 2:return p=n.client.session.get(o),e.n=3,n.getVerifyContext({attestationId:c,hash:Yl(JSON.stringify(ie("wc_sessionRequest",f,d))),encryptedId:u,metadata:p.peer.metadata,transportType:l});case 3:return h=e.v,v={id:d,topic:o,params:f,verifyContext:h},e.n=4,n.setPendingSessionRequest(v);case 4:l===qf&&null!=(r=p.peer.metadata.redirect)&&r.universal&&n.client.core.addLinkModeSupportedApp(null==(i=p.peer.metadata.redirect)?void 0:i.universal),null!=(a=n.client.signConfig)&&a.disableRequestQueue?n.emitSessionRequest(v):(n.addSessionRequestToSessionRequestQueue(v),n.processSessionRequestQueue()),e.n=7;break;case 5:return e.p=5,g=e.v,e.n=6,n.sendError({id:d,topic:o,error:g});case 6:n.client.logger.error(g);case 7:return e.a(2)}},e,null,[[1,5]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"onSessionRequestResponse",function(e,t){var r=t.id,i=$o("session_request",r);if(0===n.events.listenerCount(i))throw new Error("emitting ".concat(i," without any listeners"));be(t)?n.events.emit($o("session_request",r),{result:t.result}):ke(t)&&n.events.emit($o("session_request",r),{error:t.error})}),$m(m(n),"onSessionEventRequest",function(){var e=q(x().m(function e(t,r){var i,a,o,s,c;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=r.id,a=r.params,e.p=1,o="".concat(t,"_session_event_").concat(a.event.name),!(s=mf.get(o))||!n.isRequestOutOfSync(s,i)){e.n=2;break}return n.client.logger.info("Discarding out of sync request - ".concat(i)),e.a(2);case 2:n.isValidEmit(Vm({topic:t},a)),n.client.events.emit("session_event",{id:i,topic:t,params:a}),mf.set(o,i),e.n=5;break;case 3:return e.p=3,c=e.v,e.n=4,n.sendError({id:i,topic:t,error:c});case 4:n.client.logger.error(c);case 5:return e.a(2)}},e,null,[[1,3]])}));return function(t,n){return e.apply(this,arguments)}}()),$m(m(n),"onSessionAuthenticateResponse",function(e,t){var r=t.id;n.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),be(t)?n.events.emit($o("session_request",r),{result:t.result}):ke(t)&&n.events.emit($o("session_request",r),{error:t.error})}),$m(m(n),"onSessionAuthenticateRequest",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w,y;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=t.topic,a=t.payload,o=t.attestation,s=t.encryptedId,c=t.transportType,e.p=1,u=a.params,l=u.requester,d=u.authPayload,f=u.expiryTimestamp,e.n=2,n.getVerifyContext({attestationId:o,hash:Yl(JSON.stringify(a)),encryptedId:s,metadata:l.metadata,transportType:c});case 2:return p=e.v,h={requester:l,pairingTopic:i,id:a.id,authPayload:d,verifyContext:p,expiryTimestamp:f},e.n=3,n.setAuthRequest(a.id,{request:h,pairingTopic:i,transportType:c});case 3:c===qf&&null!=(r=l.metadata.redirect)&&r.universal&&n.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),n.client.events.emit("session_authenticate",{topic:i,params:a.params,id:a.id,verifyContext:p}),e.n=6;break;case 4:return e.p=4,y=e.v,n.client.logger.error(y),v=a.params.requester.publicKey,e.n=5,n.client.core.crypto.generateKeyPair();case 5:return g=e.v,m=n.getAppLinkIfEnabled(a.params.requester.metadata,c),w={type:1,receiverPublicKey:v,senderPublicKey:g},e.n=6,n.sendError({id:a.id,topic:i,error:y,encodeOpts:w,rpcOpts:_m.wc_sessionAuthenticate.autoReject,appLink:m});case 6:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"addSessionRequestToSessionRequestQueue",function(e){n.sessionRequestQueue.queue.push(e)}),$m(m(n),"cleanupAfterResponse",function(e){n.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(function(){n.sessionRequestQueue.state=xm,n.processSessionRequestQueue()},V.toMiliseconds(n.requestQueueDelay))}),$m(m(n),"cleanupPendingSentRequestsForTopic",function(e){var t=e.topic,r=e.error,i=n.client.core.history.pending;i.length>0&&i.filter(function(e){return e.topic===t&&"wc_sessionRequest"===e.request.method}).forEach(function(e){var t=$o("session_request",e.request.id);if(0===n.events.listenerCount(t))throw new Error("emitting ".concat(t," without any listeners"));n.events.emit($o("session_request",e.request.id),{error:r})})}),$m(m(n),"processSessionRequestQueue",function(){if(n.sessionRequestQueue.state!==Rm){var e=n.sessionRequestQueue.queue[0];if(e)try{n.sessionRequestQueue.state=Rm,n.emitSessionRequest(e)}catch(_t){n.client.logger.error(_t)}else n.client.logger.info("session request queue is empty.")}else n.client.logger.info("session request queue is already active.")}),$m(m(n),"emitSessionRequest",function(e){n.client.events.emit("session_request",e)}),$m(m(n),"onPairingCreated",function(e){if(e.methods&&n.expectedPairingMethodMap.set(e.topic,e.methods),!e.active){var t=n.client.proposal.getAll().find(function(t){return t.pairingTopic===e.topic});t&&n.onSessionProposeRequest({topic:e.topic,payload:ie("wc_sessionPropose",Km(Vm({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})}}),$m(m(n),"isValidConnect",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw r=jd("MISSING_OR_INVALID","connect() params: ".concat(JSON.stringify(t))),i=r.message,new Error(i);case 1:if(a=t.pairingTopic,o=t.requiredNamespaces,s=t.optionalNamespaces,c=t.sessionProperties,u=t.scopedProperties,l=t.relays,Bd(a)){e.n=2;break}return e.n=2,n.isValidPairingTopic(a);case 2:if(Zd(l)){e.n=3;break}throw d=jd("MISSING_OR_INVALID","connect() relays: ".concat(l)),f=d.message,new Error(f);case 3:if(Bd(o)||0===qd(o)||(p="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces",["fatal","error","silent"].includes(n.client.logger.level)?console.warn(p):n.client.logger.warn(p),n.validateNamespaces(o,"requiredNamespaces")),!Bd(s)&&0!==qd(s)&&n.validateNamespaces(s,"optionalNamespaces"),Bd(c)||n.validateSessionProps(c,"sessionProperties"),Bd(u)){e.n=4;break}if(n.validateSessionProps(u,"scopedProperties"),h=Object.keys(o||{}).concat(Object.keys(s||{})),Object.keys(u).every(function(e){return h.includes(e)})){e.n=4;break}throw new Error("Scoped properties must be a subset of required/optional namespaces, received: ".concat(JSON.stringify(u),", required/optional namespaces: ").concat(JSON.stringify(h)));case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"validateNamespaces",function(e,t){var n=function(e,t,n){var r=null;if(e&&qd(e)){var i=Jd(e,t);i&&(r=i);var a=$d(e,t,n);a&&(r=a)}else r=jd("MISSING_OR_INVALID","".concat(t,", ").concat(n," should be an object with data"));return r}(e,"connect()",t);if(n)throw new Error(n.message)}),$m(m(n),"isValidApprove",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw new Error(jd("MISSING_OR_INVALID","approve() params: ".concat(t)).message);case 1:return r=t.id,i=t.namespaces,a=t.relayProtocol,o=t.sessionProperties,s=t.scopedProperties,n.checkRecentlyDeleted(r),e.n=2,n.isValidProposalId(r);case 2:if(c=n.client.proposal.get(r),!(u=Yd(i,"approve()"))){e.n=3;break}throw new Error(u.message);case 3:if(!(l=uf(c.requiredNamespaces,i,"approve()"))){e.n=4;break}throw new Error(l.message);case 4:if(zd(a,!0)){e.n=5;break}throw d=jd("MISSING_OR_INVALID","approve() relayProtocol: ".concat(a)),f=d.message,new Error(f);case 5:if(Bd(o)||n.validateSessionProps(o,"sessionProperties"),Bd(s)){e.n=6;break}if(n.validateSessionProps(s,"scopedProperties"),p=new Set(Object.keys(i)),Object.keys(s).every(function(e){return p.has(e)})){e.n=6;break}throw new Error("Scoped properties must be a subset of approved namespaces, received: ".concat(JSON.stringify(s),", approved namespaces: ").concat(Array.from(p).join(", ")));case 6:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"isValidReject",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw r=jd("MISSING_OR_INVALID","reject() params: ".concat(t)),i=r.message,new Error(i);case 1:return a=t.id,o=t.reason,n.checkRecentlyDeleted(a),e.n=2,n.isValidProposalId(a);case 2:if(tf(o)){e.n=3;break}throw s=jd("MISSING_OR_INVALID","reject() reason: ".concat(JSON.stringify(o))),c=s.message,new Error(c);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"isValidSessionSettleRequest",function(e){if(!ef(e)){var t=jd("MISSING_OR_INVALID","onSessionSettleRequest() params: ".concat(e)).message;throw new Error(t)}var n=e.relay,r=e.controller,i=e.namespaces,a=e.expiry;if(!Xd(n)){var o=jd("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string").message;throw new Error(o)}var s=function(e,t){var n=null;return zd(null==e?void 0:e.publicKey,!1)||(n=jd("MISSING_OR_INVALID","".concat(t," controller public key should be a string"))),n}(r,"onSessionSettleRequest()");if(s)throw new Error(s.message);var c=Yd(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Ko(a)){var u=jd("EXPIRED","onSessionSettleRequest()").message;throw new Error(u)}}),$m(m(n),"isValidUpdate",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw r=jd("MISSING_OR_INVALID","update() params: ".concat(t)),i=r.message,new Error(i);case 1:return a=t.topic,o=t.namespaces,n.checkRecentlyDeleted(a),e.n=2,n.isValidSessionTopic(a);case 2:if(s=n.client.session.get(a),!(c=Yd(o,"update()"))){e.n=3;break}throw new Error(c.message);case 3:if(!(u=uf(s.requiredNamespaces,o,"update()"))){e.n=4;break}throw new Error(u.message);case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"isValidExtend",function(){var e=q(x().m(function e(t){var r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw r=jd("MISSING_OR_INVALID","extend() params: ".concat(t)),i=r.message,new Error(i);case 1:return a=t.topic,n.checkRecentlyDeleted(a),e.n=2,n.isValidSessionTopic(a);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"isValidRequest",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw r=jd("MISSING_OR_INVALID","request() params: ".concat(t)),i=r.message,new Error(i);case 1:return a=t.topic,o=t.request,s=t.chainId,c=t.expiry,n.checkRecentlyDeleted(a),e.n=2,n.isValidSessionTopic(a);case 2:if(u=n.client.session.get(a),of(l=u.namespaces,s)){e.n=3;break}throw d=jd("MISSING_OR_INVALID","request() chainId: ".concat(s)),f=d.message,new Error(f);case 3:if(nf(o)){e.n=4;break}throw p=jd("MISSING_OR_INVALID","request() ".concat(JSON.stringify(o))),h=p.message,new Error(h);case 4:if(sf(l,s,o.method)){e.n=5;break}throw v=jd("MISSING_OR_INVALID","request() method: ".concat(o.method)),g=v.message,new Error(g);case 5:if(!c||df(c,Tm)){e.n=6;break}throw m=jd("MISSING_OR_INVALID","request() expiry: ".concat(c,". Expiry must be a number (in seconds) between ").concat(Tm.min," and ").concat(Tm.max)),w=m.message,new Error(w);case 6:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"isValidRespond",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(ef(t)){e.n=1;break}throw i=jd("MISSING_OR_INVALID","respond() params: ".concat(t)),a=i.message,new Error(a);case 1:return o=t.topic,s=t.response,e.p=2,e.n=3,n.isValidSessionTopic(o);case 3:e.n=5;break;case 4:throw e.p=4,l=e.v,null!=(r=null==t?void 0:t.response)&&r.id&&n.cleanupAfterResponse(t),l;case 5:if(rf(s)){e.n=6;break}throw c=jd("MISSING_OR_INVALID","respond() response: ".concat(JSON.stringify(s))),u=c.message,new Error(u);case 6:return e.a(2)}},e,null,[[2,4]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"isValidPing",function(){var e=q(x().m(function e(t){var r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw r=jd("MISSING_OR_INVALID","ping() params: ".concat(t)),i=r.message,new Error(i);case 1:return a=t.topic,e.n=2,n.isValidSessionOrPairingTopic(a);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"isValidEmit",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p,h,v;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw r=jd("MISSING_OR_INVALID","emit() params: ".concat(t)),i=r.message,new Error(i);case 1:return a=t.topic,o=t.event,s=t.chainId,e.n=2,n.isValidSessionTopic(a);case 2:if(c=n.client.session.get(a),of(u=c.namespaces,s)){e.n=3;break}throw l=jd("MISSING_OR_INVALID","emit() chainId: ".concat(s)),d=l.message,new Error(d);case 3:if(af(o)){e.n=4;break}throw f=jd("MISSING_OR_INVALID","emit() event: ".concat(JSON.stringify(o))),p=f.message,new Error(p);case 4:if(cf(u,s,o.name)){e.n=5;break}throw h=jd("MISSING_OR_INVALID","emit() event: ".concat(JSON.stringify(o))),v=h.message,new Error(v);case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"isValidDisconnect",function(){var e=q(x().m(function e(t){var r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(ef(t)){e.n=1;break}throw r=jd("MISSING_OR_INVALID","disconnect() params: ".concat(t)),i=r.message,new Error(i);case 1:return a=t.topic,e.n=2,n.isValidSessionOrPairingTopic(a);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"isValidAuthenticate",function(e){var t=e.chains,n=e.uri,r=e.domain,i=e.nonce;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!zd(n,!1))throw new Error("uri is required parameter");if(!zd(r,!1))throw new Error("domain is required parameter");if(!zd(i,!1))throw new Error("nonce is required parameter");if(P(new Set(t.map(function(e){return ho(e).namespace}))).length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");if("eip155"!==ho(t[0]).namespace)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),$m(m(n),"getVerifyContext",function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=t.attestationId,i=t.hash,a=t.encryptedId,o=t.metadata,s=t.transportType,c={verified:{verifyUrl:o.verifyUrl||cp,validation:"UNKNOWN",origin:o.url||""}},e.p=1,s!==qf){e.n=2;break}return u=n.getAppLinkIfEnabled(o,s),e.a(2,(c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c));case 2:return e.n=3,n.client.core.verify.resolve({attestationId:r,hash:i,encryptedId:a,verifyUrl:o.verifyUrl});case 3:(l=e.v)&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID"),e.n=5;break;case 4:e.p=4,d=e.v,n.client.logger.warn(d);case 5:return e.a(2,(n.client.logger.debug("Verify context: ".concat(JSON.stringify(c))),c))}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}()),$m(m(n),"validateSessionProps",function(e,t){Object.values(e).forEach(function(n,r){if(null==n){var i=jd("MISSING_OR_INVALID","".concat(t," must contain an existing value for each key. Received: ").concat(n," for key ").concat(Object.keys(e)[r])).message;throw new Error(i)}})}),$m(m(n),"getPendingAuthRequest",function(e){var t=n.client.auth.requests.get(e);return"object"==T(t)?t:void 0}),$m(m(n),"addToRecentlyDeleted",function(e,t){if(n.recentlyDeletedMap.set(e,t),n.recentlyDeletedMap.size>=n.recentlyDeletedLimit){var r,i=0,a=n.recentlyDeletedLimit/2,o=C(n.recentlyDeletedMap.keys());try{for(o.s();!(r=o.n()).done;){var s=r.value;if(i++>=a)break;n.recentlyDeletedMap.delete(s)}}catch(c){o.e(c)}finally{o.f()}}}),$m(m(n),"checkRecentlyDeleted",function(e){var t=n.recentlyDeletedMap.get(e);if(t){var r=jd("MISSING_OR_INVALID","Record was recently deleted - ".concat(t,": ").concat(e)).message;throw new Error(r)}}),$m(m(n),"isLinkModeEnabled",function(e,t){var r,i,a,o,s,c,u,l,d;return!(!e||t!==qf)&&(!0===(null==(i=null==(r=n.client.metadata)?void 0:r.redirect)?void 0:i.linkMode)&&void 0!==(null==(o=null==(a=n.client.metadata)?void 0:a.redirect)?void 0:o.universal)&&""!==(null==(c=null==(s=n.client.metadata)?void 0:s.redirect)?void 0:c.universal)&&void 0!==(null==(u=null==e?void 0:e.redirect)?void 0:u.universal)&&""!==(null==(l=null==e?void 0:e.redirect)?void 0:l.universal)&&!0===(null==(d=null==e?void 0:e.redirect)?void 0:d.linkMode)&&n.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&T(null==global?void 0:global.Linking)<"u")}),$m(m(n),"getAppLinkIfEnabled",function(e,t){var r;return n.isLinkModeEnabled(e,t)?null==(r=null==e?void 0:e.redirect)?void 0:r.universal:void 0}),$m(m(n),"handleLinkModeMessage",function(e){var t=e.url;if(t&&t.includes("wc_ev")&&t.includes("topic")){var r=ts(t,"topic")||"",i=decodeURIComponent(ts(t,"wc_ev")||""),a=n.client.session.keys.includes(r);a&&n.client.session.update(r,{transportType:qf}),n.client.core.dispatchEnvelope({topic:r,message:i,sessionExists:a})}}),$m(m(n),"registerLinkModeListeners",q(x().m(function e(){var t,r,i;return x().w(function(e){for(;;)switch(e.n){case 0:if(!(rs()||_o()&&null!=(t=n.client.metadata.redirect)&&t.linkMode)){e.n=2;break}if(!(T(r=null==global?void 0:global.Linking)<"u")){e.n=2;break}return r.addEventListener("url",n.handleLinkModeMessage,n.client.name),e.n=1,r.getInitialURL();case 1:(i=e.v)&&setTimeout(function(){n.handleLinkModeMessage({url:i})},50);case 2:return e.a(2)}},e)}))),$m(m(n),"shouldSetTVF",function(e,t){if(!t||"wc_sessionRequest"!==e)return!1;var n=t.request;return Object.keys(Um).includes(n.method)}),$m(m(n),"getTVFParams",function(e,t,r){var i,a;try{var o=t.request.method,s=n.extractTxHashesFromResult(o,r);return Km(Vm({correlationId:e,rpcMethods:[o],chainId:t.chainId},n.isValidContractData(t.request.params)&&{contractAddresses:[null==(a=null==(i=t.request.params)?void 0:i[0])?void 0:a.to]}),{txHashes:s})}catch(o){n.client.logger.warn("Error getting TVF params",o)}return{}}),$m(m(n),"isValidContractData",function(e){var t;if(!e)return!1;try{var n=(null==e?void 0:e.data)||(null==(t=null==e?void 0:e[0])?void 0:t.data);if(!n.startsWith("0x"))return!1;var r=n.slice(2);return!!/^[0-9a-fA-F]*$/.test(r)&&r.length%2==0}catch(i){}return!1}),$m(m(n),"extractTxHashesFromResult",function(e,t){try{var r;if("string"==typeof t)return[t];var i=t[Um[e].key];if(Ld(i))return"solana_signAllTransactions"===e?i.map(function(e){return function(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);var i=n[0];if(0===i)throw new Error("No signatures found");var a=1+64*i;if(n.length<a)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");var o=Buffer.from(e,"base64").slice(1,65);return fo.encode(o)}(e)}):i;if("string"==typeof i)return[i]}catch(r){n.client.logger.warn("Error extracting tx hashes from result",r)}return[]}),n}return w(t,e),A(t,[{key:"processPendingMessageEvents",value:(s=q(x().m(function e(){var t,n,r,i,a,o,s,c,u,l,d,f;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,t=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(t),r=0,i=Object.entries(n);case 1:if(!(r<i.length)){e.n=12;break}a=S(i[r],2),o=a[0],s=a[1],c=C(s),e.p=2,c.s();case 3:if((u=c.n()).done){e.n=8;break}return l=u.value,e.p=4,e.n=5,this.onProviderMessageEvent({topic:o,message:l,publishedAt:Date.now()});case 5:e.n=7;break;case 6:e.p=6,e.v,this.client.logger.warn("Error processing pending message event for topic: ".concat(o,", message: ").concat(l));case 7:e.n=3;break;case 8:e.n=10;break;case 9:e.p=9,d=e.v,c.e(d);case 10:return e.p=10,c.f(),e.f(10);case 11:r++,e.n=1;break;case 12:e.n=14;break;case 13:e.p=13,f=e.v,this.client.logger.warn("processPendingMessageEvents failed",f);case 14:return e.a(2)}},e,this,[[4,6],[2,9,10,11],[0,13]])})),function(){return s.apply(this,arguments)})},{key:"isInitialized",value:function(){if(!this.initialized){var e=jd("NOT_INITIALIZED",this.name).message;throw new Error(e)}}},{key:"confirmOnlineStateOrThrow",value:(o=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.client.core.relayer.confirmOnlineStateOrThrow();case 1:return e.a(2)}},e,this)})),function(){return o.apply(this,arguments)})},{key:"registerRelayerEvents",value:function(){var e=this;this.client.core.relayer.on(Sf,function(t){e.onProviderMessageEvent(t)})}},{key:"onRelayMessage",value:(a=q(x().m(function e(t){var n,r,i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.topic,r=t.message,i=t.attestation,a=t.transportType,o=this.client.auth.authKeys.keys.includes(Mm)?this.client.auth.authKeys.get(Mm):{publicKey:void 0},s=o.publicKey,e.p=1,e.n=2,this.client.core.crypto.decode(n,r,{receiverPublicKey:s,encoding:a===qf?Kl:Vl});case 2:if(c=e.v,!ue(c)){e.n=4;break}return this.client.core.history.set(n,c),e.n=3,this.onRelayEventRequest({topic:n,payload:c,attestation:i,transportType:a,encryptedId:Yl(r)});case 3:e.n=8;break;case 4:if(!le(c)){e.n=7;break}return e.n=5,this.client.core.history.resolve(c);case 5:return e.n=6,this.onRelayEventResponse({topic:n,payload:c,transportType:a});case 6:this.client.core.history.delete(n,c.id),e.n=8;break;case 7:return e.n=8,this.onRelayEventUnknownPayload({topic:n,payload:c,transportType:a});case 8:return e.n=9,this.client.core.relayer.messages.ack(n,r);case 9:e.n=11;break;case 10:e.p=10,u=e.v,this.client.logger.error(u);case 11:return e.a(2)}},e,this,[[1,10]])})),function(e){return a.apply(this,arguments)})},{key:"registerExpirerEvents",value:function(){var e=this;this.client.core.expirer.on(ap,function(){var t=q(x().m(function t(n){var r,i,a;return x().w(function(t){for(;;)switch(t.n){case 0:if(r=Ho(n.target),i=r.topic,!(a=r.id)||!e.client.pendingRequest.keys.includes(a)){t.n=2;break}return t.n=1,e.deletePendingSessionRequest(a,jd("EXPIRED"),!0);case 1:return t.a(2,t.v);case 2:if(!a||!e.client.auth.requests.keys.includes(a)){t.n=4;break}return t.n=3,e.deletePendingAuthRequest(a,jd("EXPIRED"),!0);case 3:return t.a(2,t.v);case 4:if(!i){t.n=7;break}if(!e.client.session.keys.includes(i)){t.n=6;break}return t.n=5,e.deleteSession({topic:i,expirerHasDeleted:!0});case 5:e.client.events.emit("session_expire",{topic:i});case 6:t.n=9;break;case 7:if(!a){t.n=9;break}return t.n=8,e.deleteProposal(a,!0);case 8:e.client.events.emit("proposal_expire",{id:a});case 9:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"registerPairingEvents",value:function(){var e=this;this.client.core.pairing.events.on(Jf,function(t){return e.onPairingCreated(t)}),this.client.core.pairing.events.on(Xf,function(t){e.addToRecentlyDeleted(t.topic,"pairing")})}},{key:"isValidPairingTopic",value:function(e){if(!zd(e,!1)){var t=jd("MISSING_OR_INVALID","pairing topic should be a string: ".concat(e)).message;throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){var n=jd("NO_MATCHING_KEY","pairing topic doesn't exist: ".concat(e)).message;throw new Error(n)}if(Ko(this.client.core.pairing.pairings.get(e).expiry)){var r=jd("EXPIRED","pairing topic: ".concat(e)).message;throw new Error(r)}}},{key:"isValidSessionTopic",value:(i=q(x().m(function e(t){var n,r,i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.n){case 0:if(zd(t,!1)){e.n=1;break}throw n=jd("MISSING_OR_INVALID","session topic should be a string: ".concat(t)),r=n.message,new Error(r);case 1:if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t)){e.n=2;break}throw i=jd("NO_MATCHING_KEY","session topic doesn't exist: ".concat(t)),a=i.message,new Error(a);case 2:if(!Ko(this.client.session.get(t).expiry)){e.n=4;break}return e.n=3,this.deleteSession({topic:t});case 3:throw o=jd("EXPIRED","session topic: ".concat(t)),s=o.message,new Error(s);case 4:if(this.client.core.crypto.keychain.has(t)){e.n=6;break}return c=jd("MISSING_OR_INVALID","session topic does not exist in keychain: ".concat(t)),u=c.message,e.n=5,this.deleteSession({topic:t});case 5:throw new Error(u);case 6:return e.a(2)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"isValidSessionOrPairingTopic",value:(r=q(x().m(function e(t){var n,r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){e.n=2;break}return e.n=1,this.isValidSessionTopic(t);case 1:e.n=5;break;case 2:if(!this.client.core.pairing.pairings.keys.includes(t)){e.n=3;break}this.isValidPairingTopic(t),e.n=5;break;case 3:if(!zd(t,!1)){e.n=4;break}throw n=jd("NO_MATCHING_KEY","session or pairing topic doesn't exist: ".concat(t)),r=n.message,new Error(r);case 4:throw i=jd("MISSING_OR_INVALID","session or pairing topic should be a string: ".concat(t)),a=i.message,new Error(a);case 5:return e.a(2)}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"isValidProposalId",value:(n=q(x().m(function e(t){var n,r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:if(Qd(t)){e.n=1;break}throw n=jd("MISSING_OR_INVALID","proposal id should be a number: ".concat(t)),r=n.message,new Error(r);case 1:if(this.client.proposal.keys.includes(t)){e.n=2;break}throw i=jd("NO_MATCHING_KEY","proposal id doesn't exist: ".concat(t)),a=i.message,new Error(a);case 2:if(!Ko(this.client.proposal.get(t).expiryTimestamp)){e.n=4;break}return e.n=3,this.deleteProposal(t);case 3:throw o=jd("EXPIRED","proposal id: ".concat(t)),s=o.message,new Error(s);case 4:return e.a(2)}},e,this)})),function(e){return n.apply(this,arguments)})}]);var n,r,i,a,o,s}($i),Jm=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t,[e,n,"proposal",Im])).core=e,r.logger=n,r}return w(t,e),A(t)}(Hg),Ym=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t,[e,n,"session",Im])).core=e,r.logger=n,r}return w(t,e),A(t)}(Hg),Xm=function(e){function t(e,n){var r;return I(this,t),r=v(this,t,[e,n,"request",Im,function(e){return e.id}]),r.core=e,r.logger=n,r}return w(t,e),A(t)}(Hg),Zm=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t,[e,n,"authKeys",jm,function(){return Mm}])).core=e,r.logger=n,r}return w(t,e),A(t)}(Hg),Qm=function(e){function t(e,n){var r;return I(this,t),(r=v(this,t,[e,n,"pairingTopics",jm])).core=e,r.logger=n,r}return w(t,e),A(t)}(Hg),ew=function(e){function t(e,n){var r;return I(this,t),r=v(this,t,[e,n,"requests",jm,function(e){return e.id}]),r.core=e,r.logger=n,r}return w(t,e),A(t)}(Hg),tw=Object.defineProperty,nw=function(e,t,n){return function(e,t,n){return t in e?tw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},rw=function(){return A(function e(t,n){I(this,e),this.core=t,this.logger=n,nw(this,"authKeys"),nw(this,"pairingTopics"),nw(this,"requests"),this.authKeys=new Zm(this.core,this.logger),this.pairingTopics=new Qm(this.core,this.logger),this.requests=new ew(this.core,this.logger)},[{key:"init",value:(e=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.authKeys.init();case 1:return e.n=2,this.pairingTopics.init();case 2:return e.n=3,this.requests.init();case 3:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})}]);var e}(),iw=Object.defineProperty,aw=function(e,t,n){return function(e,t,n){return t in e?iw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},ow=function(e){function t(e){var n;I(this,t),n=v(this,t,[e]),aw(m(n),"protocol","wc"),aw(m(n),"version",2),aw(m(n),"name",Nm),aw(m(n),"metadata"),aw(m(n),"core"),aw(m(n),"logger"),aw(m(n),"events",new X.EventEmitter),aw(m(n),"engine"),aw(m(n),"session"),aw(m(n),"proposal"),aw(m(n),"pendingRequest"),aw(m(n),"auth"),aw(m(n),"signConfig"),aw(m(n),"on",function(e,t){return n.events.on(e,t)}),aw(m(n),"once",function(e,t){return n.events.once(e,t)}),aw(m(n),"off",function(e,t){return n.events.off(e,t)}),aw(m(n),"removeListener",function(e,t){return n.events.removeListener(e,t)}),aw(m(n),"removeAllListeners",function(e){return n.events.removeAllListeners(e)}),aw(m(n),"connect",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.connect(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"pair",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.pair(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"approve",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.approve(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"reject",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.reject(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"update",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.update(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"extend",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.extend(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"request",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.request(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"respond",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.respond(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"ping",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.ping(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"emit",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.emit(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"disconnect",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.disconnect(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"find",function(e){try{return n.engine.find(e)}catch(vn){throw n.logger.error(vn.message),vn}}),aw(m(n),"getPendingSessionRequests",function(){try{return n.engine.getPendingSessionRequests()}catch(_t){throw n.logger.error(_t.message),_t}}),aw(m(n),"authenticate",function(){var e=q(x().m(function e(t,r){var i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.authenticate(t,r);case 1:return e.a(2,e.v);case 2:throw e.p=2,i=e.v,n.logger.error(i.message),i;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t,n){return e.apply(this,arguments)}}()),aw(m(n),"formatAuthMessage",function(e){try{return n.engine.formatAuthMessage(e)}catch(vn){throw n.logger.error(vn.message),vn}}),aw(m(n),"approveSessionAuthenticate",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.approveSessionAuthenticate(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),aw(m(n),"rejectSessionAuthenticate",function(){var e=q(x().m(function e(t){var r;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.engine.rejectSessionAuthenticate(t);case 1:return e.a(2,e.v);case 2:throw e.p=2,r=e.v,n.logger.error(r.message),r;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),n.name=(null==e?void 0:e.name)||Nm,n.metadata=Uo(null==e?void 0:e.metadata),n.signConfig=null==e?void 0:e.signConfig;var r=T(null==e?void 0:e.logger)<"u"&&"string"!=typeof(null==e?void 0:e.logger)?e.logger:oe(Z({level:(null==e?void 0:e.logger)||Am}));return n.core=(null==e?void 0:e.core)||new Em(e),n.logger=ee(r,n.name),n.session=new Ym(n.core,n.logger),n.proposal=new Jm(n.core,n.logger),n.pendingRequest=new Xm(n.core,n.logger),n.engine=new Gm(n),n.auth=new rw(n.core,n.logger),n}return w(t,e),A(t,[{key:"context",get:function(){return re(this.logger)}},{key:"pairing",get:function(){return this.core.pairing.pairings}},{key:"initialize",value:(r=q(x().m(function e(){var t,n=this;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return this.logger.trace("Initialized"),e.p=1,e.n=2,this.core.start();case 2:return e.n=3,this.session.init();case 3:return e.n=4,this.proposal.init();case 4:return e.n=5,this.pendingRequest.init();case 5:return e.n=6,this.auth.init();case 6:return e.n=7,this.engine.init();case 7:this.logger.info("SignClient Initialization Success"),setTimeout(function(){n.engine.processRelayMessageCache()},V.toMiliseconds(V.ONE_SECOND)),e.n=9;break;case 8:throw e.p=8,t=e.v,this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t;case 9:return e.a(2)}},e,this,[[1,8]])})),function(){return r.apply(this,arguments)})}],[{key:"init",value:(n=q(x().m(function e(n){var r;return x().w(function(e){for(;;)switch(e.n){case 0:return r=new t(n),e.n=1,r.initialize();case 1:return e.a(2,r)}},e)})),function(e){return n.apply(this,arguments)})}]);var n,r}(Ki),sw="error",cw="".concat("wc","@2:").concat("universal_provider",":"),uw="https://rpc.walletconnect.org/v1/",lw="generic",dw="".concat(uw,"bundler"),fw="default_chain_changed";function pw(){}function hw(e){return null==e||"object"!=T(e)&&"function"!=typeof e}function vw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function gw(e){return"object"==T(e)&&null!==e}function mw(e){return Object.getOwnPropertySymbols(e).filter(function(t){return Object.prototype.propertyIsEnumerable.call(e,t)})}function ww(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var yw="[object RegExp]",bw="[object String]",kw="[object Number]",Ew="[object Boolean]",Cw="[object Arguments]",Iw="[object Symbol]",Nw="[object Date]",Aw="[object Map]",Sw="[object Set]",Pw="[object Array]",Ow="[object ArrayBuffer]",_w="[object Object]",Tw="[object DataView]",xw="[object Uint8Array]",Rw="[object Uint8ClampedArray]",Uw="[object Uint16Array]",Dw="[object Uint32Array]",jw="[object Int8Array]",Mw="[object Int16Array]",Lw="[object Int32Array]",qw="[object Float32Array]",Bw="[object Float64Array]";function zw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=null==i?void 0:i(e,t,n,r);if(null!=a)return a;if(hw(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){var o=new Array(e.length);r.set(e,o);for(var s=0;s<e.length;s++)o[s]=zw(e[s],s,n,r,i);return Object.hasOwn(e,"index")&&(o.index=e.index),Object.hasOwn(e,"input")&&(o.input=e.input),o}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){var c=new RegExp(e.source,e.flags);return c.lastIndex=e.lastIndex,c}if(e instanceof Map){var u=new Map;r.set(e,u);var l,d=C(e);try{for(d.s();!(l=d.n()).done;){var f=S(l.value,2),p=f[0],h=f[1];u.set(p,zw(h,p,n,r,i))}}catch(P){d.e(P)}finally{d.f()}return u}if(e instanceof Set){var v=new Set;r.set(e,v);var g,m=C(e);try{for(m.s();!(g=m.n()).done;){var w=g.value;v.add(zw(w,void 0,n,r,i))}}catch(P){m.e(P)}finally{m.f()}return v}if(("undefined"==typeof Buffer?"undefined":T(Buffer))<"u"&&Buffer.isBuffer(e))return e.subarray();if(vw(e)){var y=new(Object.getPrototypeOf(e).constructor)(e.length);r.set(e,y);for(var b=0;b<e.length;b++)y[b]=zw(e[b],b,n,r,i);return y}if(e instanceof ArrayBuffer||("undefined"==typeof SharedArrayBuffer?"undefined":T(SharedArrayBuffer))<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){var k=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,k),Fw(k,e,n,r,i),k}if(("undefined"==typeof File?"undefined":T(File))<"u"&&e instanceof File){var E=new File([e],e.name,{type:e.type});return r.set(e,E),Fw(E,e,n,r,i),E}if(e instanceof Blob){var I=new Blob([e],{type:e.type});return r.set(e,I),Fw(I,e,n,r,i),I}if(e instanceof Error){var N=new e.constructor;return r.set(e,N),N.message=e.message,N.name=e.name,N.stack=e.stack,N.cause=e.cause,Fw(N,e,n,r,i),N}if("object"==T(e)&&function(e){switch(ww(e)){case Cw:case Pw:case Ow:case Tw:case Ew:case Nw:case qw:case Bw:case jw:case Mw:case Lw:case Aw:case kw:case _w:case yw:case Sw:case bw:case Iw:case xw:case Rw:case Uw:case Dw:return!0;default:return!1}}(e)){var A=Object.create(Object.getPrototypeOf(e));return r.set(e,A),Fw(A,e,n,r,i),A}return e}function Fw(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=[].concat(P(Object.keys(t)),P(mw(t))),o=0;o<a.length;o++){var s=a[o],c=Object.getOwnPropertyDescriptor(e,s);(null==c||c.writable)&&(e[s]=zw(t[s],s,n,r,i))}}function Ww(e,t){return function(e,t){return zw(e,void 0,e,new Map,t)}(e,function(t,n,r,i){if("object"==T(e))switch(Object.prototype.toString.call(e)){case kw:case bw:case Ew:var a=new e.constructor(null==e?void 0:e.valueOf());return Fw(a,e),a;case Cw:var o={};return Fw(o,e),o.length=e.length,o[Symbol.iterator]=e[Symbol.iterator],o;default:return}})}function Hw(e){return Ww(e)}function Vw(e){return null!==e&&"object"==T(e)&&"[object Arguments]"===ww(e)}function Kw(e){return vw(e)}function $w(e){if("object"!=T(e)||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t,n=e[Symbol.toStringTag];return!(null==n||null===(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))||void 0===t||!t.writable)&&e.toString()==="[object ".concat(n,"]")}for(var r=e;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}function Gw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=n.slice(0,-1),a=n[n.length-1],o=e,s=0;s<i.length;s++){o=Jw(o,i[s],a,new Map)}return o}function Jw(e,t,n,r){if(hw(e)&&(e=Object(e)),null==t||"object"!=T(t))return e;if(r.has(t))return function(e){if(hw(e))return e;if(Array.isArray(e)||vw(e)||e instanceof ArrayBuffer||("undefined"==typeof SharedArrayBuffer?"undefined":T(SharedArrayBuffer))<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);var t=Object.getPrototypeOf(e),n=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new n(e);if(e instanceof RegExp){var r=new n(e);return r.lastIndex=e.lastIndex,r}if(e instanceof DataView)return new n(e.buffer.slice(0));if(e instanceof Error){var i=new n(e.message);return i.stack=e.stack,i.name=e.name,i.cause=e.cause,i}if(("undefined"==typeof File?"undefined":T(File))<"u"&&e instanceof File)return new n([e],e.name,{type:e.type,lastModified:e.lastModified});if("object"==T(e)){var a=Object.create(t);return Object.assign(a,e)}return e}(r.get(t));if(r.set(t,e),Array.isArray(t)){t=t.slice();for(var i=0;i<t.length;i++){var a;t[i]=null!==(a=t[i])&&void 0!==a?a:void 0}}for(var o=[].concat(P(Object.keys(t)),P(mw(t))),s=0;s<o.length;s++){var c=o[s],u=t[c],l=e[c];if(Vw(u)&&(u=D({},u)),Vw(l)&&(l=D({},l)),("undefined"==typeof Buffer?"undefined":T(Buffer))<"u"&&Buffer.isBuffer(u)&&(u=Hw(u)),Array.isArray(u))if("object"==T(l)&&null!=l){for(var d=[],f=Reflect.ownKeys(l),p=0;p<f.length;p++){var h=f[p];d[h]=l[h]}l=d}else l=[];var v=n(l,u,c,e,t,r);null!=v?e[c]=v:Array.isArray(u)||gw(l)&&gw(u)?e[c]=Jw(l,u,n,r):null==l&&$w(u)?e[c]=Jw({},u,n,r):null==l&&Kw(u)?e[c]=Hw(u):(void 0===l||void 0!==u)&&(e[c]=u)}return e}function Yw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gw.apply(void 0,[e].concat(n,[pw]))}var Xw=Object.defineProperty,Zw=Object.defineProperties,Qw=Object.getOwnPropertyDescriptors,ey=Object.getOwnPropertySymbols,ty=Object.prototype.hasOwnProperty,ny=Object.prototype.propertyIsEnumerable,ry=function(e,t,n){return t in e?Xw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},iy=function(e,t){for(var n in t||(t={}))ty.call(t,n)&&ry(e,n,t[n]);if(ey){var r,i=C(ey(t));try{for(i.s();!(r=i.n()).done;){n=r.value;ny.call(t,n)&&ry(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},ay=function(e,t){return Zw(e,Qw(t))};function oy(e,t,n){var r,i=ho(e);return(null==(r=t.rpcMap)?void 0:r[i.reference])||"".concat(uw,"?chainId=").concat(i.namespace,":").concat(i.reference,"&projectId=").concat(n)}function sy(e){return e.includes(":")?e.split(":")[1]:e}function cy(e){return e.map(function(e){return"".concat(e.split(":")[0],":").concat(e.split(":")[1])})}function uy(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Yw(ly(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),ly(e))}function ly(e){var t,n,r,i,a,o={};if(!qd(e))return o;for(var s=0,c=Object.entries(e);s<c.length;s++){var u=S(c[s],2),l=u[0],d=u[1],f=Od(l)?[l]:d.chains,p=d.methods||[],h=d.events||[],v=d.rpcMap||{},g=_d(l);o[g]=ay(iy(iy({},o[g]),d),{chains:Go(f,null==(t=o[g])?void 0:t.chains),methods:Go(p,null==(n=o[g])?void 0:n.methods),events:Go(h,null==(r=o[g])?void 0:r.events)}),(qd(v)||qd((null==(i=o[g])?void 0:i.rpcMap)||{}))&&(o[g].rpcMap=iy(iy({},v),null==(a=o[g])?void 0:a.rpcMap))}return o}function dy(e){return e.includes(":")?e.split(":")[2]:e}function fy(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i=S(r[n],2),a=i[0],o=i[1],s=o.methods||[],c=o.events||[],u=o.accounts||[],l=Od(a)?[a]:o.chains?o.chains:cy(o.accounts);t[a]={chains:l,methods:s,events:c,accounts:u}}return t}function py(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}var hy={},vy=function(e){return hy[e]},gy=function(e,t){hy[e]=t},my=Object.defineProperty,wy=function(e,t,n){return function(e,t,n){return t in e?my(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},yy=function(){return A(function e(t){I(this,e),wy(this,"name","polkadot"),wy(this,"client"),wy(this,"httpProviders"),wy(this,"events"),wy(this,"namespace"),wy(this,"chainId"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()},[{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}},{key:"setDefaultChain",value:function(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fw,"".concat(this.name,":").concat(e))}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t&&t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]})||[]}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){var r,i=sy(n);t[i]=e.createHttpProvider(i,null==(r=e.namespace.rpcMap)?void 0:r[n])}),t}},{key:"getHttpProvider",value:function(){var e="".concat(this.name,":").concat(this.chainId),t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||oy(e,this.namespace,this.client.core.projectId);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));return new se(new Ce(n,vy("disableProviderPing")))}}])}(),by=Object.defineProperty,ky=Object.defineProperties,Ey=Object.getOwnPropertyDescriptors,Cy=Object.getOwnPropertySymbols,Iy=Object.prototype.hasOwnProperty,Ny=Object.prototype.propertyIsEnumerable,Ay=function(e,t,n){return t in e?by(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Sy=function(e,t){for(var n in t||(t={}))Iy.call(t,n)&&Ay(e,n,t[n]);if(Cy){var r,i=C(Cy(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Ny.call(t,n)&&Ay(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},Py=function(e,t){return ky(e,Ey(t))},Oy=function(e,t,n){return Ay(e,"symbol"!=T(t)?t+"":t,n)},_y=function(){return A(function e(t){I(this,e),Oy(this,"name","eip155"),Oy(this,"client"),Oy(this,"chainId"),Oy(this,"namespace"),Oy(this,"httpProviders"),Oy(this,"events"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())},[{key:"request",value:(i=q(x().m(function e(t){var n,r;return x().w(function(e){for(;;)switch(e.n){case 0:n=t.request.method,e.n="eth_requestAccounts"===n?1:"eth_accounts"===n?2:"wallet_switchEthereumChain"===n?3:"eth_chainId"===n?5:"wallet_getCapabilities"===n?6:"wallet_getCallsStatus"===n?8:10;break;case 1:case 2:return e.a(2,this.getAccounts());case 3:return e.n=4,this.handleSwitchChain(t);case 4:return e.a(2,e.v);case 5:return e.a(2,parseInt(this.getDefaultChain()));case 6:return e.n=7,this.getCapabilities(t);case 7:return e.a(2,e.v);case 8:return e.n=9,this.getCallStatus(t);case 9:return e.a(2,e.v);case 10:if(!this.namespace.methods.includes(t.request.method)){e.n=12;break}return e.n=11,this.client.request(t);case 11:r=e.v,e.n=13;break;case 12:r=this.getHttpProvider().request(t.request);case 13:return e.a(2,r)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"setDefaultChain",value:function(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(fw,"".concat(this.name,":").concat(e))}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"createHttpProvider",value:function(e,t){var n=t||oy("".concat(this.name,":").concat(e),this.namespace,this.client.core.projectId);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));return new se(new Ce(n,vy("disableProviderPing")))}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){var r,i=parseInt(sy(n));t[i]=e.createHttpProvider(i,null==(r=e.namespace.rpcMap)?void 0:r[n])}),t}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t?P(new Set(t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]}))):[]}},{key:"getHttpProvider",value:function(){var e=this.chainId,t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"handleSwitchChain",value:(r=q(x().m(function e(t){var n,r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(i=(i=t.request.params?null==(n=t.request.params[0])?void 0:n.chainId:"0x0").startsWith("0x")?i:"0x".concat(i),a=parseInt(i,16),!this.isChainApproved(a)){e.n=1;break}this.setDefaultChain("".concat(a)),e.n=4;break;case 1:if(!this.namespace.methods.includes("wallet_switchEthereumChain")){e.n=3;break}return e.n=2,this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:i}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]});case 2:this.setDefaultChain("".concat(a)),e.n=4;break;case 3:throw new Error("Failed to switch to chain 'eip155:".concat(a,"'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method."));case 4:return e.a(2,null)}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"isChainApproved",value:function(e){return this.namespace.chains.includes("".concat(this.name,":").concat(e))}},{key:"getCapabilities",value:(n=q(x().m(function e(t){var n,r,i,a,o,s,c,u,l,d,f,p;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(s=null==(r=null==(n=t.request)?void 0:n.params)?void 0:r[0],c=(null==(a=null==(i=t.request)?void 0:i.params)?void 0:a[1])||[],u="".concat(s).concat(c.join(",")),s){e.n=1;break}throw new Error("Missing address parameter in `wallet_getCapabilities` request");case 1:if(l=this.client.session.get(t.topic),null==(d=(null==(o=null==l?void 0:l.sessionProperties)?void 0:o.capabilities)||{})||!d[u]){e.n=2;break}return e.a(2,null==d?void 0:d[u]);case 2:return e.n=3,this.client.request(t);case 3:return f=e.v,e.p=4,e.n=5,this.client.session.update(t.topic,{sessionProperties:Py(Sy({},l.sessionProperties||{}),{capabilities:Py(Sy({},d||{}),j({},u,f))})});case 5:e.n=7;break;case 6:e.p=6,p=e.v,console.warn("Failed to update session with capabilities",p);case 7:return e.a(2,f)}},e,this,[[4,6]])})),function(e){return n.apply(this,arguments)})},{key:"getCallStatus",value:(t=q(x().m(function e(t){var n,r,i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=this.client.session.get(t.topic),!(a=null==(n=i.sessionProperties)?void 0:n.bundler_name)){e.n=4;break}return o=this.getBundlerUrl(t.chainId,a),e.p=1,e.n=2,this.getUserOperationReceipt(o,t);case 2:return e.a(2,e.v);case 3:e.p=3,c=e.v,console.warn("Failed to fetch call status from bundler",c,o);case 4:if(!(s=null==(r=i.sessionProperties)?void 0:r.bundler_url)){e.n=8;break}return e.p=5,e.n=6,this.getUserOperationReceipt(s,t);case 6:return e.a(2,e.v);case 7:e.p=7,u=e.v,console.warn("Failed to fetch call status from custom bundler",u,s);case 8:if(!this.namespace.methods.includes(t.request.method)){e.n=10;break}return e.n=9,this.client.request(t);case 9:return e.a(2,e.v);case 10:throw new Error("Fetching call status not approved by the wallet.");case 11:return e.a(2)}},e,this,[[5,7],[1,3]])})),function(e){return t.apply(this,arguments)})},{key:"getUserOperationReceipt",value:(e=q(x().m(function e(t,n){var r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:return i=new URL(t),e.n=1,fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie("eth_getUserOperationReceipt",[null==(r=n.request.params)?void 0:r[0]]))});case 1:if((a=e.v).ok){e.n=2;break}throw new Error("Failed to fetch user operation receipt - ".concat(a.status));case 2:return e.n=3,a.json();case 3:return e.a(2,e.v)}},e)})),function(t,n){return e.apply(this,arguments)})},{key:"getBundlerUrl",value:function(e,t){return"".concat(dw,"?projectId=").concat(this.client.core.projectId,"&chainId=").concat(e,"&bundler=").concat(t)}}]);var e,t,n,r,i}(),Ty=Object.defineProperty,xy=function(e,t,n){return function(e,t,n){return t in e?Ty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Ry=function(){return A(function e(t){I(this,e),xy(this,"name","solana"),xy(this,"client"),xy(this,"httpProviders"),xy(this,"events"),xy(this,"namespace"),xy(this,"chainId"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()},[{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}},{key:"setDefaultChain",value:function(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fw,"".concat(this.name,":").concat(e))}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t?P(new Set(t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]}))):[]}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){var r,i=sy(n);t[i]=e.createHttpProvider(i,null==(r=e.namespace.rpcMap)?void 0:r[n])}),t}},{key:"getHttpProvider",value:function(){var e="".concat(this.name,":").concat(this.chainId),t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||oy(e,this.namespace,this.client.core.projectId);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));return new se(new Ce(n,vy("disableProviderPing")))}}])}(),Uy=Object.defineProperty,Dy=function(e,t,n){return function(e,t,n){return t in e?Uy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},jy=function(){return A(function e(t){I(this,e),Dy(this,"name","cosmos"),Dy(this,"client"),Dy(this,"httpProviders"),Dy(this,"events"),Dy(this,"namespace"),Dy(this,"chainId"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()},[{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}},{key:"setDefaultChain",value:function(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fw,"".concat(this.name,":").concat(this.chainId))}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t?P(new Set(t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]}))):[]}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){var r,i=sy(n);t[i]=e.createHttpProvider(i,null==(r=e.namespace.rpcMap)?void 0:r[n])}),t}},{key:"getHttpProvider",value:function(){var e="".concat(this.name,":").concat(this.chainId),t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||oy(e,this.namespace,this.client.core.projectId);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));return new se(new Ce(n,vy("disableProviderPing")))}}])}(),My=Object.defineProperty,Ly=function(e,t,n){return function(e,t,n){return t in e?My(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},qy=function(){return A(function e(t){I(this,e),Ly(this,"name","algorand"),Ly(this,"client"),Ly(this,"httpProviders"),Ly(this,"events"),Ly(this,"namespace"),Ly(this,"chainId"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()},[{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}},{key:"setDefaultChain",value:function(e,t){if(!this.httpProviders[e]){var n=t||oy("".concat(this.name,":").concat(e),this.namespace,this.client.core.projectId);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(fw,"".concat(this.name,":").concat(this.chainId))}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t?P(new Set(t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]}))):[]}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){var r;t[n]=e.createHttpProvider(n,null==(r=e.namespace.rpcMap)?void 0:r[n])}),t}},{key:"getHttpProvider",value:function(){var e="".concat(this.name,":").concat(this.chainId),t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||oy(e,this.namespace,this.client.core.projectId);return T(n)>"u"?void 0:new se(new Ce(n,vy("disableProviderPing")))}}])}(),By=Object.defineProperty,zy=function(e,t,n){return function(e,t,n){return t in e?By(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Fy=function(){return A(function e(t){I(this,e),zy(this,"name","cip34"),zy(this,"client"),zy(this,"httpProviders"),zy(this,"events"),zy(this,"namespace"),zy(this,"chainId"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()},[{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}},{key:"setDefaultChain",value:function(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fw,"".concat(this.name,":").concat(this.chainId))}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t?P(new Set(t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]}))):[]}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){var r=e.getCardanoRPCUrl(n),i=sy(n);t[i]=e.createHttpProvider(i,r)}),t}},{key:"getHttpProvider",value:function(){var e="".concat(this.name,":").concat(this.chainId),t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"getCardanoRPCUrl",value:function(e){var t=this.namespace.rpcMap;if(t)return t[e]}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||this.getCardanoRPCUrl(e);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));return new se(new Ce(n,vy("disableProviderPing")))}}])}(),Wy=Object.defineProperty,Hy=function(e,t,n){return function(e,t,n){return t in e?Wy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Vy=function(){return A(function e(t){I(this,e),Hy(this,"name","elrond"),Hy(this,"client"),Hy(this,"httpProviders"),Hy(this,"events"),Hy(this,"namespace"),Hy(this,"chainId"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()},[{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}},{key:"setDefaultChain",value:function(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fw,"".concat(this.name,":").concat(e))}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t?P(new Set(t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]}))):[]}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){var r,i=sy(n);t[i]=e.createHttpProvider(i,null==(r=e.namespace.rpcMap)?void 0:r[n])}),t}},{key:"getHttpProvider",value:function(){var e="".concat(this.name,":").concat(this.chainId),t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||oy(e,this.namespace,this.client.core.projectId);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));return new se(new Ce(n,vy("disableProviderPing")))}}])}(),Ky=Object.defineProperty,$y=function(e,t,n){return function(e,t,n){return t in e?Ky(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Gy=function(){return A(function e(t){I(this,e),$y(this,"name","multiversx"),$y(this,"client"),$y(this,"httpProviders"),$y(this,"events"),$y(this,"namespace"),$y(this,"chainId"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()},[{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}},{key:"setDefaultChain",value:function(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fw,"".concat(this.name,":").concat(e))}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t?P(new Set(t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]}))):[]}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){var r,i=sy(n);t[i]=e.createHttpProvider(i,null==(r=e.namespace.rpcMap)?void 0:r[n])}),t}},{key:"getHttpProvider",value:function(){var e="".concat(this.name,":").concat(this.chainId),t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||oy(e,this.namespace,this.client.core.projectId);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));return new se(new Ce(n,vy("disableProviderPing")))}}])}(),Jy=Object.defineProperty,Yy=function(e,t,n){return function(e,t,n){return t in e?Jy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},Xy=function(){return A(function e(t){I(this,e),Yy(this,"name","near"),Yy(this,"client"),Yy(this,"httpProviders"),Yy(this,"events"),Yy(this,"namespace"),Yy(this,"chainId"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()},[{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}},{key:"setDefaultChain",value:function(e,t){if(this.chainId=e,!this.httpProviders[e]){var n=t||oy("".concat(this.name,":").concat(e),this.namespace);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));this.setHttpProvider(e,n)}this.events.emit(fw,"".concat(this.name,":").concat(this.chainId))}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t&&t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]})||[]}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){var r;t[n]=e.createHttpProvider(n,null==(r=e.namespace.rpcMap)?void 0:r[n])}),t}},{key:"getHttpProvider",value:function(){var e="".concat(this.name,":").concat(this.chainId),t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||oy(e,this.namespace);return T(n)>"u"?void 0:new se(new Ce(n,vy("disableProviderPing")))}}])}(),Zy=Object.defineProperty,Qy=function(e,t,n){return function(e,t,n){return t in e?Zy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},eb=function(){return A(function e(t){I(this,e),Qy(this,"name","tezos"),Qy(this,"client"),Qy(this,"httpProviders"),Qy(this,"events"),Qy(this,"namespace"),Qy(this,"chainId"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()},[{key:"updateNamespace",value:function(e){this.namespace=Object.assign(this.namespace,e)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}},{key:"setDefaultChain",value:function(e,t){if(this.chainId=e,!this.httpProviders[e]){var n=t||oy("".concat(this.name,":").concat(e),this.namespace);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));this.setHttpProvider(e,n)}this.events.emit(fw,"".concat(this.name,":").concat(this.chainId))}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t&&t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]})||[]}},{key:"createHttpProviders",value:function(){var e=this,t={};return this.namespace.chains.forEach(function(n){t[n]=e.createHttpProvider(n)}),t}},{key:"getHttpProvider",value:function(){var e="".concat(this.name,":").concat(this.chainId),t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||oy(e,this.namespace);return T(n)>"u"?void 0:new se(new Ce(n))}}])}(),tb=Object.defineProperty,nb=function(e,t,n){return function(e,t,n){return t in e?tb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!=T(t)?t+"":t,n)},rb=function(){return A(function e(t){I(this,e),nb(this,"name",lw),nb(this,"client"),nb(this,"httpProviders"),nb(this,"events"),nb(this,"namespace"),nb(this,"chainId"),this.namespace=t.namespace,this.events=vy("events"),this.client=vy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()},[{key:"updateNamespace",value:function(e){this.namespace.chains=P(new Set((this.namespace.chains||[]).concat(e.chains||[]))),this.namespace.accounts=P(new Set((this.namespace.accounts||[]).concat(e.accounts||[]))),this.namespace.methods=P(new Set((this.namespace.methods||[]).concat(e.methods||[]))),this.namespace.events=P(new Set((this.namespace.events||[]).concat(e.events||[]))),this.httpProviders=this.createHttpProviders()}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"request",value:function(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}},{key:"setDefaultChain",value:function(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fw,"".concat(this.name,":").concat(e))}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}},{key:"getAccounts",value:function(){var e=this,t=this.namespace.accounts;return t?P(new Set(t.filter(function(t){return t.split(":")[1]===e.chainId.toString()}).map(function(e){return e.split(":")[2]}))):[]}},{key:"createHttpProviders",value:function(){var e,t,n=this,r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(function(e){var t=ho(e);r["".concat(t.namespace,":").concat(t.reference)]=n.createHttpProvider(e)}),r}},{key:"getHttpProvider",value:function(e){var t=this.httpProviders[e];if(T(t)>"u")throw new Error("JSON-RPC provider for ".concat(e," not found"));return t}},{key:"setHttpProvider",value:function(e,t){var n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}},{key:"createHttpProvider",value:function(e,t){var n=t||oy(e,this.namespace,this.client.core.projectId);if(!n)throw new Error("No RPC url provided for chainId: ".concat(e));return new se(new Ce(n,vy("disableProviderPing")))}}])}(),ib=Object.defineProperty,ab=Object.defineProperties,ob=Object.getOwnPropertyDescriptors,sb=Object.getOwnPropertySymbols,cb=Object.prototype.hasOwnProperty,ub=Object.prototype.propertyIsEnumerable,lb=function(e,t,n){return t in e?ib(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},db=function(e,t){for(var n in t||(t={}))cb.call(t,n)&&lb(e,n,t[n]);if(sb){var r,i=C(sb(t));try{for(i.s();!(r=i.n()).done;){n=r.value;ub.call(t,n)&&lb(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},fb=function(e,t){return ab(e,ob(t))},pb=function(e,t,n){return lb(e,"symbol"!=T(t)?t+"":t,n)},hb=function(){function e(t){I(this,e),pb(this,"client"),pb(this,"namespaces"),pb(this,"optionalNamespaces"),pb(this,"sessionProperties"),pb(this,"scopedProperties"),pb(this,"events",new fe),pb(this,"rpcProviders",{}),pb(this,"session"),pb(this,"providerOpts"),pb(this,"logger"),pb(this,"uri"),pb(this,"disableProviderPing",!1),this.providerOpts=t,this.logger=T(null==t?void 0:t.logger)<"u"&&"string"!=typeof(null==t?void 0:t.logger)?t.logger:oe(Z({level:(null==t?void 0:t.logger)||sw})),this.disableProviderPing=(null==t?void 0:t.disableProviderPing)||!1}return A(e,[{key:"request",value:(w=q(x().m(function e(t,n,r){var i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:if(i=this.validateChain(n),a=S(i,2),o=a[0],s=a[1],this.session){e.n=1;break}throw new Error("Please call connect() before request()");case 1:return e.n=2,this.getProvider(o).request({request:db({},t),chainId:"".concat(o,":").concat(s),topic:this.session.topic,expiry:r});case 2:return e.a(2,e.v)}},e,this)})),function(e,t,n){return w.apply(this,arguments)})},{key:"sendAsync",value:function(e,t,n,r){var i=(new Date).getTime();this.request(e,n,r).then(function(e){return t(null,de(i,e))}).catch(function(e){return t(e,void 0)})}},{key:"enable",value:(m=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:if(this.client){e.n=1;break}throw new Error("Sign Client not initialized");case 1:if(this.session){e.n=2;break}return e.n=2,this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});case 2:return e.n=3,this.requestAccounts();case 3:return e.a(2,e.v)}},e,this)})),function(){return m.apply(this,arguments)})},{key:"disconnect",value:(g=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:if(this.session){e.n=1;break}throw new Error("Please call connect() before enable()");case 1:return e.n=2,this.client.disconnect({topic:null==(t=this.session)?void 0:t.topic,reason:Md("USER_DISCONNECTED")});case 2:return e.n=3,this.cleanup();case 3:return e.a(2)}},e,this)})),function(){return g.apply(this,arguments)})},{key:"connect",value:(v=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:if(this.client){e.n=1;break}throw new Error("Sign Client not initialized");case 1:return this.setNamespaces(t),e.n=2,this.cleanupPendingPairings();case 2:if(t.skipPairing){e.n=4;break}return e.n=3,this.pair(t.pairingTopic);case 3:return e.a(2,e.v);case 4:return e.a(2)}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"authenticate",value:(h=q(x().m(function e(t,n){var r,i,a,o,s;return x().w(function(e){for(;;)switch(e.n){case 0:if(this.client){e.n=1;break}throw new Error("Sign Client not initialized");case 1:return this.setNamespaces(t),e.n=2,this.cleanupPendingPairings();case 2:return e.n=3,this.client.authenticate(t,n);case 3:return r=e.v,i=r.uri,a=r.response,i&&(this.uri=i,this.events.emit("display_uri",i)),e.n=4,a();case 4:if(o=e.v,this.session=o.session,!this.session){e.n=6;break}return s=fy(this.session.namespaces),this.namespaces=uy(this.namespaces,s),e.n=5,this.persist("namespaces",this.namespaces);case 5:this.onConnect();case 6:return e.a(2,o)}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}},{key:"removeListener",value:function(e,t){this.events.removeListener(e,t)}},{key:"off",value:function(e,t){this.events.off(e,t)}},{key:"isWalletConnect",get:function(){return!0}},{key:"pair",value:(p=q(x().m(function e(t){var n,r,i,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});case 1:return n=e.v,r=n.uri,i=n.approval,r&&(this.uri=r,this.events.emit("display_uri",r)),e.n=2,i();case 2:return a=e.v,this.session=a,o=fy(a.namespaces),this.namespaces=uy(this.namespaces,o),e.n=3,this.persist("namespaces",this.namespaces);case 3:return e.n=4,this.persist("optionalNamespaces",this.optionalNamespaces);case 4:return this.onConnect(),e.a(2,this.session)}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"setDefaultChain",value:function(e,t){try{if(!this.session)return;var n=S(this.validateChain(e),2),r=n[0],i=n[1],a=this.getProvider(r);a.name===lw?a.setDefaultChain("".concat(r,":").concat(i),t):a.setDefaultChain(i,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}},{key:"cleanupPendingPairings",value:(f=q(x().m(function e(){var t,n,r,i,a,o,s=arguments;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},this.logger.info("Cleaning up inactive pairings..."),!Ld(n=this.client.pairing.getAll())){e.n=9;break}r=C(n),e.p=1,r.s();case 2:if((i=r.n()).done){e.n=5;break}if(a=i.value,!t.deletePairings){e.n=3;break}this.client.core.expirer.set(a.topic,0),e.n=4;break;case 3:return e.n=4,this.client.core.relayer.subscriber.unsubscribe(a.topic);case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,o=e.v,r.e(o);case 7:return e.p=7,r.f(),e.f(7);case 8:this.logger.info("Inactive pairings cleared: ".concat(n.length));case 9:return e.a(2)}},e,this,[[1,6,7,8]])})),function(){return f.apply(this,arguments)})},{key:"abortPairingAttempt",value:function(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}},{key:"checkStorage",value:(d=q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getFromStore("namespaces");case 1:if(t=e.v){e.n=2;break}t={};case 2:return this.namespaces=t,e.n=3,this.getFromStore("optionalNamespaces");case 3:if(n=e.v){e.n=4;break}n={};case 4:this.optionalNamespaces=n,this.session&&this.createProviders();case 5:return e.a(2)}},e,this)})),function(){return d.apply(this,arguments)})},{key:"initialize",value:(l=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return this.logger.trace("Initialized"),e.n=1,this.createClient();case 1:return e.n=2,this.checkStorage();case 2:this.registerEventListeners();case 3:return e.a(2)}},e,this)})),function(){return l.apply(this,arguments)})},{key:"createClient",value:(u=q(x().m(function e(){var t,n,r,i,a;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(i=this.providerOpts.client){e.n=2;break}return e.n=1,ow.init({core:this.providerOpts.core,logger:this.providerOpts.logger||sw,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled});case 1:i=e.v;case 2:if(this.client=i,!this.providerOpts.session){e.n=6;break}e.p=3,this.session=this.client.session.get(this.providerOpts.session.topic),e.n=5;break;case 4:throw e.p=4,a=e.v,this.logger.error("Failed to get session",a),new Error("The provided session: ".concat(null==(n=null==(t=this.providerOpts)?void 0:t.session)?void 0:n.topic," doesn't exist in the Sign client"));case 5:e.n=7;break;case 6:r=this.client.session.getAll(),this.session=r[0];case 7:this.logger.trace("SignClient Initialized");case 8:return e.a(2)}},e,this,[[3,4]])})),function(){return u.apply(this,arguments)})},{key:"createProviders",value:function(){var e=this;if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");var t=P(new Set(Object.keys(this.session.namespaces).map(function(e){return _d(e)})));gy("client",this.client),gy("events",this.events),gy("disableProviderPing",this.disableProviderPing),t.forEach(function(t){if(e.session){var n=function(e,t){var n=Object.keys(t.namespaces).filter(function(t){return t.includes(e)});if(!n.length)return[];var r=[];return n.forEach(function(e){var n=t.namespaces[e].accounts;r.push.apply(r,P(n))}),r}(t,e.session),r=cy(n),i=uy(e.namespaces,e.optionalNamespaces),a=fb(db({},i[t]),{accounts:n,chains:r});switch(t){case"eip155":e.rpcProviders[t]=new _y({namespace:a});break;case"algorand":e.rpcProviders[t]=new qy({namespace:a});break;case"solana":e.rpcProviders[t]=new Ry({namespace:a});break;case"cosmos":e.rpcProviders[t]=new jy({namespace:a});break;case"polkadot":e.rpcProviders[t]=new yy({namespace:a});break;case"cip34":e.rpcProviders[t]=new Fy({namespace:a});break;case"elrond":e.rpcProviders[t]=new Vy({namespace:a});break;case"multiversx":e.rpcProviders[t]=new Gy({namespace:a});break;case"near":e.rpcProviders[t]=new Xy({namespace:a});break;case"tezos":e.rpcProviders[t]=new eb({namespace:a});break;default:e.rpcProviders[lw]?e.rpcProviders[lw].updateNamespace(a):e.rpcProviders[lw]=new rb({namespace:a})}}})}},{key:"registerEventListeners",value:function(){var e=this;if(T(this.client)>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",function(t){var n;t.topic===(null==(n=e.session)?void 0:n.topic)&&e.events.emit("session_ping",t)}),this.client.on("session_event",function(t){var n,r=t.params;if(t.topic===(null==(n=e.session)?void 0:n.topic)){var i=r.event;if("accountsChanged"===i.name){var a=i.data;a&&Ld(a)&&e.events.emit("accountsChanged",a.map(dy))}else if("chainChanged"===i.name){var o=r.chainId,s=r.event.data,c=_d(o),u=py(o)!==py(s)?"".concat(c,":").concat(py(s)):o;e.onChainChanged(u)}else e.events.emit(i.name,i.data);e.events.emit("session_event",t)}}),this.client.on("session_update",function(t){var n,r,i=t.topic,a=t.params;if(i===(null==(n=e.session)?void 0:n.topic)){var o=a.namespaces,s=null==(r=e.client)?void 0:r.session.get(i);e.session=fb(db({},s),{namespaces:o}),e.onSessionUpdate(),e.events.emit("session_update",{topic:i,params:a})}}),this.client.on("session_delete",function(){var t=q(x().m(function t(n){var r;return x().w(function(t){for(;;)switch(t.n){case 0:if(!(n.topic===(null==(r=e.session)?void 0:r.topic))){t.n=2;break}return t.n=1,e.cleanup();case 1:e.events.emit("session_delete",n),e.events.emit("disconnect",fb(db({},Md("USER_DISCONNECTED")),{data:n.topic}));case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),this.on(fw,function(t){e.onChainChanged(t,!0)})}},{key:"getProvider",value:function(e){return this.rpcProviders[e]||this.rpcProviders[lw]}},{key:"onSessionUpdate",value:function(){var e=this;Object.keys(this.rpcProviders).forEach(function(t){var n;e.getProvider(t).updateNamespace(null==(n=e.session)?void 0:n.namespaces[t])})}},{key:"setNamespaces",value:function(e){var t=e.namespaces,n=void 0===t?{}:t,r=e.optionalNamespaces,i=void 0===r?{}:r,a=e.sessionProperties,o=e.scopedProperties;this.optionalNamespaces=uy(n,i),this.sessionProperties=a,this.scopedProperties=o}},{key:"validateChain",value:function(e){var t=S((null==e?void 0:e.split(":"))||["",""],2),n=t[0],r=t[1];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(function(e){return _d(e)}).includes(n))throw new Error("Namespace '".concat(n,"' is not configured. Please call connect() first with namespace config."));if(n&&r)return[n,r];var i=_d(Object.keys(this.namespaces)[0]);return[i,this.rpcProviders[i].getDefaultChain()]}},{key:"requestAccounts",value:(c=q(x().m(function e(){var t,n,r;return x().w(function(e){for(;;)switch(e.n){case 0:return t=this.validateChain(),n=S(t,1),r=n[0],e.n=1,this.getProvider(r).requestAccounts();case 1:return e.a(2,e.v)}},e,this)})),function(){return c.apply(this,arguments)})},{key:"onChainChanged",value:(s=q(x().m(function e(t){var n,r,i,a,o,s,c=arguments;return x().w(function(e){for(;;)switch(e.n){case 0:if(n=c.length>1&&void 0!==c[1]&&c[1],this.namespaces){e.n=1;break}return e.a(2);case 1:if(r=this.validateChain(t),i=S(r,2),a=i[0],o=i[1]){e.n=2;break}return e.a(2);case 2:return this.updateNamespaceChain(a,o),this.events.emit("chainChanged",o),s=this.getProvider(a).getDefaultChain(),n||this.getProvider(a).setDefaultChain(o),this.emitAccountsChangedOnChainChange({namespace:a,previousChainId:s,newChainId:t}),e.n=3,this.persist("namespaces",this.namespaces);case 3:return e.a(2)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"emitAccountsChangedOnChainChange",value:function(e){var t,n,r=e.namespace,i=e.previousChainId,a=e.newChainId;try{if(i===a)return;var o=null==(n=null==(t=this.session)?void 0:t.namespaces[r])?void 0:n.accounts;if(!o)return;var s=o.filter(function(e){return e.includes("".concat(a,":"))}).map(dy);if(!Ld(s))return;this.events.emit("accountsChanged",s)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}},{key:"updateNamespaceChain",value:function(e,t){if(this.namespaces){var n=this.namespaces[e]?e:"".concat(e,":").concat(t),r={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=t):this.namespaces[n]=r}}},{key:"onConnect",value:function(){this.createProviders(),this.events.emit("connect",{session:this.session})}},{key:"cleanup",value:(o=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,e.n=1,this.deleteFromStore("namespaces");case 1:return e.n=2,this.deleteFromStore("optionalNamespaces");case 2:return e.n=3,this.deleteFromStore("sessionProperties");case 3:return this.session=void 0,e.n=4,this.cleanupPendingPairings({deletePairings:!0});case 4:return e.n=5,this.cleanupStorage();case 5:return e.a(2)}},e,this)})),function(){return o.apply(this,arguments)})},{key:"persist",value:(a=q(x().m(function e(t,n){var r,i;return x().w(function(e){for(;;)switch(e.n){case 0:return i=(null==(r=this.session)?void 0:r.topic)||"",e.n=1,this.client.core.storage.setItem("".concat(cw,"/").concat(t).concat(i),n);case 1:return e.a(2)}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"getFromStore",value:(i=q(x().m(function e(t){var n,r;return x().w(function(e){for(;;)switch(e.n){case 0:return r=(null==(n=this.session)?void 0:n.topic)||"",e.n=1,this.client.core.storage.getItem("".concat(cw,"/").concat(t).concat(r));case 1:return e.a(2,e.v)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"deleteFromStore",value:(r=q(x().m(function e(t){var n,r;return x().w(function(e){for(;;)switch(e.n){case 0:return r=(null==(n=this.session)?void 0:n.topic)||"",e.n=1,this.client.core.storage.removeItem("".concat(cw,"/").concat(t).concat(r));case 1:return e.a(2)}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"cleanupStorage",value:(n=q(x().m(function e(){var t,n,r,i,a,o,s;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!((null==(t=this.client)?void 0:t.session.length)>0)){e.n=1;break}return e.a(2);case 1:return e.n=2,this.client.core.storage.getKeys();case 2:n=e.v,r=C(n),e.p=3,r.s();case 4:if((i=r.n()).done){e.n=6;break}if(!(a=i.value).startsWith(cw)){e.n=5;break}return e.n=5,this.client.core.storage.removeItem(a);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,o=e.v,r.e(o);case 8:return e.p=8,r.f(),e.f(8);case 9:e.n=11;break;case 10:e.p=10,s=e.v,this.logger.warn("Failed to cleanup storage",s);case 11:return e.a(2)}},e,this,[[3,7,8,9],[0,10]])})),function(){return n.apply(this,arguments)})}],[{key:"init",value:(t=q(x().m(function t(n){var r;return x().w(function(t){for(;;)switch(t.n){case 0:return r=new e(n),t.n=1,r.initialize();case 1:return t.a(2,r)}},t)})),function(e){return t.apply(this,arguments)})}]);var t,n,r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w}(),vb=h("S",{getSIWX:function(){return ar.state.siwx},initializeIfEnabled:function(){var e=this;return q(x().m(function t(){var n,r,i,a,o,s,c,u,l;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=ar.state.siwx,r=li.getActiveCaipAddress(),n&&r){t.n=1;break}return t.a(2);case 1:if(i=r.split(":"),a=S(i,3),o=a[0],s=a[1],c=a[2],li.checkIfSupportedNetwork(o)){t.n=2;break}return t.a(2);case 2:return t.p=2,t.n=3,n.getSessions("".concat(o,":").concat(s),c);case 3:if(!t.v.length){t.n=4;break}return t.a(2);case 4:return t.n=5,bi.open({view:"SIWXSignMessage"});case 5:t.n=8;break;case 6:return t.p=6,l=t.v,console.error("SIWXUtil:initializeIfEnabled",l),Pr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:e.getSIWXEventProperties()}),t.n=7,null===(u=Zr._getClient())||void 0===u?void 0:u.disconnect().catch(console.error);case 7:Ur.reset("Connect"),Kr.showError("A problem occurred while trying initialize authentication");case 8:return t.a(2)}},t,null,[[2,6]])}))()},requestSignMessage:function(){var e=this;return q(x().m(function t(){var n,r,i,a,o,s,c,u,l;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=ar.state.siwx,r=Qn.getPlainAddress(li.getActiveCaipAddress()),i=li.getActiveCaipNetwork(),a=Zr._getClient(),n){t.n=1;break}throw new Error("SIWX is not enabled");case 1:if(r){t.n=2;break}throw new Error("No ActiveCaipAddress found");case 2:if(i){t.n=3;break}throw new Error("No ActiveCaipNetwork or client found");case 3:if(a){t.n=4;break}throw new Error("No ConnectionController client found");case 4:return t.p=4,t.n=5,n.createMessage({chainId:i.caipNetworkId,accountAddress:r});case 5:return o=t.v,s=o.toString(),zr.getConnectorId(i.chainNamespace)===yn.CONNECTOR_ID.AUTH&&Ur.pushTransactionStack({}),t.n=6,a.signMessage(s);case 6:return c=t.v,t.n=7,n.addSession({data:o,message:s,signature:c});case 7:bi.close(),Pr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:e.getSIWXEventProperties()}),t.n=10;break;case 8:if(t.p=8,l=t.v,u=e.getSIWXEventProperties(),bi.state.open&&"ApproveTransaction"!==Ur.state.view){t.n=9;break}return t.n=9,bi.open({view:"SIWXSignMessage"});case 9:u.isSmartAccount?Kr.showError("This application might not support Smart Accounts"):Kr.showError("Signature declined"),Pr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:u}),console.error("SWIXUtil:requestSignMessage",l);case 10:return t.a(2)}},t,null,[[4,8]])}))()},cancelSignMessage:function(){var e=this;return q(x().m(function t(){var n,r,i;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,r=e.getSIWX(),!(null==r||null===(n=r.getRequired)||void 0===n?void 0:n.call(r))){t.n=2;break}return t.n=1,Zr.disconnect();case 1:t.n=3;break;case 2:bi.close();case 3:Ur.reset("Connect"),Pr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:e.getSIWXEventProperties()}),t.n=5;break;case 4:t.p=4,i=t.v,console.error("SIWXUtil:cancelSignMessage",i);case 5:return t.a(2)}},t,null,[[0,4]])}))()},getSessions:function(){return q(x().m(function e(){var t,n,r;return x().w(function(e){for(;;)switch(e.n){case 0:if(t=ar.state.siwx,n=Qn.getPlainAddress(li.getActiveCaipAddress()),r=li.getActiveCaipNetwork(),t&&n&&r){e.n=1;break}return e.a(2,[]);case 1:return e.a(2,t.getSessions(r.caipNetworkId,n))}},e)}))()},isSIWXCloseDisabled:function(){var e=this;return q(x().m(function t(){var n,r,i,a,o,s;return x().w(function(t){for(;;)switch(t.n){case 0:if(!(n=e.getSIWX())){t.n=3;break}if(r="ApproveTransaction"===Ur.state.view,i="SIWXSignMessage"===Ur.state.view,!r&&!i){t.n=3;break}if(!(o=null===(a=n.getRequired)||void 0===a?void 0:a.call(n))){t.n=2;break}return t.n=1,e.getSessions();case 1:s=t.v.length,o=0===s;case 2:return t.a(2,o);case 3:return t.a(2,!1)}},t)}))()},universalProviderAuthenticate:function(e){return q(x().m(function t(){var n,r,i,a,o,s,c,u,l,d,f,p;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(a=e.universalProvider,o=e.chains,s=e.methods,c=vb.getSIWX(),u=new Set(o.map(function(e){return e.split(":")[0]})),c&&1===u.size&&u.has("eip155")){t.n=1;break}return t.a(2,!1);case 1:return t.n=2,c.createMessage({chainId:(null===(n=li.getActiveCaipNetwork())||void 0===n?void 0:n.caipNetworkId)||"",accountAddress:""});case 2:return l=t.v,t.n=3,a.authenticate({nonce:l.nonce,domain:l.domain,uri:l.uri,exp:l.expirationTime,iat:l.issuedAt,nbf:l.notBefore,requestId:l.requestId,version:l.version,resources:l.resources,statement:l.statement,chainId:l.chainId,methods:s,chains:[l.chainId].concat(P(o.filter(function(e){return e!==l.chainId})))});case 3:if(d=t.v,Kr.showLoading("Authenticating...",{autoClose:!1}),mi.setConnectedWalletInfo(D(D({},d.session.peer.metadata),{},{name:d.session.peer.metadata.name,icon:null===(r=d.session.peer.metadata.icons)||void 0===r?void 0:r[0],type:"WALLET_CONNECT"}),Array.from(u)[0]),null==d||null===(i=d.auths)||void 0===i||!i.length){t.n=9;break}return f=d.auths.map(function(e){var t=a.client.formatAuthMessage({request:e.p,iss:e.p.iss});return{data:D(D({},e.p),{},{accountAddress:e.p.iss.split(":").slice(-1).join(""),chainId:e.p.iss.split(":").slice(2,4).join(":"),uri:e.p.aud,version:e.p.version||l.version,expirationTime:e.p.exp,issuedAt:e.p.iat,notBefore:e.p.nbf}),message:t,signature:e.s.s,cacao:e}}),t.p=4,t.n=5,c.setSessions(f);case 5:Pr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:vb.getSIWXEventProperties()}),t.n=8;break;case 6:return t.p=6,p=t.v,console.error("SIWX:universalProviderAuth - failed to set sessions",p),Pr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:vb.getSIWXEventProperties()}),t.n=7,a.disconnect().catch(console.error);case 7:throw p;case 8:return t.p=8,Kr.hide(),t.f(8);case 9:return t.a(2,!0)}},t,null,[[4,6,8,9]])}))()},getSIWXEventProperties:function(){var e,t,n=li.state.activeChain;return{network:(null===(e=li.state.activeCaipNetwork)||void 0===e?void 0:e.caipNetworkId)||"",isSmartAccount:(null===(t=mi.state.preferredAccountTypes)||void 0===t?void 0:t[n])===Fr.SMART_ACCOUNT}},clearSessions:function(){var e=this;return q(x().m(function t(){var n;return x().w(function(t){for(;;)switch(t.n){case 0:if(!(n=e.getSIWX())){t.n=1;break}return t.n=1,n.setSessions([]);case 1:return t.a(2)}},t)}))()}});function gb(e,t){return zr.getConnectorId(e)===t}function mb(e){var t=Array.from(li.state.chains.keys()),n=[];return e?(n.push([e,li.state.chains.get(e)]),gb(e,yn.CONNECTOR_ID.WALLET_CONNECT)?t.forEach(function(t){t!==e&&gb(t,yn.CONNECTOR_ID.WALLET_CONNECT)&&n.push([t,li.state.chains.get(t)])}):gb(e,yn.CONNECTOR_ID.AUTH)&&t.forEach(function(t){t!==e&&gb(t,yn.CONNECTOR_ID.AUTH)&&n.push([t,li.state.chains.get(t)])})):n=Array.from(li.state.chains.entries()),n}var wb="WALLET_CONNECT",yb="INJECTED",bb="ANNOUNCED",kb={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:j(j(j(j(j(j({},yn.CONNECTOR_ID.COINBASE,"0c2840c3-5b04-4c44-9661-fbd4b49e1800"),yn.CONNECTOR_ID.COINBASE_SDK,"0c2840c3-5b04-4c44-9661-fbd4b49e1800"),yn.CONNECTOR_ID.SAFE,"461db637-8616-43ce-035a-d89b8a1d5800"),yn.CONNECTOR_ID.LEDGER,"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300"),yn.CONNECTOR_ID.WALLET_CONNECT,"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400"),yn.CONNECTOR_ID.INJECTED,"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"),ConnectorNamesMap:j(j(j(j(j(j({},yn.CONNECTOR_ID.INJECTED,"Browser Wallet"),yn.CONNECTOR_ID.WALLET_CONNECT,"WalletConnect"),yn.CONNECTOR_ID.COINBASE,"Coinbase"),yn.CONNECTOR_ID.COINBASE_SDK,"Coinbase"),yn.CONNECTOR_ID.LEDGER,"Ledger"),yn.CONNECTOR_ID.SAFE,"Safe")},Eb=function(e,t){return(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase())};new AbortController;var Cb={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:function(){return"Origin ".concat("undefined"!=typeof window?window.origin:"unknown"," not found on Allowlist - update configuration on cloud.reown.com")}},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:function(){return"There was an issue loading the embedded wallet. Please try again later."}},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:function(){return"There was an issue doing the request to the embedded wallet. Please try again later."}},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:function(){return"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};var Ib=function(e){var t=Z({level:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error"}),n=Q({opts:t}).logger;return n.error=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(o instanceof Error)return void e.apply(void 0,[o].concat(n))}e.apply(void 0,[void 0].concat(n))},n};function Nb(e,t){var n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",e),n.searchParams.set("projectId",t),n.toString()}var Ab=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Sb={extendRpcUrlWithProjectId:function(e,t){var n=!1;try{n="rpc.walletconnect.org"===new URL(e).host}catch(Rt){n=!1}if(n){var r=new URL(e);return r.searchParams.has("projectId")||r.searchParams.set("projectId",t),r.toString()}return e},isCaipNetwork:function(e){return"chainNamespace"in e&&"caipNetworkId"in e},getChainNamespace:function(e){return this.isCaipNetwork(e)?e.chainNamespace:yn.CHAIN.EVM},getCaipNetworkId:function(e){return this.isCaipNetwork(e)?e.caipNetworkId:"".concat(yn.CHAIN.EVM,":").concat(e.id)},getDefaultRpcUrl:function(e,t,n){var r,i=null===(r=e.rpcUrls)||void 0===r||null===(r=r.default)||void 0===r||null===(r=r.http)||void 0===r?void 0:r[0];return Ab.includes(t)?Nb(t,n):i||""},extendCaipNetwork:function(e,t){var n,r,i,a=t.customNetworkImageUrls,o=t.projectId,s=t.customRpcUrls,c=this.getChainNamespace(e),u=this.getCaipNetworkId(e),l=null===(n=e.rpcUrls.default.http)||void 0===n?void 0:n[0],d=this.getDefaultRpcUrl(e,u,o),f=(null==e||null===(r=e.rpcUrls)||void 0===r||null===(r=r.chainDefault)||void 0===r||null===(r=r.http)||void 0===r?void 0:r[0])||l,p=(null==s||null===(i=s[u])||void 0===i?void 0:i.map(function(e){return e.url}))||[],h=[].concat(P(p),[d]),v=P(p);return f&&!v.includes(f)&&v.push(f),D(D({},e),{},{chainNamespace:c,caipNetworkId:u,assets:{imageId:kb.NetworkImageIds[e.id],imageUrl:null==a?void 0:a[e.id]},rpcUrls:D(D({},e.rpcUrls),{},{default:{http:h},chainDefault:{http:v}})})},extendCaipNetworks:function(e,t){var n=t.customNetworkImageUrls,r=t.projectId,i=t.customRpcUrls;return e.map(function(e){return Sb.extendCaipNetwork(e,{customNetworkImageUrls:n,customRpcUrls:i,projectId:r})})},getViemTransport:function(e,t,n){var r,i=[];return null==n||n.forEach(function(e){i.push(M(e.url,e.config))}),Ab.includes(e.caipNetworkId)&&i.push(M(Nb(e.caipNetworkId,t),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),null==e||null===(r=e.rpcUrls)||void 0===r||null===(r=r.default)||void 0===r||null===(r=r.http)||void 0===r||r.forEach(function(e){i.push(M(e))}),_e(i)},extendWagmiTransports:function(e,t,n){if(Ab.includes(e.caipNetworkId)){var r=this.getDefaultRpcUrl(e,e.caipNetworkId,t);return _e([n,M(r)])}return n},getUnsupportedNetwork:function(e){return{id:e.split(":")[1],caipNetworkId:e,name:yn.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage:function(e){var t,n=Zn.getActiveCaipNetworkId(),r=li.getAllRequestedCaipNetworks(),i=Array.from((null===(t=li.state.chains)||void 0===t?void 0:t.keys())||[]),a=null==n?void 0:n.split(":")[0],o=!!a&&i.includes(a),s=null==r?void 0:r.find(function(e){return e.caipNetworkId===n});return o&&!s&&n?this.getUnsupportedNetwork(n):s||(e||(null==r?void 0:r[0]))}},Pb={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ob=nt({providers:D({},Pb),providerIds:D({},Pb)}),_b={state:Ob,subscribeKey:function(e,t){return ot(Ob,e,t)},subscribe:function(e){return rt(Ob,function(){e(Ob)})},subscribeProviders:function(e){return rt(Ob.providers,function(){return e(Ob.providers)})},setProvider:function(e,t){t&&(Ob.providers[e]=at(t))},getProvider:function(e){return Ob.providers[e]},setProviderId:function(e,t){t&&(Ob.providerIds[e]=t)},getProviderId:function(e){if(e)return Ob.providerIds[e]},reset:function(){Ob.providers=D({},Pb),Ob.providerIds=D({},Pb)},resetChain:function(e){Ob.providers[e]=void 0,Ob.providerIds[e]=void 0}},Tb=h("v",{VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}}),xb=h("W",{filterOutDuplicatesByRDNS:function(e){var t=ar.state.enableEIP6963?zr.state.connectors:[],n=Zn.getRecentWallets(),r=t.map(function(e){var t;return null===(t=e.info)||void 0===t?void 0:t.rdns}).filter(Boolean),i=n.map(function(e){return e.rdns}).filter(Boolean),a=r.concat(i);if(a.includes("io.metamask.mobile")&&Qn.isMobile()){var o=a.indexOf("io.metamask.mobile");a[o]="io.metamask"}return e.filter(function(e){return!a.includes(String(null==e?void 0:e.rdns))})},filterOutDuplicatesByIds:function(e){var t=zr.state.connectors.filter(function(e){return"ANNOUNCED"===e.type||"INJECTED"===e.type}),n=Zn.getRecentWallets(),r=t.map(function(e){return e.explorerId}),i=n.map(function(e){return e.id}),a=r.concat(i);return e.filter(function(e){return!a.includes(null==e?void 0:e.id)})},filterOutDuplicateWallets:function(e){var t=this.filterOutDuplicatesByRDNS(e);return this.filterOutDuplicatesByIds(t)},markWalletsAsInstalled:function(e){var t=zr.state.connectors,n=ar.state.featuredWalletIds,r=t.filter(function(e){return"ANNOUNCED"===e.type}).reduce(function(e,t){var n;return null!==(n=t.info)&&void 0!==n&&n.rdns?(e[t.info.rdns]=!0,e):e},{});return e.map(function(e){var t;return D(D({},e),{},{installed:Boolean(e.rdns)&&Boolean(r[null!==(t=e.rdns)&&void 0!==t?t:""])})}).sort(function(e,t){var r=Number(t.installed)-Number(e.installed);if(0!==r)return r;if(null!=n&&n.length){var i=n.indexOf(e.id),a=n.indexOf(t.id);if(-1!==i&&-1!==a)return i-a;if(-1!==i)return-1;if(-1!==a)return 1}return 0})},getConnectOrderMethod:function(e,t){var n,r=(null==e?void 0:e.connectMethodsOrder)||(null===(n=ar.state.features)||void 0===n?void 0:n.connectMethodsOrder),i=t||zr.state.connectors;if(r)return r;var a=Rb.getConnectorsByType(i,xr.state.recommended,xr.state.featured),o=a.injected,s=a.announced,c=o.filter(Rb.showConnector),u=s.filter(Rb.showConnector);return c.length||u.length?["wallet","email","social"]:Tb.DEFAULT_CONNECT_METHOD_ORDER},isExcluded:function(e){var t=Boolean(e.rdns)&&xr.state.excludedWallets.some(function(t){return t.rdns===e.rdns}),n=Boolean(e.name)&&xr.state.excludedWallets.some(function(t){return Eb(t.name,e.name)});return t||n}}),Rb=h("P",{getConnectorsByType:function(e,t,n){var r=ar.state.customWallets,i=Zn.getRecentWallets(),a=xb.filterOutDuplicateWallets(t),o=xb.filterOutDuplicateWallets(n),s=e.filter(function(e){return"MULTI_CHAIN"===e.type}),c=e.filter(function(e){return"ANNOUNCED"===e.type}),u=e.filter(function(e){return"INJECTED"===e.type});return{custom:r,recent:i,external:e.filter(function(e){return"EXTERNAL"===e.type}),multiChain:s,announced:c,injected:u,recommended:a,featured:o}},showConnector:function(e){var t,n=null===(t=e.info)||void 0===t?void 0:t.rdns,r=Boolean(n)&&xr.state.excludedWallets.some(function(e){return Boolean(e.rdns)&&e.rdns===n}),i=Boolean(e.name)&&xr.state.excludedWallets.some(function(t){return Eb(t.name,e.name)});if("INJECTED"===e.type){if("Browser Wallet"===e.name){if(!Qn.isMobile())return!1;if(Qn.isMobile()&&!n&&!Zr.checkInstalled())return!1}if(r||i)return!1}return"ANNOUNCED"!==e.type&&"EXTERNAL"!==e.type||!r&&!i},getIsConnectedWithWC:function(){return Array.from(li.state.chains.values()).some(function(e){return zr.getConnectorId(e.namespace)===yn.CONNECTOR_ID.WALLET_CONNECT})},getConnectorTypeOrder:function(e){var t,n,r=e.recommended,i=e.featured,a=e.custom,o=e.recent,s=e.announced,c=e.injected,u=e.multiChain,l=e.external,d=e.overriddenConnectors,f=void 0===d?null!==(t=null===(n=ar.state.features)||void 0===n?void 0:n.connectorTypeOrder)&&void 0!==t?t:[]:d,p=Rb.getIsConnectedWithWC(),h=[{type:"walletConnect",isEnabled:ar.state.enableWalletConnect&&!p},{type:"recent",isEnabled:o.length>0},{type:"injected",isEnabled:[].concat(P(c),P(s),P(u)).length>0},{type:"featured",isEnabled:i.length>0},{type:"custom",isEnabled:a&&a.length>0},{type:"external",isEnabled:l.length>0},{type:"recommended",isEnabled:r.length>0}].filter(function(e){return e.isEnabled}),v=new Set(h.map(function(e){return e.type})),g=f.filter(function(e){return v.has(e)}).map(function(e){return{type:e,isEnabled:!0}}),m=h.filter(function(e){var t=e.type;return!g.some(function(e){return e.type===t})});return Array.from(new Set([].concat(P(g),P(m)).map(function(e){return e.type})))}}),Ub=void 0,Db=void 0,jb=void 0;function Mb(e){Db&&jb&&("light"===e?(Db.removeAttribute("media"),jb.media="enabled"):(jb.removeAttribute("media"),Db.media="enabled"))}function Lb(r){return{core:pt(e||(e=f(["\n      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');\n      @keyframes w3m-shake {\n        0% {\n          transform: scale(1) rotate(0deg);\n        }\n        20% {\n          transform: scale(1) rotate(-1deg);\n        }\n        40% {\n          transform: scale(1) rotate(1.5deg);\n        }\n        60% {\n          transform: scale(1) rotate(-1.5deg);\n        }\n        80% {\n          transform: scale(1) rotate(1deg);\n        }\n        100% {\n          transform: scale(1) rotate(0deg);\n        }\n      }\n      @keyframes w3m-iframe-fade-out {\n        0% {\n          opacity: 1;\n        }\n        100% {\n          opacity: 0;\n        }\n      }\n      @keyframes w3m-iframe-zoom-in {\n        0% {\n          transform: translateY(50px);\n          opacity: 0;\n        }\n        100% {\n          transform: translateY(0px);\n          opacity: 1;\n        }\n      }\n      @keyframes w3m-iframe-zoom-in-mobile {\n        0% {\n          transform: scale(0.95);\n          opacity: 0;\n        }\n        100% {\n          transform: scale(1);\n          opacity: 1;\n        }\n      }\n      :root {\n        --w3m-modal-width: 360px;\n        --w3m-color-mix-strength: ",";\n        --w3m-font-family: ",";\n        --w3m-font-size-master: ",";\n        --w3m-border-radius-master: ",";\n        --w3m-z-index: ",";\n\n        --wui-font-family: var(--w3m-font-family);\n\n        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);\n        --wui-font-size-micro: var(--w3m-font-size-master);\n        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);\n        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);\n        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);\n        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);\n        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);\n        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);\n        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);\n        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);\n\n        --wui-border-radius-5xs: var(--w3m-border-radius-master);\n        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);\n        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);\n        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);\n        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);\n        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);\n        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);\n        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);\n        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);\n\n        --wui-font-weight-light: 400;\n        --wui-font-weight-regular: 500;\n        --wui-font-weight-medium: 600;\n        --wui-font-weight-bold: 700;\n\n        --wui-letter-spacing-2xl: -1.6px;\n        --wui-letter-spacing-medium-title: -0.96px;\n        --wui-letter-spacing-title-6: -0.88px;\n        --wui-letter-spacing-large: -0.8px;\n        --wui-letter-spacing-medium: -0.72px;\n        --wui-letter-spacing-paragraph: -0.64px;\n        --wui-letter-spacing-small: -0.56px;\n        --wui-letter-spacing-tiny: -0.48px;\n        --wui-letter-spacing-micro: -0.2px;\n        --wui-letter-spacing-mini: -0.16px;\n\n        --wui-spacing-0: 0px;\n        --wui-spacing-4xs: 2px;\n        --wui-spacing-3xs: 4px;\n        --wui-spacing-xxs: 6px;\n        --wui-spacing-2xs: 7px;\n        --wui-spacing-xs: 8px;\n        --wui-spacing-1xs: 10px;\n        --wui-spacing-s: 12px;\n        --wui-spacing-m: 14px;\n        --wui-spacing-l: 16px;\n        --wui-spacing-2l: 18px;\n        --wui-spacing-xl: 20px;\n        --wui-spacing-xxl: 24px;\n        --wui-spacing-2xl: 32px;\n        --wui-spacing-3xl: 40px;\n        --wui-spacing-4xl: 90px;\n        --wui-spacing-5xl: 95px;\n\n        --wui-icon-box-size-xxs: 14px;\n        --wui-icon-box-size-xs: 20px;\n        --wui-icon-box-size-sm: 24px;\n        --wui-icon-box-size-md: 32px;\n        --wui-icon-box-size-mdl: 36px;\n        --wui-icon-box-size-lg: 40px;\n        --wui-icon-box-size-2lg: 48px;\n        --wui-icon-box-size-xl: 64px;\n\n        --wui-icon-size-inherit: inherit;\n        --wui-icon-size-xxs: 10px;\n        --wui-icon-size-xs: 12px;\n        --wui-icon-size-sm: 14px;\n        --wui-icon-size-md: 16px;\n        --wui-icon-size-mdl: 18px;\n        --wui-icon-size-lg: 20px;\n        --wui-icon-size-xl: 24px;\n        --wui-icon-size-xxl: 28px;\n\n        --wui-wallet-image-size-inherit: inherit;\n        --wui-wallet-image-size-sm: 40px;\n        --wui-wallet-image-size-md: 56px;\n        --wui-wallet-image-size-lg: 80px;\n\n        --wui-visual-size-size-inherit: inherit;\n        --wui-visual-size-sm: 40px;\n        --wui-visual-size-md: 55px;\n        --wui-visual-size-lg: 80px;\n\n        --wui-box-size-md: 100px;\n        --wui-box-size-lg: 120px;\n\n        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);\n        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);\n\n        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);\n        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);\n        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);\n\n        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);\n\n        --wui-duration-lg: 200ms;\n        --wui-duration-md: 125ms;\n        --wui-duration-sm: 75ms;\n\n        --wui-path-network-sm: path(\n          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'\n        );\n\n        --wui-path-network-md: path(\n          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'\n        );\n\n        --wui-path-network-lg: path(\n          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'\n        );\n\n        --wui-width-network-sm: 36px;\n        --wui-width-network-md: 48px;\n        --wui-width-network-lg: 86px;\n\n        --wui-height-network-sm: 40px;\n        --wui-height-network-md: 54px;\n        --wui-height-network-lg: 96px;\n\n        --wui-icon-size-network-xs: 12px;\n        --wui-icon-size-network-sm: 16px;\n        --wui-icon-size-network-md: 24px;\n        --wui-icon-size-network-lg: 42px;\n\n        --wui-color-inherit: inherit;\n\n        --wui-color-inverse-100: #fff;\n        --wui-color-inverse-000: #000;\n\n        --wui-cover: rgba(20, 20, 20, 0.8);\n\n        --wui-color-modal-bg: var(--wui-color-modal-bg-base);\n\n        --wui-color-accent-100: var(--wui-color-accent-base-100);\n        --wui-color-accent-090: var(--wui-color-accent-base-090);\n        --wui-color-accent-080: var(--wui-color-accent-base-080);\n\n        --wui-color-success-100: var(--wui-color-success-base-100);\n        --wui-color-success-125: var(--wui-color-success-base-125);\n\n        --wui-color-warning-100: var(--wui-color-warning-base-100);\n\n        --wui-color-error-100: var(--wui-color-error-base-100);\n        --wui-color-error-125: var(--wui-color-error-base-125);\n\n        --wui-color-blue-100: var(--wui-color-blue-base-100);\n        --wui-color-blue-90: var(--wui-color-blue-base-90);\n\n        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);\n        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);\n        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);\n        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);\n\n        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);\n\n        --wui-avatar-border: var(--wui-avatar-border-base);\n\n        --wui-thumbnail-border: var(--wui-thumbnail-border-base);\n\n        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);\n\n        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);\n      }\n\n      @supports (background: color-mix(in srgb, white 50%, black)) {\n        :root {\n          --wui-color-modal-bg: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-modal-bg-base)\n          );\n\n          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);\n\n          --wui-color-accent-100: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 100%,\n            transparent\n          );\n          --wui-color-accent-090: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 90%,\n            transparent\n          );\n          --wui-color-accent-080: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 80%,\n            transparent\n          );\n          --wui-color-accent-glass-090: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 90%,\n            transparent\n          );\n          --wui-color-accent-glass-080: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 80%,\n            transparent\n          );\n          --wui-color-accent-glass-020: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 20%,\n            transparent\n          );\n          --wui-color-accent-glass-015: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 15%,\n            transparent\n          );\n          --wui-color-accent-glass-010: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 10%,\n            transparent\n          );\n          --wui-color-accent-glass-005: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 5%,\n            transparent\n          );\n          --wui-color-accent-002: color-mix(\n            in srgb,\n            var(--wui-color-accent-base-100) 2%,\n            transparent\n          );\n\n          --wui-color-fg-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-100)\n          );\n          --wui-color-fg-125: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-125)\n          );\n          --wui-color-fg-150: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-150)\n          );\n          --wui-color-fg-175: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-175)\n          );\n          --wui-color-fg-200: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-200)\n          );\n          --wui-color-fg-225: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-225)\n          );\n          --wui-color-fg-250: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-250)\n          );\n          --wui-color-fg-275: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-275)\n          );\n          --wui-color-fg-300: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-300)\n          );\n          --wui-color-fg-325: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-325)\n          );\n          --wui-color-fg-350: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-fg-350)\n          );\n\n          --wui-color-bg-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-100)\n          );\n          --wui-color-bg-125: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-125)\n          );\n          --wui-color-bg-150: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-150)\n          );\n          --wui-color-bg-175: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-175)\n          );\n          --wui-color-bg-200: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-200)\n          );\n          --wui-color-bg-225: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-225)\n          );\n          --wui-color-bg-250: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-250)\n          );\n          --wui-color-bg-275: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-275)\n          );\n          --wui-color-bg-300: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-300)\n          );\n          --wui-color-bg-325: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-325)\n          );\n          --wui-color-bg-350: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-bg-350)\n          );\n\n          --wui-color-success-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-success-base-100)\n          );\n          --wui-color-success-125: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-success-base-125)\n          );\n\n          --wui-color-warning-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-warning-base-100)\n          );\n\n          --wui-color-error-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-error-base-100)\n          );\n          --wui-color-blue-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-blue-base-100)\n          );\n          --wui-color-blue-90: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-blue-base-90)\n          );\n          --wui-color-error-125: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-color-error-base-125)\n          );\n\n          --wui-icon-box-bg-error-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-icon-box-bg-error-base-100)\n          );\n          --wui-icon-box-bg-accent-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-icon-box-bg-blue-base-100)\n          );\n          --wui-icon-box-bg-success-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-icon-box-bg-success-base-100)\n          );\n          --wui-icon-box-bg-inverse-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-icon-box-bg-inverse-base-100)\n          );\n\n          --wui-all-wallets-bg-100: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-all-wallets-bg-100)\n          );\n\n          --wui-avatar-border: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-avatar-border-base)\n          );\n\n          --wui-thumbnail-border: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-thumbnail-border-base)\n          );\n\n          --wui-wallet-button-bg: color-mix(\n            in srgb,\n            var(--w3m-color-mix) var(--w3m-color-mix-strength),\n            var(--wui-wallet-button-bg-base)\n          );\n        }\n      }\n    "])),ft(null!=r&&r["--w3m-color-mix-strength"]?"".concat(r["--w3m-color-mix-strength"],"%"):"0%"),ft((null==r?void 0:r["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;"),ft((null==r?void 0:r["--w3m-font-size-master"])||"10px"),ft((null==r?void 0:r["--w3m-border-radius-master"])||"4px"),ft((null==r?void 0:r["--w3m-z-index"])||999)),light:pt(t||(t=f(["\n      :root {\n        --w3m-color-mix: ",";\n        --w3m-accent: ",";\n        --w3m-default: #fff;\n\n        --wui-color-modal-bg-base: ",";\n        --wui-color-accent-base-100: var(--w3m-accent);\n\n        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);\n        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);\n        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);\n        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);\n\n        --wui-color-fg-100: #e4e7e7;\n        --wui-color-fg-125: #d0d5d5;\n        --wui-color-fg-150: #a8b1b1;\n        --wui-color-fg-175: #a8b0b0;\n        --wui-color-fg-200: #949e9e;\n        --wui-color-fg-225: #868f8f;\n        --wui-color-fg-250: #788080;\n        --wui-color-fg-275: #788181;\n        --wui-color-fg-300: #6e7777;\n        --wui-color-fg-325: #9a9a9a;\n        --wui-color-fg-350: #363636;\n\n        --wui-color-bg-100: #141414;\n        --wui-color-bg-125: #191a1a;\n        --wui-color-bg-150: #1e1f1f;\n        --wui-color-bg-175: #222525;\n        --wui-color-bg-200: #272a2a;\n        --wui-color-bg-225: #2c3030;\n        --wui-color-bg-250: #313535;\n        --wui-color-bg-275: #363b3b;\n        --wui-color-bg-300: #3b4040;\n        --wui-color-bg-325: #252525;\n        --wui-color-bg-350: #ffffff;\n\n        --wui-color-success-base-100: #26d962;\n        --wui-color-success-base-125: #30a46b;\n\n        --wui-color-warning-base-100: #f3a13f;\n\n        --wui-color-error-base-100: #f25a67;\n        --wui-color-error-base-125: #df4a34;\n\n        --wui-color-blue-base-100: rgba(102, 125, 255, 1);\n        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);\n\n        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);\n        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);\n        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);\n        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);\n        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);\n        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);\n        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);\n        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);\n        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);\n        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);\n\n        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);\n\n        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);\n\n        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);\n        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);\n        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);\n        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);\n        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);\n        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);\n        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);\n        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);\n        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);\n        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);\n\n        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);\n\n        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);\n        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);\n        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);\n        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);\n        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);\n        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);\n        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);\n        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);\n        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);\n        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);\n        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);\n\n        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);\n\n        --wui-icon-box-bg-error-base-100: #3c2426;\n        --wui-icon-box-bg-blue-base-100: #20303f;\n        --wui-icon-box-bg-success-base-100: #1f3a28;\n        --wui-icon-box-bg-inverse-base-100: #243240;\n\n        --wui-all-wallets-bg-100: #222b35;\n\n        --wui-avatar-border-base: #252525;\n\n        --wui-thumbnail-border-base: #252525;\n\n        --wui-wallet-button-bg-base: var(--wui-color-bg-125);\n\n        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);\n      }\n    "])),ft((null==r?void 0:r["--w3m-color-mix"])||"#fff"),ft(Jn(r,"dark")["--w3m-accent"]),ft(Jn(r,"dark")["--w3m-background"])),dark:pt(n||(n=f(["\n      :root {\n        --w3m-color-mix: ",";\n        --w3m-accent: ",";\n        --w3m-default: #000;\n\n        --wui-color-modal-bg-base: ",";\n        --wui-color-accent-base-100: var(--w3m-accent);\n\n        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);\n        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);\n        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);\n\n        --wui-color-fg-100: #141414;\n        --wui-color-fg-125: #2d3131;\n        --wui-color-fg-150: #474d4d;\n        --wui-color-fg-175: #636d6d;\n        --wui-color-fg-200: #798686;\n        --wui-color-fg-225: #828f8f;\n        --wui-color-fg-250: #8b9797;\n        --wui-color-fg-275: #95a0a0;\n        --wui-color-fg-300: #9ea9a9;\n        --wui-color-fg-325: #9a9a9a;\n        --wui-color-fg-350: #d0d0d0;\n\n        --wui-color-bg-100: #ffffff;\n        --wui-color-bg-125: #f5fafa;\n        --wui-color-bg-150: #f3f8f8;\n        --wui-color-bg-175: #eef4f4;\n        --wui-color-bg-200: #eaf1f1;\n        --wui-color-bg-225: #e5eded;\n        --wui-color-bg-250: #e1e9e9;\n        --wui-color-bg-275: #dce7e7;\n        --wui-color-bg-300: #d8e3e3;\n        --wui-color-bg-325: #f3f3f3;\n        --wui-color-bg-350: #202020;\n\n        --wui-color-success-base-100: #26b562;\n        --wui-color-success-base-125: #30a46b;\n\n        --wui-color-warning-base-100: #f3a13f;\n\n        --wui-color-error-base-100: #f05142;\n        --wui-color-error-base-125: #df4a34;\n\n        --wui-color-blue-base-100: rgba(102, 125, 255, 1);\n        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);\n\n        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);\n        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);\n        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);\n        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);\n        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);\n        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);\n        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);\n        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);\n        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);\n        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);\n\n        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);\n\n        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);\n\n        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);\n        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);\n        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);\n        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);\n        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);\n        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);\n        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);\n        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);\n        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);\n        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);\n\n        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);\n\n        --wui-icon-box-bg-error-base-100: #f4dfdd;\n        --wui-icon-box-bg-blue-base-100: #d9ecfb;\n        --wui-icon-box-bg-success-base-100: #daf0e4;\n        --wui-icon-box-bg-inverse-base-100: #dcecfc;\n\n        --wui-all-wallets-bg-100: #e8f1fa;\n\n        --wui-avatar-border-base: #f3f4f4;\n\n        --wui-thumbnail-border-base: #eaefef;\n\n        --wui-wallet-button-bg-base: var(--wui-color-bg-125);\n\n        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);\n        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);\n        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);\n        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);\n        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);\n        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);\n        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);\n        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);\n        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);\n        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);\n        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);\n\n        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);\n\n        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);\n      }\n    "])),ft((null==r?void 0:r["--w3m-color-mix"])||"#000"),ft(Jn(r,"light")["--w3m-accent"]),ft(Jn(r,"light")["--w3m-background"]))}}h("l",pt(r||(r=f(["\n  *,\n  *::after,\n  *::before,\n  :host {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-style: normal;\n    text-rendering: optimizeSpeed;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-tap-highlight-color: transparent;\n    font-family: var(--wui-font-family);\n    backface-visibility: hidden;\n  }\n"])))),h("n",pt(i||(i=f(["\n  button,\n  a {\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: relative;\n    transition:\n      color var(--wui-duration-lg) var(--wui-ease-out-power-1),\n      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),\n      border var(--wui-duration-lg) var(--wui-ease-out-power-1),\n      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),\n      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);\n    will-change: background-color, color, border, box-shadow, border-radius;\n    outline: none;\n    border: none;\n    column-gap: var(--wui-spacing-3xs);\n    background-color: transparent;\n    text-decoration: none;\n  }\n\n  wui-flex {\n    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);\n    will-change: border-radius;\n  }\n\n  button:disabled > wui-wallet-image,\n  button:disabled > wui-all-wallets-image,\n  button:disabled > wui-network-image,\n  button:disabled > wui-image,\n  button:disabled > wui-transaction-visual,\n  button:disabled > wui-logo {\n    filter: grayscale(1);\n  }\n\n  @media (hover: hover) and (pointer: fine) {\n    button:hover:enabled {\n      background-color: var(--wui-color-gray-glass-005);\n    }\n\n    button:active:enabled {\n      background-color: var(--wui-color-gray-glass-010);\n    }\n  }\n\n  button:disabled > wui-icon-box {\n    opacity: 0.5;\n  }\n\n  input {\n    border: none;\n    outline: none;\n    appearance: none;\n  }\n"])))),h("o",pt(a||(a=f(["\n  .wui-color-inherit {\n    color: var(--wui-color-inherit);\n  }\n\n  .wui-color-accent-100 {\n    color: var(--wui-color-accent-100);\n  }\n\n  .wui-color-error-100 {\n    color: var(--wui-color-error-100);\n  }\n\n  .wui-color-blue-100 {\n    color: var(--wui-color-blue-100);\n  }\n\n  .wui-color-blue-90 {\n    color: var(--wui-color-blue-90);\n  }\n\n  .wui-color-error-125 {\n    color: var(--wui-color-error-125);\n  }\n\n  .wui-color-success-100 {\n    color: var(--wui-color-success-100);\n  }\n\n  .wui-color-success-125 {\n    color: var(--wui-color-success-125);\n  }\n\n  .wui-color-inverse-100 {\n    color: var(--wui-color-inverse-100);\n  }\n\n  .wui-color-inverse-000 {\n    color: var(--wui-color-inverse-000);\n  }\n\n  .wui-color-fg-100 {\n    color: var(--wui-color-fg-100);\n  }\n\n  .wui-color-fg-200 {\n    color: var(--wui-color-fg-200);\n  }\n\n  .wui-color-fg-300 {\n    color: var(--wui-color-fg-300);\n  }\n\n  .wui-color-fg-325 {\n    color: var(--wui-color-fg-325);\n  }\n\n  .wui-color-fg-350 {\n    color: var(--wui-color-fg-350);\n  }\n\n  .wui-bg-color-inherit {\n    background-color: var(--wui-color-inherit);\n  }\n\n  .wui-bg-color-blue-100 {\n    background-color: var(--wui-color-accent-100);\n  }\n\n  .wui-bg-color-error-100 {\n    background-color: var(--wui-color-error-100);\n  }\n\n  .wui-bg-color-error-125 {\n    background-color: var(--wui-color-error-125);\n  }\n\n  .wui-bg-color-success-100 {\n    background-color: var(--wui-color-success-100);\n  }\n\n  .wui-bg-color-success-125 {\n    background-color: var(--wui-color-success-100);\n  }\n\n  .wui-bg-color-inverse-100 {\n    background-color: var(--wui-color-inverse-100);\n  }\n\n  .wui-bg-color-inverse-000 {\n    background-color: var(--wui-color-inverse-000);\n  }\n\n  .wui-bg-color-fg-100 {\n    background-color: var(--wui-color-fg-100);\n  }\n\n  .wui-bg-color-fg-200 {\n    background-color: var(--wui-color-fg-200);\n  }\n\n  .wui-bg-color-fg-300 {\n    background-color: var(--wui-color-fg-300);\n  }\n\n  .wui-color-fg-325 {\n    background-color: var(--wui-color-fg-325);\n  }\n\n  .wui-color-fg-350 {\n    background-color: var(--wui-color-fg-350);\n  }\n"]))));var qb=4902,Bb=5e3,zb=32603,Fb=["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"];function Wb(e){return D({formatters:void 0,fees:void 0,serializers:void 0},e)}var Hb=Wb({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),Vb=Wb({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Wb({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"}),Wb({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),Wb({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});var Kb,$b={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Gb={getMethodsByChainNamespace:function(e){return $b[e]||[]},createDefaultNamespace:function(e){return{methods:this.getMethodsByChainNamespace(e),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides:function(e,t){var n=this;if(!t)return D({},e);var r=D({},e),i=new Set;if(t.methods&&Object.keys(t.methods).forEach(function(e){return i.add(e)}),t.chains&&Object.keys(t.chains).forEach(function(e){return i.add(e)}),t.events&&Object.keys(t.events).forEach(function(e){return i.add(e)}),t.rpcMap&&Object.keys(t.rpcMap).forEach(function(e){var t=S(e.split(":"),1)[0];t&&i.add(t)}),i.forEach(function(e){r[e]||(r[e]=n.createDefaultNamespace(e))}),t.methods&&Object.entries(t.methods).forEach(function(e){var t=S(e,2),n=t[0],i=t[1];r[n]&&(r[n].methods=i)}),t.chains&&Object.entries(t.chains).forEach(function(e){var t=S(e,2),n=t[0],i=t[1];r[n]&&(r[n].chains=i)}),t.events&&Object.entries(t.events).forEach(function(e){var t=S(e,2),n=t[0],i=t[1];r[n]&&(r[n].events=i)}),t.rpcMap){var a=new Set;Object.entries(t.rpcMap).forEach(function(e){var t=S(e,2),n=t[0],i=t[1],o=S(n.split(":"),2),s=o[0],c=o[1];s&&c&&r[s]&&(r[s].rpcMap||(r[s].rpcMap={}),a.has(s)||(r[s].rpcMap={},a.add(s)),r[s].rpcMap[c]=i)})}return r},createNamespaces:function(e,t){var n=this,r=e.reduce(function(e,t){var r=t.id,i=t.chainNamespace,a=t.rpcUrls.default.http[0];e[i]||(e[i]=n.createDefaultNamespace(i));var o="".concat(i,":").concat(r),s=e[i];switch(s.chains.push(o),o){case Hb.caipNetworkId:s.chains.push(Hb.deprecatedCaipNetworkId);break;case Vb.caipNetworkId:s.chains.push(Vb.deprecatedCaipNetworkId)}return null!=s&&s.rpcMap&&a&&(s.rpcMap[r]=a),e},{});return this.applyNamespaceOverrides(r,t)},resolveReownName:(Kb=q(x().m(function e(t){var n,r,i;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Pi.resolveName(t);case 1:return r=e.v,i=Object.values(null==r?void 0:r.addresses)||[],e.a(2,(null===(n=i[0])||void 0===n?void 0:n.address)||!1)}},e)})),function(e){return Kb.apply(this,arguments)}),getChainsFromNamespaces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(e).flatMap(function(e){var t=e.chains||[],n=e.accounts.map(function(e){var t=S(e.split(":"),2),n=t[0],r=t[1];return"".concat(n,":").concat(r)});return Array.from(new Set([].concat(P(t),P(n))))})},isSessionEventData:function(e){return"object"===T(e)&&null!==e&&"id"in e&&"topic"in e&&"params"in e&&"object"===T(e.params)&&null!==e.params&&"chainId"in e.params&&"event"in e.params&&"object"===T(e.params.event)&&null!==e.params.event},isOriginAllowed:function(e,t,n){for(var r=0,i=[].concat(P(t),P(n));r<i.length;r++){var a=i[r];if(a.includes("*")){var o=a.replace(/[\$\(-\+\.\?\[-\^\{-\}]/g,"\\$&"),s="^".concat(o.replace(/\\\*/g,".*"),"$");if(new RegExp(s,"u").test(e))return!0}else try{if(new URL(a).origin===e)return!0}catch(Rt){if(a===e)return!0}}return!1}},Jb=function(){return A(function e(t){var n=t.provider,r=t.namespace;I(this,e),this.id=yn.CONNECTOR_ID.WALLET_CONNECT,this.name=kb.ConnectorNamesMap[yn.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=kb.ConnectorImageIds[yn.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=li.getCaipNetworks.bind(li),this.caipNetworks=this.getCaipNetworks(),this.provider=n,this.chain=r},[{key:"chains",get:function(){return this.getCaipNetworks()}},{key:"connectWalletConnect",value:(n=q(x().m(function e(){var t,n,r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.authenticate();case 1:if(e.v){e.n=2;break}return t=this.getCaipNetworks(),n=ar.state.universalProviderConfigOverride,r=Gb.createNamespaces(t,n),e.n=2,this.provider.connect({optionalNamespaces:r});case 2:return e.n=3,this.provider.client.core.crypto.getClientId();case 3:return i=e.v,a=this.provider.session,e.a(2,{clientId:i,session:a})}},e,this)})),function(){return n.apply(this,arguments)})},{key:"disconnect",value:(t=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.provider.disconnect();case 1:return e.a(2)}},e,this)})),function(){return t.apply(this,arguments)})},{key:"authenticate",value:(e=q(x().m(function e(){var t;return x().w(function(e){for(;;)if(0===e.n)return t=this.chains.map(function(e){return e.caipNetworkId}),e.a(2,vb.universalProviderAuthenticate({universalProvider:this.provider,chains:t,methods:Yb}))},e,this)})),function(){return e.apply(this,arguments)})}]);var e,t,n}(),Yb=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],Xb=function(){return A(function e(t){I(this,e),this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=function(e){return li.getCaipNetworks(e)},t&&this.construct(t)},[{key:"construct",value:function(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}},{key:"connectors",get:function(){return this.availableConnectors}},{key:"networks",get:function(){return this.getCaipNetworks(this.namespace)}},{key:"setAuthProvider",value:function(e){this.addConnector({id:yn.CONNECTOR_ID.AUTH,type:"AUTH",name:yn.CONNECTOR_NAMES.AUTH,provider:e,imageId:kb.ConnectorImageIds[yn.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}},{key:"addConnector",value:function(){for(var e=new Set,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.availableConnectors=[].concat(n,P(this.availableConnectors)).filter(function(t){return!e.has(t.id)&&(e.add(t.id),!0)}),this.emit("connectors",this.availableConnectors)}},{key:"setStatus",value:function(e,t){mi.setStatus(e,t)}},{key:"on",value:function(e,t){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),null===(n=this.eventListeners.get(e))||void 0===n||n.add(t)}},{key:"off",value:function(e,t){var n=this.eventListeners.get(e);n&&n.delete(t)}},{key:"removeAllEventListeners",value:function(){this.eventListeners.forEach(function(e){e.clear()})}},{key:"emit",value:function(e,t){var n=this.eventListeners.get(e);n&&n.forEach(function(e){return e(t)})}},{key:"connectWalletConnect",value:(t=q(x().m(function e(t){var n,r;return x().w(function(e){for(;;)switch(e.n){case 0:return n=this.getWalletConnectConnector(),e.n=1,n.connectWalletConnect();case 1:return r=e.v,e.a(2,{clientId:r.clientId})}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"switchNetwork",value:(e=q(x().m(function e(t){var n,r,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:if(n=t.caipNetwork,r=t.providerType,t.provider){e.n=1;break}return e.a(2);case 1:if(i="provider"in t.provider?t.provider.provider:t.provider,"WALLET_CONNECT"!==r){e.n=2;break}return i.setDefaultChain(n.caipNetworkId),e.a(2);case 2:if(!i||"AUTH"!==r){e.n=5;break}return o=i,s=null===(a=mi.state.preferredAccountTypes)||void 0===a?void 0:a[n.chainNamespace],e.n=3,o.switchNetwork(n.caipNetworkId);case 3:return e.n=4,o.getUser({chainId:n.caipNetworkId,preferredAccountType:s});case 4:c=e.v,this.emit("switchNetwork",c);case 5:return e.a(2)}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"getWalletConnectConnector",value:function(){var e=this.connectors.find(function(e){return e instanceof Jb});if(!e)throw new Error("WalletConnectConnector not found");return e}}]);var e,t}(),Zb=function(e){function t(){return I(this,t),v(this,t,arguments)}return w(t,e),A(t,[{key:"setUniversalProvider",value:function(e){this.addConnector(new Jb({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}},{key:"connect",value:(g=q(x().m(function e(t){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(t.chainId),provider:this.provider,address:""}))},e,this)})),function(e){return g.apply(this,arguments)})},{key:"disconnect",value:(h=q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=this.getWalletConnectConnector(),e.n=1,t.disconnect();case 1:e.n=3;break;case 2:e.p=2,n=e.v,console.warn("UniversalAdapter:disconnect - error",n);case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return h.apply(this,arguments)})},{key:"getAccounts",value:(p=q(x().m(function e(t){var n,r,i,a;return x().w(function(e){for(;;)if(0===e.n)return r=t.namespace,i=this.provider,a=(null==i||null===(n=i.session)||void 0===n||null===(n=n.namespaces)||void 0===n||null===(n=n[r])||void 0===n||null===(n=n.accounts)||void 0===n?void 0:n.map(function(e){return S(e.split(":"),3)[2]}).filter(function(e,t,n){return n.indexOf(e)===t}))||[],e.a(2,Promise.resolve({accounts:a.map(function(e){return Qn.createAccount(r,e,"bip122"===r?"payment":"eoa")})}))},e,this)})),function(e){return p.apply(this,arguments)})},{key:"syncConnectors",value:(f=q(x().m(function e(){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve())},e)})),function(){return f.apply(this,arguments)})},{key:"getBalance",value:(d=q(x().m(function e(t){var n,r,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:if(t.caipNetwork&&Xn.BALANCE_SUPPORTED_CHAINS.includes(null===(n=t.caipNetwork)||void 0===n?void 0:n.chainNamespace)&&(null===(r=t.caipNetwork)||void 0===r||!r.testnet)){e.n=1;break}return e.a(2,{balance:"0.00",symbol:(null===(o=t.caipNetwork)||void 0===o?void 0:o.nativeCurrency.symbol)||""});case 1:if(!mi.state.balanceLoading||t.chainId!==(null===(i=li.state.activeCaipNetwork)||void 0===i?void 0:i.id)){e.n=2;break}return e.a(2,{balance:mi.state.balance||"0.00",symbol:mi.state.balanceSymbol||""});case 2:return e.n=3,mi.fetchTokenBalance();case 3:return s=e.v,c=s.find(function(e){var n,r;return e.chainId==="".concat(null===(n=t.caipNetwork)||void 0===n?void 0:n.chainNamespace,":").concat(t.chainId)&&e.symbol===(null===(r=t.caipNetwork)||void 0===r?void 0:r.nativeCurrency.symbol)}),e.a(2,{balance:(null==c?void 0:c.quantity.numeric)||"0.00",symbol:(null==c?void 0:c.symbol)||(null===(a=t.caipNetwork)||void 0===a?void 0:a.nativeCurrency.symbol)||""})}},e)})),function(e){return d.apply(this,arguments)})},{key:"signMessage",value:(l=q(x().m(function e(t){var n,r,i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.n){case 0:if(r=t.provider,i=t.message,a=t.address,r){e.n=1;break}throw new Error("UniversalAdapter:signMessage - provider is undefined");case 1:if(o="",(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.chainNamespace)!==yn.CHAIN.SOLANA){e.n=3;break}return e.n=2,r.request({method:"solana_signMessage",params:{message:fo.encode((new TextEncoder).encode(i)),pubkey:a}},null===(s=li.state.activeCaipNetwork)||void 0===s?void 0:s.caipNetworkId);case 2:c=e.v,o=c.signature,e.n=5;break;case 3:return e.n=4,r.request({method:"personal_sign",params:[i,a]},null===(u=li.state.activeCaipNetwork)||void 0===u?void 0:u.caipNetworkId);case 4:o=e.v;case 5:return e.a(2,{signature:o})}},e)})),function(e){return l.apply(this,arguments)})},{key:"estimateGas",value:(u=q(x().m(function e(){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve({gas:BigInt(0)}))},e)})),function(){return u.apply(this,arguments)})},{key:"sendTransaction",value:(c=q(x().m(function e(){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve({hash:""}))},e)})),function(){return c.apply(this,arguments)})},{key:"walletGetAssets",value:function(e){return Promise.resolve({})}},{key:"writeContract",value:(s=q(x().m(function e(){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve({hash:""}))},e)})),function(){return s.apply(this,arguments)})},{key:"parseUnits",value:function(){return 0n}},{key:"formatUnits",value:function(){return"0"}},{key:"getCapabilities",value:(o=q(x().m(function e(){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve({}))},e)})),function(){return o.apply(this,arguments)})},{key:"grantPermissions",value:(a=q(x().m(function e(){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve({}))},e)})),function(){return a.apply(this,arguments)})},{key:"revokePermissions",value:(i=q(x().m(function e(){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve("0x"))},e)})),function(){return i.apply(this,arguments)})},{key:"syncConnection",value:(r=q(x().m(function e(){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""}))},e,this)})),function(){return r.apply(this,arguments)})},{key:"switchNetwork",value:(n=q(x().m(function e(t){var n,r,i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=t.caipNetwork,r=this.getWalletConnectConnector(),n.chainNamespace!==yn.CHAIN.EVM){e.n=7;break}return e.p=1,e.n=2,null===(i=r.provider)||void 0===i?void 0:i.request({method:"wallet_switchEthereumChain",params:[{chainId:L(n.id)}]});case 2:e.n=7;break;case 3:if(e.p=3,(u=e.v).code!==qb&&u.code!==zb&&u.code!==Bb&&(null==u||null===(a=u.data)||void 0===a||null===(a=a.originalError)||void 0===a?void 0:a.code)!==qb){e.n=7;break}return e.p=4,e.n=5,null===(o=r.provider)||void 0===o?void 0:o.request({method:"wallet_addEthereumChain",params:[{chainId:L(n.id),rpcUrls:[null==n||null===(s=n.rpcUrls.chainDefault)||void 0===s?void 0:s.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[null===(c=n.blockExplorers)||void 0===c?void 0:c.default.url]}]});case 5:e.n=7;break;case 6:throw e.p=6,e.v,new Error("Chain is not supported");case 7:r.provider.setDefaultChain(n.caipNetworkId);case 8:return e.a(2)}},e,this,[[4,6],[1,3]])})),function(e){return n.apply(this,arguments)})},{key:"getWalletConnectProvider",value:function(){var e=this.connectors.find(function(e){return"WALLET_CONNECT"===e.type});return null==e?void 0:e.provider}}]);var n,r,i,a,o,s,c,u,l,d,f,p,h,g}(Xb),Qb=["email","socials","swaps","onramp","activity","reownBranding"],ek={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){if(null==e||!e.config)return!1;var t=e.config;return Boolean(e.isEnabled)&&t.includes("email")},processFallback:function(e){return void 0===e?Xn.DEFAULT_REMOTE_FEATURES.email:Boolean(e)}},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){if(null==e||!e.config)return!1;var t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t.filter(function(e){return"email"!==e})},processFallback:function(e){return void 0===e?Xn.DEFAULT_REMOTE_FEATURES.socials:"boolean"==typeof e?!!e&&Xn.DEFAULT_REMOTE_FEATURES.socials:e}},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){if(null==e||!e.config)return!1;var t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t},processFallback:function(e){return void 0===e?Xn.DEFAULT_REMOTE_FEATURES.swaps:"boolean"==typeof e?!!e&&Xn.DEFAULT_REMOTE_FEATURES.swaps:e}},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){if(null==e||!e.config)return!1;var t=e.config;return!!(Boolean(e.isEnabled)&&t.length>0)&&t},processFallback:function(e){return void 0===e?Xn.DEFAULT_REMOTE_FEATURES.onramp:"boolean"==typeof e?!!e&&Xn.DEFAULT_REMOTE_FEATURES.onramp:e}},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:function(e){return Boolean(e.isEnabled)},processFallback:function(e){return void 0===e?Xn.DEFAULT_REMOTE_FEATURES.activity:Boolean(e)}},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:function(e){return Boolean(e.isEnabled)},processFallback:function(e){return void 0===e?Xn.DEFAULT_REMOTE_FEATURES.reownBranding:Boolean(e)}}},tk={localSettingsOverridden:new Set,getApiConfig:function(e,t){return null==t?void 0:t.find(function(t){return t.id===e})},addWarning:function(e,t){if(void 0!==e){var n=ek[t],r=n.isLegacy?'"features.'.concat(n.localFeatureName,'" (now "').concat(t,'")'):'"features.'.concat(t,'"');this.localSettingsOverridden.add(r)}},processFeature:function(e,t,n,r,i){var a=ek[e],o=t[a.localFeatureName];if(i&&!a.isAvailableOnBasic)return!1;if(r){var s=this.getApiConfig(a.apiFeatureName,n);return null===(null==s?void 0:s.config)?this.processFallbackFeature(e,o):!(null==s||!s.config)&&(void 0!==o&&this.addWarning(o,e),this.processApiFeature(e,s))}return this.processFallbackFeature(e,o)},processApiFeature:function(e,t){return ek[e].processApi(t)},processFallbackFeature:function(e,t){return ek[e].processFallback(t)},fetchRemoteFeatures:function(e){var t=this;return q(x().m(function n(){var r,i,a,o,s,c,u,l,d,f,p,h,v;return x().w(function(n){for(;;)switch(n.p=n.n){case 0:return i=null!==(r=e.basic)&&void 0!==r&&r,a=e.features||{},t.localSettingsOverridden.clear(),o=null,s=!1,n.p=1,n.n=2,xr.fetchProjectConfig();case 2:o=n.v,s=null!=o,n.n=4;break;case 3:n.p=3,h=n.v,console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",h);case 4:for(c=s&&!i?Xn.DEFAULT_REMOTE_FEATURES:Xn.DEFAULT_REMOTE_FEATURES_DISABLED,n.p=5,u=0,l=Qb;u<l.length;u++)d=l[u],f=t.processFeature(d,a,o,s,i),Object.assign(c,j({},d,f));n.n=7;break;case 6:return n.p=6,v=n.v,console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",v),n.a(2,Xn.DEFAULT_REMOTE_FEATURES);case 7:return s&&t.localSettingsOverridden.size>0&&(p="Your local configuration for ".concat(Array.from(t.localSettingsOverridden).join(", ")," was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com."),Cr.open({shortMessage:"Local configuration ignored",longMessage:"[Reown Config Notice] ".concat(p)},"warning")),n.a(2,c)}},n,null,[[5,6],[1,3]])}))()}},nk=function(){return A(function e(t){var n=this;I(this,e),this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=function(e,t){if(e){var r,i,a,o=null===(r=li.getNetworkData(e))||void 0===r||null===(r=r.requestedCaipNetworks)||void 0===r?void 0:r.find(function(e){return e.id===t});if(o)return o;var s=null===(i=li.getNetworkData(e))||void 0===i?void 0:i.caipNetwork;return s||(null===(a=li.getRequestedCaipNetworks(e).filter(function(t){return t.chainNamespace===e}))||void 0===a?void 0:a[0])}return li.state.activeCaipNetwork||n.defaultCaipNetwork},this.getCaipNetworkId=function(){var e=n.getCaipNetwork();if(e)return e.id},this.getCaipNetworks=function(e){return li.getCaipNetworks(e)},this.getActiveChainNamespace=function(){return li.state.activeChain},this.setRequestedCaipNetworks=function(e,t){li.setRequestedCaipNetworks(e,t)},this.getApprovedCaipNetworkIds=function(){return li.getAllApprovedCaipNetworkIds()},this.getCaipAddress=function(e){return li.state.activeChain!==e&&e?li.getAccountProp("caipAddress",e):li.state.activeCaipAddress},this.setClientId=function(e){hi.setClientId(e)},this.getProvider=function(e){return _b.getProvider(e)},this.getProviderType=function(e){return _b.getProviderId(e)},this.getPreferredAccountType=function(e){var t;return null===(t=mi.state.preferredAccountTypes)||void 0===t?void 0:t[e]},this.setCaipAddress=function(e,t){mi.setCaipAddress(e,t),e&&ar.state.enableEmbedded&&n.close()},this.setBalance=function(e,t,n){mi.setBalance(e,t,n)},this.setProfileName=function(e,t){mi.setProfileName(e,t)},this.setProfileImage=function(e,t){mi.setProfileImage(e,t)},this.setUser=function(e,t){mi.setUser(e,t)},this.resetAccount=function(e){mi.resetAccount(e)},this.setCaipNetwork=function(e){li.setActiveCaipNetwork(e)},this.setCaipNetworkOfNamespace=function(e,t){li.setChainNetworkData(t,{caipNetwork:e})},this.setAllAccounts=function(e,t){mi.setAllAccounts(e,t),ar.setHasMultipleAddresses((null==e?void 0:e.length)>1)},this.setStatus=function(e,t){mi.setStatus(e,t),zr.isConnected()?Zn.setConnectionStatus("connected"):Zn.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=function(e){return li.getAccountProp("address",e)},this.setConnectors=function(e){var t=[].concat(P(zr.state.allConnectors),P(e));zr.setConnectors(t)},this.setConnections=function(e,t){Zr.setConnections(e,t)},this.fetchIdentity=function(e){return hi.fetchIdentity(e)},this.getReownName=function(e){return Pi.getNamesForAddress(e)},this.getConnectors=function(){return zr.getConnectors()},this.getConnectorImage=function(e){return kr.getConnectorImage(e)},this.setConnectedWalletInfo=function(e,t){var n=_b.getProviderId(t),r=e?D(D({},e),{},{type:n}):void 0;mi.setConnectedWalletInfo(r,t)},this.getIsConnectedState=function(){return Boolean(li.state.activeCaipAddress)},this.addAddressLabel=function(e,t,n){mi.addAddressLabel(e,t,n)},this.removeAddressLabel=function(e,t){mi.removeAddressLabel(e,t)},this.getAddress=function(e){return li.state.activeChain!==e&&e?li.getAccountProp("address",e):mi.state.address},this.setApprovedCaipNetworksData=function(e){return li.setApprovedCaipNetworksData(e)},this.resetNetwork=function(e){li.resetNetwork(e)},this.addConnector=function(e){zr.addConnector(e)},this.resetWcConnection=function(){Zr.resetWcConnection()},this.setAddressExplorerUrl=function(e,t){mi.setAddressExplorerUrl(e,t)},this.setSmartAccountDeployed=function(e,t){mi.setSmartAccountDeployed(e,t)},this.setSmartAccountEnabledNetworks=function(e,t){li.setSmartAccountEnabledNetworks(e,t)},this.setPreferredAccountType=function(e,t){mi.setPreferredAccountType(e,t)},this.setEIP6963Enabled=function(e){ar.setEIP6963Enabled(e)},this.handleUnsafeRPCRequest=function(){if(n.isOpen()){if(n.isTransactionStackEmpty())return;n.redirect("ApproveTransaction")}else n.open({view:"ApproveTransaction"})},this.options=t,this.version=t.sdkVersion,this.caipNetworks=this.extendCaipNetworks(t),this.chainNamespaces=this.getChainNamespacesSet(t.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(t),this.chainAdapters=this.createAdapters(t.adapters),this.readyPromise=this.initialize(t)},[{key:"getChainNamespacesSet",value:function(e,t){var n=null==e?void 0:e.map(function(e){return e.namespace}).filter(function(e){return Boolean(e)});if(null!=n&&n.length)return P(new Set(n));var r=null==t?void 0:t.map(function(e){return e.chainNamespace});return P(new Set(r))}},{key:"initialize",value:(C=q(x().m(function e(t){var n,r,i;return x().w(function(e){for(;;)switch(e.n){case 0:return this.initializeProjectSettings(t),this.initControllers(t),e.n=1,this.initChainAdapters();case 1:return this.sendInitializeEvent(t),e.n=2,this.syncExistingConnection();case 2:return e.n=3,tk.fetchRemoteFeatures(t);case 3:if(this.remoteFeatures=e.v,ar.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&Ii.setOnrampProviders(this.remoteFeatures.onramp),!(null!==(n=ar.state.remoteFeatures)&&void 0!==n&&n.email||Array.isArray(null===(r=ar.state.remoteFeatures)||void 0===r?void 0:r.socials)&&(null===(i=ar.state.remoteFeatures)||void 0===i?void 0:i.socials.length)>0)){e.n=4;break}return e.n=4,this.checkAllowedOrigins();case 4:return e.a(2)}},e,this)})),function(e){return C.apply(this,arguments)})},{key:"checkAllowedOrigins",value:(E=q(x().m(function e(){var t,n;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,xr.fetchAllowedOrigins();case 1:(t=e.v)&&Qn.isClient()?(n=window.location.origin,Gb.isOriginAllowed(n,t,Fb)||Cr.open(Cb.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")):Cr.open(Cb.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");case 2:return e.a(2)}},e)})),function(){return E.apply(this,arguments)})},{key:"sendInitializeEvent",value:function(e){var t,n=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));delete n.adapters,delete n.universalProvider,Pr.sendEvent({type:"track",event:"INITIALIZE",properties:D(D({},n),{},{networks:e.networks.map(function(e){return e.id}),siweConfig:{options:(null===(t=e.siweConfig)||void 0===t?void 0:t.options)||{}}})})}},{key:"initControllers",value:function(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}},{key:"initializeThemeController",value:function(e){e.themeMode&&Mr.setThemeMode(e.themeMode),e.themeVariables&&Mr.setThemeVariables(e.themeVariables)}},{key:"initializeChainController",value:function(e){var t;if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");li.initialize(null!==(t=e.adapters)&&void 0!==t?t:[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});var n=this.getDefaultNetwork();n&&li.setActiveCaipNetwork(n)}},{key:"initializeConnectionController",value:function(e){var t;Zr.setWcBasic(null!==(t=e.basic)&&void 0!==t&&t)}},{key:"initializeConnectorController",value:function(){zr.initialize(this.chainNamespaces)}},{key:"initializeProjectSettings",value:function(e){ar.setProjectId(e.projectId),ar.setSdkVersion(e.sdkVersion)}},{key:"initializeOptionsController",value:function(e){var t;ar.setDebug(!1!==e.debug),ar.setEnableWalletConnect(!1!==e.enableWalletConnect),ar.setEnableWalletGuide(!1!==e.enableWalletGuide),ar.setEnableWallets(!1!==e.enableWallets),ar.setEIP6963Enabled(!1!==e.enableEIP6963),ar.setEnableNetworkSwitch(!1!==e.enableNetworkSwitch),ar.setEnableAuthLogger(!1!==e.enableAuthLogger),ar.setCustomRpcUrls(e.customRpcUrls),ar.setEnableEmbedded(e.enableEmbedded),ar.setAllWallets(e.allWallets),ar.setIncludeWalletIds(e.includeWalletIds),ar.setExcludeWalletIds(e.excludeWalletIds),ar.setFeaturedWalletIds(e.featuredWalletIds),ar.setTokens(e.tokens),ar.setTermsConditionsUrl(e.termsConditionsUrl),ar.setPrivacyPolicyUrl(e.privacyPolicyUrl),ar.setCustomWallets(e.customWallets),ar.setFeatures(e.features),ar.setAllowUnsupportedChain(e.allowUnsupportedChain),ar.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ar.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ar.setDefaultAccountTypes(e.defaultAccountTypes);var n=Zn.getPreferredAccountTypes()||{},r=D(D({},ar.state.defaultAccountTypes),n);mi.setPreferredAccountTypes(r);var i=this.getDefaultMetaData();if(!e.metadata&&i&&(e.metadata=i),ar.setMetadata(e.metadata),ar.setDisableAppend(e.disableAppend),ar.setEnableEmbedded(e.enableEmbedded),ar.setSIWX(e.siwx),e.projectId){if((null===(t=e.adapters)||void 0===t?void 0:t.find(function(e){return e.namespace===yn.CHAIN.EVM}))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ar.setSIWX(e.siweConfig.mapToSIWX())}}else Cr.open(Cb.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}},{key:"getDefaultMetaData",value:function(){var e,t,n;return Qn.isClient()?{name:(null===(e=document.getElementsByTagName("title"))||void 0===e||null===(e=e[0])||void 0===e?void 0:e.textContent)||"",description:(null===(t=document.querySelector('meta[property="og:description"]'))||void 0===t?void 0:t.content)||"",url:window.location.origin,icons:[(null===(n=document.querySelector('link[rel~="icon"]'))||void 0===n?void 0:n.href)||""]}:null}},{key:"setUnsupportedNetwork",value:function(e){var t=this.getActiveChainNamespace();if(t){var n=Sb.getUnsupportedNetwork("".concat(t,":").concat(e));li.setActiveCaipNetwork(n)}}},{key:"getDefaultNetwork",value:function(){return Sb.getCaipNetworkFromStorage(this.defaultCaipNetwork)}},{key:"extendCaipNetwork",value:function(e,t){return Sb.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}},{key:"extendCaipNetworks",value:function(e){return Sb.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}},{key:"extendDefaultCaipNetwork",value:function(e){var t=e.networks.find(function(t){var n;return t.id===(null===(n=e.defaultNetwork)||void 0===n?void 0:n.id)});return t?Sb.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}},{key:"disconnectNamespace",value:(k=q(x().m(function e(t){var n,r,i,a,o,s;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n=this.getAdapter(t),r=_b.getProvider(t),i=_b.getProviderId(t),a=li.getAccountData(t)||{},o=a.caipAddress,this.setLoading(!0,t),!o||null==n||!n.disconnect){e.n=1;break}return e.n=1,n.disconnect({provider:r,providerType:i});case 1:Zn.removeConnectedNamespace(t),_b.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.setConnectedWalletInfo(void 0,t),zr.removeConnectorId(t),li.resetAccount(t),li.resetNetwork(t),this.setLoading(!1,t),e.n=3;break;case 2:throw e.p=2,s=e.v,this.setLoading(!1,t),new Error("Failed to disconnect chain ".concat(t,": ").concat(s.message));case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return k.apply(this,arguments)})},{key:"createClients",value:function(){var e,t,n,r,i,a,o,s,c,u,l,d,f,p,h,v,g=this;this.connectionControllerClient={connectWalletConnect:(p=q(x().m(function e(){var t,n,r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(n=li.state.activeChain,r=g.getAdapter(n),i=null===(t=g.getCaipNetwork(n))||void 0===t?void 0:t.id,r){e.n=1;break}throw new Error("Adapter not found");case 1:return e.n=2,r.connectWalletConnect(i);case 2:return a=e.v,g.close(),g.setClientId((null==a?void 0:a.clientId)||null),Zn.setConnectedNamespaces(P(li.state.chains.keys())),g.chainNamespaces.forEach(function(e){zr.setConnectorId(wb,e)}),e.n=3,g.syncWalletConnectAccount();case 3:return e.a(2)}},e)})),function(){return p.apply(this,arguments)}),connectExternal:(f=q(x().m(function e(t){var n,r,i,a,o,s,c,u,l,d,f,p,h,v,m,w,y,b;return x().w(function(e){for(;;)switch(e.n){case 0:if(i=t.id,a=t.info,o=t.type,s=t.provider,c=t.chain,u=t.caipNetwork,l=t.socialUri,d=li.state.activeChain,f=c||d,p=g.getAdapter(f),c&&c!==d&&!u&&(h=g.getCaipNetworks().find(function(e){return e.chainNamespace===c}))&&g.setCaipNetwork(h),p){e.n=1;break}throw new Error("Adapter not found");case 1:return v=g.getCaipNetwork(f),e.n=2,p.connect({id:i,info:a,type:o,provider:s,socialUri:l,chainId:(null==u?void 0:u.id)||(null==v?void 0:v.id),rpcUrl:(null==u||null===(n=u.rpcUrls)||void 0===n||null===(n=n.default)||void 0===n||null===(n=n.http)||void 0===n?void 0:n[0])||(null==v||null===(r=v.rpcUrls)||void 0===r||null===(r=r.default)||void 0===r||null===(r=r.http)||void 0===r?void 0:r[0])});case 2:if(m=e.v){e.n=3;break}return e.a(2);case 3:if(Zn.addConnectedNamespace(f),g.syncProvider(D(D({},m),{},{chainNamespace:f})),!((null==(w=mi.state.allAccounts)?void 0:w.length)>0)){e.n=4;break}b={accounts:P(w)},e.n=6;break;case 4:return e.n=5,p.getAccounts({namespace:f,id:i});case 5:b=e.v;case 6:y=b.accounts,g.setAllAccounts(y,f),g.setStatus("connected",f),g.syncConnectedWalletInfo(f);case 7:return e.a(2)}},e)})),function(e){return f.apply(this,arguments)}),reconnectExternal:(d=q(x().m(function e(t){var n,r,i,a,o,s,c;return x().w(function(e){for(;;)switch(e.n){case 0:if(n=t.id,r=t.info,i=t.type,a=t.provider,o=li.state.activeChain,null==(s=g.getAdapter(o))||!s.reconnect){e.n=2;break}return e.n=1,null==s?void 0:s.reconnect({id:n,info:r,type:i,provider:a,chainId:null===(c=g.getCaipNetwork())||void 0===c?void 0:c.id});case 1:Zn.addConnectedNamespace(o),g.syncConnectedWalletInfo(o);case 2:return e.a(2)}},e)})),function(e){return d.apply(this,arguments)}),disconnect:(l=q(x().m(function e(t){var n,r,i,a;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=mb(t),e.p=1,e.n=2,Promise.allSettled(n.map(function(){var e=q(x().m(function e(t){var n,r;return x().w(function(e){for(;;)if(0===e.n)return n=S(t,1),r=n[0],e.a(2,g.disconnectNamespace(r))},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.v,ai.resetSend(),Zr.resetWcConnection(),e.n=3,vb.clearSessions();case 3:if(zr.setFilterByNamespace(void 0),!((i=r.filter(function(e){return"rejected"===e.status})).length>0)){e.n=4;break}throw new Error(i.map(function(e){return e.reason.message}).join(", "));case 4:Zn.deleteConnectedSocialProvider(),Pr.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:t||"all"}}),e.n=6;break;case 5:throw e.p=5,a=e.v,new Error("Failed to disconnect chains: ".concat(a.message));case 6:return e.a(2)}},e,null,[[1,5]])})),function(e){return l.apply(this,arguments)}),checkInstalled:function(e){return e?e.some(function(e){var t;return Boolean(null===(t=window.ethereum)||void 0===t?void 0:t[String(e)])}):Boolean(window.ethereum)},signMessage:(u=q(x().m(function e(t){var n,r;return x().w(function(e){for(;;)switch(e.n){case 0:return n=g.getAdapter(li.state.activeChain),e.n=1,null==n?void 0:n.signMessage({message:t,address:mi.state.address,provider:_b.getProvider(li.state.activeChain)});case 1:return r=e.v,e.a(2,(null==r?void 0:r.signature)||"")}},e)})),function(e){return u.apply(this,arguments)}),sendTransaction:(c=q(x().m(function e(t){var n,r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(n=t.chainNamespace,!Xn.SEND_SUPPORTED_NAMESPACES.includes(n)){e.n=2;break}return r=g.getAdapter(li.state.activeChain),i=_b.getProvider(n),e.n=1,null==r?void 0:r.sendTransaction(D(D({},t),{},{caipNetwork:g.getCaipNetwork(),provider:i}));case 1:return a=e.v,e.a(2,(null==a?void 0:a.hash)||"");case 2:return e.a(2,"")}},e)})),function(e){return c.apply(this,arguments)}),estimateGas:(s=q(x().m(function e(t){var n,r,i,a;return x().w(function(e){for(;;)switch(e.n){case 0:if(t.chainNamespace!==yn.CHAIN.EVM){e.n=3;break}if(n=g.getAdapter(li.state.activeChain),r=_b.getProvider(li.state.activeChain),i=g.getCaipNetwork()){e.n=1;break}throw new Error("CaipNetwork is undefined");case 1:return e.n=2,null==n?void 0:n.estimateGas(D(D({},t),{},{provider:r,caipNetwork:i}));case 2:return a=e.v,e.a(2,(null==a?void 0:a.gas)||0n);case 3:return e.a(2,0n)}},e)})),function(e){return s.apply(this,arguments)}),getEnsAvatar:(o=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,g.syncIdentity({address:mi.state.address,chainId:Number(null===(t=g.getCaipNetwork())||void 0===t?void 0:t.id),chainNamespace:li.state.activeChain});case 1:return e.a(2,mi.state.profileImage||!1)}},e)})),function(){return o.apply(this,arguments)}),getEnsAddress:(a=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Gb.resolveReownName(t);case 1:return e.a(2,e.v)}},e)})),function(e){return a.apply(this,arguments)}),writeContract:(i=q(x().m(function e(t){var n,r,i,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:if(n=g.getAdapter(li.state.activeChain),r=g.getCaipNetwork(),i=g.getCaipAddress(),a=_b.getProvider(li.state.activeChain),r&&i){e.n=1;break}throw new Error("CaipNetwork or CaipAddress is undefined");case 1:return e.n=2,null==n?void 0:n.writeContract(D(D({},t),{},{caipNetwork:r,provider:a,caipAddress:i}));case 2:return o=e.v,e.a(2,null==o?void 0:o.hash)}},e)})),function(e){return i.apply(this,arguments)}),parseUnits:function(e,t){var n,r=g.getAdapter(li.state.activeChain);return null!==(n=null==r?void 0:r.parseUnits({value:e,decimals:t}))&&void 0!==n?n:0n},formatUnits:function(e,t){var n,r=g.getAdapter(li.state.activeChain);return null!==(n=null==r?void 0:r.formatUnits({value:e,decimals:t}))&&void 0!==n?n:"0"},getCapabilities:(r=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:return n=g.getAdapter(li.state.activeChain),e.n=1,null==n?void 0:n.getCapabilities(t);case 1:return e.a(2,e.v)}},e)})),function(e){return r.apply(this,arguments)}),grantPermissions:(n=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:return n=g.getAdapter(li.state.activeChain),e.n=1,null==n?void 0:n.grantPermissions(t);case 1:return e.a(2,e.v)}},e)})),function(e){return n.apply(this,arguments)}),revokePermissions:(t=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:if(null==(n=g.getAdapter(li.state.activeChain))||!n.revokePermissions){e.n=2;break}return e.n=1,n.revokePermissions(t);case 1:return e.a(2,e.v);case 2:return e.a(2,"0x")}},e)})),function(e){return t.apply(this,arguments)}),walletGetAssets:(e=q(x().m(function e(t){var n,r,i,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:return r=g.getAdapter(li.state.activeChain),e.n=1,null==r?void 0:r.walletGetAssets(t);case 1:if(a=n=e.v,!(i=null!==a)){e.n=2;break}i=void 0!==n;case 2:if(!i){e.n=3;break}o=n,e.n=4;break;case 3:o={};case 4:return e.a(2,o)}},e)})),function(t){return e.apply(this,arguments)}),updateBalance:function(e){var t=g.getCaipNetwork(e);t&&mi.state.address&&g.updateNativeBalance(mi.state.address,null==t?void 0:t.id,e)}},this.networkControllerClient={switchCaipNetwork:(v=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,g.switchCaipNetwork(t);case 1:return e.a(2,e.v)}},e)})),function(e){return v.apply(this,arguments)}),getApprovedCaipNetworksData:(h=q(x().m(function e(){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,g.getApprovedCaipNetworksData())},e)})),function(){return h.apply(this,arguments)})},Zr.setClient(this.connectionControllerClient)}},{key:"getApprovedCaipNetworksData",value:function(){if(_b.getProviderId(li.state.activeChain)===wb){var e,t,n=null===(e=this.universalProvider)||void 0===e||null===(e=e.session)||void 0===e?void 0:e.namespaces;return{supportsAllNetworks:"MetaMask Wallet"===(null===(t=this.universalProvider)||void 0===t||null===(t=t.session)||void 0===t||null===(t=t.peer)||void 0===t?void 0:t.metadata.name),approvedCaipNetworkIds:this.getChainsFromNamespaces(n)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}},{key:"switchCaipNetwork",value:(b=q(x().m(function e(t){var n,r,i,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:if(n=t.chainNamespace,!this.getAddressByChainNamespace(t.chainNamespace)){e.n=5;break}if(r=_b.getProvider(n),i=_b.getProviderId(n),t.chainNamespace!==li.state.activeChain){e.n=3;break}return a=this.getAdapter(n),e.n=2,null==a?void 0:a.switchNetwork({caipNetwork:t,provider:r,providerType:i});case 2:e.n=4;break;case 3:this.setCaipNetwork(t),i===wb?this.syncWalletConnectAccount():(o=this.getAddressByChainNamespace(n))&&this.syncAccount({address:o,chainId:t.id,chainNamespace:n});case 4:e.n=6;break;case 5:this.setCaipNetwork(t);case 6:return e.a(2)}},e,this)})),function(e){return b.apply(this,arguments)})},{key:"getChainsFromNamespaces",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(e).flatMap(function(e){var t=e.chains||[],n=e.accounts.map(function(e){var t=Sn(e),n=t.chainId,r=t.chainNamespace;return"".concat(r,":").concat(n)});return Array.from(new Set([].concat(P(t),P(n))))})}},{key:"createAdapters",value:function(e){var t=this;return this.createClients(),this.chainNamespaces.reduce(function(n,r){var i,a=null==e?void 0:e.find(function(e){return e.namespace===r});a?(a.construct({namespace:r,projectId:null===(i=t.options)||void 0===i?void 0:i.projectId,networks:t.getCaipNetworks()}),n[r]=a):n[r]=new Zb({namespace:r,networks:t.getCaipNetworks()});return n},{})}},{key:"initChainAdapter",value:(y=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:return this.onConnectors(t),this.listenAdapter(t),e.n=1,null===(n=this.chainAdapters)||void 0===n?void 0:n[t].syncConnectors(this.options,this);case 1:return e.n=2,this.createUniversalProviderForAdapter(t);case 2:return e.a(2)}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"initChainAdapters",value:(w=q(x().m(function e(){var t=this;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Promise.all(this.chainNamespaces.map(function(){var e=q(x().m(function e(n){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.initChainAdapter(n);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:return e.a(2)}},e,this)})),function(){return w.apply(this,arguments)})},{key:"onConnectors",value:function(e){var t=this.getAdapter(e);null==t||t.on("connectors",this.setConnectors.bind(this))}},{key:"listenAdapter",value:function(e){var t=this,n=this.getAdapter(e);if(n){var r=Zn.getConnectionStatus();"connected"===r?this.setStatus("connecting",e):"disconnected"===r?(Zn.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",function(n){var r=n.address,i=n.chainId,a=t.getCaipNetworks().find(function(e){return e.id===i||e.caipNetworkId===i}),o=li.state.activeChain===e,s=li.getAccountProp("address",e);if(a){var c=o&&r?r:s;c&&t.syncAccount({address:c,chainId:a.id,chainNamespace:e})}else t.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",function(n){t.setConnections(n,e)}),n.on("pendingTransactions",function(){var e=mi.state.address,n=li.state.activeCaipNetwork;e&&null!=n&&n.id&&t.updateNativeBalance(e,n.id,n.chainNamespace)}),n.on("accountChanged",function(n){var r,i=n.address,a=n.chainId,o=li.state.activeChain===e;if(o&&a)t.syncAccount({address:i,chainId:a,chainNamespace:e});else if(o&&null!==(r=li.state.activeCaipNetwork)&&void 0!==r&&r.id){var s;t.syncAccount({address:i,chainId:null===(s=li.state.activeCaipNetwork)||void 0===s?void 0:s.id,chainNamespace:e})}else t.syncAccountInfo(i,a,e);t.syncAllAccounts(e)})}}},{key:"createUniversalProviderForAdapter",value:(m=q(x().m(function e(t){var n,r;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getUniversalProvider();case 1:this.universalProvider&&(null===(n=this.chainAdapters)||void 0===n||null===(n=n[t])||void 0===n||null===(r=n.setUniversalProvider)||void 0===r||r.call(n,this.universalProvider));case 2:return e.a(2)}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"syncExistingConnection",value:(g=q(x().m(function e(){var t=this;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Promise.allSettled(this.chainNamespaces.map(function(e){return t.syncNamespaceConnection(e)}));case 1:return e.a(2)}},e,this)})),function(){return g.apply(this,arguments)})},{key:"syncNamespaceConnection",value:(v=q(x().m(function e(t){var n,r,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,t===yn.CHAIN.EVM&&Qn.isSafeApp()&&zr.setConnectorId(yn.CONNECTOR_ID.SAFE,t),n=zr.getConnectorId(t),this.setStatus("connecting",t),r=n,e.n=r===yn.CONNECTOR_ID.WALLET_CONNECT?1:r===yn.CONNECTOR_ID.AUTH?3:4;break;case 1:return e.n=2,this.syncWalletConnectAccount();case 2:case 3:return e.a(3,5);case 4:return e.n=5,this.syncAdapterConnection(t);case 5:e.n=7;break;case 6:e.p=6,i=e.v,console.warn("AppKit couldn't sync existing connection",i),this.setStatus("disconnected",t);case 7:return e.a(2)}},e,this,[[0,6]])})),function(e){return v.apply(this,arguments)})},{key:"syncAdapterConnection",value:(h=q(x().m(function e(t){var n,r,i,a,o,s,c,u;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=this.getAdapter(t),r=zr.getConnectorId(t),i=this.getCaipNetwork(t),a=zr.getConnectors(t),o=a.find(function(e){return e.id===r}),e.p=1,n&&o){e.n=2;break}throw new Error("Adapter or connector not found for namespace ".concat(t));case 2:if(null!=i&&i.id){e.n=3;break}throw new Error("CaipNetwork not found");case 3:return e.n=4,null==n?void 0:n.syncConnection({namespace:t,id:o.id,chainId:i.id,rpcUrl:null==i||null===(s=i.rpcUrls)||void 0===s||null===(s=s.default)||void 0===s||null===(s=s.http)||void 0===s?void 0:s[0]});case 4:if(!(c=e.v)){e.n=7;break}return e.n=5,null==n?void 0:n.getAccounts({namespace:t,id:o.id});case 5:return(u=e.v)&&u.accounts.length>0?this.setAllAccounts(u.accounts,t):this.setAllAccounts([Qn.createAccount(t,c.address,"eoa")],t),this.syncProvider(D(D({},c),{},{chainNamespace:t})),e.n=6,this.syncAccount(D(D({},c),{},{chainNamespace:t}));case 6:this.setStatus("connected",t),e.n=8;break;case 7:this.setStatus("disconnected",t);case 8:e.n=10;break;case 9:e.p=9,e.v,this.setStatus("disconnected",t);case 10:return e.a(2)}},e,this,[[1,9]])})),function(e){return h.apply(this,arguments)})},{key:"syncWalletConnectAccount",value:(p=q(x().m(function e(){var t,n=this;return x().w(function(e){for(;;)switch(e.n){case 0:return t=this.chainNamespaces.map(function(){var e=q(x().m(function e(t){var r,i,a,o,s,c,u,l,d,f,p;return x().w(function(e){for(;;)switch(e.n){case 0:if(a=n.getAdapter(t),o=(null===(r=n.universalProvider)||void 0===r||null===(r=r.session)||void 0===r||null===(r=r.namespaces)||void 0===r||null===(r=r[t])||void 0===r?void 0:r.accounts)||[],s=null===(i=li.state.activeCaipNetwork)||void 0===i?void 0:i.id,!(c=o.find(function(e){return Sn(e).chainId===(null==s?void 0:s.toString())})||o[0])){e.n=2;break}return u=An(c),l=Sn(u),d=l.chainId,f=l.address,_b.setProviderId(t,wb),n.caipNetworks&&li.state.activeCaipNetwork&&(null==a?void 0:a.namespace)!==yn.CHAIN.EVM?(p=null==a?void 0:a.getWalletConnectProvider({caipNetworks:n.getCaipNetworks(),provider:n.universalProvider,activeCaipNetwork:li.state.activeCaipNetwork}),_b.setProvider(t,p)):_b.setProvider(t,n.universalProvider),zr.setConnectorId(yn.CONNECTOR_ID.WALLET_CONNECT,t),Zn.addConnectedNamespace(t),n.syncWalletConnectAccounts(t),e.n=1,n.syncAccount({address:f,chainId:d,chainNamespace:t});case 1:e.n=3;break;case 2:n.setStatus("disconnected",t);case 3:return n.syncConnectedWalletInfo(t),e.n=4,li.setApprovedCaipNetworksData(t);case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),e.n=1,Promise.all(t);case 1:return e.a(2)}},e,this)})),function(){return p.apply(this,arguments)})},{key:"syncWalletConnectAccounts",value:function(e){var t,n=null===(t=this.universalProvider)||void 0===t||null===(t=t.session)||void 0===t||null===(t=t.namespaces)||void 0===t||null===(t=t[e])||void 0===t||null===(t=t.accounts)||void 0===t?void 0:t.map(function(e){return Sn(e).address}).filter(function(e,t,n){return n.indexOf(e)===t});n&&this.setAllAccounts(n.map(function(t){return Qn.createAccount(e,t,"bip122"===e?"payment":"eoa")}),e)}},{key:"syncProvider",value:function(e){var t=e.type,n=e.provider,r=e.id,i=e.chainNamespace;_b.setProviderId(i,t),_b.setProvider(i,n),zr.setConnectorId(r,i)}},{key:"syncAllAccounts",value:(f=q(x().m(function e(t){var n,r,i;return x().w(function(e){for(;;)switch(e.n){case 0:if(n=zr.getConnectorId(t)){e.n=1;break}return e.a(2);case 1:return r=this.getAdapter(t),e.n=2,null==r?void 0:r.getAccounts({namespace:t,id:n});case 2:(i=e.v)&&i.accounts.length>0&&this.setAllAccounts(i.accounts,t);case 3:return e.a(2)}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"syncAccount",value:(d=q(x().m(function e(t){var n,r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w,y;return x().w(function(e){for(;;)switch(e.n){case 0:if(r=t.chainNamespace===li.state.activeChain,i=li.getCaipNetworkByNamespace(t.chainNamespace,t.chainId),a=t.address,o=t.chainId,s=t.chainNamespace,c=Zn.getActiveNetworkProps(),u=c.chainId,l=o||u,d=(null===(n=li.state.activeCaipNetwork)||void 0===n?void 0:n.name)===yn.UNSUPPORTED_NETWORK_NAME,f=li.getNetworkProp("supportsAllNetworks",s),this.setStatus("connected",s),!d||f){e.n=1;break}return e.a(2);case 1:if(!l){e.n=4;break}if(p=this.getCaipNetworks().find(function(e){return e.id.toString()===l.toString()}),h=this.getCaipNetworks().find(function(e){return e.chainNamespace===s}),f||p||h||(v=this.getApprovedCaipNetworkIds()||[],g=v.find(function(e){var t;return(null===(t=Pn(e))||void 0===t?void 0:t.chainId)===l.toString()}),m=v.find(function(e){var t;return(null===(t=Pn(e))||void 0===t?void 0:t.chainNamespace)===s}),p=this.getCaipNetworks().find(function(e){return e.caipNetworkId===g}),h=this.getCaipNetworks().find(function(e){return e.caipNetworkId===m||"deprecatedCaipNetworkId"in e&&e.deprecatedCaipNetworkId===m})),(null==(w=p||h)?void 0:w.chainNamespace)===li.state.activeChain?ar.state.enableNetworkSwitch&&!ar.state.allowUnsupportedChain&&(null===(y=li.state.activeCaipNetwork)||void 0===y?void 0:y.name)===yn.UNSUPPORTED_NETWORK_NAME?li.showUnsupportedChainUI():this.setCaipNetwork(w):r||i&&this.setCaipNetworkOfNamespace(i,s),this.syncConnectedWalletInfo(s),Eb(a,mi.state.address)||this.syncAccountInfo(a,null==w?void 0:w.id,s),!r){e.n=3;break}return e.n=2,this.syncBalance({address:a,chainId:null==w?void 0:w.id,chainNamespace:s});case 2:e.n=4;break;case 3:return e.n=4,this.syncBalance({address:a,chainId:null==i?void 0:i.id,chainNamespace:s});case 4:return e.a(2)}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"syncAccountInfo",value:(l=q(x().m(function e(t,n,r){var i,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:if(i=this.getCaipAddress(r),a=n||(null==i?void 0:i.split(":")[1])){e.n=1;break}return e.a(2);case 1:return o="".concat(r,":").concat(a,":").concat(t),this.setCaipAddress(o,r),e.n=2,this.syncIdentity({address:t,chainId:a,chainNamespace:r});case 2:return e.a(2)}},e,this)})),function(e,t,n){return l.apply(this,arguments)})},{key:"syncReownName",value:(u=q(x().m(function e(t,n){var r,i;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.getReownName(t);case 1:(r=e.v)[0]?(i=r[0],this.setProfileName(i.name,n)):this.setProfileName(null,n),e.n=3;break;case 2:e.p=2,e.v,this.setProfileName(null,n);case 3:return e.a(2)}},e,this,[[0,2]])})),function(e,t){return u.apply(this,arguments)})},{key:"syncConnectedWalletInfo",value:function(e){var t=zr.getConnectorId(e),n=_b.getProviderId(e);if(n===bb||n===yb){if(t){var r=this.getConnectors().find(function(e){return e.id===t});if(r){var i=r.info,a=r.name,o=r.imageUrl||this.getConnectorImage(r);this.setConnectedWalletInfo(D({name:a,icon:o},i),e)}}}else if(n===wb){var s,c=_b.getProvider(e);if(null!=c&&c.session)this.setConnectedWalletInfo(D(D({},c.session.peer.metadata),{},{name:c.session.peer.metadata.name,icon:null===(s=c.session.peer.metadata.icons)||void 0===s?void 0:s[0]}),e)}else if(t&&t===yn.CONNECTOR_ID.COINBASE){var u=this.getConnectors().find(function(e){return e.id===yn.CONNECTOR_ID.COINBASE});this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(u)},e)}}},{key:"syncBalance",value:(c=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:if(n=kn(this.getCaipNetworks(),t.chainNamespace).find(function(e){var n;return e.id.toString()===(null===(n=t.chainId)||void 0===n?void 0:n.toString())}),n&&t.chainId){e.n=1;break}return e.a(2);case 1:return e.n=2,this.updateNativeBalance(t.address,t.chainId,t.chainNamespace);case 2:return e.a(2)}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"ready",value:(s=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.readyPromise;case 1:return e.a(2)}},e,this)})),function(){return s.apply(this,arguments)})},{key:"updateNativeBalance",value:(o=q(x().m(function e(t,n,r){var i,a,o;return x().w(function(e){for(;;)switch(e.n){case 0:if(i=this.getAdapter(r),a=li.getCaipNetworkByNamespace(r,n),!i){e.n=2;break}return e.n=1,i.getBalance({address:t,chainId:n,caipNetwork:a,tokens:this.options.tokens});case 1:return o=e.v,this.setBalance(o.balance,o.symbol,r),e.a(2,o);case 2:return e.a(2,void 0)}},e,this)})),function(e,t,n){return o.apply(this,arguments)})},{key:"initializeUniversalAdapter",value:(a=q(x().m(function e(){var t,n,r,i,a,o,s,c,u,l,d,f,p,h,v=this;return x().w(function(e){for(;;)switch(e.n){case 0:if(f=Ib(function(e){var t;e&&v.handleAlertError(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).error.apply(t,r)}),p={projectId:null===(t=this.options)||void 0===t?void 0:t.projectId,metadata:{name:null!==(n=this.options)&&void 0!==n&&n.metadata?null===(r=this.options)||void 0===r?void 0:r.metadata.name:"",description:null!==(i=this.options)&&void 0!==i&&i.metadata?null===(a=this.options)||void 0===a?void 0:a.metadata.description:"",url:null!==(o=this.options)&&void 0!==o&&o.metadata?null===(s=this.options)||void 0===s?void 0:s.metadata.url:"",icons:null!==(c=this.options)&&void 0!==c&&c.metadata?null===(u=this.options)||void 0===u?void 0:u.metadata.icons:[""]},logger:f},ar.setManualWCControl(Boolean(null===(l=this.options)||void 0===l?void 0:l.manualWCControl)),null===(d=this.options.universalProvider)||void 0===d){e.n=1;break}h=d,e.n=3;break;case 1:return e.n=2,hb.init(p);case 2:h=e.v;case 3:this.universalProvider=h,this.listenWalletConnect();case 4:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"listenWalletConnect",value:function(){var e=this;this.universalProvider&&(this.universalProvider.on("display_uri",function(e){Zr.setUri(e)}),this.universalProvider.on("connect",Zr.finalizeWcConnection),this.universalProvider.on("disconnect",function(){e.chainNamespaces.forEach(function(t){e.resetAccount(t)}),Zr.resetWcConnection()}),this.universalProvider.on("chainChanged",function(t){var n=e.getCaipNetworks().find(function(e){return e.id==t}),r=e.getCaipNetwork();n?(null==r?void 0:r.id)!==(null==n?void 0:n.id)&&e.setCaipNetwork(n):e.setUnsupportedNetwork(t)}),this.universalProvider.on("session_event",function(t){if(Gb.isSessionEventData(t)){var n=t.params.event,r=n.name,i=n.data;"accountsChanged"===r&&Array.isArray(i)&&Qn.isCaipAddress(i[0])&&e.syncAccount(Sn(i[0]))}}))}},{key:"createUniversalProvider",value:function(){var e;return!this.universalProviderInitPromise&&Qn.isClient()&&null!==(e=this.options)&&void 0!==e&&e.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}},{key:"getUniversalProvider",value:(i=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:if(this.universalProvider){e.n=4;break}return e.p=1,e.n=2,this.createUniversalProvider();case 2:e.n=4;break;case 3:e.p=3,t=e.v,Pr.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:t instanceof Error?t.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",t);case 4:return e.a(2,this.universalProvider)}},e,this,[[1,3]])})),function(){return i.apply(this,arguments)})},{key:"handleAlertError",value:function(e){var t=Object.entries(Cb.UniversalProviderErrors).find(function(t){var n=S(t,2)[1].message;return e.message.includes(n)}),n=S(null!=t?t:[],2),r=n[0],i=n[1],a=null!=i?i:{},o=a.message,s=a.alertErrorKey;if(r&&o&&!this.reportedAlertErrors[r]){var c=Cb.ALERT_ERRORS[s];c&&(Cr.open(c,"error"),this.reportedAlertErrors[r]=!0)}}},{key:"getAdapter",value:function(e){var t;if(e)return null===(t=this.chainAdapters)||void 0===t?void 0:t[e]}},{key:"createAdapter",value:function(e){var t;if(e){var n=e.namespace;if(n){this.createClients();var r=e;r.namespace=n,r.construct({namespace:n,projectId:null===(t=this.options)||void 0===t?void 0:t.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}}}},{key:"open",value:(r=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.injectModalUi();case 1:if(null!=t&&t.uri&&Zr.setUri(t.uri),null==t||!t.arguments){e.n=3;break}n=null==t?void 0:t.view,e.n="Swap"===n?2:3;break;case 2:return e.a(2,bi.open(D(D({},t),{},{data:{swap:t.arguments}})));case 3:return e.a(2,bi.open(t))}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"close",value:(n=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.injectModalUi();case 1:bi.close();case 2:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"setLoading",value:function(e,t){bi.setLoading(e,t)}},{key:"disconnect",value:(t=q(x().m(function e(t){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Zr.disconnect(t);case 1:return e.a(2)}},e)})),function(e){return t.apply(this,arguments)})},{key:"getSIWX",value:function(){return ar.state.siwx}},{key:"getError",value:function(){return""}},{key:"getChainId",value:function(){var e;return null===(e=li.state.activeCaipNetwork)||void 0===e?void 0:e.id}},{key:"switchNetwork",value:(e=q(x().m(function e(t){var n;return x().w(function(e){for(;;)switch(e.n){case 0:if(n=this.getCaipNetworks().find(function(e){return e.id===t.id}),n){e.n=1;break}return Cr.open(Cb.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error"),e.a(2);case 1:return e.n=2,li.switchActiveNetwork(n);case 2:return e.a(2)}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"getWalletProvider",value:function(){return li.state.activeChain?_b.state.providers[li.state.activeChain]:null}},{key:"getWalletProviderType",value:function(){return _b.getProviderId(li.state.activeChain)}},{key:"subscribeProviders",value:function(e){return _b.subscribeProviders(e)}},{key:"getThemeMode",value:function(){return Mr.state.themeMode}},{key:"getThemeVariables",value:function(){return Mr.state.themeVariables}},{key:"setThemeMode",value:function(e){Mr.setThemeMode(e),Mb(Mr.state.themeMode)}},{key:"setTermsConditionsUrl",value:function(e){ar.setTermsConditionsUrl(e)}},{key:"setPrivacyPolicyUrl",value:function(e){ar.setPrivacyPolicyUrl(e)}},{key:"setThemeVariables",value:function(e){Mr.setThemeVariables(e),function(e){Ub&&Db&&jb&&(Ub.textContent=Lb(e).core.cssText,Db.textContent=Lb(e).dark.cssText,jb.textContent=Lb(e).light.cssText)}(Mr.state.themeVariables)}},{key:"subscribeTheme",value:function(e){return Mr.subscribe(e)}},{key:"getWalletInfo",value:function(){return mi.state.connectedWalletInfo}},{key:"getAccount",value:function(e){var t,n=zr.getAuthConnector(e),r=li.getAccountData(e),i=li.state.activeChain,a=Zn.getConnectedConnectorId(e||i);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Qn.getPlainAddress(r.caipAddress),isConnected:Boolean(r.caipAddress),status:r.status,embeddedWalletInfo:n&&a===yn.CONNECTOR_ID.AUTH?{user:r.user?D(D({},r.user),{},{username:Zn.getConnectedSocialUsername()}):void 0,authProvider:r.socialProvider||"email",accountType:null===(t=r.preferredAccountTypes)||void 0===t?void 0:t[e||i],isSmartAccountDeployed:Boolean(r.smartAccountDeployed)}:void 0}}},{key:"subscribeAccount",value:function(e,t){var n=this,r=function(){var r=n.getAccount(t);r&&e(r)};t?li.subscribeChainProp("accountState",r,t):li.subscribe(r),zr.subscribe(r)}},{key:"subscribeNetwork",value:function(e){return li.subscribe(function(t){var n=t.activeCaipNetwork;e({caipNetwork:n,chainId:null==n?void 0:n.id,caipNetworkId:null==n?void 0:n.caipNetworkId})})}},{key:"subscribeWalletInfo",value:function(e){return mi.subscribeKey("connectedWalletInfo",e)}},{key:"subscribeShouldUpdateToAddress",value:function(e){mi.subscribeKey("shouldUpdateToAddress",e)}},{key:"subscribeCaipNetworkChange",value:function(e){li.subscribeKey("activeCaipNetwork",e)}},{key:"getState",value:function(){return ei.state}},{key:"subscribeState",value:function(e){return ei.subscribe(e)}},{key:"showErrorMessage",value:function(e){Kr.showError(e)}},{key:"showSuccessMessage",value:function(e){Kr.showSuccess(e)}},{key:"getEvent",value:function(){return D({},Pr.state)}},{key:"subscribeEvents",value:function(e){return Pr.subscribe(e)}},{key:"replace",value:function(e){Ur.replace(e)}},{key:"redirect",value:function(e){Ur.push(e)}},{key:"popTransactionStack",value:function(e){Ur.popTransactionStack(e)}},{key:"isOpen",value:function(){return bi.state.open}},{key:"isTransactionStackEmpty",value:function(){return 0===Ur.state.transactionStack.length}},{key:"updateFeatures",value:function(e){ar.setFeatures(e)}},{key:"updateRemoteFeatures",value:function(e){ar.setRemoteFeatures(e)}},{key:"updateOptions",value:function(e){var t=D(D({},ar.state||{}),e);ar.setOptions(t)}},{key:"setConnectMethodsOrder",value:function(e){ar.setConnectMethodsOrder(e)}},{key:"setWalletFeaturesOrder",value:function(e){ar.setWalletFeaturesOrder(e)}},{key:"setCollapseWallets",value:function(e){ar.setCollapseWallets(e)}},{key:"setSocialsOrder",value:function(e){ar.setSocialsOrder(e)}},{key:"getConnectMethodsOrder",value:function(){return xb.getConnectOrderMethod(ar.state.features,zr.getConnectors())}},{key:"addNetwork",value:function(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error("Adapter for namespace ".concat(e," doesn't exist"));var n=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find(function(e){return e.id===n.id})||li.addNetwork(n)}},{key:"removeNetwork",value:function(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error("Adapter for namespace ".concat(e," doesn't exist"));var n=this.getCaipNetworks().find(function(e){return e.id===t});n&&li.removeNetwork(e,t)}}],[{key:"getInstance",value:function(){return this.instance}}]);var e,t,n,r,i,a,o,s,c,u,l,d,f,p,h,v,g,m,w,y,b,k,E,C}(),rk=!1,ik=function(e){function t(){return I(this,t),v(this,t,arguments)}return w(t,e),A(t,[{key:"open",value:(o=q(x().m(function e(n){return x().w(function(e){for(;;)switch(e.n){case 0:if(zr.isConnected()){e.n=1;break}return e.n=1,p(t,"open",this,3)([n]);case 1:return e.a(2)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"close",value:(a=q(x().m(function e(){return x().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,p(t,"close",this,3)([]);case 1:this.options.manualWCControl&&Zr.finalizeWcConnection();case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"syncIdentity",value:(i=q(x().m(function e(t){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve())},e)})),function(e){return i.apply(this,arguments)})},{key:"syncBalance",value:(r=q(x().m(function e(t){return x().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.resolve())},e)})),function(e){return r.apply(this,arguments)})},{key:"injectModalUi",value:(n=q(x().m(function e(){var t;return x().w(function(e){for(;;)switch(e.n){case 0:if(rk||!Qn.isClient()){e.n=3;break}return e.n=1,U(function(){return b.import("./basic-legacy-G234PmJG.js")},void 0);case 1:return e.n=2,U(function(){return b.import("./w3m-modal-legacy-DcrIISWP.js")},void 0);case 2:document.querySelector("w3m-modal")||(t=document.createElement("w3m-modal"),ar.state.disableAppend||ar.state.enableEmbedded||document.body.insertAdjacentElement("beforeend",t)),rk=!0;case 3:return e.a(2)}},e)})),function(){return n.apply(this,arguments)})}]);var n,r,i,a,o}(nk);var ak=Object.freeze(Object.defineProperty({__proto__:null,AppKit:ik,createAppKit:function(e){return new ik(D(D({},e),{},{basic:!0,sdkVersion:"html-core-".concat("1.7.8")}))}},Symbol.toStringTag,{value:"Module"}));h("X",ak)}}})}();
