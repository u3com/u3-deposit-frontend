!function(){var e=["calls","docsPath"],t=["extend","nonceKeyManager"],n=["chainId","entryPointAddress","context"],r=["paymasterPostOpGasLimit","paymasterVerificationGasLimit"],a=["chainId","entryPointAddress","context"],i=["paymasterPostOpGasLimit","paymasterVerificationGasLimit"],o=["isFinal","sponsor"];function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=T(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(v())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var a=new(e.bind.apply(e,r));return n&&g(a,n.prototype),a}(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},c(e)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t,n){return t=y(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){I(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}function A(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return S(u,"_invoke",function(n,r,a){var i,s,c,u=0,l=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,f.n=n,o}};function p(n,r){for(s=n,c=r,t=0;!d&&u&&!a&&t<l.length;t++){var a,i=l[t],p=f.p,h=i[2];n>3?(a=h===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((a=n<2&&p<i[1])?(s=0,f.v=r,f.n=i[1]):p<h&&(a=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,f.n=h,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,l,h){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,h),s=l,c=h;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(u=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==o)break}catch(t){i=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,i),!0),u}var o={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(S(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,S(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,S(d,"constructor",u),S(u,"constructor",c),c.displayName="GeneratorFunction",S(u,a,"GeneratorFunction"),S(d),S(d,a,"Generator"),S(d,r,function(){return this}),S(d,"toString",function(){return"[object Generator]"}),(A=function(){return{w:i,m:f}})()}function S(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}S=function(e,t,n,r){function i(t,n){S(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},S(e,t,n,r)}function O(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function P(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){O(i,r,a,o,s,"next",e)}function s(e){O(i,r,a,o,s,"throw",e)}o(void 0)})}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./hooks.module-legacy-aEy5BALc.js","./index-legacy-CXPEV-Pz.js","./waitForCallsStatus-legacy-vF7E9tto.js","./index-legacy-_k0KS9GP.js"],function(f,v){"use strict";var y,g,w,x,S,O,T,_,C,j,L,M,D,N,U,B,R,G,q,z,F,H,W,K,V,J,Q,$,Z,Y,X,ee,te,ne,re,ae,ie,oe,se,ce,ue,le,de,fe,pe,he,me,ve,ye,be,ge,we,ke,Ie,xe,Ae,Se,Oe,Pe,Ee,Te,_e,Ce,je,Le,Me,De,Ne,Ue,Be,Re,Ge,qe,ze,Fe,He,We,Ke;return{setters:[function(e){y=e.B,g=e._,w=e.h,x=e.y},function(e){S=e.ad,O=e.ae,T=e.af,_=e.ag,C=e.ah,j=e.ai,L=e.aj,M=e.ak,D=e.y,N=e.al,U=e.am,B=e.an,R=e.ao,G=e.L,q=e.ap,z=e.aq,F=e.ar,H=e.as,W=e.at,K=e.au,V=e.av,J=e.aw,Q=e.b,$=e._,Z=e.e,Y=e.ax,X=e.ay,ee=e.m,te=e.az,ne=e.aA,re=e.aB,ae=e.B,ie=e.aC,oe=e.aD,se=e.d,ce=e.aE,ue=e.aF,le=e.aG,de=e.E,fe=e.A,pe=e.p,he=e.x,me=e.aH,ve=e.n,ye=e.aI,be=e.aJ,ge=e.aK,we=e.s,ke=e.N,Ie=e.O,xe=e.Q,Ae=e.aL,Se=e.a9,Oe=e.f,Pe=e.Z,Ee=e.aM,Te=e.aa,_e=e.aN,Ce=e.aO,je=e.I,Le=e.aP,Me=e.aQ,De=e.aR,Ne=e.aS,Ue=e.aT,Be=e.aU,Re=e.F,Ge=e.i},function(e){qe=e.p,ze=e.w},function(e){Fe=e.c,He=e.s,We=e.d,Ke=e.g}],execute:function(){function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("address"===e){var r=t;if(!T(r))throw new _({address:r});return C(r.toLowerCase(),{size:n?32:null})}if("string"===e)return j(t);if("bytes"===e)return t;if("bool"===e)return C(L(t),{size:n?32:1});var a=e.match(M);if(a){var i=E(a,3),o=(i[0],i[1]),s=i[2],c=void 0===s?"256":s,u=Number.parseInt(c,10)/8;return D(t,{size:n?32:u,signed:"int"===o})}var l=e.match(N);if(l){var d=E(l,2),f=(d[0],d[1]);if(Number.parseInt(f,10)!==(t.length-2)/2)throw new U({expectedSize:Number.parseInt(f,10),givenSize:(t.length-2)/2});return C(t,{dir:"right",size:n?32:null})}var p=e.match(B);if(p&&Array.isArray(t)){for(var h=E(p,2),m=(h[0],h[1]),y=[],b=0;b<t.length;b++)y.push(v(m,t[b],!0));return 0===y.length?"0x":O(y)}throw new R(e)}function Ve(e){var t=e.source,n=new Map,r=new G(8192),a=new Map,i=function(e){var t=e.address,n=e.chainId;return"".concat(t,".").concat(n)};return{consume:function(e){var n=this;return P(A().m(function a(){var o,s,c,u,l,d;return A().w(function(a){for(;;)switch(a.n){case 0:return o=e.address,s=e.chainId,c=e.client,u=i({address:o,chainId:s}),l=n.get({address:o,chainId:s,client:c}),n.increment({address:o,chainId:s}),a.n=1,l;case 1:return d=a.v,a.n=2,t.set({address:o,chainId:s},d);case 2:return r.set(u,d),a.a(2,d)}},a)}))()},increment:function(e){return P(A().m(function t(){var r,a,o,s,c;return A().w(function(t){for(;;)switch(t.n){case 0:a=e.address,o=e.chainId,s=i({address:a,chainId:o}),c=null!==(r=n.get(s))&&void 0!==r?r:0,n.set(s,c+1);case 1:return t.a(2)}},t)}))()},get:function(e){var o=this;return P(A().m(function s(){var c,u,l,d,f,p,h,m,v;return A().w(function(s){for(;;)switch(s.n){case 0:return u=e.address,l=e.chainId,d=e.client,f=i({address:u,chainId:l}),(p=a.get(f))||(p=P(A().m(function e(){var n,a,i;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t.get({address:u,chainId:l,client:d});case 1:if(a=e.v,!((i=null!==(n=r.get(f))&&void 0!==n?n:0)>0&&a<=i)){e.n=2;break}return e.a(2,i+1);case 2:return r.delete(f),e.a(2,a);case 3:return e.p=3,o.reset({address:u,chainId:l}),e.f(3);case 4:return e.a(2)}},e,null,[[0,,3,4]])}))(),a.set(f,p)),h=null!==(c=n.get(f))&&void 0!==c?c:0,m=h,s.n=1,p;case 1:return v=s.v,s.a(2,m+v)}},s)}))()},reset:function(e){var t=e.address,r=e.chainId,o=i({address:t,chainId:r});n.delete(o),a.delete(o)}}}f({createCoinbaseWalletSDK:function(e){var t,n,r,a,i={metadata:{appName:e.appName||"Dapp",appLogoUrl:e.appLogoUrl||"",appChainIds:e.appChainIds||[]},preference:Object.assign(gu,null!==(t=e.preference)&&void 0!==t?t:{}),paymasterUrls:e.paymasterUrls};(null===(n=e.subAccounts)||void 0===n?void 0:n.toOwnerAccount)&&jr(e.subAccounts.toOwnerAccount);Ln.subAccountsConfig.set({toOwnerAccount:null===(r=e.subAccounts)||void 0===r?void 0:r.toOwnerAccount,enableAutoSubAccounts:null===(a=e.subAccounts)||void 0===a?void 0:a.enableAutoSubAccounts}),Ln.config.set(i),Ln.persist.rehydrate(),Pr(),!1!==i.preference.telemetry&&Mn();!function(e){if(!e)return;if(!["all","smartWalletOnly","eoaOnly"].includes(e.options))throw new Error("Invalid options: ".concat(e.options));if(e.attribution&&void 0!==e.attribution.auto&&void 0!==e.attribution.dataSuffix)throw new Error("Attribution cannot contain both auto and dataSuffix properties");if(e.telemetry&&"boolean"!=typeof e.telemetry)throw new Error("Telemetry must be a boolean")}(i.preference);var o=null,s={getProvider:function(){return o||(o=function(e){var t,n={metadata:e.metadata,preference:e.preference};return null!==(t=function(e){var t,n,a=e.metadata,i=e.preference,o=a.appName,s=a.appLogoUrl,c=a.appChainIds;if("smartWalletOnly"!==i.options){var u=globalThis.coinbaseWalletExtension;if(u)return null===(t=u.setAppInfo)||void 0===t||t.call(u,o,s,c,i),u}var l=function(){var e,t;try{var n=globalThis;return null!==(e=n.ethereum)&&void 0!==e?e:null===(t=n.top)||void 0===t?void 0:t.ethereum}catch(r){return}}();if(null==l?void 0:l.isCoinbaseBrowser)return null===(n=l.setAppInfo)||void 0===n||n.call(l,o,s,c,i),l;return}(n))&&void 0!==t?t:new bu(n)}(i)),o.sdk=s,o},subAccount:{create:function(e){return P(A().m(function t(){var n,r,a;return A().w(function(t){for(;;)switch(t.n){case 0:return a=Ln.getState(),Ga(null===(n=a.subAccount)||void 0===n?void 0:n.address,new Error("subaccount already exists")),t.n=1,null===(r=s.getProvider())||void 0===r?void 0:r.request({method:"wallet_addSubAccount",params:[{version:"1",account:e}]});case 1:return t.a(2,t.v)}},t)}))()},get:function(){return P(A().m(function e(){var t,n,r,a,i;return A().w(function(e){for(;;)switch(e.n){case 0:if(!(null==(r=Ln.subAccounts.get())?void 0:r.address)){e.n=1;break}return e.a(2,r);case 1:return e.n=2,null===(t=s.getProvider())||void 0===t?void 0:t.request({method:"wallet_connect",params:[{version:"1",capabilities:{}}]});case 2:if(a=e.v,i=null===(n=a.accounts[0].capabilities)||void 0===n?void 0:n.subAccounts,Array.isArray(i)){e.n=3;break}return e.a(2,null);case 3:return e.a(2,i[0])}},e)}))()},addOwner:function(e){return P(A().m(function t(){var n,r,a,i,o,c,u,l,d,f,p,h;return A().w(function(t){for(;;)switch(t.n){case 0:return n=e.address,r=e.publicKey,a=e.chainId,c=Ln.subAccounts.get(),Ga(u=Ln.account.get(),new Error("account does not exist")),Ga(null==c?void 0:c.address,new Error("subaccount does not exist")),l=[],r&&(d=Ue([{type:"bytes32"},{type:"bytes32"}],r),f=E(d,2),p=f[0],h=f[1],l.push({to:c.address,data:he({abi:ts,functionName:"addOwnerPublicKey",args:[p,h]}),value:Te(0)})),n&&l.push({to:c.address,data:he({abi:ts,functionName:"addOwnerAddress",args:[n]}),value:Te(0)}),t.n=1,null===(i=s.getProvider())||void 0===i?void 0:i.request({method:"wallet_sendCalls",params:[{calls:l,chainId:Te(a),from:null===(o=u.accounts)||void 0===o?void 0:o[0],version:"1"}]});case 1:return t.a(2,t.v)}},t)}))()},setToOwnerAccount:function(e){jr(e),Ln.subAccountsConfig.set({toOwnerAccount:e})}}};return s},getCryptoKeyAccount:Ko});
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
var Je={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Qe={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},$e={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Ze=K(Je.p),Ye=K(Qe.p),Xe=K($e.p),et=H(k(k({},Je),{},{Fp:Ze,lowS:!1}),W);H(k(k({},Qe),{},{Fp:Ye,lowS:!1}),V),H(k(k({},$e),{},{Fp:Xe,lowS:!1,allowedPrivateKeyLengths:[130,131,132]}),J);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */var tt=et,nt=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function rt(e){var t=e.authorization,n=e.factory,r=e.factoryData;if("0x7702"===n||"0x7702000000000000000000000000000000000000"===n){if(!t)return"0x7702000000000000000000000000000000000000";var a=t.address;return Q([a,null!=r?r:"0x"])}return n?Q([n,null!=r?r:"0x"]):"0x"}function at(e){var t,n,r=e.callGasLimit,a=e.callData,i=e.maxPriorityFeePerGas,o=e.maxFeePerGas,s=e.paymaster,c=e.paymasterData,u=e.paymasterPostOpGasLimit,l=e.paymasterVerificationGasLimit,d=e.sender,f=e.signature,p=void 0===f?"0x":f,h=e.verificationGasLimit;return{accountGasLimits:Q([C(D(h||0n),{size:16}),C(D(r||0n),{size:16})]),callData:a,initCode:rt(e),gasFees:Q([C(D(i||0n),{size:16}),C(D(o||0n),{size:16})]),nonce:null!==(t=e.nonce)&&void 0!==t?t:0n,paymasterAndData:s?Q([s,C(D(l||0n),{size:16}),C(D(u||0n),{size:16}),c||"0x"]):"0x",preVerificationGas:null!==(n=e.preVerificationGas)&&void 0!==n?n:0n,sender:d,signature:p}}var it={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function ot(e){var t=e.chainId,n=e.entryPointAddress,r=e.entryPointVersion,a=e.userOperation,i=a.authorization,o=a.callData,s=void 0===o?"0x":o,c=a.callGasLimit,u=a.maxFeePerGas,l=a.maxPriorityFeePerGas,d=a.nonce,f=a.paymasterAndData,p=void 0===f?"0x":f,h=a.preVerificationGas,m=a.sender,v=a.verificationGasLimit;if("0.8"===r)return $(function(e){var t=e.chainId,n=e.entryPointAddress,r=at(e.userOperation);return{types:it,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:n},message:r}}({chainId:t,entryPointAddress:n,userOperation:a}));var y=function(){if("0.6"===r){var e,t,n=null===(e=a.initCode)||void 0===e?void 0:e.slice(0,42),o=null===(t=a.initCode)||void 0===t?void 0:t.slice(42),f=rt({authorization:i,factory:n,factoryData:o});return Z([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[m,d,Y(f),Y(s),c,v,h,u,l,Y(p)])}if("0.7"===r){var y=at(a);return Z([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[y.sender,y.nonce,Y(y.initCode),Y(y.callData),y.accountGasLimits,y.preVerificationGas,y.gasFees,Y(y.paymasterAndData)])}throw new Error('entryPointVersion "'.concat(r,'" not supported.'))}();return Y(Z([{type:"bytes32"},{type:"address"},{type:"uint256"}],[Y(y),n,BigInt(t)]))}function st(e){return ct.apply(this,arguments)}function ct(){return(ct=P(A().m(function e(n){var r,a,i,o,s,c;return A().w(function(e){for(;;)switch(e.n){case 0:return r=n.extend,a=n.nonceKeyManager,i=void 0===a?Ve({source:{get:function(){return Date.now()},set:function(){}}}):a,o=l(n,t),s=!1,e.n=1,n.getAddress();case 1:return c=e.v,e.a(2,k(k(k(k({},r),o),{},{address:c,getFactoryArgs:function(){var e=this;return P(A().m(function t(){var r;return A().w(function(t){for(;;)switch(t.n){case 0:if(!(r="isDeployed"in e)){t.n=2;break}return t.n=1,e.isDeployed();case 1:r=t.v;case 2:if(!r){t.n=3;break}return t.a(2,{factory:void 0,factoryData:void 0});case 3:return t.a(2,n.getFactoryArgs())}},t)}))()},getNonce:function(e){return P(A().m(function t(){var r,a,o,s,u;return A().w(function(t){for(;;)switch(t.n){case 0:if(null===(r=null==e?void 0:e.key)||void 0===r){t.n=1;break}s=r,t.n=3;break;case 1:return u=BigInt,t.n=2,i.consume({address:c,chainId:n.client.chain.id,client:n.client});case 2:s=u(t.v);case 3:if(a=s,!n.getNonce){t.n=5;break}return t.n=4,n.getNonce(k(k({},e),{},{key:a}));case 4:return t.a(2,t.v);case 5:return t.n=6,ne(n.client,{abi:re(["function getNonce(address, uint192) pure returns (uint256)"]),address:n.entryPoint.address,functionName:"getNonce",args:[c,a]});case 6:return o=t.v,t.a(2,o)}},t)}))()},isDeployed:function(){return P(A().m(function e(){var t;return A().w(function(e){for(;;)switch(e.n){case 0:if(!s){e.n=1;break}return e.a(2,!0);case 1:return e.n=2,ee(n.client,te,"getCode")({address:c});case 2:return t=e.v,s=Boolean(t),e.a(2,s)}},e)}))()}},n.sign?{sign:function(e){var t=this;return P(A().m(function r(){var a,i,o,s,c,u;return A().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,Promise.all([t.getFactoryArgs(),n.sign(e)]);case 1:if(a=r.v,i=E(a,2),o=i[0],s=o.factory,c=o.factoryData,u=i[1],!s||!c){r.n=2;break}return r.a(2,X({address:s,data:c,signature:u}));case 2:return r.a(2,u)}},r)}))()}}:{}),{},{signMessage:function(e){var t=this;return P(A().m(function r(){var a,i,o,s,c,u;return A().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,Promise.all([t.getFactoryArgs(),n.signMessage(e)]);case 1:if(a=r.v,i=E(a,2),o=i[0],s=o.factory,c=o.factoryData,u=i[1],!s||!c||"0x7702"===s){r.n=2;break}return r.a(2,X({address:s,data:c,signature:u}));case 2:return r.a(2,u)}},r)}))()},signTypedData:function(e){var t=this;return P(A().m(function r(){var a,i,o,s,c,u;return A().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,Promise.all([t.getFactoryArgs(),n.signTypedData(e)]);case 1:if(a=r.v,i=E(a,2),o=i[0],s=o.factory,c=o.factoryData,u=i[1],!s||!c||"0x7702"===s){r.n=2;break}return r.a(2,X({address:s,data:c,signature:u}));case 2:return r.a(2,u)}},r)}))()},type:"smart"}))}},e)}))).apply(this,arguments)}var ut=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Smart Account is not deployed.",{cause:n,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(ut,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});var lt=function(e){function t(){var e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.cause,i=r.data,o=r.message;h(this,t);var s=null==o||null===(e=o.replace("execution reverted: ",""))||void 0===e?void 0:e.replace("execution reverted","");return n=m(this,t,["Execution reverted ".concat(s?"with reason: ".concat(s):"for an unknown reason","."),{cause:a,name:"ExecutionRevertedError"}]),Object.defineProperty(n,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.data=i,n}return b(t,e),p(t)}(ae);Object.defineProperty(lt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521}),Object.defineProperty(lt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});var dt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Failed to send funds to beneficiary.",{cause:n,name:"FailedToSendToBeneficiaryError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(dt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});var ft=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Gas value overflowed.",{cause:n,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(ft,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});var pt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:n,name:"HandleOpsOutOfGasError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(pt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});var ht=function(e){function t(e){var n=e.cause,r=e.factory,a=e.factoryData,i=e.initCode;return h(this,t),m(this,t,["Failed to simulate deployment for Smart Account.",{cause:n,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)","- Smart Account deployment execution reverted with an error\n",r&&"factory: ".concat(r),a&&"factoryData: ".concat(a),i&&"initCode: ".concat(i)].filter(Boolean),name:"InitCodeFailedError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(ht,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});var mt=function(e){function t(e){var n=e.cause,r=e.factory,a=e.factoryData,i=e.initCode;return h(this,t),m(this,t,["Smart Account initialization implementation did not create an account.",{cause:n,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid","- Smart Account initialization implementation is incorrect\n",r&&"factory: ".concat(r),a&&"factoryData: ".concat(a),i&&"initCode: ".concat(i)].filter(Boolean),name:"InitCodeMustCreateSenderError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(mt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});var vt=function(e){function t(e){var n=e.cause,r=e.factory,a=e.factoryData,i=e.initCode,o=e.sender;return h(this,t),m(this,t,["Smart Account initialization implementation does not return the expected sender.",{cause:n,metaMessages:["This could arise when:","Smart Account initialization implementation does not return a sender address\n",r&&"factory: ".concat(r),a&&"factoryData: ".concat(a),i&&"initCode: ".concat(i),o&&"sender: ".concat(o)].filter(Boolean),name:"InitCodeMustReturnSenderError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(vt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});var yt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Smart Account does not have sufficient funds to execute the User Operation.",{cause:n,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(yt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});var bt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Bundler attempted to call an invalid function on the EntryPoint.",{cause:n,name:"InternalCallOnlyError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(bt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});var gt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:n,name:"InvalidAggregatorError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(gt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});var wt=function(e){function t(e){var n=e.cause,r=e.nonce;return h(this,t),m(this,t,["Invalid Smart Account nonce used for User Operation.",{cause:n,metaMessages:[r&&"nonce: ".concat(r)].filter(Boolean),name:"InvalidAccountNonceError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(wt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});var kt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Bundler has not set a beneficiary address.",{cause:n,name:"InvalidBeneficiaryError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(kt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});var It=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Invalid fields set on User Operation.",{cause:n,name:"InvalidFieldsError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(It,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});var xt=function(e){function t(e){var n=e.cause,r=e.paymasterAndData;return h(this,t),m(this,t,["Paymaster properties provided are invalid.",{cause:n,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",r&&"paymasterAndData: ".concat(r)].filter(Boolean),name:"InvalidPaymasterAndDataError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(xt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});var At=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Paymaster deposit for the User Operation is too low.",{cause:n,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(At,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508}),Object.defineProperty(At,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});var St=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:n,name:"PaymasterFunctionRevertedError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(St,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});var Ot=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["The Paymaster contract has not been deployed.",{cause:n,name:"PaymasterNotDeployedError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Ot,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});var Pt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:n,name:"PaymasterRateLimitError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Pt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});var Et=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:n,name:"PaymasterStakeTooLowError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Et,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});var Tt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Paymaster `postOp` function reverted.",{cause:n,name:"PaymasterPostOpFunctionRevertedError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Tt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});var _t=function(e){function t(e){var n=e.cause,r=e.factory,a=e.factoryData,i=e.initCode;return h(this,t),m(this,t,["Smart Account has already been deployed.",{cause:n,metaMessages:["Remove the following properties and try again:",r&&"`factory`",a&&"`factoryData`",i&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(_t,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});var Ct=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:n,name:"SignatureCheckFailedError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Ct,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});var jt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["The `validateUserOp` function on the Smart Account reverted.",{cause:n,name:"SmartAccountFunctionRevertedError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(jt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});var Lt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["UserOperation rejected because account specified unsupported signature aggregator.",{cause:n,name:"UnsupportedSignatureAggregatorError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Lt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});var Mt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["User Operation expired.",{cause:n,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Mt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});var Dt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Paymaster for User Operation expired.",{cause:n,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Dt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});var Nt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Signature provided for the User Operation is invalid.",{cause:n,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Nt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});var Ut=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["Signature provided for the User Operation is invalid.",{cause:n,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Ut,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});var Bt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:n,name:"UserOperationRejectedByEntryPointError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Bt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});var Rt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:n,name:"UserOperationRejectedByPaymasterError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Rt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});var Gt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["User Operation rejected with op code validation error.",{cause:n,name:"UserOperationRejectedByOpCodeError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Gt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});var qt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:n,name:"UserOperationOutOfTimeRangeError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(qt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});var zt=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["An error occurred while executing user operation: ".concat(null==n?void 0:n.shortMessage),{cause:n,name:"UnknownBundlerError"}])}return b(t,e),p(t)}(ae),Ft=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["User Operation verification gas limit exceeded.",{cause:n,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Ft,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});var Ht=function(e){function t(e){var n=e.cause;return h(this,t),m(this,t,["User Operation verification gas limit is too low.",{cause:n,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"}])}return b(t,e),p(t)}(ae);Object.defineProperty(Ht,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});var Wt=function(e){function t(e,n){var r,a=n.callData,i=n.callGasLimit,o=n.docsPath,s=n.factory,c=n.factoryData,u=n.initCode,l=n.maxFeePerGas,f=n.maxPriorityFeePerGas,p=n.nonce,v=n.paymaster,y=n.paymasterAndData,b=n.paymasterData,g=n.paymasterPostOpGasLimit,w=n.paymasterVerificationGasLimit,k=n.preVerificationGas,I=n.sender,x=n.signature,A=n.verificationGasLimit;h(this,t);var S=ie({callData:a,callGasLimit:i,factory:s,factoryData:c,initCode:u,maxFeePerGas:void 0!==l&&"".concat(oe(l)," gwei"),maxPriorityFeePerGas:void 0!==f&&"".concat(oe(f)," gwei"),nonce:p,paymaster:v,paymasterAndData:y,paymasterData:b,paymasterPostOpGasLimit:g,paymasterVerificationGasLimit:w,preVerificationGas:k,sender:I,signature:x,verificationGasLimit:A});return r=m(this,t,[e.shortMessage,{cause:e,docsPath:o,metaMessages:[].concat(d(e.metaMessages?[].concat(d(e.metaMessages),[" "]):[]),["Request Arguments:",S]).filter(Boolean),name:"UserOperationExecutionError"}]),Object.defineProperty(r,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.cause=e,r}return b(t,e),p(t)}(ae),Kt=function(e){function t(e){var n=e.hash;return h(this,t),m(this,t,['User Operation receipt with hash "'.concat(n,'" could not be found. The User Operation may not have been processed yet.'),{name:"UserOperationReceiptNotFoundError"}])}return b(t,e),p(t)}(ae),Vt=function(e){function t(e){var n=e.hash;return h(this,t),m(this,t,['User Operation with hash "'.concat(n,'" could not be found.'),{name:"UserOperationNotFoundError"}])}return b(t,e),p(t)}(ae),Jt=function(e){function t(e){var n=e.hash;return h(this,t),m(this,t,['Timed out while waiting for User Operation with hash "'.concat(n,'" to be confirmed.'),{name:"WaitForUserOperationReceiptTimeoutError"}])}return b(t,e),p(t)}(ae),Qt=[lt,It,At,Pt,Et,Ct,Lt,qt,Bt,Rt,Gt];function $t(t,n){var r=n.calls,a=n.docsPath,i=l(n,e),o=function(){var e=function(e,t){var n=(e.details||"").toLowerCase();if(ut.message.test(n))return new ut({cause:e});if(dt.message.test(n))return new dt({cause:e});if(ft.message.test(n))return new ft({cause:e});if(pt.message.test(n))return new pt({cause:e});if(ht.message.test(n))return new ht({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(mt.message.test(n))return new mt({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(vt.message.test(n))return new vt({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(yt.message.test(n))return new yt({cause:e});if(bt.message.test(n))return new bt({cause:e});if(wt.message.test(n))return new wt({cause:e,nonce:t.nonce});if(gt.message.test(n))return new gt({cause:e});if(kt.message.test(n))return new kt({cause:e});if(xt.message.test(n))return new xt({cause:e});if(At.message.test(n))return new At({cause:e});if(St.message.test(n))return new St({cause:e});if(Ot.message.test(n))return new Ot({cause:e});if(Tt.message.test(n))return new Tt({cause:e});if(jt.message.test(n))return new jt({cause:e});if(_t.message.test(n))return new _t({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Mt.message.test(n))return new Mt({cause:e});if(Dt.message.test(n))return new Dt({cause:e});if(Ut.message.test(n))return new Ut({cause:e});if(Nt.message.test(n))return new Nt({cause:e});if(Ft.message.test(n))return new Ft({cause:e});if(Ht.message.test(n))return new Ht({cause:e});var r=e.walk(function(e){return Qt.some(function(t){return t.code===e.code})});if(r){if(r.code===lt.code)return new lt({cause:e,data:r.data,message:r.details});if(r.code===It.code)return new It({cause:e});if(r.code===At.code)return new At({cause:e});if(r.code===Pt.code)return new Pt({cause:e});if(r.code===Et.code)return new Et({cause:e});if(r.code===Ct.code)return new Ct({cause:e});if(r.code===Lt.code)return new Lt({cause:e});if(r.code===qt.code)return new qt({cause:e});if(r.code===Bt.code)return new Bt({cause:e});if(r.code===Rt.code)return new Rt({cause:e});if(r.code===Gt.code)return new Gt({cause:e})}return new zt({cause:e})}(t,i);if(r&&e instanceof lt){var n=function(e){var t;return e.walk(function(e){var n,r=e;if("string"==typeof r.data||"string"==typeof(null===(n=r.data)||void 0===n?void 0:n.revertData)||!(r instanceof ae)&&"string"==typeof r.message){var a,i,o,s=null===(a=(i=(null===(o=r.data)||void 0===o?void 0:o.revertData)||r.data||r.message).match)||void 0===a?void 0:a.call(i,/(0x[A-Za-z0-9]*)/);if(s)return t=s[1],!0}return!1}),t}(e),a=null==r?void 0:r.filter(function(e){return e.abi});if(n&&a.length>0)return function(e){var t=e.calls,n=e.revertData,r=function(){var e=null==t?void 0:t.filter(function(e){return Boolean(e.abi)});if(1===e.length)return e[0];var r=e.filter(function(e){try{return Boolean(se({abi:e.abi,data:n}))}catch(t){return!1}});return 1===r.length?r[0]:{abi:[],functionName:e.reduce(function(e,t){return"".concat(e?"".concat(e," | "):"").concat(t.functionName)},""),args:void 0,to:void 0}}(),a=r.abi,i=r.functionName,o=r.args,s=r.to,c="0x"===n?new ce({functionName:i}):new ue({abi:a,data:n,functionName:i});return new le(c,{abi:a,args:o,contractAddress:s,functionName:i})}({calls:a,revertData:n})}return e}();return new Wt(o,k({docsPath:a},i))}function Zt(e){var t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function Yt(e){var t,n={};return void 0!==e.callData&&(n.callData=e.callData),void 0!==e.callGasLimit&&(n.callGasLimit=D(e.callGasLimit)),void 0!==e.factory&&(n.factory=e.factory),void 0!==e.factoryData&&(n.factoryData=e.factoryData),void 0!==e.initCode&&(n.initCode=e.initCode),void 0!==e.maxFeePerGas&&(n.maxFeePerGas=D(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=D(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(n.nonce=D(e.nonce)),void 0!==e.paymaster&&(n.paymaster=e.paymaster),void 0!==e.paymasterAndData&&(n.paymasterAndData=e.paymasterAndData||"0x"),void 0!==e.paymasterData&&(n.paymasterData=e.paymasterData),void 0!==e.paymasterPostOpGasLimit&&(n.paymasterPostOpGasLimit=D(e.paymasterPostOpGasLimit)),void 0!==e.paymasterVerificationGasLimit&&(n.paymasterVerificationGasLimit=D(e.paymasterVerificationGasLimit)),void 0!==e.preVerificationGas&&(n.preVerificationGas=D(e.preVerificationGas)),void 0!==e.sender&&(n.sender=e.sender),void 0!==e.signature&&(n.signature=e.signature),void 0!==e.verificationGasLimit&&(n.verificationGasLimit=D(e.verificationGasLimit)),void 0!==e.authorization&&(n.eip7702Auth={address:(t=e.authorization).address,chainId:D(t.chainId),nonce:D(t.nonce),r:t.r?D(BigInt(t.r),{size:32}):C("0x",{size:32}),s:t.s?D(BigInt(t.s),{size:32}):C("0x",{size:32}),yParity:t.yParity?D(t.yParity,{size:1}):C("0x",{size:32})}),n}function Xt(e,t){return en.apply(this,arguments)}function en(){return(en=P(A().m(function e(t,a){var i,o,s,c,u,d,f,p,h,m,v,y;return A().w(function(e){for(;;)switch(e.n){case 0:return c=a.chainId,u=a.entryPointAddress,d=a.context,f=l(a,n),p=Yt(f),e.n=1,t.request({method:"pm_getPaymasterData",params:[k(k({},p),{},{callGasLimit:null!==(i=p.callGasLimit)&&void 0!==i?i:"0x0",verificationGasLimit:null!==(o=p.verificationGasLimit)&&void 0!==o?o:"0x0",preVerificationGas:null!==(s=p.preVerificationGas)&&void 0!==s?s:"0x0"}),u,D(c),d]});case 1:return h=e.v,m=h.paymasterPostOpGasLimit,v=h.paymasterVerificationGasLimit,y=l(h,r),e.a(2,k(k(k({},y),m&&{paymasterPostOpGasLimit:de(m)}),v&&{paymasterVerificationGasLimit:de(v)}))}},e)}))).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=P(A().m(function e(t,n){var r,o,s,c,u,d,f,p,h,m,v,y;return A().w(function(e){for(;;)switch(e.n){case 0:return c=n.chainId,u=n.entryPointAddress,d=n.context,f=l(n,a),p=Yt(f),e.n=1,t.request({method:"pm_getPaymasterStubData",params:[k(k({},p),{},{callGasLimit:null!==(r=p.callGasLimit)&&void 0!==r?r:"0x0",verificationGasLimit:null!==(o=p.verificationGasLimit)&&void 0!==o?o:"0x0",preVerificationGas:null!==(s=p.preVerificationGas)&&void 0!==s?s:"0x0"}),u,D(c),d]});case 1:return h=e.v,m=h.paymasterPostOpGasLimit,v=h.paymasterVerificationGasLimit,y=l(h,i),e.a(2,k(k(k({},y),m&&{paymasterPostOpGasLimit:de(m)}),v&&{paymasterVerificationGasLimit:de(v)}))}},e)}))).apply(this,arguments)}var rn=["factory","fees","gas","paymaster","nonce","signature","authorization"];function an(e,t){return on.apply(this,arguments)}function on(){return on=P(A().m(function e(t,n){var r,a,i,s,c,d,f,p,h,m,v,y,b,g,w,I,x,S,O,T,_,C,j,L,M,D,N,U,B,R,G,q,z,F,H,W,K,V,J,$,Z,Y,X,te,ne,re,ae,ie,oe,se;return A().w(function(e){for(;;)switch(e.n){case 0:if(D=function(){return(D=P(A().m(function e(){var n;return A().w(function(e){for(;;)switch(e.n){case 0:if(!L){e.n=1;break}return e.a(2,L);case 1:if(!t.chain){e.n=2;break}return e.a(2,t.chain.id);case 2:return e.n=3,ee(t,ve,"getChainId")({});case 3:return n=e.v,L=n,e.a(2,L)}},e)}))).apply(this,arguments)},M=function(){return D.apply(this,arguments)},i=(a=n).account,s=void 0===i?t.account:i,c=a.parameters,d=void 0===c?rn:c,f=a.stateOverride,s){e.n=1;break}throw new fe;case 1:return p=pe(s),h=t,m=null!==(r=a.paymaster)&&void 0!==r?r:null==h?void 0:h.paymaster,v="string"==typeof m?m:void 0,y=function(){if(!0===m)return{getPaymasterStubData:function(e){return ee(h,tn,"getPaymasterStubData")(e)},getPaymasterData:function(e){return ee(h,Xt,"getPaymasterData")(e)}};if("object"===u(m)){var e=m.getPaymasterStubData,t=m.getPaymasterData;return{getPaymasterStubData:t&&e?e:t,getPaymasterData:t&&e?t:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}}(),b=y.getPaymasterStubData,g=y.getPaymasterData,w=a.paymasterContext?a.paymasterContext:null==h?void 0:h.paymasterContext,I=k(k({},a),{},{paymaster:v,sender:p.address}),e.n=2,Promise.all([P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:if(!a.calls){e.n=1;break}return e.a(2,p.encodeCalls(a.calls.map(function(e){var t=e;return t.abi?{data:he(t),to:t.to,value:t.value}:t})));case 1:return e.a(2,a.callData)}},e)}))(),P(A().m(function e(){var t,n,r;return A().w(function(e){for(;;)switch(e.n){case 0:if(d.includes("factory")){e.n=1;break}return e.a(2,void 0);case 1:if(!a.initCode){e.n=2;break}return e.a(2,{initCode:a.initCode});case 2:if(!a.factory||!a.factoryData){e.n=3;break}return e.a(2,{factory:a.factory,factoryData:a.factoryData});case 3:return e.n=4,p.getFactoryArgs();case 4:if(t=e.v,n=t.factory,r=t.factoryData,"0.6"!==p.entryPoint.version){e.n=5;break}return e.a(2,{initCode:n&&r?Q([n,r]):void 0});case 5:return e.a(2,{factory:n,factoryData:r})}},e)}))(),P(A().m(function e(){var n,r,i,o,s;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if(d.includes("fees")){e.n=1;break}return e.a(2,void 0);case 1:if("bigint"!=typeof a.maxFeePerGas||"bigint"!=typeof a.maxPriorityFeePerGas){e.n=2;break}return e.a(2,I);case 2:if(null==h||null===(n=h.userOperation)||void 0===n||!n.estimateFeesPerGas){e.n=4;break}return e.n=3,h.userOperation.estimateFeesPerGas({account:p,bundlerClient:h,userOperation:I});case 3:return r=e.v,e.a(2,k(k({},I),r));case 4:return e.p=4,o=null!==(i=h.client)&&void 0!==i?i:t,e.n=5,ee(o,me,"estimateFeesPerGas")({chain:o.chain,type:"eip1559"});case 5:return s=e.v,e.a(2,{maxFeePerGas:"bigint"==typeof a.maxFeePerGas?a.maxFeePerGas:BigInt(2n*s.maxFeePerGas),maxPriorityFeePerGas:"bigint"==typeof a.maxPriorityFeePerGas?a.maxPriorityFeePerGas:BigInt(2n*s.maxPriorityFeePerGas)});case 6:return e.p=6,e.v,e.a(2,void 0)}},e,null,[[4,6]])}))(),P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:if(d.includes("nonce")){e.n=1;break}return e.a(2,void 0);case 1:if("bigint"!=typeof a.nonce){e.n=2;break}return e.a(2,a.nonce);case 2:return e.a(2,p.getNonce())}},e)}))(),P(A().m(function e(){var t,n;return A().w(function(e){for(;;)switch(e.n){case 0:if(d.includes("authorization")){e.n=1;break}return e.a(2,void 0);case 1:if("object"!==u(a.authorization)){e.n=2;break}return e.a(2,a.authorization);case 2:if(!(n=p.authorization)){e.n=4;break}return e.n=3,p.isDeployed();case 3:n=!e.v;case 4:if(!n){e.n=6;break}return e.n=5,qe(p.client,p.authorization);case 5:return t=e.v,e.a(2,k(k({},t),{},{r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}));case 6:return e.a(2,void 0)}},e)}))()]);case 2:if(x=e.v,S=E(x,5),O=S[0],T=S[1],_=S[2],C=S[3],j=S[4],void 0!==O&&(I.callData=O),void 0!==T&&(I=k(k({},I),T)),void 0!==_&&(I=k(k({},I),_)),void 0!==C&&(I.nonce=C),void 0!==j&&(I.authorization=j),!d.includes("signature")){e.n=5;break}if(void 0===a.signature){e.n=3;break}I.signature=a.signature,e.n=5;break;case 3:return e.n=4,p.getStubSignature(I);case 4:I.signature=e.v;case 5:if("0.6"!==p.entryPoint.version||I.initCode||(I.initCode="0x"),N=!1,!d.includes("paymaster")||!b||v||a.paymasterAndData){e.n=8;break}return Z=b,Y=k,e.n=6,M();case 6:return X=e.v,te=p.entryPoint.address,ne=w,e.n=7,Z(Y({chainId:X,entryPointAddress:te,context:ne},I));case 7:U=e.v,B=U.isFinal,R=void 0!==B&&B,U.sponsor,G=l(U,o),N=R,I=k(k({},I),G);case 8:if("0.6"!==p.entryPoint.version||I.paymasterAndData||(I.paymasterAndData="0x"),!d.includes("gas")){e.n=12;break}if(null===(q=p.userOperation)||void 0===q||!q.estimateGas){e.n=10;break}return e.n=9,p.userOperation.estimateGas(I);case 9:z=e.v,I=k(k({},I),z);case 10:if(!(void 0===I.callGasLimit||void 0===I.preVerificationGas||void 0===I.verificationGasLimit||I.paymaster&&void 0===I.paymasterPostOpGasLimit||I.paymaster&&void 0===I.paymasterVerificationGasLimit)){e.n=12;break}return e.n=11,ee(h,sn,"estimateUserOperationGas")(k(k({account:p,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:f},I.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{}),I));case 11:J=e.v,I=k(k({},I),{},{callGasLimit:null!==(F=I.callGasLimit)&&void 0!==F?F:J.callGasLimit,preVerificationGas:null!==(H=I.preVerificationGas)&&void 0!==H?H:J.preVerificationGas,verificationGasLimit:null!==(W=I.verificationGasLimit)&&void 0!==W?W:J.verificationGasLimit,paymasterPostOpGasLimit:null!==(K=I.paymasterPostOpGasLimit)&&void 0!==K?K:J.paymasterPostOpGasLimit,paymasterVerificationGasLimit:null!==(V=I.paymasterVerificationGasLimit)&&void 0!==V?V:J.paymasterVerificationGasLimit});case 12:if(!d.includes("paymaster")||!g||v||a.paymasterAndData||N){e.n=15;break}return re=g,ae=k,e.n=13,M();case 13:return ie=e.v,oe=p.entryPoint.address,se=w,e.n=14,re(ae({chainId:ie,entryPointAddress:oe,context:se},I));case 14:$=e.v,I=k(k({},I),$);case 15:return delete I.calls,delete I.parameters,delete I.paymasterContext,"string"!=typeof I.paymaster&&delete I.paymaster,e.a(2,I)}},e)})),on.apply(this,arguments)}function sn(e,t){return cn.apply(this,arguments)}function cn(){return cn=P(A().m(function e(t,n){var r,a,i,o,s,c,u,l,d,f,p,h,m;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=n.account,a=void 0===r?t.account:r,i=n.entryPointAddress,o=n.stateOverride,a||n.sender){e.n=1;break}throw new fe;case 1:if(s=a?pe(a):void 0,c=ye(o),!s){e.n=3;break}return e.n=2,ee(t,an,"prepareUserOperation")(k(k({},n),{},{parameters:["authorization","factory","nonce","paymaster","signature"]}));case 2:h=e.v,e.n=4;break;case 3:h=n;case 4:return u=h,e.p=5,d=[Yt(u),null!=i?i:null==s||null===(l=s.entryPoint)||void 0===l?void 0:l.address],e.n=6,t.request({method:"eth_estimateUserOperationGas",params:c?[].concat(d,[c]):[].concat(d)});case 6:return f=e.v,e.a(2,Zt(f));case 7:throw e.p=7,m=e.v,p=n.calls,$t(m,k(k({},u),p?{calls:p}:{}));case 8:return e.a(2)}},e,null,[[5,7]])})),cn.apply(this,arguments)}function un(e){var t=k({},e);return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}function ln(){return(ln=P(A().m(function e(t,n){var r,a,i,o,s,c,u;return A().w(function(e){for(;;)switch(e.n){case 0:return r=n.hash,e.n=1,t.request({method:"eth_getUserOperationByHash",params:[r]},{dedupe:!0});case 1:if(a=e.v){e.n=2;break}throw new Vt({hash:r});case 2:return i=a.blockHash,o=a.blockNumber,s=a.entryPoint,c=a.transactionHash,u=a.userOperation,e.a(2,{blockHash:i,blockNumber:BigInt(o),entryPoint:s,transactionHash:c,userOperation:un(u)})}},e)}))).apply(this,arguments)}function dn(e){var t=k({},e);return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(function(e){return be(e)})),e.receipt&&(t.receipt=ge(t.receipt)),t}function fn(e,t){return pn.apply(this,arguments)}function pn(){return(pn=P(A().m(function e(t,n){var r,a;return A().w(function(e){for(;;)switch(e.n){case 0:return r=n.hash,e.n=1,t.request({method:"eth_getUserOperationReceipt",params:[r]},{dedupe:!0});case 1:if(a=e.v){e.n=2;break}throw new Kt({hash:r});case 2:return e.a(2,dn(a))}},e)}))).apply(this,arguments)}function hn(){return hn=P(A().m(function e(t,n){var r,a,i,o,s,c,u,l,d,f,p,h,m;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a=n.account,i=void 0===a?t.account:a,o=n.entryPointAddress,i||n.sender){e.n=1;break}throw new fe;case 1:if(!(s=i?pe(i):void 0)){e.n=3;break}return e.n=2,ee(t,an,"prepareUserOperation")(n);case 2:p=e.v,e.n=4;break;case 3:p=n;case 4:if(c=p,h=n.signature){e.n=6;break}return e.n=5,null==s||null===(r=s.signUserOperation)||void 0===r?void 0:r.call(s,c);case 5:h=e.v;case 6:return u=h,l=Yt(k(k({},c),{},{signature:u})),e.p=7,e.n=8,t.request({method:"eth_sendUserOperation",params:[l,null!=o?o:null==s||null===(d=s.entryPoint)||void 0===d?void 0:d.address]},{retryCount:0});case 8:return e.a(2,e.v);case 9:throw e.p=9,m=e.v,f=n.calls,$t(m,k(k(k({},c),f?{calls:f}:{}),{},{signature:u}));case 10:return e.a(2)}},e,null,[[7,9]])})),hn.apply(this,arguments)}function mn(e){return{estimateUserOperationGas:function(t){return sn(e,t)},getChainId:function(){return ve(e)},getSupportedEntryPoints:function(){return function(e){return e.request({method:"eth_supportedEntryPoints"})}(e)},getUserOperation:function(t){return function(e,t){return ln.apply(this,arguments)}(e,t)},getUserOperationReceipt:function(t){return fn(e,t)},prepareUserOperation:function(t){return an(e,t)},sendUserOperation:function(t){return function(e,t){return hn.apply(this,arguments)}(e,t)},waitForUserOperationReceipt:function(t){return function(e,t){var n=t.hash,r=t.pollingInterval,a=void 0===r?e.pollingInterval:r,i=t.retryCount,o=t.timeout,s=void 0===o?12e4:o,c=0,u=we(["waitForUserOperationReceipt",e.uid,n]);return new Promise(function(t,r){var o=ke(u,{resolve:t,reject:r},function(t){var r=function(e){u(),e(),o()},u=Ie(P(A().m(function a(){var o,s,u;return A().w(function(a){for(;;)switch(a.p=a.n){case 0:return i&&c>=i&&r(function(){return t.reject(new Jt({hash:n}))}),a.p=1,a.n=2,ee(e,fn,"getUserOperationReceipt")({hash:n});case 2:o=a.v,r(function(){return t.resolve(o)}),a.n=4;break;case 3:a.p=3,u=a.v,"UserOperationReceiptNotFoundError"!==(s=u).name&&r(function(){return t.reject(s)});case 4:c++;case 5:return a.a(2)}},a,null,[[1,3]])})),{emitOnBegin:!0,interval:a});return s&&setTimeout(function(){return r(function(){return t.reject(new Jt({hash:n}))})},s),u})})}(e,t)}}}function vn(e,t){var n;try{n=e()}catch(r){return}return{getItem:function(e){var t,r=function(e){return null===e?null:JSON.parse(e,void 0)},a=null!=(t=n.getItem(e))?t:null;return a instanceof Promise?a.then(r):r(a)},setItem:function(e,t){return n.setItem(e,JSON.stringify(t,void 0))},removeItem:function(e){return n.removeItem(e)}}}var yn=function(e){return function(t){try{var n=e(t);return n instanceof Promise?n:{then:function(e){return yn(e)(n)},catch:function(e){return this}}}catch(r){return{then:function(e){return this},catch:function(e){return yn(e)(r)}}}}},bn=function(e,t){return function(n,r,a){var i=k({storage:vn(function(){return localStorage}),partialize:function(e){return e},version:0,merge:function(e,t){return k(k({},t),e)}},t),o=!1,s=new Set,c=new Set,u=i.storage;if(!u)return e(function(){console.warn("[zustand persist middleware] Unable to update item '".concat(i.name,"', the given storage is currently unavailable.")),n.apply(void 0,arguments)},r,a);var l=function(){var e=i.partialize(k({},r()));return u.setItem(i.name,{state:e,version:i.version})},d=a.setState;a.setState=function(e,t){d(e,t),l()};var f,p=e(function(){n.apply(void 0,arguments),l()},r,a);a.getInitialState=function(){return p};var h=function(){var e,t;if(u){o=!1,s.forEach(function(e){var t;return e(null!=(t=r())?t:p)});var a=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=r())?e:p))||void 0;return yn(u.getItem.bind(u))(i.name).then(function(e){if(e){if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];if(i.migrate){var t=i.migrate(e.state,e.version);return t instanceof Promise?t.then(function(e){return[!0,e]}):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(function(e){var t,a=E(e,2),o=a[0],s=a[1];if(f=i.merge(s,null!=(t=r())?t:p),n(f,!0),o)return l()}).then(function(){null==a||a(f,void 0),f=r(),o=!0,c.forEach(function(e){return e(f)})}).catch(function(e){null==a||a(void 0,e)})}};return a.persist={setOptions:function(e){i=k(k({},i),e),e.storage&&(u=e.storage)},clearStorage:function(){null==u||u.removeItem(i.name)},getOptions:function(){return i},rehydrate:function(){return h()},hasHydrated:function(){return o},onHydrate:function(e){return s.add(e),function(){s.delete(e)}},onFinishHydration:function(e){return c.add(e),function(){c.delete(e)}}},i.skipHydration||h(),f||p}},gn=function(e){var t,n=new Set,r=function(e,r){var a="function"==typeof e?e(t):e;if(!Object.is(a,t)){var i=t;t=(null!=r?r:"object"!==u(a)||null===a)?a:Object.assign({},t,a),n.forEach(function(e){return e(t,i)})}},a=function(){return t},i={setState:r,getState:a,getInitialState:function(){return o},subscribe:function(e){return n.add(e),function(){return n.delete(e)}}},o=t=e(r,a,i);return i},wn=function(e){return e?gn(e):gn},kn="4.3.6",In="@coinbase/wallet-sdk",xn=function(){return{chains:[]}},An=function(){return{keys:{}}},Sn=function(){return{account:{}}},On=function(){return{subAccount:void 0}},Pn=function(){return{subAccountConfig:{}}},En=function(){return{spendPermissions:[]}},Tn=function(){return{config:{version:kn}}},_n=wn(bn(function(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},xn.apply(void 0,arguments)),An.apply(void 0,arguments)),Sn.apply(void 0,arguments)),On.apply(void 0,arguments)),En.apply(void 0,arguments)),Tn.apply(void 0,arguments)),Pn.apply(void 0,arguments))},{name:"cbwsdk.store",storage:vn(function(){return localStorage}),partialize:function(e){return{chains:e.chains,keys:e.keys,account:e.account,subAccount:e.subAccount,spendPermissions:e.spendPermissions,config:e.config}}})),Cn={get:function(){return _n.getState().config},set:function(e){_n.setState(function(t){return{config:Object.assign(Object.assign({},t.config),e)}})}},jn={subAccounts:{get:function(){return _n.getState().subAccount},set:function(e){_n.setState(function(t){return{subAccount:t.subAccount?Object.assign(Object.assign({},t.subAccount),e):Object.assign({address:e.address},e)}})},clear:function(){_n.setState({subAccount:void 0})}},subAccountsConfig:{get:function(){return _n.getState().subAccountConfig},set:function(e){_n.setState(function(t){return{subAccountConfig:Object.assign(Object.assign({},t.subAccountConfig),e)}})},clear:function(){_n.setState({subAccountConfig:{}})}},spendPermissions:{get:function(){return _n.getState().spendPermissions},set:function(e){_n.setState({spendPermissions:e})},clear:function(){_n.setState({spendPermissions:[]})}},account:{get:function(){return _n.getState().account},set:function(e){_n.setState(function(t){return{account:Object.assign(Object.assign({},t.account),e)}})},clear:function(){_n.setState({account:{}})}},chains:{get:function(){return _n.getState().chains},set:function(e){_n.setState({chains:e})},clear:function(){_n.setState({chains:[]})}},keys:{get:function(e){return _n.getState().keys[e]},set:function(e,t){_n.setState(function(n){return{keys:Object.assign(Object.assign({},n.keys),I({},e,t))}})},clear:function(){_n.setState({keys:{}})}},config:Cn},Ln=Object.assign(Object.assign({},_n),jn),Mn=function(){return new Promise(function(e,t){if(window.ClientAnalytics)return e();try{var n=document.createElement("script");n.textContent='!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ClientAnalytics=t():e.ClientAnalytics=t()}(this,(function(){return(()=>{var e={792:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},562:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(i>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},335:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},762:(e,t,n)=>{var r,i,a,o,s;r=n(562),i=n(792).utf8,a=n(335),o=n(792).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,d=-1732584194,p=271733878,m=0;m<n.length;m++)n[m]=16711935&(n[m]<<8|n[m]>>>24)|4278255360&(n[m]<<24|n[m]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var f=s._ff,v=s._gg,g=s._hh,b=s._ii;for(m=0;m<n.length;m+=16){var h=u,w=l,y=d,T=p;u=f(u,l,d,p,n[m+0],7,-680876936),p=f(p,u,l,d,n[m+1],12,-389564586),d=f(d,p,u,l,n[m+2],17,606105819),l=f(l,d,p,u,n[m+3],22,-1044525330),u=f(u,l,d,p,n[m+4],7,-176418897),p=f(p,u,l,d,n[m+5],12,1200080426),d=f(d,p,u,l,n[m+6],17,-1473231341),l=f(l,d,p,u,n[m+7],22,-45705983),u=f(u,l,d,p,n[m+8],7,1770035416),p=f(p,u,l,d,n[m+9],12,-1958414417),d=f(d,p,u,l,n[m+10],17,-42063),l=f(l,d,p,u,n[m+11],22,-1990404162),u=f(u,l,d,p,n[m+12],7,1804603682),p=f(p,u,l,d,n[m+13],12,-40341101),d=f(d,p,u,l,n[m+14],17,-1502002290),u=v(u,l=f(l,d,p,u,n[m+15],22,1236535329),d,p,n[m+1],5,-165796510),p=v(p,u,l,d,n[m+6],9,-1069501632),d=v(d,p,u,l,n[m+11],14,643717713),l=v(l,d,p,u,n[m+0],20,-373897302),u=v(u,l,d,p,n[m+5],5,-701558691),p=v(p,u,l,d,n[m+10],9,38016083),d=v(d,p,u,l,n[m+15],14,-660478335),l=v(l,d,p,u,n[m+4],20,-405537848),u=v(u,l,d,p,n[m+9],5,568446438),p=v(p,u,l,d,n[m+14],9,-1019803690),d=v(d,p,u,l,n[m+3],14,-187363961),l=v(l,d,p,u,n[m+8],20,1163531501),u=v(u,l,d,p,n[m+13],5,-1444681467),p=v(p,u,l,d,n[m+2],9,-51403784),d=v(d,p,u,l,n[m+7],14,1735328473),u=g(u,l=v(l,d,p,u,n[m+12],20,-1926607734),d,p,n[m+5],4,-378558),p=g(p,u,l,d,n[m+8],11,-2022574463),d=g(d,p,u,l,n[m+11],16,1839030562),l=g(l,d,p,u,n[m+14],23,-35309556),u=g(u,l,d,p,n[m+1],4,-1530992060),p=g(p,u,l,d,n[m+4],11,1272893353),d=g(d,p,u,l,n[m+7],16,-155497632),l=g(l,d,p,u,n[m+10],23,-1094730640),u=g(u,l,d,p,n[m+13],4,681279174),p=g(p,u,l,d,n[m+0],11,-358537222),d=g(d,p,u,l,n[m+3],16,-722521979),l=g(l,d,p,u,n[m+6],23,76029189),u=g(u,l,d,p,n[m+9],4,-640364487),p=g(p,u,l,d,n[m+12],11,-421815835),d=g(d,p,u,l,n[m+15],16,530742520),u=b(u,l=g(l,d,p,u,n[m+2],23,-995338651),d,p,n[m+0],6,-198630844),p=b(p,u,l,d,n[m+7],10,1126891415),d=b(d,p,u,l,n[m+14],15,-1416354905),l=b(l,d,p,u,n[m+5],21,-57434055),u=b(u,l,d,p,n[m+12],6,1700485571),p=b(p,u,l,d,n[m+3],10,-1894986606),d=b(d,p,u,l,n[m+10],15,-1051523),l=b(l,d,p,u,n[m+1],21,-2054922799),u=b(u,l,d,p,n[m+8],6,1873313359),p=b(p,u,l,d,n[m+15],10,-30611744),d=b(d,p,u,l,n[m+6],15,-1560198380),l=b(l,d,p,u,n[m+13],21,1309151649),u=b(u,l,d,p,n[m+4],6,-145523070),p=b(p,u,l,d,n[m+11],10,-1120210379),d=b(d,p,u,l,n[m+2],15,718787259),l=b(l,d,p,u,n[m+9],21,-343485551),u=u+h>>>0,l=l+w>>>0,d=d+y>>>0,p=p+T>>>0}return r.endian([u,l,d,p])})._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},2:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Perfume:()=>ze,incrementUjNavigation:()=>Le,markStep:()=>Re,markStepOnce:()=>qe});var r,i,a={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{},enableNavigationTracking:!0},o=window,s=o.console,c=o.navigator,u=o.performance,l=function(){return c.deviceMemory},d=function(){return c.hardwareConcurrency},p="mark.",m=function(){return u&&!!u.getEntriesByType&&!!u.now&&!!u.mark},f="4g",v=!1,g={},b={value:0},h={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},w={value:0},y={value:0},T={},k={isHidden:!1,didChange:!1},_=function(){k.isHidden=!1,document.hidden&&(k.isHidden=document.hidden,k.didChange=!0)},S=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){s.warn("Perfume.js:",e)}return null},E=function(){return!!(d()&&d()<=4)||!!(l()&&l()<=4)},x=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return E()||t}},O=function(e){return parseFloat(e.toFixed(4))},j=function(e){return"number"!=typeof e?null:O(e/Math.pow(1024,2))},N=function(e,t,n,r,i){var s,u=function(){a.analyticsTracker&&(k.isHidden&&!["CLS","INP"].includes(e)||a.analyticsTracker({attribution:r,metricName:e,data:t,navigatorInformation:c?{deviceMemory:l()||0,hardwareConcurrency:d()||0,serviceWorkerStatus:"serviceWorker"in c?c.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:E(),isLowEndExperience:x(f,v)}:{},rating:n,navigationType:i}))};["CLS","INP"].includes(e)?u():(s=u,"requestIdleCallback"in o?o.requestIdleCallback(s,{timeout:3e3}):s())},I=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<b.value)){var t=e.duration-50;t>0&&(w.value+=t,y.value+=t)}}))};!function(e){e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable"}(r||(r={}));var P,M,B,C,D,A=((i={})[r.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},i[r.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},i[r.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},i[r.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},i[r.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4},i),L={RT:[100,200],TBT:[200,600],NTBT:[200,600]},U=function(e,t){return L[e]?t<=L[e][0]?"good":t<=L[e][1]?"needsImprovement":"poor":null},R=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=O(t[e]))})),N(e,t,null,n||{})},q=function(e){var t=e.attribution,n=e.name,r=e.rating,i=e.value,o=e.navigationType;"FCP"===n&&(b.value=i),["FCP","LCP"].includes(n)&&!T[0]&&(T[0]=S("longtask",I)),"FID"===n&&setTimeout((function(){k.didChange||(q({attribution:t,name:"TBT",rating:U("TBT",w.value),value:w.value,navigationType:o}),R("dataConsumption",h.value))}),1e4);var s=O(i);s<=a.maxTime&&s>=0&&N(n,s,r,t,o)},F=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},z=function(e){if("loading"===document.readyState)return"loading";var t=F();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},K=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},$=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:K(r)+(r.className&&r.className.length?"."+r.className.replace(/\\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},Q=-1,W=function(){return Q},H=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Q=t.timeStamp,e(t))}),!0)},V=function(){var e=F();return e&&e.activationStart||0},J=function(e,t){var n=F(),r="navigate";return W()>=0?r="back-forward-cache":n&&(r=document.prerendering||V()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},X=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},G=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Z=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Y=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ee=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},te=-1,ne=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},re=function(e){"hidden"===document.visibilityState&&te>-1&&(te="visibilitychange"===e.type?e.timeStamp:0,ae())},ie=function(){addEventListener("visibilitychange",re,!0),addEventListener("prerenderingchange",re,!0)},ae=function(){removeEventListener("visibilitychange",re,!0),removeEventListener("prerenderingchange",re,!0)},oe=function(){return te<0&&(te=ne(),ie(),H((function(){setTimeout((function(){te=ne(),ie()}),0)}))),{get firstHiddenTime(){return te}}},se=function(e,t){t=t||{},ee((function(){var n,r=[1800,3e3],i=oe(),a=J("FCP"),o=X("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=Math.max(e.startTime-V(),0),a.entries.push(e),n(!0)))}))}));o&&(n=Z(e,a,r,t.reportAllChanges),H((function(i){a=J("FCP"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,n(!0)}))})))}))},ce={passive:!0,capture:!0},ue=new Date,le=function(e,t){P||(P=t,M=e,B=new Date,me(removeEventListener),de())},de=function(){if(M>=0&&M<B-ue){var e={entryType:"first-input",name:P.type,target:P.target,cancelable:P.cancelable,startTime:P.timeStamp,processingStart:P.timeStamp+M};C.forEach((function(t){t(e)})),C=[]}},pe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){le(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,ce),removeEventListener("pointercancel",r,ce)};addEventListener("pointerup",n,ce),addEventListener("pointercancel",r,ce)}(t,e):le(t,e)}},me=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,pe,ce)}))},fe=0,ve=1/0,ge=0,be=function(e){e.forEach((function(e){e.interactionId&&(ve=Math.min(ve,e.interactionId),ge=Math.max(ge,e.interactionId),fe=ge?(ge-ve)/7+1:0)}))},he=function(){return D?fe:performance.interactionCount||0},we=0,ye=function(){return he()-we},Te=[],ke={},_e=function(e){var t=Te[Te.length-1],n=ke[e.interactionId];if(n||Te.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};ke[r.id]=r,Te.push(r)}Te.sort((function(e,t){return t.latency-e.latency})),Te.splice(10).forEach((function(e){delete ke[e.id]}))}},Se={},Ee=function e(t){document.prerendering?ee((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},xe=function(e,t){t=t||{};var n=[800,1800],r=J("TTFB"),i=Z(e,r,n,t.reportAllChanges);Ee((function(){var a=F();if(a){var o=a.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-V(),0),r.entries=[a],i(!0),H((function(){r=J("TTFB",0),(i=Z(e,r,n,t.reportAllChanges))(!0)}))}}))},Oe=function(e){e.forEach((function(e){e.identifier&&q({attribution:{identifier:e.identifier},name:"ET",rating:null,value:e.startTime})}))},je=function(e){e.forEach((function(e){if(a.isResourceTiming&&R("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;h.value[e.initiatorType]+=t,h.value.total+=t}}))},Ne=function(){!function(e,t){xe((function(e){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),i=Math.max(t.connectStart-n,0),a=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:i-r,connectionTime:a-i,requestTime:e.value-a,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(e),function(e){e.value>0&&q(e)}(e)}),t)}(0,a.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},ee((function(){var e,n=[.1,.25],r=J("CLS"),i=-1,a=0,o=[],s=function(e){i>-1&&function(e){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:$(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:z(t.startTime)})}}var r;e.attribution={}}(e),function(e){q(e)}(e)}(e)},c=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=o[0],i=o[o.length-1];a&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(a+=t.value,o.push(t)):(a=t.value,o=[t]),a>r.value&&(r.value=a,r.entries=o,e())}}))},u=X("layout-shift",c);u&&(e=Z(s,r,n,t.reportAllChanges),se((function(t){i=t.value,r.value<0&&(r.value=0,e())})),G((function(){c(u.takeRecords()),e(!0)})),H((function(){a=0,i=-1,r=J("CLS",0),e=Z(s,r,n,t.reportAllChanges),Y((function(){return e()}))})))}))}(0,t)}(0,a.reportOptions.cls),function(e,t){se((function(e){!function(e){if(e.entries.length){var t=F(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,i=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:z(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:z(W())}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[100,300],i=oe(),a=J("FID"),o=function(e){e.startTime<i.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),n(!0))},s=function(e){e.forEach(o)},c=X("first-input",s);n=Z(e,a,r,t.reportAllChanges),c&&G((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&H((function(){var i;a=J("FID"),n=Z(e,a,r,t.reportAllChanges),C=[],M=-1,P=null,me(addEventListener),i=o,C.push(i),de()}))}))}((function(e){!function(e){var t=e.entries[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fid),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[2500,4e3],i=oe(),a=J("LCP"),o=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-V(),0);r<i.firstHiddenTime&&(a.value=r,a.entries=[t],n())}},s=X("largest-contentful-paint",o);if(s){n=Z(e,a,r,t.reportAllChanges);var c=function(){Se[a.id]||(o(s.takeRecords()),s.disconnect(),Se[a.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),G(c,!0),H((function(i){a=J("LCP"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,Se[a.id]=!0,n(!0)}))}))}}))}((function(e){!function(e){if(e.entries.length){var t=F();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],i=r.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===r.url}))[0],a=Math.max(0,t.responseStart-n),o=Math.max(a,i?(i.requestStart||i.startTime)-n:0),s=Math.max(o,i?i.responseEnd-n:0),c=Math.max(s,r?r.startTime-n:0),u={element:$(r.element),timeToFirstByte:a,resourceLoadDelay:o-a,resourceLoadTime:s-o,elementRenderDelay:c-s,navigationEntry:t,lcpEntry:r};return r.url&&(u.url=r.url),i&&(u.lcpResourceEntry=i),void(e.attribution=u)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.lcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n=[200,500];"interactionCount"in performance||D||(D=X("event",be,{type:"event",buffered:!0,durationThreshold:0}));var r,i=J("INP"),a=function(e){e.forEach((function(e){e.interactionId&&_e(e),"first-input"===e.entryType&&!Te.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&_e(e)}));var t,n=(t=Math.min(Te.length-1,Math.floor(ye()/50)),Te[t]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,r())},o=X("event",a,{durationThreshold:t.durationThreshold||40});r=Z(e,i,n,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),G((function(){a(o.takeRecords()),i.value<0&&ye()>0&&(i.value=0,i.entries=[]),r(!0)})),H((function(){Te=[],we=he(),i=J("INP"),r=Z(e,i,n,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}else e.attribution={}}(t),e(t)}),t)}((function(e){return q(e)}),a.reportOptions.inp),a.isResourceTiming&&S("resource",je),a.isElementTiming&&S("element",Oe)},Ie=function(e){var t="usageDetails"in e?e.usageDetails:{};R("storageEstimate",{quota:j(e.quota),usage:j(e.usage),caches:j(t.caches),indexedDB:j(t.indexedDB),serviceWorker:j(t.serviceWorkerRegistrations)})},Pe={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Me=function(e){delete Pe.active[e]},Be=function(){return Pe.navigationSteps},Ce=function(e){var t;return null!==(t=Be()[e])&&void 0!==t?t:{}},De=function(e,t,n){var r="step."+e,i=u.getEntriesByName(p+t).length>0;if(u.getEntriesByName(p+n).length>0&&a.steps){var o=A[a.steps[e].threshold],s=o.maxOutlierThreshold,c=o.vitalsThresholds;if(i){var l=u.measure(r,p+t,p+n),d=l.duration;if(d<=s){var m=function(e,t){return e<=t[0]?"good":e<=t[1]?"needsImprovement":"poor"}(d,c);d>=0&&(N("userJourneyStep",d,m,{stepName:e},void 0),u.measure("step.".concat(e,"_vitals_").concat(m),{start:l.startTime+l.duration,end:l.startTime+l.duration,detail:{type:"stepVital",duration:d}}))}}}},Ae=function(){var e=Be(),t=Pe.startMarkToStepsMap,n=Object.keys(e).length;if(0===n)return{};var r={},i=n-1,a=Ce(i);if(Object.keys(a).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))})),n>1){var o=Ce(i-1);Object.keys(o).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))}))}return r},Le=function(){var e,t=Object.keys(Pe.navigationSteps).length;Pe.navigationSteps[t]={};var n=Ae();null===(e=a.onMarkStep)||void 0===e||e.call(a,"",Object.keys(n))},Ue=function(e){var t,n,r,i,o,s,c;if(Pe.finalMarkToStepsMap[e]){!function(e){var t=Pe.navigationSteps,n=Pe.finalMarkToStepsMap,r=Object.keys(t).length;if(0!==r){var i=r-1,a=Ce(i);if(a&&n[e]){var o=n[e];o&&Object.keys(o).forEach((function(e){if(a[e]){var n=Ce(i)||{};n[e]=!1,t[i]=n}if(r>1){var o=i-1,s=Ce(o);s[e]&&(s[e]=!1,t[o]=s)}}))}}}(e);var u=Pe.finalMarkToStepsMap[e];Object.keys(u).forEach((function(t){var n=u[t];n.forEach(Me),Promise.all(n.map((function(n){return function(e,t,n,r){return new(n||(n=Promise))((function(e,t){function i(e){try{o(r.next(e))}catch(e){t(e)}}function a(e){try{o(r.throw(e))}catch(e){t(e)}}function o(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}o((r=r.apply(undefined,[])).next())}))}(0,0,void 0,(function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(r){switch(r.label){case 0:return[4,De(n,t,e)];case 1:return r.sent(),[2]}}))}))}))).catch((function(){}))}))}else r=e,i=Pe.navigationSteps,o=Object.keys(i).length,(c=Ce(s=(o>0?o:1)-1)||[])[r]=!0,i[s]=c,function(e){var t,n=null!==(t=Pe.startMarkToStepsMap[e])&&void 0!==t?t:[];Object.keys(n).forEach((function(e){Pe.active[e]||(Pe.active[e]=!0)}))}(e);if(a.enableNavigationTracking){var l=Ae();null===(t=a.onMarkStep)||void 0===t||t.call(a,e,Object.keys(l))}else null===(n=a.onMarkStep)||void 0===n||n.call(a,e,Object.keys(Pe.active))},Re=function(e){u.mark(p+e),Ue(e)},qe=function(e){0===u.getEntriesByName(p+e).length&&(u.mark(p+e),Ue(e))},Fe=0,ze=function(){function e(e){if(void 0===e&&(e={}),this.v="9.0.0-rc.3",a.analyticsTracker=e.analyticsTracker,a.isResourceTiming=!!e.resourceTiming,a.isElementTiming=!!e.elementTiming,a.maxTime=e.maxMeasureTime||a.maxTime,a.reportOptions=e.reportOptions||a.reportOptions,a.steps=e.steps,a.onMarkStep=e.onMarkStep,a.enableNavigationTracking=e.enableNavigationTracking,m()){"PerformanceObserver"in o&&Ne(),void 0!==document.hidden&&document.addEventListener("visibilitychange",_);var t=function(){if(!m())return{};var e=u.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();R("navigationTiming",t),t.redirectTime&&q({attribution:{},name:"RT",rating:U("RT",t.redirectTime),value:t.redirectTime}),R("networkInformation",function(){if("connection"in c){var e=c.connection;return"object"!=typeof e?{}:(f=e.effectiveType,v=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),c&&c.storage&&"function"==typeof c.storage.estimate&&c.storage.estimate().then(Ie),a.steps&&a.steps&&(Pe.startMarkToStepsMap={},Pe.finalMarkToStepsMap={},Pe.active={},Pe.navigationSteps={},Object.entries(a.steps).forEach((function(e){var t,n,r=e[0],i=e[1].marks,a=i[0],o=i[1],s=null!==(n=Pe.startMarkToStepsMap[a])&&void 0!==n?n:{};if(s[r]=!0,Pe.startMarkToStepsMap[a]=s,Pe.finalMarkToStepsMap[o]){var c=Pe.finalMarkToStepsMap[o][a]||[];c.push(r),Pe.finalMarkToStepsMap[o][a]=c}else Pe.finalMarkToStepsMap[o]=((t={})[a]=[r],t)})))}}return e.prototype.start=function(e){m()&&!g[e]&&(g[e]=!0,u.mark("mark_".concat(e,"_start")))},e.prototype.end=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),m()&&g[e]){u.mark("mark_".concat(e,"_end")),delete g[e];var r=function(e){u.measure(e,"mark_".concat(e,"_start"),"mark_".concat(e,"_end"));var t=u.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e);n&&R(e,O(r),t)}},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete g[e],u.clearMarks&&(u.clearMarks("mark_".concat(e,"_start")),u.clearMarks("mark_".concat(e,"_end")))},e.prototype.markNTBT=function(){var e=this;this.start("ntbt"),y.value=0,clearTimeout(Fe),Fe=setTimeout((function(){e.end("ntbt",{},!1),q({attribution:{},name:"NTBT",rating:U("NTBT",y.value),value:y.value}),y.value=0}),2e3)},e}()},426:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator;var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r=Object.assign,i={};function a(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}function o(){}function s(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}a.prototype.isReactComponent={},a.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=a.prototype;var c=s.prototype=new o;c.constructor=s,r(c,a.prototype),c.isPureReactComponent=!0;Array.isArray,Object.prototype.hasOwnProperty;var u={current:null};t.useCallback=function(e,t){return u.current.useCallback(e,t)},t.useEffect=function(e,t){return u.current.useEffect(e,t)},t.useRef=function(e){return u.current.useRef(e)}},784:(e,t,n)=>{"use strict";e.exports=n(426)},353:function(e,t,n){var r;!function(i,a){"use strict";var o="function",s="undefined",c="object",u="string",l="major",d="model",p="name",m="type",f="vendor",v="version",g="architecture",b="console",h="mobile",w="tablet",y="smarttv",T="wearable",k="embedded",_="Amazon",S="Apple",E="ASUS",x="BlackBerry",O="Browser",j="Chrome",N="Firefox",I="Google",P="Huawei",M="LG",B="Microsoft",C="Motorola",D="Opera",A="Samsung",L="Sharp",U="Sony",R="Xiaomi",q="Zebra",F="Facebook",z="Chromium OS",K="Mac OS",$=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},Q=function(e,t){return typeof e===u&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},H=function(e,t){if(typeof e===u)return e=e.replace(/^\\s\\s*/,""),typeof t===s?e:e.substring(0,350)},V=function(e,t){for(var n,r,i,s,u,l,d=0;d<t.length&&!u;){var p=t[d],m=t[d+1];for(n=r=0;n<p.length&&!u&&p[n];)if(u=p[n++].exec(e))for(i=0;i<m.length;i++)l=u[++r],typeof(s=m[i])===c&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):a:this[s[0]]=l?s[1].call(this,l,s[2]):a:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;d+=2}},J=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(Q(t[n][r],e))return"?"===n?a:n}else if(Q(t[n],e))return"?"===n?a:n;return e},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i],[v,[p,"Chrome"]],[/edg(?:e|ios|a)?\\/([\\w\\.]+)/i],[v,[p,"Edge"]],[/(opera mini)\\/([-\\w\\.]+)/i,/(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,/(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i],[p,v],[/opios[\\/ ]+([\\w\\.]+)/i],[v,[p,D+" Mini"]],[/\\bopr\\/([\\w\\.]+)/i],[v,[p,D]],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,/(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,/(?:ms|\\()(ie) ([\\w\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,/(heytap|ovi)browser\\/([\\d\\.]+)/i,/(weibo)__([\\d\\.]+)/i],[p,v],[/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i],[v,[p,"UC"+O]],[/microm.+\\bqbcore\\/([\\w\\.]+)/i,/\\bqbcore\\/([\\w\\.]+).+microm/i],[v,[p,"WeChat(Win) Desktop"]],[/micromessenger\\/([\\w\\.]+)/i],[v,[p,"WeChat"]],[/konqueror\\/([\\w\\.]+)/i],[v,[p,"Konqueror"]],[/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i],[v,[p,"IE"]],[/ya(?:search)?browser\\/([\\w\\.]+)/i],[v,[p,"Yandex"]],[/(avast|avg)\\/([\\w\\.]+)/i],[[p,/(.+)/,"$1 Secure "+O],v],[/\\bfocus\\/([\\w\\.]+)/i],[v,[p,N+" Focus"]],[/\\bopt\\/([\\w\\.]+)/i],[v,[p,D+" Touch"]],[/coc_coc\\w+\\/([\\w\\.]+)/i],[v,[p,"Coc Coc"]],[/dolfin\\/([\\w\\.]+)/i],[v,[p,"Dolphin"]],[/coast\\/([\\w\\.]+)/i],[v,[p,D+" Coast"]],[/miuibrowser\\/([\\w\\.]+)/i],[v,[p,"MIUI "+O]],[/fxios\\/([-\\w\\.]+)/i],[v,[p,N]],[/\\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+O]],[/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i],[[p,/(.+)/,"$1 "+O],v],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[p,/_/g," "],v],[/(electron)\\/([\\w\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i],[p,v],[/(metasr)[\\/ ]?([\\w\\.]+)/i,/(lbbrowser)/i,/\\[(linkedin)app\\]/i],[p],[/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i],[[p,F],v],[/(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,/(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,/safari (line)\\/([\\w\\.]+)/i,/\\b(line)\\/([\\w\\.]+)\\/iab/i,/(chromium|instagram)[\\/ ]([-\\w\\.]+)/i],[p,v],[/\\bgsa\\/([\\w\\.]+) .*safari\\//i],[v,[p,"GSA"]],[/musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i],[v,[p,"TikTok"]],[/headlesschrome(?:\\/([\\w\\.]+)| )/i],[v,[p,j+" Headless"]],[/ wv\\).+(chrome)\\/([\\w\\.]+)/i],[[p,j+" WebView"],v],[/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i],[v,[p,"Android "+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i],[p,v],[/version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i],[v,[p,"Mobile Safari"]],[/version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i],[v,p],[/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i],[p,[v,J,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[p,v],[/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i],[[p,"Netscape"],v],[/mobile vr; rv:([\\w\\.]+)\\).+firefox/i],[v,[p,N+" Reality"]],[/ekiohf.+(flow)\\/([\\w\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,/(firefox)\\/([\\w\\.]+)/i,/(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,/(links) \\(([\\w\\.]+)/i,/panasonic;(viera)/i],[p,v],[/(cobalt)\\/([\\w\\.]+)/i],[p,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,W]],[/((?:i[346]|x)86)[;\\)]/i],[[g,"ia32"]],[/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i],[[g,"arm64"]],[/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i],[[g,/ower/,"",W]],[/(sun4\\w)[;\\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i],[[g,W]]],device:[[/\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,A],[m,w]],[/\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,/samsung[- ]([-\\w]+)/i,/sec-(sgh\\w+)/i],[d,[f,A],[m,h]],[/(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i],[d,[f,S],[m,h]],[/\\((ipad);[-\\w\\),; ]+apple/i,/applecoremedia\\/[\\w\\.]+ \\((ipad)/i,/\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i],[d,[f,S],[m,w]],[/(macintosh);/i],[d,[f,S]],[/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i],[d,[f,L],[m,h]],[/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i],[d,[f,P],[m,w]],[/(?:huawei|honor)([-\\w ]+)[;\\)]/i,/\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i],[d,[f,P],[m,h]],[/\\b(poco[\\w ]+)(?: bui|\\))/i,/\\b; (\\w+) build\\/hm\\1/i,/\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,/\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,/\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i],[[d,/_/g," "],[f,R],[m,h]],[/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i],[[d,/_/g," "],[f,R],[m,w]],[/; (\\w+) bui.+ oppo/i,/\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i],[d,[f,"OPPO"],[m,h]],[/vivo (\\w+)(?: bui|\\))/i,/\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[m,h]],[/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i],[d,[f,"Realme"],[m,h]],[/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,/\\bmot(?:orola)?[- ](\\w*)/i,/((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i],[d,[f,C],[m,h]],[/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],[d,[f,C],[m,w]],[/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,M],[m,w]],[/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,/\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,/\\blg-?([\\d\\w]+) bui/i],[d,[f,M],[m,h]],[/(ideatab[-\\w ]+)/i,/lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i],[d,[f,"Lenovo"],[m,w]],[/(?:maemo|nokia).*(n900|lumia \\d+)/i,/nokia[-_ ]?([-\\w\\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[m,h]],[/(pixel c)\\b/i],[d,[f,I],[m,w]],[/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i],[d,[f,I],[m,h]],[/droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[d,[f,U],[m,h]],[/sony tablet [ps]/i,/\\b(?:sony)?sgp\\w+(?: bui|\\))/i],[[d,"Xperia Tablet"],[f,U],[m,w]],[/ (kb2005|in20[12]5|be20[12][59])\\b/i,/(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i],[d,[f,"OnePlus"],[m,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,/(kf[a-z]+)( bui|\\)).+silk\\//i],[d,[f,_],[m,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,_],[m,h]],[/(playbook);[-\\w\\),; ]+(rim)/i],[d,f,[m,w]],[/\\b((?:bb[a-f]|st[hv])100-\\d)/i,/\\(bb10; (\\w+)/i],[d,[f,x],[m,h]],[/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i],[d,[f,E],[m,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],[d,[f,E],[m,h]],[/(nexus 9)/i],[d,[f,"HTC"],[m,w]],[/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,/(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i],[f,[d,/_/g," "],[m,h]],[/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i],[d,[f,"Acer"],[m,w]],[/droid.+; (m[1-5] note) bui/i,/\\bmz-([-\\w]{2,})/i],[d,[f,"Meizu"],[m,h]],[/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,/(hp) ([\\w ]+\\w)/i,/(asus)-?(\\w+)/i,/(microsoft); (lumia[\\w ]+)/i,/(lenovo)[-_ ]?([-\\w]+)/i,/(jolla)/i,/(oppo) ?([\\w ]+) bui/i],[f,d,[m,h]],[/(kobo)\\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/(nook)[\\w ]+build\\/(\\w+)/i,/(dell) (strea[kpr\\d ]*[\\dko])/i,/(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,/(trinity)[- ]*(t\\d{3}) bui/i,/(gigaset)[- ]+(q\\w{1,9}) bui/i,/(vodafone) ([\\w ]+)(?:\\)| bui)/i],[f,d,[m,w]],[/(surface duo)/i],[d,[f,B],[m,w]],[/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i],[d,[f,"Fairphone"],[m,h]],[/(u304aa)/i],[d,[f,"AT&T"],[m,h]],[/\\bsie-(\\w*)/i],[d,[f,"Siemens"],[m,h]],[/\\b(rct\\w+) b/i],[d,[f,"RCA"],[m,w]],[/\\b(venue[\\d ]{2,7}) b/i],[d,[f,"Dell"],[m,w]],[/\\b(q(?:mv|ta)\\w+) b/i],[d,[f,"Verizon"],[m,w]],[/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i],[d,[f,"Barnes & Noble"],[m,w]],[/\\b(tm\\d{3}\\w+) b/i],[d,[f,"NuVision"],[m,w]],[/\\b(k88) b/i],[d,[f,"ZTE"],[m,w]],[/\\b(nx\\d{3}j) b/i],[d,[f,"ZTE"],[m,h]],[/\\b(gen\\d{3}) b.+49h/i],[d,[f,"Swiss"],[m,h]],[/\\b(zur\\d{3}) b/i],[d,[f,"Swiss"],[m,w]],[/\\b((zeki)?tb.*\\b) b/i],[d,[f,"Zeki"],[m,w]],[/\\b([yr]\\d{2}) b/i,/\\b(dragon[- ]+touch |dt)(\\w{5}) b/i],[[f,"Dragon Touch"],d,[m,w]],[/\\b(ns-?\\w{0,9}) b/i],[d,[f,"Insignia"],[m,w]],[/\\b((nxa|next)-?\\w{0,9}) b/i],[d,[f,"NextBook"],[m,w]],[/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[m,h]],[/\\b(lvtel\\-)?(v1[12]) b/i],[[f,"LvTel"],d,[m,h]],[/\\b(ph-1) /i],[d,[f,"Essential"],[m,h]],[/\\b(v(100md|700na|7011|917g).*\\b) b/i],[d,[f,"Envizen"],[m,w]],[/\\b(trio[-\\w\\. ]+) b/i],[d,[f,"MachSpeed"],[m,w]],[/\\btu_(1491) b/i],[d,[f,"Rotor"],[m,w]],[/(shield[\\w ]+) b/i],[d,[f,"Nvidia"],[m,w]],[/(sprint) (\\w+)/i],[f,d,[m,h]],[/(kin\\.[onetw]{3})/i],[[d,/\\./g," "],[f,B],[m,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i],[d,[f,q],[m,w]],[/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],[d,[f,q],[m,h]],[/smart-tv.+(samsung)/i],[f,[m,y]],[/hbbtv.+maple;(\\d+)/i],[[d,/^/,"SmartTV"],[f,A],[m,y]],[/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i],[[f,M],[m,y]],[/(apple) ?tv/i],[f,[d,S+" TV"],[m,y]],[/crkey/i],[[d,j+"cast"],[f,I],[m,y]],[/droid.+aft(\\w)( bui|\\))/i],[d,[f,_],[m,y]],[/\\(dtv[\\);].+(aquos)/i,/(aquos-tv[\\w ]+)\\)/i],[d,[f,L],[m,y]],[/(bravia[\\w ]+)( bui|\\))/i],[d,[f,U],[m,y]],[/(mitv-\\w{5}) bui/i],[d,[f,R],[m,y]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[m,y]],[/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,/hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i],[[f,H],[d,H],[m,y]],[/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i],[[m,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[m,b]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[m,b]],[/(playstation [345portablevi]+)/i],[d,[f,U],[m,b]],[/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i],[d,[f,B],[m,b]],[/((pebble))app/i],[f,d,[m,T]],[/(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i],[d,[f,S],[m,T]],[/droid.+; (glass) \\d/i],[d,[f,I],[m,T]],[/droid.+; (wt63?0{2,3})\\)/i],[d,[f,q],[m,T]],[/(quest( 2| pro)?)/i],[d,[f,F],[m,T]],[/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i],[f,[m,k]],[/(aeobc)\\b/i],[d,[f,_],[m,k]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i],[d,[m,h]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i],[d,[m,w]],[/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i],[[m,w]],[/(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i],[[m,h]],[/(android[-\\w\\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\\/([\\w\\.]+)/i],[v,[p,"EdgeHTML"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[v,[p,"Blink"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/ekioh(flow)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,/(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,/\\b(libweb)/i],[p,v],[/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i],[v,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,v],[/(windows) nt 6\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,/(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i],[p,[v,J,X]],[/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],[[p,"Windows"],[v,J,X]],[/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,/ios;fbsv\\/([\\d\\.]+)/i,/cfnetwork\\/.+darwin/i],[[v,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\\w\\. ]*)/i,/(macintosh|mac_powerpc\\b)(?!.+haiku)/i],[[p,K],[v,/_/g,"."]],[/droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i],[v,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,/(blackberry)\\w*\\/([\\w\\.]*)/i,/(tizen|kaios)[\\/ ]([\\w\\.]+)/i,/\\((series40);/i],[p,v],[/\\(bb(10);/i],[v,[p,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i],[v,[p,"Symbian"]],[/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i],[v,[p,N+" OS"]],[/web0s;.+rt(tv)/i,/\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i],[v,[p,"webOS"]],[/watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i],[v,[p,"watchOS"]],[/crkey\\/([\\d\\.]+)/i],[v,[p,j+"cast"]],[/(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i],[[p,z],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\\/(\\d+\\.[\\w\\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\);]+)/i,/\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,/(mint)[\\/\\(\\) ]?(\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,/(hurd|linux) ?([\\w\\.]*)/i,/(gnu) ?([\\w\\.]*)/i,/\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,/(haiku) (\\w+)/i],[p,v],[/(sunos) ?([\\w\\.\\d]*)/i],[[p,"Solaris"],v],[/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,/(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,/\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\\w\\.]*)/i],[p,v]]},Z=function(e,t){if(typeof e===c&&(t=e,e=a),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof i!==s&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),b=n&&n.userAgentData?n.userAgentData:a,y=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(G,t):G,T=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[p]=a,t[v]=a,V.call(t,r,y.browser),t[l]=typeof(e=t[v])===u?e.replace(/[^\\d\\.]/g,"").split(".")[0]:a,T&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[p]="Brave"),t},this.getCPU=function(){var e={};return e[g]=a,V.call(e,r,y.cpu),e},this.getDevice=function(){var e={};return e[f]=a,e[d]=a,e[m]=a,V.call(e,r,y.device),T&&!e[m]&&b&&b.mobile&&(e[m]=h),T&&"Macintosh"==e[d]&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[m]=w),e},this.getEngine=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.engine),e},this.getOS=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.os),T&&!e[p]&&b&&"Unknown"!=b.platform&&(e[p]=b.platform.replace(/chrome os/i,z).replace(/macos/i,K)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>350?H(e,350):e,this},this.setUA(r),this};Z.VERSION="1.0.35",Z.BROWSER=$([p,v,l]),Z.CPU=$([g]),Z.DEVICE=$([d,f,m,b,h,y,w,T,k]),Z.ENGINE=Z.OS=$([p,v]),typeof t!==s?(e.exports&&(t=e.exports=Z),t.UAParser=Z):n.amdO?(r=function(){return Z}.call(t,n,t,e))===a||(e.exports=r):typeof i!==s&&(i.UAParser=Z);var Y=typeof i!==s&&(i.jQuery||i.Zepto);if(Y&&!Y.ua){var ee=new Z;Y.ua=ee.getResult(),Y.ua.get=function(){return ee.getUA()},Y.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"==typeof window?window:this)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{ActionType:()=>f,AmplitudePlatformName:()=>g,AnalyticsEventImportance:()=>l,AnalyticsQueries:()=>e,AuthStatus:()=>b,ComponentType:()=>m,IThresholdTier:()=>Jt,MetricType:()=>d,PlatformName:()=>v,SessionActions:()=>h,SessionAutomatedEvents:()=>w,SessionRank:()=>y,SubjectType:()=>p,UserTypeCommerce:()=>c,UserTypeInsto:()=>i,UserTypeRetail:()=>t,UserTypeRetailBusinessBanking:()=>s,UserTypeRetailEmployeeInternal:()=>a,UserTypeRetailEmployeePersonal:()=>o,UserTypeWallet:()=>u,automatedEvents:()=>xn,automatedMappingConfig:()=>In,clearMarkEntry:()=>Vn,clearPerformanceMarkEntries:()=>Xn,config:()=>A,createEventConfig:()=>On,createNewSpan:()=>Ln,createNewTrace:()=>Un,device:()=>W,endPerfMark:()=>Jn,exposeExperiment:()=>wn,flushQueue:()=>or,generateUUID:()=>V,getAnalyticsHeaders:()=>sr,getReferrerData:()=>le,getTracingHeaders:()=>An,getTracingId:()=>Dn,getUrlHostname:()=>pe,getUrlParams:()=>me,getUrlPathname:()=>fe,getUserContext:()=>ar,identify:()=>Tn,identifyFlow:()=>xe,identity:()=>H,identityFlow:()=>Se,incrementUjNavigation:()=>an,init:()=>yn,initNextJsTrackPageview:()=>_n,initTrackPageview:()=>kn,isEventKeyFormatValid:()=>we,isSessionEnded:()=>pt,location:()=>re,logEvent:()=>$t,logMetric:()=>Ht,logPageView:()=>on,logTrace:()=>Rn,markNTBT:()=>tn,markStep:()=>nn,markStepOnce:()=>rn,onVisibilityChange:()=>ln,optIn:()=>En,optOut:()=>Sn,perfMark:()=>Wn,persistentData:()=>oe,postMessage:()=>K,recordSessionDuration:()=>pn,removeFromIdentifyFlow:()=>Ee,savePersistentData:()=>st,sendScheduledEvents:()=>Bt,setBreadcrumbs:()=>ie,setConfig:()=>U,setLocation:()=>ae,setPagePath:()=>ve,setPageview:()=>Kt,setPersistentData:()=>se,setSessionStart:()=>dt,setTime:()=>Ue,startPerfMark:()=>Hn,timeStone:()=>Le,useEventLogger:()=>Yn,useLogEventOnMount:()=>tr,usePerformanceMarks:()=>rr});let e=function(e){return e.fbclid="fbclid",e.gclid="gclid",e.msclkid="msclkid",e.ptclid="ptclid",e.ttclid="ttclid",e.utm_source="utm_source",e.utm_medium="utm_medium",e.utm_campaign="utm_campaign",e.utm_term="utm_term",e.utm_content="utm_content",e}({});const t=0,i=1,a=2,o=3,s=4,c=5,u=6;let l=function(e){return e.low="low",e.high="high",e}({}),d=function(e){return e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram",e}({}),p=function(e){return e.commerce_merchant="commerce_merchant",e.device="device",e.edp_fingerprint_id="edp_fingerprint_id",e.nft_user="nft_user",e.user="user",e.wallet_user="wallet_user",e.uuid="user_uuid",e}({}),m=function(e){return e.unknown="unknown",e.banner="banner",e.button="button",e.card="card",e.chart="chart",e.content_script="content_script",e.dropdown="dropdown",e.link="link",e.page="page",e.modal="modal",e.table="table",e.search_bar="search_bar",e.service_worker="service_worker",e.text="text",e.text_input="text_input",e.tray="tray",e.checkbox="checkbox",e.icon="icon",e}({}),f=function(e){return e.unknown="unknown",e.blur="blur",e.click="click",e.change="change",e.dismiss="dismiss",e.focus="focus",e.hover="hover",e.select="select",e.measurement="measurement",e.move="move",e.process="process",e.render="render",e.scroll="scroll",e.view="view",e.search="search",e.keyPress="keyPress",e}({}),v=function(e){return e.unknown="unknown",e.web="web",e.android="android",e.ios="ios",e.mobile_web="mobile_web",e.tablet_web="tablet_web",e.server="server",e.windows="windows",e.macos="macos",e.extension="extension",e}({}),g=function(e){return e.web="Web",e.ios="iOS",e.android="Android",e}({}),b=function(e){return e[e.notLoggedIn=0]="notLoggedIn",e[e.loggedIn=1]="loggedIn",e}({}),h=function(e){return e.ac="ac",e.af="af",e.ah="ah",e.al="al",e.am="am",e.ar="ar",e.as="as",e}({}),w=function(e){return e.pv="pv",e}({}),y=function(e){return e.xs="xs",e.s="s",e.m="m",e.l="l",e.xl="xl",e.xxl="xxl",e}({});const T="https://analytics-service-dev.cbhq.net",k=3e5,_=5e3,S="analytics-db",E="experiment-exposure-db",x="Analytics SDK:",O=Object.values(e),j="pageview",N="session_duration",I={navigationTiming:{eventName:"perf_navigation_timing"},redirectTime:{eventName:"perf_redirect_time"},RT:{eventName:"perf_redirect_time"},TTFB:{eventName:"perf_time_to_first_byte"},networkInformation:{eventName:"perf_network_information"},storageEstimate:{eventName:"perf_storage_estimate"},FCP:{eventName:"perf_first_contentful_paint"},FID:{eventName:"perf_first_input_delay"},LCP:{eventName:"perf_largest_contentful_paint"},CLS:{eventName:"perf_cumulative_layout_shift"},TBT:{eventName:"perf_total_blocking_time"},NTBT:{eventName:"perf_navigation_total_blocking_time"},INP:{eventName:"perf_interact_to_next_paint"},ET:{eventName:"perf_element_timing"},userJourneyStep:{eventName:"perf_user_journey_step"}},P="1",M="web";function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const C=/^(https?:\\/\\/)/;function D(e){return{eventsEndpoint:e+"/amp",metricsEndPoint:e+"/metrics",exposureEndpoint:e+"/track-exposures",tracesEndpoint:e+"/traces"}}const A=B({authCookie:"logged_in",amplitudeApiKey:"",batchEventsPeriod:_,batchEventsThreshold:30,batchMetricsPeriod:_,batchMetricsThreshold:30,batchTracesPeriod:_,batchTracesThreshold:30,headers:{},interactionManager:null,isAlwaysAuthed:!1,isProd:!1,isInternalApplication:!1,onError:(e,t)=>{console.error(x,e,t)},platform:v.unknown,projectName:"",ricTimeoutScheduleEvent:1e3,ricTimeoutSetDevice:500,showDebugLogging:!1,trackUserId:!1,version:null,apiEndpoint:T},D(T),{steps:{}}),L=[].reduce(((e,t)=>n=>e(t(n))),(e=>{if(!e.isProd)return e.isInternalApplication?(e.apiEndpoint="https://analytics-service-internal-dev.cbhq.net",B({},e,D(e.apiEndpoint))):e;const t=(e=>e.apiEndpoint?C.test(e.apiEndpoint)?e.apiEndpoint:`https://${e.apiEndpoint}`:e.isInternalApplication?"https://analytics-service-internal.cbhq.net":"https://as.coinbase.com")(e);return B({},e,{apiEndpoint:t},D(t))})),U=e=>{const{batchEventsThreshold:t,batchMetricsThreshold:n,batchTracesThreshold:r}=e,i=[t,n,r];for(const e of i)if((e||0)>30){console.warn("You are setting the threshhold for the batch limit to be greater than 30. This may cause request overload.");break}Object.assign(A,L(e))},R=[v.web,v.mobile_web,v.tablet_web];function q(){return"android"===A.platform}function F(){return"ios"===A.platform}function z(){return R.includes(A.platform)}function K(e){if(z()&&navigator&&"serviceWorker"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage(e)}catch(e){e instanceof Error&&A.onError(e)}}var $=n(353),Q=n.n($);const W={amplitudeOSName:null,amplitudeOSVersion:null,amplitudeDeviceModel:null,amplitudePlatform:null,browserName:null,browserMajor:null,osName:null,userAgent:null,width:null,height:null},H={countryCode:null,deviceId:null,device_os:null,isOptOut:!1,languageCode:null,locale:null,jwt:null,session_lcc_id:null,userAgent:null,userId:null},V=e=>e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,V),J=()=>A.isAlwaysAuthed||!!H.userId,X=()=>{const e={};return H.countryCode&&(e.country_code=H.countryCode),e},G=()=>{const{platform:e}=A;if(e===v.web)switch(!0){case window.matchMedia("(max-width: 560px)").matches:return v.mobile_web;case window.matchMedia("(max-width: 1024px, min-width: 561px)").matches:return v.tablet_web}return e},Z=()=>{var e,t,n,r,i;z()?("requestIdleCallback"in window?window.requestIdleCallback(ne,{timeout:A.ricTimeoutSetDevice}):ne(),W.amplitudePlatform=g.web,W.userAgent=(null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent)||null,ee({height:null!=(t=null==(n=window)?void 0:n.innerHeight)?t:null,width:null!=(r=null==(i=window)?void 0:i.innerWidth)?r:null})):F()?(W.amplitudePlatform=g.ios,W.userAgent=H.userAgent,W.userAgent&&ne()):q()&&(W.userAgent=H.userAgent,W.amplitudePlatform=g.android,W.userAgent&&ne())},Y=e=>{Object.assign(H,e),z()&&K({identity:{isAuthed:!!H.userId,locale:H.locale||null}})},ee=e=>{W.height=e.height,W.width=e.width},te=()=>{U({platform:G()}),z()&&K({config:{platform:A.platform}})},ne=()=>{var e;performance.mark&&performance.mark("ua_parser_start");const t=new(Q())(null!=(e=W.userAgent)?e:"").getResult();W.browserName=t.browser.name||null,W.browserMajor=t.browser.major||null,W.osName=t.os.name||null,W.amplitudeOSName=W.browserName,W.amplitudeOSVersion=W.browserMajor,W.amplitudeDeviceModel=W.osName,K({device:{browserName:W.browserName,osName:W.osName}}),performance.mark&&(performance.mark("ua_parser_end"),performance.measure("ua_parser","ua_parser_start","ua_parser_end"))},re={breadcrumbs:[],initialUAAData:{},pageKey:"",pageKeyRegex:{},pagePath:"",prevPageKey:"",prevPagePath:""};function ie(e){Object.assign(re,{breadcrumbs:e})}function ae(e){Object.assign(re,e)}const oe={eventId:0,sequenceNumber:0,sessionId:0,lastEventTime:0,sessionStart:0,sessionUUID:null,userId:null,ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0};function se(e){Object.assign(oe,e)}function ce(){var e,t;return null!=(e=null==(t=document)?void 0:t.referrer)?e:""}function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}const le=()=>{const e=ce();if(!e)return{};const t=new URL(e);return t.hostname===pe()?{}:{referrer:e,referring_domain:t.hostname}},de=()=>{const e=new URLSearchParams(me()),t={};return O.forEach((n=>{e.has(n)&&(t[n]=(e.get(n)||"").toLowerCase())})),t},pe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.hostname)||""},me=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.search)||""},fe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.pathname)||""},ve=()=>{const e=A.overrideWindowLocation?re.pagePath:fe()+me();e&&e!==re.pagePath&&(e!==re.pagePath&&ge(),re.pagePath=e,re.pageKeyRegex&&Object.keys(re.pageKeyRegex).some((e=>{if(re.pageKeyRegex[e].test(re.pagePath))return re.pageKey=e,!0})))},ge=()=>{if(z()){const e=ce();if(!re.prevPagePath&&e){const t=new URL(e);if(t.hostname===pe())return void(re.prevPagePath=t.pathname)}}re.prevPagePath=re.pagePath,re.prevPageKey=re.pageKey},be=e=>{z()&&Object.assign(e,z()?(Object.keys(re.initialUAAData).length>0||(new URLSearchParams(me()),re.initialUAAData=ue({},(()=>{const e={};return O.forEach((t=>{oe[t]&&(e[t]=oe[t])})),e})(),de(),le())),re.initialUAAData):re.initialUAAData)},he=/^[a-zd]+(_[a-zd]+)*$/;function we(e){return he.test(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}const Te=["action","component_type","component_name","context","logging_id"],ke=["num_non_hardware_accounts","ujs"],_e="ujs_",Se={};function Ee(e){e.forEach((e=>{ke.includes(e)&&delete Se[e]}))}function xe(e){var t;const n=Object.entries(e).reduce(((e,t)=>{const[n,r]=t;return!Te.includes(n)&&ke.includes(n)?we(n)?ye({},e,{[n]:r}):(A.onError(new Error("IdentityFlow property names must have snake case format"),{[n]:r}),e):e}),{});null!=(t=n.ujs)&&t.length&&(n.ujs=n.ujs.map((e=>`${_e}${e}`))),Object.assign(Se,n)}function Oe(){return A.platform!==v.unknown||(A.onError(new Error("SDK platform not initialized")),!1)}const je={eventsQueue:[],eventsScheduled:!1,metricsQueue:[],metricsScheduled:!1,tracesQueue:[],tracesScheduled:!1};function Ne(e){Object.assign(je,e)}const Ie={ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0},Pe={ac:20,af:5,ah:1,al:1,am:0,ar:10,as:20},Me={pv:25},Be={xs:0,s:1,m:1,l:2,xl:2,xxl:2},Ce=e=>e<15?y.xs:e<60?y.s:e<240?y.m:e<960?y.l:e<3840?y.xl:y.xxl,De=e=>{Object.assign(Ie,e)};function Ae(){return(new Date).getTime()}const Le={timeStart:Ae(),timeOnPagePath:0,timeOnPageKey:0,prevTimeOnPagePath:0,prevTimeOnPageKey:0,sessionDuration:0,sessionEnd:0,sessionStart:0,prevSessionDuration:0};function Ue(e){Object.assign(Le,e)}const Re=(e,t)=>t.some((t=>e instanceof t));let qe,Fe;const ze=new WeakMap,Ke=new WeakMap,$e=new WeakMap,Qe=new WeakMap,We=new WeakMap;let He={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ke.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$e.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Je(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ve(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Xe(this),e),Je(ze.get(this))}:function(...e){return Je(t.apply(Xe(this),e))}:function(e,...n){const r=t.call(Xe(this),e,...n);return $e.set(r,e.sort?e.sort():[e]),Je(r)}:(e instanceof IDBTransaction&&function(e){if(Ke.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ke.set(e,t)}(e),Re(e,qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,He):e);var t}function Je(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(Je(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&ze.set(t,e)})).catch((()=>{})),We.set(t,e),t}(e);if(Qe.has(e))return Qe.get(e);const t=Ve(e);return t!==e&&(Qe.set(e,t),We.set(t,e)),t}const Xe=e=>We.get(e),Ge=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],Ye=new Map;function et(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ye.get(t))return Ye.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ze.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ge.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,i?"readwrite":"readonly");let o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return Ye.set(t,a),a}var tt;tt=He,He={...tt,get:(e,t,n)=>et(e,t)||tt.get(e,t,n),has:(e,t)=>!!et(e,t)||tt.has(e,t)};const nt={isReady:!1,idbKeyval:null};function rt(e){Object.assign(nt,e)}const it={},at=async e=>{if(!nt.idbKeyval)return Promise.resolve(null);try{return await nt.idbKeyval.get(e)}catch(e){return A.onError(new Error("IndexedDB:Get:InternalError")),Promise.resolve(null)}},ot=async(e,t)=>{if(nt.idbKeyval)try{await nt.idbKeyval.set(e,t)}catch(e){A.onError(new Error("IndexedDB:Set:InternalError"))}},st=()=>{"server"!==A.platform&&(se({sessionStart:Le.sessionStart,ac:Ie.ac,af:Ie.af,ah:Ie.ah,al:Ie.al,am:Ie.am,ar:Ie.ar,as:Ie.as,pv:Ie.pv}),H.userId&&se({userId:H.userId}),ot(S,oe))},ct="rgb(5,177,105)",ut=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=`%c ${x}`,a=`color:${ct};font-size:11px;`,o=`Importance: ${r}`;console.group(i,a,t,o),n.forEach((e=>{e.event_type?console.log(e.event_type,e):console.log(e)})),console.groupEnd()},lt=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=`color:${ct};font-size:11px;`,a=`%c ${x}`,o=`Importance: ${r}`;console.log(a,i,t,n,o)},dt=()=>{const e=Ae();oe.sessionId&&oe.lastEventTime&&oe.sessionUUID&&!pt(e)||(oe.sessionId=e,oe.sessionUUID=V(),Ue({sessionStart:e}),lt({metricName:"Started new session:",data:{persistentData:oe,timeStone:Le}})),oe.lastEventTime=e},pt=e=>e-oe.lastEventTime>18e5;function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}const ft=e=>{var t;(e=>{switch(e.action){case f.click:Ie.ac+=1;break;case f.focus:Ie.af+=1;break;case f.hover:Ie.ah+=1;break;case f.move:Ie.am+=1;break;case f.scroll:Ie.al+=1;break;case f.search:Ie.ar+=1;break;case f.select:Ie.as+=1}})(t=e),t.event_type!==j?t.event_type===N&&((e=>{if(!e.session_rank)return;const t=e.session_rank;Object.values(h).forEach((e=>{Ie.sqs+=Ie[e]*Pe[e]})),Object.values(w).forEach((e=>{Ie.sqs+=Ie[e]*Me[e]})),Ie.sqs*=Be[t]})(t),Object.assign(t,Ie),De({ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0})):Ie.pv+=1;const n=e.event_type;delete e.event_type;const r=e.deviceId?e.deviceId:null,i=e.timestamp;return delete e.timestamp,se({eventId:oe.eventId+1}),se({sequenceNumber:oe.sequenceNumber+1}),dt(),st(),{device_id:H.deviceId||r||null,user_id:H.userId,timestamp:i,event_id:oe.eventId,session_id:oe.sessionId||-1,event_type:n,version_name:A.version||null,platform:W.amplitudePlatform,os_name:W.amplitudeOSName,os_version:W.amplitudeOSVersion,device_model:W.amplitudeDeviceModel,language:H.languageCode,event_properties:mt({},e,{session_uuid:oe.sessionUUID,height:W.height,width:W.width}),user_properties:X(),uuid:V(),library:{name:"@cbhq/client-analytics",version:"10.6.0"},sequence_number:oe.sequenceNumber,user_agent:W.userAgent||H.userAgent}},vt=e=>e.map((e=>ft(e)));function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(this,arguments)}const bt=e=>e.map((e=>(e=>{const t=e.tags||{},n=gt({authed:J()?"true":"false",platform:A.platform},t,{project_name:A.projectName,version_name:A.version||null});return{metric_name:e.metricName,page_path:e.pagePath||null,value:e.value,tags:n,type:e.metricType}})(e))),ht=e=>0!==je.metricsQueue.length&&(je.metricsQueue.length>=A.batchMetricsThreshold||(je.metricsScheduled||(je.metricsScheduled=!0,setTimeout((()=>{je.metricsScheduled=!1,e(bt(je.metricsQueue)),je.metricsQueue=[]}),A.batchMetricsPeriod)),!1)),wt=e=>0!==je.tracesQueue.length&&(je.tracesQueue.length>=A.batchTracesThreshold||(je.tracesScheduled||(je.tracesScheduled=!0,setTimeout((()=>{je.tracesScheduled=!1,e(je.tracesQueue),je.tracesQueue=[]}),A.batchTracesPeriod)),!1)),yt=e=>{var t;z()&&null!=(t=window)&&t.requestIdleCallback?window.requestIdleCallback(e,{timeout:A.ricTimeoutScheduleEvent}):(q()||F())&&A.interactionManager?A.interactionManager.runAfterInteractions(e):e()};function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}const kt="application/x-www-form-urlencoded; charset=UTF-8",_t=e=>{const{data:t,importance:n,isJSON:r,onError:i,url:a}=e,o=r?"application/json":kt,s=n||l.low,c=r?JSON.stringify(t):new URLSearchParams(t).toString();function u(){const e=new XMLHttpRequest;e.open("POST",a,!0),Object.keys(A.headers||{}).forEach((t=>{e.setRequestHeader(t,A.headers[t])})),e.setRequestHeader("Content-Type",kt),H.jwt&&e.setRequestHeader("authorization",`Bearer ${H.jwt}`),e.send(c)}if(!z()||r||!("sendBeacon"in navigator)||s!==l.low||A.headers&&0!==Object.keys(A.headers).length)if(z()&&!r)u();else{const e=Tt({},A.headers,{"Content-Type":o});H.jwt&&(e.Authorization=`Bearer ${H.jwt}`),fetch(a,{method:"POST",mode:"no-cors",headers:e,body:c}).catch((e=>{i(e,{context:"AnalyticsSDKApiError"})}))}else{const e=new Blob([c],{type:kt});try{navigator.sendBeacon.bind(navigator)(a,e)||u()}catch(e){console.error(e),u()}}};var St=n(762),Et=n.n(St);const xt=(e,t,n)=>{const r=e||"";return Et()("2"+r+t+n)};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}class jt extends Error{constructor(e){super(e),this.name="CircularJsonReference",this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}}class Nt extends jt{constructor(...e){super(...e),this.name="DomReferenceInAnalyticsEvent"}}function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},It.apply(this,arguments)}const Pt=(e,t=l.low)=>{var n;e&&je.eventsQueue.push(e),nt.isReady&&(!A.trackUserId||H.userId?(t===l.high||(n=Mt,0!==je.eventsQueue.length&&(je.eventsQueue.length>=A.batchEventsThreshold||(je.eventsScheduled||(je.eventsScheduled=!0,setTimeout((()=>{je.eventsScheduled=!1,n(vt(je.eventsQueue)),je.eventsQueue=[]}),A.batchEventsPeriod)),0))))&&Bt():je.eventsQueue.length>10&&(A.trackUserId=!1,A.onError(new Error("userId not set in Logged-in"))))},Mt=(e,t=l.low)=>{if(H.isOptOut||0===e.length)return;let n;try{n=JSON.stringify(e)}catch(t){const r=e.map((e=>e.event_type)).join(", "),[i,a]=(e=>{try{const n=[];for(const r of e){const e=Ot({},r);r.event_properties&&(e.event_properties=Ot({},e.event_properties,{currentTarget:null,target:null,relatedTarget:null,_dispatchInstances:null,_targetInst:null,view:(t=r.event_properties.view,["string","number","boolean"].includes(typeof t)?r.event_properties.view:null)})),n.push(e)}return[!0,JSON.stringify(n)]}catch(e){return[!1,""]}var t})(e);if(!i)return void A.onError(new jt(t instanceof Error?t.message:"unknown"),{listEventType:r});n=a,A.onError(new Nt("Found DOM element reference"),{listEventType:r,stringifiedEventData:n})}const r=Ae().toString(),i=It({},{e:n,v:"2",upload_time:r},{client:A.amplitudeApiKey,checksum:xt(A.amplitudeApiKey,n,r)});_t({url:A.eventsEndpoint,data:i,importance:t,onError:A.onError}),ut({metricName:"Batch Events",data:e,importance:t})},Bt=()=>{Mt(vt(je.eventsQueue)),Ne({eventsQueue:[]})};function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(this,arguments)}const Dt=Object.values(f),At=Object.values(m),Lt=e=>Dt.includes(e)?e:f.unknown,Ut=e=>At.includes(e)?e:m.unknown,Rt=(e,t,n)=>{const r={auth:J()?b.loggedIn:b.notLoggedIn,action:Lt(e),component_type:Ut(t),logging_id:n,platform:A.platform,project_name:A.projectName};return"number"==typeof H.userTypeEnum&&(r.user_type_enum=H.userTypeEnum),r},qt=e=>{const t=Ae();if(!e)return A.onError(new Error("missing logData")),Ct({},Rt(f.unknown,m.unknown),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});const n=Ct({},e,Rt(e.action,e.componentType,e.loggingId),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});return delete n.componentType,delete n.loggingId,n},Ft={blacklistRegex:[],isEnabled:!1};function zt(){return{page_key:re.pageKey,page_path:re.pagePath,prev_page_key:re.prevPageKey,prev_page_path:re.prevPagePath}}function Kt(e){Object.assign(Ft,e)}function $t(e,t,n=l.low){if(H.isOptOut)return;if(!Oe())return;const r=qt(t);!function(e){Ft.isEnabled&&(ve(),Object.assign(e,zt()))}(r),be(r),function(e){Object.keys(Se).length>0&&Object.assign(e,Se)}(r),r.has_double_fired=!1,r.event_type=e,n===l.high?Pt(r,n):yt((()=>{Pt(r)}))}function Qt(e,t=!1){t?_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError})})),ut({metricName:"Batch Metrics",data:e})}function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(this,arguments)}function Ht(e){if(!Oe())return;v.server!==A.platform&&!e.pagePath&&re.pagePath&&(e.pagePath=re.pagePath);const t=Object.keys(Se).length?Wt({},e.tags,Se):e.tags;t&&Object.assign(e,{tags:t}),je.metricsQueue.push(e),ht(Qt)&&(Qt(bt(je.metricsQueue)),je.metricsQueue=[])}function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt.apply(this,arguments)}let Jt=function(e){return e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable",e}({});function Xt(e){return e.toLowerCase()}let Gt={};const Zt=(e,t)=>{null!=A&&A.onMarkStep&&A.onMarkStep(e,t),xe({ujs:t})};let Yt;const en={Perfume:()=>{},markStep:e=>{},markStepOnce:e=>{},incrementUjNavigation:()=>{}},tn=()=>{z()&&Yt&&Yt.markNTBT&&Yt.markNTBT()},nn=e=>{z()&&Yt&&en.markStep&&en.markStep(e)},rn=e=>{z()&&Yt&&en.markStepOnce&&en.markStepOnce(e)},an=()=>{z()&&Yt&&en.incrementUjNavigation&&en.incrementUjNavigation()};function on(e={callMarkNTBT:!0}){"unknown"!==A.platform&&(Ft.blacklistRegex.some((e=>e.test(fe())))||($t(j,{action:f.render,componentType:m.page}),e.callMarkNTBT&&tn()))}let sn=!1,cn=!1;const un=e=>{sn=!e.persisted},ln=(e,t="hidden",n=!1)=>{cn||(addEventListener("pagehide",un),addEventListener("beforeunload",(()=>{})),cn=!0),addEventListener("visibilitychange",(({timeStamp:n})=>{document.visibilityState===t&&e({timeStamp:n,isUnloading:sn})}),{capture:!0,once:n})},dn=36e3;function pn(){const e=pt(Ae());if(e&&(O.forEach((e=>{oe[e]&&delete oe[e]})),st()),!oe.lastEventTime||!Le.sessionStart||!e)return;const t=Math.round((oe.lastEventTime-Le.sessionStart)/1e3);if(t<1||t>dn)return;const n=Ce(t);$t(N,{action:f.measurement,componentType:m.page,session_duration:t,session_end:oe.lastEventTime,session_start:Le.sessionStart,session_rank:n})}function mn(){return mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mn.apply(this,arguments)}const fn=[],vn=[],gn=()=>{const e=fn.shift();e&&e()},bn=()=>{const e=vn.shift();e&&e()};let hn={};function wn(e){const t=function(e){return{test_name:e.testName,group_name:e.group,subject_id:e.subjectId,exposed_at:Ae(),subject_type:e.subjectType,platform:A.platform}}(e);hn[e.testName]=hn[e.testName]||0,hn[e.testName]+k>Ae()?lt({metricName:`Event: exposeExperiment ${e.testName} not sent`,data:t}):(hn[e.testName]=Ae(),ot(E,hn),lt({metricName:`Event: exposeExperiment ${e.testName} sent`,data:t}),_t({url:A.exposureEndpoint,data:[t],onError:(t,n)=>{hn[e.testName]=0,ot(E,hn),A.onError(t,n)},isJSON:!0,importance:l.high}))}const yn=e=>{var t,r,i;U(e),z()&&(H.languageCode=(null==(t=navigator)?void 0:t.languages[0])||(null==(r=navigator)?void 0:r.language)||""),te(),(()=>{var e;if(z()&&null!=(e=window)&&e.indexedDB){const e=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),s=Je(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Je(o.result),e.oldVersion,e.newVersion,Je(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("keyval-store",1,{upgrade(e){e.createObjectStore("keyval")}});rt({idbKeyval:{get:async t=>(await e).get("keyval",t),set:async(t,n)=>(await e).put("keyval",n,t),delete:async t=>(await e).delete("keyval",t),keys:async()=>(await e).getAllKeys("keyval")}})}else rt({idbKeyval:{get:async e=>new Promise((t=>{t(it[e])})),set:async(e,t)=>new Promise((n=>{it[e]=t,n(e)})),delete:async e=>new Promise((()=>{delete it[e]})),keys:async()=>new Promise((e=>{e(Object.keys(it))}))}})})(),lt({metricName:"Initialized Analytics:",data:{deviceId:H.deviceId}}),fn.push((()=>{Pt()})),(async()=>{const e=await at(S);rt({isReady:!0}),gn(),e&&(bn(),se({eventId:e.eventId||oe.eventId,sequenceNumber:e.sequenceNumber||oe.sequenceNumber,sessionId:e.sessionId||oe.sessionId,lastEventTime:e.lastEventTime||oe.lastEventTime,sessionUUID:e.sessionUUID||oe.sessionUUID}),function(e){se(mn({},function(e){const t={};return O.forEach((n=>{e[n]&&(t[n]=e[n])})),t}(e),de()))}(e),Ue({sessionStart:e.sessionStart||oe.sessionStart}),De({ac:e.ac||Ie.ac,af:e.af||Ie.af,ah:e.ah||Ie.ah,al:e.al||Ie.al,am:e.am||Ie.am,ar:e.ar||Ie.ar,as:e.as||Ie.as,pv:e.pv||Ie.pv}),A.trackUserId&&Y({userId:e.userId||H.userId}),pn(),lt({metricName:"Initialized Analytics IndexedDB:",data:e}))})(),async function(){at(E).then((e=>{hn=null!=e?e:{}})).catch((e=>{e instanceof Error&&A.onError(e)}))}(),Z(),z()&&(ln((()=>{se({lastEventTime:Ae()}),st(),Bt()}),"hidden"),ln((()=>{pn()}),"visible")),z()&&(i=()=>{var e,t,n,r;te(),ee({width:null!=(e=null==(t=window)?void 0:t.innerWidth)?e:null,height:null!=(n=null==(r=window)?void 0:r.innerHeight)?n:null})},addEventListener("resize",(()=>{requestAnimationFrame((()=>{i()}))}))),(()=>{if(z())try{const e=n(2);en.markStep=e.markStep,en.markStepOnce=e.markStepOnce,en.incrementUjNavigation=e.incrementUjNavigation,Yt=new e.Perfume({analyticsTracker:e=>{const{data:t,attribution:n,metricName:r,navigatorInformation:i,rating:a}=e,o=I[r],s=(null==n?void 0:n.category)||null;if(!o&&!s)return;const c=(null==i?void 0:i.deviceMemory)||0,u=(null==i?void 0:i.hardwareConcurrency)||0,l=(null==i?void 0:i.isLowEndDevice)||!1,p=(null==i?void 0:i.isLowEndExperience)||!1,v=(null==i?void 0:i.serviceWorkerStatus)||"unsupported",g=Vt({deviceMemory:c,hardwareConcurrency:u,isLowEndDevice:l,isLowEndExperience:p,serviceWorkerStatus:v},Gt),b={is_low_end_device:l,is_low_end_experience:p,page_key:re.pageKey||"",save_data:t.saveData||!1,service_worker:v,is_perf_metric:!0};if("navigationTiming"===r)t&&"number"==typeof t.redirectTime&&Ht({metricName:I.redirectTime.eventName,metricType:d.histogram,tags:b,value:t.redirectTime||0});else if("TTFB"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),Ht({metricName:I.TTFB.eventName,metricType:d.histogram,tags:Vt({},b),value:t}),a&&Ht({metricName:`perf_web_vitals_ttfb_${a}`,metricType:d.count,tags:b,value:1});else if("networkInformation"===r)null!=t&&t.effectiveType&&(Gt=t,$t(o.eventName,{action:f.measurement,componentType:m.page,networkInformationDownlink:t.downlink,networkInformationEffectiveType:t.effectiveType,networkInformationRtt:t.rtt,networkInformationSaveData:t.saveData,navigatorDeviceMemory:c,navigatorHardwareConcurrency:u}));else if("storageEstimate"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page},t,g)),Ht({metricName:"perf_storage_estimate_caches",metricType:d.histogram,tags:b,value:t.caches}),Ht({metricName:"perf_storage_estimate_indexed_db",metricType:d.histogram,tags:b,value:t.indexedDB});else if("CLS"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,score:100*t||null,vitalsScore:a||null},g)),a&&Ht({metricName:`perf_web_vitals_cls_${a}`,metricType:d.count,tags:b,value:1});else if("FID"===r){const e=(null==n?void 0:n.performanceEntry)||null,r=parseInt((null==e?void 0:e.processingStart)||"");$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,processingStart:null!=e&&e.processingStart?r:null,startTime:null!=e&&e.startTime?parseInt(e.startTime):null,vitalsScore:a||null},g)),a&&Ht({metricName:`perf_web_vitals_fidVitals_${a}`,metricType:d.count,tags:b,value:1})}else"userJourneyStep"===r?($t("perf_user_journey_step",Vt({action:f.measurement,componentType:m.page,duration:t||null,rating:null!=a?a:null,step_name:(null==n?void 0:n.stepName)||""},g)),Ht({metricName:`user_journey_step.${A.projectName}.${A.platform}.${(null==n?void 0:n.stepName)||""}_vitals_${a}`,metricType:d.count,tags:b,value:1}),Ht({metricName:`user_journey_step.${A.projectName}.${A.platform}.${(null==n?void 0:n.stepName)||""}`,metricType:d.distribution,tags:b,value:t||null})):I[r]&&t&&($t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),a&&(Ht({metricName:`perf_web_vitals_${Xt(r)}_${a}`,metricType:d.count,tags:b,value:1}),"LCP"===r&&Ht({metricName:`perf_web_vitals_${Xt(r)}`,metricType:d.distribution,tags:b,value:t})))},maxMeasureTime:3e4,steps:A.steps,onMarkStep:Zt})}catch(e){e instanceof Error&&A.onError(e)}})()},Tn=e=>{Y(e),e.userAgent&&Z(),lt({metricName:"Identify:",data:{countryCode:H.countryCode,deviceId:H.deviceId,userId:H.userId}})},kn=({blacklistRegex:e,pageKeyRegex:t,browserHistory:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.listen((()=>{on()}))},_n=({blacklistRegex:e,pageKeyRegex:t,nextJsRouter:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.events.on("routeChangeComplete",(()=>{on()}))},Sn=()=>{Y({isOptOut:!0}),ot(S,{})},En=()=>{Y({isOptOut:!1})},xn={Button:{label:"cb_button",uuid:"e921a074-40e6-4371-8700-134d5cd633e6",componentType:m.button}};function On(e,t,n){return{componentName:e,actions:t,data:n}}function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jn.apply(this,arguments)}function Nn(e,t,n){const{componentName:r,data:i}=n;$t(e.label,jn({componentType:e.componentType,action:t,loggingId:e.uuid,component_name:r},i))}const In={actionMapping:{onPress:f.click,onHover:f.hover},handlers:{Button:{[f.click]:e=>Nn(xn.Button,f.click,e),[f.hover]:e=>Nn(xn.Button,f.hover,e)}}};function Pn(e,t=!1){t?_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError})})),ut({metricName:"Batch Traces",data:e})}function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mn.apply(this,arguments)}const Bn=1e6;function Cn(e){return e*Bn}function Dn(e=function(){var e;return null==(e=window)?void 0:e.crypto}()){const t=new Uint32Array(2);return null==e||e.getRandomValues(t),((BigInt(t[0])<<BigInt(32))+BigInt(t[1])).toString()}function An(e,t){return{"x-datadog-origin":"rum","x-datadog-parent-id":t,"x-datadog-sampling-priority":"1","x-datadog-trace-id":e}}function Ln(e){var t;const{name:n,traceId:r,spanId:i,start:a,duration:o,resource:s,meta:c}=e;return{duration:o?Cn(o):0,name:n,resource:s,service:A.projectName,span_id:null!=i?i:Dn(),start:a?Cn(a):0,trace_id:null!=r?r:Dn(),parent_id:P,type:M,meta:Mn({platform:A.platform},re.pageKey?{page_key:re.pageKey}:{},null!=(t=Se.ujs)&&t.length?{last_ujs:Se.ujs[Se.ujs.length-1]}:{},null!=c?c:{})}}function Un(e){return[Ln(e)]}function Rn(e,t){Oe()&&function(e){return e.length>0}(e)&&(t&&function(e,t){e.forEach((e=>function(e,t){const n=Mn({},e.meta,t.meta),r={start:t.start?Cn(t.start):e.start,duration:t.duration?Cn(t.duration):e.duration};Object.assign(e,t,Mn({meta:n},r))}(e,t)))}(e,t),je.tracesQueue.push(e),wt(Pn)&&(Pn(je.tracesQueue),je.tracesQueue=[]))}function qn(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fn.apply(this,arguments)}function zn(){return void 0!==typeof window&&"performance"in window&&"mark"in performance&&"getEntriesByName"in performance}function Kn(e,t){return`perf_${e}${null!=t&&t.label?`_${t.label}`:""}`}function $n(e,t,n){return`${Kn(e,n)}__${t}`}let Qn={};function Wn(e,t,n){if(!zn())return;const r=$n(e,t,n);if(performance.mark(r),"end"===t){const t=Kn(e,n);!function(e,t,n){try{performance.measure(e,t,n)}catch(e){A.onError(e)}}(t,$n(e,"start",n),r);const i=performance.getEntriesByName(t).pop();i&&Ht(Fn({metricName:e,metricType:d.distribution,value:i.duration},null!=n&&n.tags?{tags:n.tags}:{}))}}function Hn(e,t){if(!zn())return;const n=$n(e,"start",t);Qn[n]||(Wn(e,"start",t),Qn[n]=!0)}function Vn(e,t){const n=$n(e,"start",t),r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(Qn,[n].map(qn));Qn=r}function Jn(e,t){if(!zn())return;const n=$n(e,"start",t);Qn[n]&&(Wn(e,"end",t),Vn(e,t))}function Xn(){zn()&&(performance.clearMarks(),Qn={})}var Gn=n(784);function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zn.apply(this,arguments)}function Yn(e,t,n=l.low){const r=(0,Gn.useRef)(t);return(0,Gn.useEffect)((()=>{r.current=t}),[t]),(0,Gn.useCallback)((t=>{$t(e,Zn({},r.current,t),n)}),[e,n])}function er(){return er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},er.apply(this,arguments)}function tr(e,t,n=l.low){(0,Gn.useEffect)((()=>{const r=er({},t,{action:f.render});$t(e,r,n)}),[])}function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(this,arguments)}const rr=function(e,t){return{markStartPerf:(0,Gn.useCallback)((()=>Hn(e,t)),[e,t]),markEndPerf:(0,Gn.useCallback)((n=>Jn(e,nr({},t,n))),[e,t])}};function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ir.apply(this,arguments)}function ar(){return Object.entries(ir({},Se,zt(),{sessionUUID:oe.sessionUUID,userId:oe.userId})).reduce(((e,t)=>{return null!=(n=t[1])&&""!==n?ir({},e,{[t[0]]:t[1]}):e;var n}),{})}async function or(){return new Promise((e=>{Mt(vt(je.eventsQueue)),Qt(bt(je.metricsQueue),!0),Pn(je.tracesQueue,!0),Ne({eventsQueue:[],metricsQueue:[],tracesQueue:[]}),e()}))}function sr(){return{"X-CB-Device-ID":H.deviceId||"unknown","X-CB-Is-Logged-In":H.userId?"true":"false","X-CB-Pagekey":re.pageKey||"unknown","X-CB-UJS":(e=Se.ujs,void 0===e||0===e.length?"":e.join(",")),"X-CB-Platform":A.platform||"unknown","X-CB-Project-Name":A.projectName||"unknown","X-CB-Session-UUID":oe.sessionUUID||"unknown","X-CB-Version-Name":A.version?String(A.version):"unknown"};var e}})(),r})()}));',n.type="text/javascript",document.head.appendChild(n),Dn(),document.head.removeChild(n),e()}catch(r){console.error("Failed to execute inlined telemetry script"),t()}})},Dn=function(){var e,t,n;if("undefined"!=typeof window){var r=null!==(n=null!==(e=Ln.config.get().deviceId)&&void 0!==e?e:null===(t=window.crypto)||void 0===t?void 0:t.randomUUID())&&void 0!==n?n:"";if(window.ClientAnalytics){var a=window.ClientAnalytics,i=a.init,o=a.identify;i({isProd:!0,amplitudeApiKey:"c66737ad47ec354ced777935b0af822e",platform:a.PlatformName.web,projectName:"base_account_sdk",showDebugLogging:!1,version:"1.0.0",apiEndpoint:"https://cca-lite.coinbase.com"}),o({deviceId:r}),Ln.config.set({deviceId:r})}}},Nn={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},Un={userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902},Bn={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},Rn="Unspecified error message.";function Gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rn;if(e&&Number.isInteger(e)){var n=e.toString();if(Hn(Bn,n))return Bn[n].message;if(zn(e))return"Unspecified server error."}return t}function qn(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).shouldIncludeStack,n=void 0!==t&&t,r={};if(e&&"object"===u(e)&&!Array.isArray(e)&&Hn(e,"code")&&function(e){if(!Number.isInteger(e))return!1;var t=e.toString();return!!Bn[t]||!!zn(e)}(e.code)){var a=e;r.code=a.code,a.message&&"string"==typeof a.message?(r.message=a.message,Hn(a,"data")&&(r.data=a.data)):(r.message=Gn(r.code),r.data={originalError:Fn(e)})}else r.code=Nn.internal,r.message=Wn(e,"message")?e.message:Rn,r.data={originalError:Fn(e)};return n&&(r.stack=Wn(e,"stack")?e.stack:void 0),r}function zn(e){return e>=-32099&&e<=-32e3}function Fn(e){return e&&"object"===u(e)&&!Array.isArray(e)?Object.assign({},e):e}function Hn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wn(e,t){return"object"===u(e)&&null!==e&&t in e&&"string"==typeof e[t]}var Kn={rpc:{parse:function(e){return Vn(Nn.parse,e)},invalidRequest:function(e){return Vn(Nn.invalidRequest,e)},invalidParams:function(e){return Vn(Nn.invalidParams,e)},methodNotFound:function(e){return Vn(Nn.methodNotFound,e)},internal:function(e){return Vn(Nn.internal,e)},server:function(e){if(!e||"object"!==u(e)||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");var t=e.code;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Vn(t,e)},invalidInput:function(e){return Vn(Nn.invalidInput,e)},resourceNotFound:function(e){return Vn(Nn.resourceNotFound,e)},resourceUnavailable:function(e){return Vn(Nn.resourceUnavailable,e)},transactionRejected:function(e){return Vn(Nn.transactionRejected,e)},methodNotSupported:function(e){return Vn(Nn.methodNotSupported,e)},limitExceeded:function(e){return Vn(Nn.limitExceeded,e)}},provider:{userRejectedRequest:function(e){return Jn(Un.userRejectedRequest,e)},unauthorized:function(e){return Jn(Un.unauthorized,e)},unsupportedMethod:function(e){return Jn(Un.unsupportedMethod,e)},disconnected:function(e){return Jn(Un.disconnected,e)},chainDisconnected:function(e){return Jn(Un.chainDisconnected,e)},unsupportedChain:function(e){return Jn(Un.unsupportedChain,e)},custom:function(e){if(!e||"object"!==u(e)||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");var t=e.code,n=e.message,r=e.data;if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string');return new Zn(t,n,r)}}};function Vn(e,t){var n=E(Qn(t),2),r=n[0],a=n[1];return new $n(e,r||Gn(e),a)}function Jn(e,t){var n=E(Qn(t),2),r=n[0],a=n[1];return new Zn(e,r||Gn(e),a)}function Qn(e){if(e){if("string"==typeof e)return[e];if("object"===u(e)&&!Array.isArray(e)){var t=e.message,n=e.data;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}var $n=function(e){function t(e,n,r){var a;if(h(this,t),!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string.');return(a=m(this,t,[n])).code=e,void 0!==r&&(a.data=r),a}return b(t,e),p(t)}(c(Error)),Zn=function(e){function t(e,n,r){if(h(this,t),!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');return m(this,t,[e,n,r])}return b(t,e),p(t)}($n);function Yn(e){return"object"===u(e)&&null!==e&&"code"in e&&"data"in e&&-32090===e.code&&"object"===u(e.data)&&null!==e.data&&"type"in e.data&&"INSUFFICIENT_FUNDS"===e.data.type}function Xn(e){return"object"===u(e)&&null!==e&&"details"in e}function er(e){try{var t=JSON.parse(e.details);return new $n(t.code,t.message,t.data)}catch(g){return null}}var tr=function(e){return e},nr=function(e){return e};function rr(e){return Math.floor(e)}var ar=/^[0-9]*$/,ir=/^[a-f0-9]*$/;function or(e){return sr(crypto.getRandomValues(new Uint8Array(e)))}function sr(e){return d(e).map(function(e){return e.toString(16).padStart(2,"0")}).join("")}function cr(e){return new Uint8Array(e.match(/.{1,2}/g).map(function(e){return Number.parseInt(e,16)}))}function ur(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.toString("hex");return tr(t?"0x".concat(n):n)}function lr(e){return ur(wr(e),!0)}function dr(e){return nr(e.toString(10))}function fr(e){return tr("0x".concat(BigInt(e).toString(16)))}function pr(e){return e.startsWith("0x")||e.startsWith("0X")}function hr(e){return pr(e)?e.slice(2):e}function mr(e){return pr(e)?"0x".concat(e.slice(2)):"0x".concat(e)}function vr(e){if("string"!=typeof e)return!1;var t=hr(e).toLowerCase();return ir.test(t)}function yr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e){var n=hr(e).toLowerCase();if(ir.test(n))return tr(t?"0x".concat(n):n)}throw Kn.rpc.invalidParams('"'.concat(String(e),'" is not a hexadecimal string'))}function br(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=yr(e,!1);return n.length%2==1&&(n=tr("0".concat(n))),t?tr("0x".concat(n)):n}function gr(e){if("string"==typeof e){var t=hr(e).toLowerCase();if(vr(t)&&40===t.length)return mr(t)}throw Kn.rpc.invalidParams("Invalid Ethereum address: ".concat(String(e)))}function wr(e){if(Buffer.isBuffer(e))return e;if("string"==typeof e){if(vr(e)){var t=br(e,!1);return Buffer.from(t,"hex")}return Buffer.from(e,"utf8")}throw Kn.rpc.invalidParams("Not binary data: ".concat(String(e)))}function kr(e){if("number"==typeof e&&Number.isInteger(e))return rr(e);if("string"==typeof e){if(ar.test(e))return rr(Number(e));if(vr(e))return rr(Number(BigInt(br(e,!0))))}throw Kn.rpc.invalidParams("Not an integer: ".concat(String(e)))}function Ir(e){if(null!==e&&("bigint"==typeof e||function(e){if(null==e||"function"!=typeof e.constructor)return!1;var t=e.constructor;return"function"==typeof t.config&&"number"==typeof t.EUCLID}(e)))return BigInt(e.toString(10));if("number"==typeof e)return BigInt(kr(e));if("string"==typeof e){if(ar.test(e))return BigInt(e);if(vr(e))return BigInt(br(e,!0))}throw Kn.rpc.invalidParams("Not an integer: ".concat(String(e)))}function xr(e){if("string"==typeof e)return JSON.parse(e);if("object"===u(e))return e;throw Kn.rpc.invalidParams("Not a JSON string or an object: ".concat(String(e)))}var Ar,Sr,Or={getCrossOriginOpenerPolicy:function(){return void 0===Ar?"undefined":Ar},checkCrossOriginOpenerPolicy:(Sr=P(A().m(function e(){var t,n,r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if("undefined"!=typeof window){e.n=1;break}return Ar="non-browser-env",e.a(2);case 1:return e.p=1,t="".concat(window.location.origin).concat(window.location.pathname),e.n=2,fetch(t,{method:"HEAD"});case 2:if((n=e.v).ok){e.n=3;break}throw new Error("HTTP error! status: ".concat(n.status));case 3:r=n.headers.get("Cross-Origin-Opener-Policy"),"same-origin"===(Ar=null!=r?r:"null")&&console.error("Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.\n\nPlease see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information."),e.n=5;break;case 4:e.p=4,a=e.v,console.error("Error checking Cross-Origin-Opener-Policy:",a.message),Ar="error";case 5:return e.a(2)}},e,null,[[1,4]])})),function(){return Sr.apply(this,arguments)})},Pr=Or.checkCrossOriginOpenerPolicy,Er=Or.getCrossOriginOpenerPolicy;function Tr(e,t){return _r.apply(this,arguments)}function _r(){return(_r=P(A().m(function e(t,n){var r,a,i,o,s;return A().w(function(e){for(;;)switch(e.n){case 0:return r=Object.assign(Object.assign({},t),{jsonrpc:"2.0",id:crypto.randomUUID()}),e.n=1,window.fetch(n,{method:"POST",body:JSON.stringify(r),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":kn,"X-Cbw-Sdk-Platform":In}});case 1:return a=e.v,e.n=2,a.json();case 2:if(i=e.v,o=i.result,!(s=i.error)){e.n=3;break}throw s;case 3:return e.a(2,o)}},e)}))).apply(this,arguments)}function Cr(e){if(!e||"object"!==u(e)||Array.isArray(e))throw Kn.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:e});var t=e.method,n=e.params;if("string"!=typeof t||0===t.length)throw Kn.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:e});if(void 0!==n&&!Array.isArray(n)&&("object"!==u(n)||null===n))throw Kn.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:e});switch(t){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw Kn.provider.unsupportedMethod()}}function jr(e){if("function"!=typeof e)throw new Error("toAccount is not a function")}var Lr,Mr,Dr,Nr="https://rpc.wallet.coinbase.com",Ur="https://www.walletlink.org";function Br(e,t,n){var r,a,i,o;window.ClientAnalytics&&(null===(r=window.ClientAnalytics)||void 0===r||r.logEvent(e,Object.assign(Object.assign({},t),{sdkVersion:kn,appName:null!==(i=null===(a=Ln.config.get().metadata)||void 0===a?void 0:a.appName)&&void 0!==i?i:"",appOrigin:window.location.origin,appPreferredSigner:null===(o=Ln.config.get().preference)||void 0===o?void 0:o.options}),n))}!function(e){e.unknown="unknown",e.banner="banner",e.button="button",e.card="card",e.chart="chart",e.content_script="content_script",e.dropdown="dropdown",e.link="link",e.page="page",e.modal="modal",e.table="table",e.search_bar="search_bar",e.service_worker="service_worker",e.text="text",e.text_input="text_input",e.tray="tray",e.checkbox="checkbox",e.icon="icon"}(Lr||(Lr={})),function(e){e.unknown="unknown",e.blur="blur",e.click="click",e.change="change",e.dismiss="dismiss",e.focus="focus",e.hover="hover",e.select="select",e.measurement="measurement",e.move="move",e.process="process",e.render="render",e.scroll="scroll",e.view="view",e.search="search",e.keyPress="keyPress",e.error="error"}(Mr||(Mr={})),function(e){e.low="low",e.high="high"}(Dr||(Dr={}));var Rr=function(){Br("communicator.popup_setup.started",{action:Mr.unknown,componentType:Lr.unknown},Dr.high)},Gr=function(e){var t=e.snackbarContext;Br("snackbar.".concat(t,".shown"),{action:Mr.render,componentType:Lr.modal,snackbarContext:t},Dr.high)},qr=function(e){var t=e.snackbarContext,n=e.snackbarAction;Br("snackbar.".concat(t,".action_clicked"),{action:Mr.click,componentType:Lr.button,snackbarContext:t,snackbarAction:n},Dr.high)};function zr(){var e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode('@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}')),document.documentElement.appendChild(e)}function Fr(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==u(e))if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Fr(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Hr(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Fr(e))&&(r&&(r+=" "),r+=t);return r}function Wr(){try{return function(){try{return null!==window.frameElement}catch(g){return!1}}()&&window.top?window.top.location:window.location}catch(g){return window.location}}function Kr(){var e,t;return null!==(t=null===(e=null===window||void 0===window?void 0:window.matchMedia)||void 0===e?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)&&void 0!==t&&t}var Vr=function(){return p(function e(){h(this,e),this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=Kr()},[{key:"attach",value:function(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}},{key:"presentItem",value:function(e){var t=this,n=this.nextItemKey++;return this.items.set(n,e),this.render(),function(){t.items.delete(n),t.render()}}},{key:"clear",value:function(){this.items.clear(),this.render()}},{key:"render",value:function(){this.root&&y(g("div",null,g(Jr,{darkMode:this.darkMode},Array.from(this.items.entries()).map(function(e){var t=E(e,2),n=t[0],r=t[1];return g(Qr,Object.assign({},r,{key:n}))}))),this.root)}}])}(),Jr=function(e){return g("div",{class:Hr("-cbwsdk-snackbar-container")},g("style",null,".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"),g("div",{class:"-cbwsdk-snackbar"},e.children))},Qr=function(e){var t=e.autoExpand,n=e.message,r=e.menuItems,a=E(w(!0),2),i=a[0],o=a[1],s=E(w(null!=t&&t),2),c=s[0],u=s[1];x(function(){var e=[window.setTimeout(function(){o(!1)},1),window.setTimeout(function(){u(!0)},1e4)];return function(){e.forEach(window.clearTimeout)}});return g("div",{class:Hr("-cbwsdk-snackbar-instance",i&&"-cbwsdk-snackbar-instance-hidden",c&&"-cbwsdk-snackbar-instance-expanded")},g("div",{class:"-cbwsdk-snackbar-instance-header",onClick:function(){u(!c)}},g("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",g("div",{class:"-cbwsdk-snackbar-instance-header-message"},n),g("div",{class:"-gear-container"},!c&&g("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),g("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",class:"-gear-icon",title:"Expand"}))),r&&r.length>0&&g("div",{class:"-cbwsdk-snackbar-instance-menu"},r.map(function(e,t){return g("div",{class:Hr("-cbwsdk-snackbar-instance-menu-item",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:e.onClick,key:t},g("svg",{width:e.svgWidth,height:e.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g("path",{"fill-rule":e.defaultFillRule,"clip-rule":e.defaultClipRule,d:e.path,fill:"#AAAAAA"})),g("span",{class:Hr("-cbwsdk-snackbar-instance-menu-item-info",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},e.info))})))},$r="M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",Zr=function(){return p(function e(){h(this,e),this.attached=!1,this.snackbar=new Vr},[{key:"attach",value:function(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");var e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.snackbar.attach(t),this.attached=!0,zr()}},{key:"showConnecting",value:function(e){var t;return t=e.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:{message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:$r,defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}}])}(),Yr={isRed:!1,info:"Retry",svgWidth:"10",svgHeight:"11",path:$r,defaultFillRule:"evenodd",defaultClipRule:"evenodd"},Xr=null;function ea(e){var t=(window.innerWidth-420)/2+window.screenX,n=(window.innerHeight-700)/2+window.screenY;function r(){var r="wallet_".concat(crypto.randomUUID()),a=window.open(e,r,"width=".concat(420,", height=").concat(700,", left=").concat(t,", top=").concat(n));return null==a||a.focus(),a||null}!function(e){for(var t={sdkName:In,sdkVersion:kn,origin:window.location.origin,coop:Er()},n=0,r=Object.entries(t);n<r.length;n++){var a=E(r[n],2),i=a[0],o=a[1];e.searchParams.has(i)||e.searchParams.append(i,o.toString())}}(e);var a=r();if(!a){var i=ta();return new Promise(function(e,t){Gr({snackbarContext:"popup_blocked"}),i.presentItem({autoExpand:!0,message:"Popup was blocked. Try again.",menuItems:[Object.assign(Object.assign({},Yr),{onClick:function(){qr({snackbarContext:"popup_blocked",snackbarAction:"confirm"}),(a=r())?e(a):t(Kn.rpc.internal("Popup window was blocked")),i.clear()}})]})})}return Promise.resolve(a)}function ta(){if(!Xr){var e=document.createElement("div");e.className="-cbwsdk-css-reset",document.body.appendChild(e),(Xr=new Vr).attach(e)}return Xr}var na=p(function e(t){var n=this,r=t.url,a=void 0===r?"https://keys.coinbase.com/connect":r,i=t.metadata,o=t.preference;h(this,e),this.popup=null,this.listeners=new Map,this.postMessage=function(){var e=P(A().m(function e(t){return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n.waitForPopupLoaded();case 1:e.v.postMessage(t,n.url.origin);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),this.postRequestAndWaitForResponse=function(){var e=P(A().m(function e(t){var r;return A().w(function(e){for(;;)switch(e.n){case 0:return r=n.onMessage(function(e){return e.requestId===t.id}),n.postMessage(t),e.n=1,r;case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}(),this.onMessage=function(){var e=P(A().m(function e(t){return A().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,r){var a=function(r){if(r.origin===n.url.origin){var i=r.data;t(i)&&(e(i),window.removeEventListener("message",a),n.listeners.delete(a))}};window.addEventListener("message",a),n.listeners.set(a,{reject:r})}))},e)}));return function(t){return e.apply(this,arguments)}}(),this.disconnect=function(){var e;(e=n.popup)&&!e.closed&&e.close(),n.popup=null,n.listeners.forEach(function(e,t){(0,e.reject)(Kn.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",t)}),n.listeners.clear()},this.waitForPopupLoaded=P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:if(!n.popup||n.popup.closed){e.n=1;break}return n.popup.focus(),e.a(2,n.popup);case 1:return Rr(),e.n=2,ea(n.url);case 2:return n.popup=e.v,n.onMessage(function(e){return"PopupUnload"===e.event}).then(function(){n.disconnect(),Br("communicator.popup_unload.received",{action:Mr.unknown,componentType:Lr.unknown},Dr.high)}).catch(function(){}),e.a(2,n.onMessage(function(e){return"PopupLoaded"===e.event}).then(function(e){n.postMessage({requestId:e.id,data:{version:kn,metadata:n.metadata,preference:n.preference,location:window.location.toString()}})}).then(function(){if(!n.popup)throw Kn.rpc.internal();return Br("communicator.popup_setup.completed",{action:Mr.unknown,componentType:Lr.unknown},Dr.high),n.popup}))}},e)})),this.url=new URL(a),this.metadata=i,this.preference=o});function ra(e){return void 0!==e.errorMessage}function aa(e){var t=qn(function(e){var t;if("string"==typeof e)return{message:e,code:Nn.internal};if(ra(e)){var n=e.errorMessage,r=null!==(t=e.errorCode)&&void 0!==t?t:n.match(/(denied|rejected)/i)?Un.userRejectedRequest:void 0;return Object.assign(Object.assign({},e),{message:n,code:r,data:{method:e.method}})}return e}(e),{shouldIncludeStack:!0}),n=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return n.searchParams.set("version",kn),n.searchParams.set("code",t.code.toString()),n.searchParams.set("message",t.message),Object.assign(Object.assign({},t),{docUrl:n.href})}var ia,oa={exports:{}};var sa=(ia||(ia=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new a(r,i||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,o=new Array(i);a<i;a++)o[a]=r[a].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,a,i,o){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,a),!0;case 5:return l.fn.call(l.context,t,r,a,i),!0;case 6:return l.fn.call(l.context,t,r,a,i,o),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,a);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||a&&!s.once||r&&s.context!==r||o(this,i);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||a&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[i]=1===u.length?u[0]:u:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(oa)),oa.exports),ca=function(e){function t(){return h(this,t),m(this,t,arguments)}return b(t,e),p(t)}(xe(sa)),ua=function(){function e(t,n){h(this,e),this.scope=t,this.module=n}return p(e,[{key:"storeObject",value:function(e,t){this.setItem(e,JSON.stringify(t))}},{key:"loadObject",value:function(e){var t=this.getItem(e);return t?JSON.parse(t):void 0}},{key:"setItem",value:function(e,t){localStorage.setItem(this.scopedKey(e),t)}},{key:"getItem",value:function(e){return localStorage.getItem(this.scopedKey(e))}},{key:"removeItem",value:function(e){localStorage.removeItem(this.scopedKey(e))}},{key:"clear",value:function(){for(var e=this.scopedKey(""),t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);"string"==typeof r&&r.startsWith(e)&&t.push(r)}t.forEach(function(e){return localStorage.removeItem(e)})}},{key:"scopedKey",value:function(e){return"-".concat(this.scope).concat(this.module?":".concat(this.module):"",":").concat(e)}}],[{key:"clearAll",value:function(){new e("CBWSDK").clear(),new e("walletlink").clear()}}])}(),la=function(e){var t=e.method,n=e.correlationId;Br("provider.request.started",{action:Mr.unknown,componentType:Lr.unknown,method:t,correlationId:n},Dr.high)},da=function(e){var t=e.method,n=e.correlationId,r=e.signerType,a=e.errorMessage;Br("provider.request.error",{action:Mr.error,componentType:Lr.unknown,method:t,signerType:r,correlationId:n,errorMessage:a},Dr.high)},fa=function(e){var t=e.method,n=e.signerType,r=e.correlationId;Br("provider.request.responded",{action:Mr.unknown,componentType:Lr.unknown,method:t,signerType:n,correlationId:r},Dr.high)},pa=function(){Br("provider.enable_function.called",{action:Mr.measurement,componentType:Lr.unknown},Dr.high)},ha=function(){Br("signer.selection.requested",{action:Mr.unknown,componentType:Lr.unknown},Dr.high)},ma=function(e){Br("signer.selection.responded",{action:Mr.unknown,componentType:Lr.unknown,signerType:e},Dr.high)},va=wn(function(){return{correlationIds:new Map}}),ya=function(e){return va.getState().correlationIds.get(e)},ba=function(e,t){va.setState(function(n){var r=new Map(n.correlationIds);return r.set(e,t),{correlationIds:r}})},ga=function(e){va.setState(function(t){var n=new Map(t.correlationIds);return n.delete(e),{correlationIds:n}})},wa=function(){va.setState({correlationIds:new Map})},ka=function(e){var t,n=e.method,r=e.correlationId;Br("scw_signer.handshake.started",{action:Mr.unknown,componentType:Lr.unknown,method:n,correlationId:r,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Ia=function(e){var t,n=e.method,r=e.correlationId,a=e.errorMessage;Br("scw_signer.handshake.error",{action:Mr.error,componentType:Lr.unknown,method:n,correlationId:r,errorMessage:a,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},xa=function(e){var t,n=e.method,r=e.correlationId;Br("scw_signer.handshake.completed",{action:Mr.unknown,componentType:Lr.unknown,method:n,correlationId:r,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Aa=function(e){var t,n=e.method,r=e.correlationId;Br("scw_signer.request.started",{action:Mr.unknown,componentType:Lr.unknown,method:n,correlationId:r,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Sa=function(e){var t,n=e.method,r=e.correlationId,a=e.errorMessage;Br("scw_signer.request.error",{action:Mr.error,componentType:Lr.unknown,method:n,correlationId:r,errorMessage:a,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Oa=function(e){var t,n=e.method,r=e.correlationId;Br("scw_signer.request.completed",{action:Mr.unknown,componentType:Lr.unknown,method:n,correlationId:r,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Pa=function(e){var t,n=e.method,r=e.correlationId;Br("scw_sub_account.request.started",{action:Mr.unknown,componentType:Lr.unknown,method:n,correlationId:r,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Ea=function(e){var t,n=e.method,r=e.correlationId;Br("scw_sub_account.request.completed",{action:Mr.unknown,componentType:Lr.unknown,method:n,correlationId:r,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Ta=function(e){var t,n=e.method,r=e.correlationId,a=e.errorMessage;Br("scw_sub_account.request.error",{action:Mr.error,componentType:Lr.unknown,method:n,correlationId:r,errorMessage:a,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},_a=function(e){var t,n=e.method,r=e.correlationId;Br("scw_sub_account.add_owner.started",{action:Mr.unknown,componentType:Lr.unknown,method:n,correlationId:r,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Ca=function(e){var t,n=e.method,r=e.correlationId;Br("scw_sub_account.add_owner.completed",{action:Mr.unknown,componentType:Lr.unknown,method:n,correlationId:r,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},ja=function(e){var t,n=e.method,r=e.correlationId,a=e.errorMessage;Br("scw_sub_account.add_owner.error",{action:Mr.error,componentType:Lr.unknown,method:n,correlationId:r,errorMessage:a,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},La=function(e){var t,n=e.method,r=e.correlationId;Br("scw_sub_account.insufficient_balance.error_handling.started",{action:Mr.unknown,componentType:Lr.unknown,method:n,correlationId:r,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Ma=function(e){var t,n=e.method,r=e.correlationId;Br("scw_sub_account.insufficient_balance.error_handling.completed",{action:Mr.unknown,componentType:Lr.unknown,method:n,correlationId:r,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Da=function(e){var t,n=e.method,r=e.correlationId,a=e.errorMessage;Br("scw_sub_account.insufficient_balance.error_handling.error",{action:Mr.error,componentType:Lr.unknown,method:n,correlationId:r,errorMessage:a,enableAutoSubAccounts:null===(t=Ln.subAccountsConfig.get())||void 0===t?void 0:t.enableAutoSubAccounts},Dr.high)},Na=function(e){return"message"in e&&"string"==typeof e.message?e.message:""},Ua=wn(function(){return{}});function Ba(e){e.forEach(function(e){var t,n,r,a,i,o,s,c;if(e.rpcUrl){var u,l,d,f,p,h=Ae({id:e.id,rpcUrls:{default:{http:[e.rpcUrl]}},name:null!==(n=null===(t=e.nativeCurrency)||void 0===t?void 0:t.name)&&void 0!==n?n:"",nativeCurrency:{name:null!==(a=null===(r=e.nativeCurrency)||void 0===r?void 0:r.name)&&void 0!==a?a:"",symbol:null!==(o=null===(i=e.nativeCurrency)||void 0===i?void 0:i.symbol)&&void 0!==o?o:"",decimals:null!==(c=null===(s=e.nativeCurrency)||void 0===s?void 0:s.decimal)&&void 0!==c?c:18}}),m=(u={chain:h,transport:Se(e.rpcUrl)},l=u.key,d=void 0===l?"public":l,f=u.name,p=void 0===f?"Public Client":f,q(k(k({},u),{},{key:d,name:p,type:"publicClient"})).extend(z)),v=function(e){var t,n=e.client,r=e.key,a=void 0===r?"bundler":r,i=e.name,o=void 0===i?"Bundler Client":i,s=e.paymaster,c=e.paymasterContext,u=e.transport,l=e.userOperation;return Object.assign(q(k(k({},e),{},{chain:null!==(t=e.chain)&&void 0!==t?t:null==n?void 0:n.chain,key:a,name:o,transport:u,type:"bundlerClient"})),{client:n,paymaster:s,paymasterContext:c,userOperation:l}).extend(mn)}({client:m,transport:Se(e.rpcUrl)});Ua.setState(I({},e.id,{client:m,bundlerClient:v}))}})}function Ra(e){var t;return null===(t=Ua.getState()[e])||void 0===t?void 0:t.client}function Ga(e,t,n){if(null==e)throw null!=t?t:Kn.rpc.invalidParams({message:"value must be present",data:e})}function qa(e,t){if(!Array.isArray(e))throw Kn.rpc.invalidParams({message:null!=t?t:"value must be an array",data:e})}function za(e){if("object"!==u(e)||null===e)throw Kn.rpc.internal("sub account info is not an object");if(!("address"in e))throw Kn.rpc.internal("sub account is invalid");if("address"in e&&"string"==typeof e.address&&!T(e.address))throw Kn.rpc.internal("sub account address is invalid");if("factory"in e&&"string"==typeof e.factory&&!T(e.factory))throw Kn.rpc.internal("sub account factory address is invalid");if("factoryData"in e&&"string"==typeof e.factoryData&&!Oe(e.factoryData))throw Kn.rpc.internal("sub account factory data is invalid")}function Fa(){return Ha.apply(this,arguments)}function Ha(){return(Ha=P(A().m(function e(){return A().w(function(e){for(;;)if(0===e.n)return e.a(2,crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]))},e)}))).apply(this,arguments)}function Wa(e,t){return Ka.apply(this,arguments)}function Ka(){return(Ka=P(A().m(function e(t,n){return A().w(function(e){for(;;)if(0===e.n)return e.a(2,crypto.subtle.deriveKey({name:"ECDH",public:n},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]))},e)}))).apply(this,arguments)}function Va(e,t){return Ja.apply(this,arguments)}function Ja(){return(Ja=P(A().m(function e(t,n){var r,a;return A().w(function(e){for(;;)switch(e.n){case 0:return r=crypto.getRandomValues(new Uint8Array(12)),e.n=1,crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,(new TextEncoder).encode(n));case 1:return a=e.v,e.a(2,{iv:r,cipherText:a})}},e)}))).apply(this,arguments)}function Qa(e,t){return $a.apply(this,arguments)}function $a(){return($a=P(A().m(function e(t,n){var r,a,i;return A().w(function(e){for(;;)switch(e.n){case 0:return r=n.iv,a=n.cipherText,e.n=1,crypto.subtle.decrypt({name:"AES-GCM",iv:r},t,a);case 1:return i=e.v,e.a(2,(new TextDecoder).decode(i))}},e)}))).apply(this,arguments)}function Za(e){switch(e){case"public":return"spki";case"private":return"pkcs8"}}function Ya(e,t){return Xa.apply(this,arguments)}function Xa(){return(Xa=P(A().m(function e(t,n){var r,a;return A().w(function(e){for(;;)switch(e.n){case 0:return r=Za(t),e.n=1,crypto.subtle.exportKey(r,n);case 1:return a=e.v,e.a(2,sr(new Uint8Array(a)))}},e)}))).apply(this,arguments)}function ei(e,t){return ti.apply(this,arguments)}function ti(){return(ti=P(A().m(function e(t,n){var r,a;return A().w(function(e){for(;;)switch(e.n){case 0:return r=Za(t),a=cr(n).buffer,e.n=1,crypto.subtle.importKey(r,new Uint8Array(a),{name:"ECDH",namedCurve:"P-256"},!0,"private"===t?["deriveKey"]:[]);case 1:return e.a(2,e.v)}},e)}))).apply(this,arguments)}function ni(e,t){return ri.apply(this,arguments)}function ri(){return(ri=P(A().m(function e(t,n){var r;return A().w(function(e){for(;;)if(0===e.n)return r=JSON.stringify(t,function(e,t){if(!(t instanceof Error))return t;var n=t;return Object.assign(Object.assign({},n.code?{code:n.code}:{}),{message:n.message})}),e.a(2,Va(n,r))},e)}))).apply(this,arguments)}function ai(e,t){return ii.apply(this,arguments)}function ii(){return(ii=P(A().m(function e(t,n){var r;return A().w(function(e){for(;;)switch(e.n){case 0:return r=JSON,e.n=1,Qa(n,t);case 1:return e.a(2,r.parse.call(r,e.v))}},e)}))).apply(this,arguments)}var oi=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,t);var a=function(e){if(r.cause instanceof t){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return null!==(e=r.cause)&&void 0!==e&&e.message?r.cause.message:r.details}(),i=r.cause instanceof t&&r.cause.docsPath||r.docsPath,o="".concat("https://oxlib.sh").concat(null!=i?i:"");return n=m(this,t,[[e||"An error occurred."].concat(d(r.metaMessages?[""].concat(d(r.metaMessages)):[]),d(a||i?["",a?"Details: ".concat(a):void 0,i?"See: ".concat(o):void 0]:[])).filter(function(e){return"string"==typeof e}).join("\n"),r.cause?{cause:r.cause}:void 0]),Object.defineProperty(n,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(n,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@".concat("0.1.1")}),n.cause=r.cause,n.details=a,n.docs=o,n.docsPath=i,n.shortMessage=e,n}return b(t,e),p(t,[{key:"walk",value:function(e){return si(this,e)}}])}(c(Error));function si(e,t){return null!=t&&t(e)?e:e&&"object"===u(e)&&"cause"in e&&e.cause?si(e.cause,t):t?null:e}
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ci(e){if(!((t=e)instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name))throw new Error("Uint8Array expected");for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(r.length>0&&!r.includes(e.length))throw new Error("Uint8Array expected of length "+r+", got length="+e.length)}function ui(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function li(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)t[r].fill(0)}function di(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function fi(e,t){return e<<32-t|e>>>t}function pi(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e)),ci(e),e}var hi=p(function e(){h(this,e)});function mi(e){var t=function(t){return e().update(pi(t)).digest()},n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(){return e()},t}function vi(e,t,n){return e&t^~e&n}function yi(e,t,n){return e&t^e&n^t&n}var bi=function(e){function t(e,n,r,a){var i;return h(this,t),(i=m(this,t)).finished=!1,i.length=0,i.pos=0,i.destroyed=!1,i.blockLen=e,i.outputLen=n,i.padOffset=r,i.isLE=a,i.buffer=new Uint8Array(e),i.view=di(i.buffer),i}return b(t,e),p(t,[{key:"update",value:function(e){ui(this),ci(e=pi(e));for(var t=this.view,n=this.buffer,r=this.blockLen,a=e.length,i=0;i<a;){var o=Math.min(r-this.pos,a-i);if(o!==r)n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0),this.pos=0);else for(var s=di(e);r<=a-i;i+=r)this.process(s,i)}return this.length+=e.length,this.roundClean(),this}},{key:"digestInto",value:function(e){ui(this),function(e,t){ci(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(e,this),this.finished=!0;var t=this.buffer,n=this.view,r=this.blockLen,a=this.isLE,i=this.pos;t[i++]=128,li(this.buffer.subarray(i)),this.padOffset>r-i&&(this.process(n,0),i=0);for(var o=i;o<r;o++)t[o]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);var a=BigInt(32),i=BigInt(4294967295),o=Number(n>>a&i),s=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,s,r)}(n,r-8,BigInt(8*this.length),a),this.process(n,0);var s=di(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(var d=0;d<u;d++)s.setUint32(4*d,l[d],a)}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}},{key:"_cloneInto",value:function(e){var t;e||(e=new this.constructor),(t=e).set.apply(t,d(this.get()));var n=this.blockLen,r=this.buffer,a=this.length,i=this.finished,o=this.destroyed,s=this.pos;return e.destroyed=o,e.finished=i,e.length=a,e.pos=s,a%n&&e.buffer.set(r),e}},{key:"clone",value:function(){return this._cloneInto()}}])}(hi),gi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),wi=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ki=new Uint32Array(64),Ii=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return h(this,t),(e=m(this,t,[64,n,8,!1])).A=0|gi[0],e.B=0|gi[1],e.C=0|gi[2],e.D=0|gi[3],e.E=0|gi[4],e.F=0|gi[5],e.G=0|gi[6],e.H=0|gi[7],e}return b(t,e),p(t,[{key:"get",value:function(){return[this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H]}},{key:"set",value:function(e,t,n,r,a,i,o,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|a,this.F=0|i,this.G=0|o,this.H=0|s}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)ki[n]=e.getUint32(t,!1);for(var r=16;r<64;r++){var a=ki[r-15],i=ki[r-2],o=fi(a,7)^fi(a,18)^a>>>3,s=fi(i,17)^fi(i,19)^i>>>10;ki[r]=s+ki[r-7]+o+ki[r-16]|0}for(var c=this.A,u=this.B,l=this.C,d=this.D,f=this.E,p=this.F,h=this.G,m=this.H,v=0;v<64;v++){var y=m+(fi(f,6)^fi(f,11)^fi(f,25))+vi(f,p,h)+wi[v]+ki[v]|0,b=(fi(c,2)^fi(c,13)^fi(c,22))+yi(c,u,l)|0;m=h,h=p,p=f,f=d+y|0,d=l,l=u,u=c,c=y+b|0}c=c+this.A|0,u=u+this.B|0,l=l+this.C|0,d=d+this.D|0,f=f+this.E|0,p=p+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(c,u,l,d,f,p,h,m)}},{key:"roundClean",value:function(){li(ki)}},{key:"destroy",value:function(){this.set(0,0,0,0,0,0,0,0),li(this.buffer)}}])}(bi),xi=mi(function(){return new Ii});function Ai(e,t,n){return JSON.stringify(e,function(e,t){return"bigint"==typeof t?t.toString()+"#__bigint":t},n)}function Si(e,t){if(to(e)>t)throw new oo({givenSize:to(e),maxSize:t})}var Oi=48,Pi=57,Ei=65,Ti=70,_i=97,Ci=102;function ji(e){return e>=Oi&&e<=Pi?e-Oi:e>=Ei&&e<=Ti?e-(Ei-10):e>=_i&&e<=Ci?e-(_i-10):void 0}function Li(e,t){if(Hi(e)>t)throw new Qi({givenSize:Hi(e),maxSize:t})}function Mi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dir,r=t.size,a=void 0===r?32:r;if(0===a)return e;var i=e.replace("0x","");if(i.length>2*a)throw new Zi({size:Math.ceil(i.length/2),targetSize:a,type:"Hex"});return"0x".concat(i["right"===n?"padEnd":"padStart"](2*a,"0"))}var Di=new TextEncoder,Ni=Array.from({length:256},function(e,t){return t.toString(16).padStart(2,"0")});function Ui(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"0x".concat(t.reduce(function(e,t){return e+t.replace("0x","")},""))}function Bi(e){return e instanceof Uint8Array?Ri(e):Array.isArray(e)?Ri(new Uint8Array(e)):e}function Ri(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="",r=0;r<e.length;r++)n+=Ni[e[r]];var a="0x".concat(n);return"number"==typeof t.size?(Li(a,t.size),zi(a,t.size)):a}function Gi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.signed,a=n.size,i=BigInt(e);a?t=r?(1n<<8n*BigInt(a)-1n)-1n:Math.pow(2n,8n*BigInt(a))-1n:"number"==typeof e&&(t=BigInt(Number.MAX_SAFE_INTEGER));var o="bigint"==typeof t&&r?-t-1n:0;if(t&&i>t||i<o){var s="bigint"==typeof e?"n":"";throw new Ki({max:t?"".concat(t).concat(s):void 0,min:"".concat(o).concat(s),signed:r,size:a,value:"".concat(e).concat(s)})}var c=(r&&i<0?(1n<<BigInt(8*a))+BigInt(i):i).toString(16),u="0x".concat(c);return a?function(e,t){return Mi(e,{dir:"left",size:t})}(u,a):u}function qi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ri(Di.encode(e),t)}function zi(e,t){return Mi(e,{dir:"right",size:t})}function Fi(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).strict;!function(e,t){if("number"==typeof t&&t>0&&t>Hi(e)-1)throw new $i({offset:t,position:"start",size:Hi(e)})}(e,t);var a="0x".concat(e.replace("0x","").slice(2*(null!=t?t:0),2*(null!=n?n:e.length)));return r&&function(e,t,n){if("number"==typeof t&&"number"==typeof n&&Hi(e)!==n-t)throw new $i({offset:n,position:"end",size:Hi(e)})}(a,t,n),a}function Hi(e){return Math.ceil((e.length-2)/2)}function Wi(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).strict,n=void 0!==t&&t;try{return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).strict,n=void 0!==t&&t;if(!e)throw new Vi(e);if("string"!=typeof e)throw new Vi(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Ji(e);if(!e.startsWith("0x"))throw new Ji(e)}(e,{strict:n}),!0}catch(r){return!1}}var Ki=function(e){function t(e){var n,r=e.max,a=e.min,i=e.signed,o=e.size,s=e.value;return h(this,t),n=m(this,t,["Number `".concat(s,"` is not in safe").concat(o?" ".concat(8*o,"-bit"):"").concat(i?" signed":" unsigned"," integer range ").concat(r?"(`".concat(a,"` to `").concat(r,"`)"):"(above `".concat(a,"`)"))]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"}),n}return b(t,e),p(t)}(oi),Vi=function(e){function t(e){var n;return h(this,t),n=m(this,t,["Value `".concat("object"===u(e)?Ai(e):e,"` of type `").concat(u(e),"` is an invalid hex type."),{metaMessages:['Hex types must be represented as `"0x${string}"`.']}]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"}),n}return b(t,e),p(t)}(oi),Ji=function(e){function t(e){var n;return h(this,t),n=m(this,t,["Value `".concat(e,"` is an invalid hex value."),{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"}),n}return b(t,e),p(t)}(oi),Qi=function(e){function t(e){var n,r=e.givenSize,a=e.maxSize;return h(this,t),n=m(this,t,["Size cannot exceed `".concat(a,"` bytes. Given size: `").concat(r,"` bytes.")]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"}),n}return b(t,e),p(t)}(oi),$i=function(e){function t(e){var n,r=e.offset,a=e.position,i=e.size;return h(this,t),n=m(this,t,["Slice ".concat("start"===a?"starting":"ending"," at offset `").concat(r,"` is out-of-bounds (size: `").concat(i,"`).")]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"}),n}return b(t,e),p(t)}(oi),Zi=function(e){function t(e){var n,r=e.size,a=e.targetSize,i=e.type;return h(this,t),n=m(this,t,["".concat(i.charAt(0).toUpperCase()).concat(i.slice(1).toLowerCase()," size (`").concat(r,"`) exceeds padding size (`").concat(a,"`).")]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"}),n}return b(t,e),p(t)}(oi);function Yi(e){return e instanceof Uint8Array?e:"string"==typeof e?eo(e):Xi(e)}function Xi(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function eo(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).size,n=e;t&&(Li(e,t),n=zi(e,t));var r=n.slice(2);r.length%2&&(r="0".concat(r));for(var a=r.length/2,i=new Uint8Array(a),o=0,s=0;o<a;o++){var c=ji(r.charCodeAt(s++)),u=ji(r.charCodeAt(s++));if(void 0===c||void 0===u)throw new oi('Invalid byte sequence ("'.concat(r[s-2]).concat(r[s-1],'" in "').concat(r,'").'));i[o]=16*c+u}return i}function to(e){return e.length}function no(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).strict;!function(e,t){if("number"==typeof t&&t>0&&t>to(e)-1)throw new so({offset:t,position:"start",size:to(e)})}(e,t);var a=e.slice(t,n);return r&&function(e,t,n){if("number"==typeof t&&"number"==typeof n&&to(e)!==n-t)throw new so({offset:n,position:"end",size:to(e)})}(a,t,n),a}function ro(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size;return void 0!==n&&Si(e,n),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.signed;t.size&&Li(e,t.size);var r=BigInt(e);if(!n)return r;var a=(e.length-2)/2,i=(1n<<8n*BigInt(a))-1n;return r<=i>>1n?r:r-i-1n}(Ri(e,t),t)}function ao(e){try{return function(e){if(!(e instanceof Uint8Array)){if(!e)throw new io(e);if("object"!==u(e))throw new io(e);if(!("BYTES_PER_ELEMENT"in e))throw new io(e);if(1!==e.BYTES_PER_ELEMENT||"Uint8Array"!==e.constructor.name)throw new io(e)}}(e),!0}catch(t){return!1}}var io=function(e){function t(e){var n;return h(this,t),n=m(this,t,["Value `".concat("object"===u(e)?Ai(e):e,"` of type `").concat(u(e),"` is an invalid Bytes value."),{metaMessages:["Bytes values must be of type `Bytes`."]}]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"}),n}return b(t,e),p(t)}(oi),oo=function(e){function t(e){var n,r=e.givenSize,a=e.maxSize;return h(this,t),n=m(this,t,["Size cannot exceed `".concat(a,"` bytes. Given size: `").concat(r,"` bytes.")]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"}),n}return b(t,e),p(t)}(oi),so=function(e){function t(e){var n,r=e.offset,a=e.position,i=e.size;return h(this,t),n=m(this,t,["Slice ".concat("start"===a?"starting":"ending"," at offset `").concat(r,"` is out-of-bounds (size: `").concat(i,"`).")]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"}),n}return b(t,e),p(t)}(oi);function co(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).as,n=void 0===t?"string"==typeof e?"Hex":"Bytes":t,r=xi(Yi(e));return"Bytes"===n?r:Ri(r)}function uo(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).compressed,n=e.prefix,r=e.x,a=e.y;if(!1===t||"bigint"==typeof r&&"bigint"==typeof a){if(4!==n)throw new mo({prefix:n,cause:new yo})}else{if(!0!==t&&("bigint"!=typeof r||void 0!==a))throw new ho({publicKey:e});if(3!==n&&2!==n)throw new mo({prefix:n,cause:new vo})}}function lo(e){var t=function(){if(Wi(e))return fo(e);if(ao(e))return function(e){return fo(Ri(e))}(e);var t=e.prefix,n=e.x,r=e.y;return"bigint"==typeof n&&"bigint"==typeof r?{prefix:null!=t?t:4,x:n,y:r}:{prefix:t,x:n}}();return uo(t),t}function fo(e){if(132!==e.length&&130!==e.length&&68!==e.length)throw new bo({publicKey:e});return 130===e.length?{prefix:4,x:BigInt(Fi(e,0,32)),y:BigInt(Fi(e,32,64))}:132===e.length?{prefix:Number(Fi(e,0,1)),x:BigInt(Fi(e,1,33)),y:BigInt(Fi(e,33,65))}:{prefix:Number(Fi(e,0,1)),x:BigInt(Fi(e,1,33))}}function po(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};uo(e);var n=e.prefix,r=e.x,a=e.y,i=t.includePrefix;return Ui(void 0===i||i?Gi(n,{size:1}):"0x",Gi(r,{size:32}),"bigint"==typeof a?Gi(a,{size:32}):"0x")}var ho=function(e){function t(e){var n,r=e.publicKey;return h(this,t),n=m(this,t,["Value `".concat(Ai(r),"` is not a valid public key."),{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"}),n}return b(t,e),p(t)}(oi),mo=function(e){function t(e){var n,r=e.prefix,a=e.cause;return h(this,t),n=m(this,t,['Prefix "'.concat(r,'" is invalid.'),{cause:a}]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"}),n}return b(t,e),p(t)}(oi),vo=function(e){function t(){var e;return h(this,t),e=m(this,t,["Prefix must be 2 or 3 for compressed public keys."]),Object.defineProperty(e,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"}),e}return b(t,e),p(t)}(oi),yo=function(e){function t(){var e;return h(this,t),e=m(this,t,["Prefix must be 4 for uncompressed public keys."]),Object.defineProperty(e,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"}),e}return b(t,e),p(t)}(oi),bo=function(e){function t(e){var n,r=e.publicKey;return h(this,t),n=m(this,t,["Value `".concat(r,"` is an invalid public key size."),{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).","Received ".concat(Hi(Bi(r))," bytes.")]}]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"}),n}return b(t,e),p(t)}(oi),go=Math.pow(2n,256n)-1n;function wo(e){if(130!==e.length&&132!==e.length)throw new Io({signature:e});var t=BigInt(Fi(e,0,32)),n=BigInt(Fi(e,32,64)),r=function(){var t=Number("0x".concat(e.slice(130)));if(!Number.isNaN(t))try{return function(e){if(0===e||27===e)return 0;if(1===e||28===e)return 1;if(e>=35)return e%2==0?1:0;throw new Po({value:e})}(t)}catch(n){throw new Oo({value:t})}}();return void 0===r?{r:t,s:n}:{r:t,s:n,yParity:r}}function ko(e){!function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).recovered;if(void 0===e.r)throw new xo({signature:e});if(void 0===e.s)throw new xo({signature:e});if(t&&void 0===e.yParity)throw new xo({signature:e});if(e.r<0n||e.r>go)throw new Ao({value:e.r});if(e.s<0n||e.s>go)throw new So({value:e.s});if("number"==typeof e.yParity&&0!==e.yParity&&1!==e.yParity)throw new Oo({value:e.yParity})}(e);var t=e.r,n=e.s;return Ui(Gi(t,{size:32}),Gi(n,{size:32}),"number"==typeof e.yParity?Gi(function(e){if(0===e)return 27;if(1===e)return 28;throw new Oo({value:e})}(e.yParity),{size:1}):"0x")}var Io=function(e){function t(e){var n,r=e.signature;return h(this,t),n=m(this,t,["Value `".concat(r,"` is an invalid signature size."),{metaMessages:["Expected: 64 bytes or 65 bytes.","Received ".concat(Hi(Bi(r))," bytes.")]}]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"}),n}return b(t,e),p(t)}(oi),xo=function(e){function t(e){var n,r=e.signature;return h(this,t),n=m(this,t,["Signature `".concat(Ai(r),"` is missing either an `r`, `s`, or `yParity` property.")]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"}),n}return b(t,e),p(t)}(oi),Ao=function(e){function t(e){var n,r=e.value;return h(this,t),n=m(this,t,["Value `".concat(r,"` is an invalid r value. r must be a positive integer less than 2^256.")]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"}),n}return b(t,e),p(t)}(oi),So=function(e){function t(e){var n,r=e.value;return h(this,t),n=m(this,t,["Value `".concat(r,"` is an invalid s value. s must be a positive integer less than 2^256.")]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"}),n}return b(t,e),p(t)}(oi),Oo=function(e){function t(e){var n,r=e.value;return h(this,t),n=m(this,t,["Value `".concat(r,"` is an invalid y-parity value. Y-parity must be 0 or 1.")]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"}),n}return b(t,e),p(t)}(oi),Po=function(e){function t(e){var n,r=e.value;return h(this,t),n=m(this,t,["Value `".concat(r,"` is an invalid v value. v must be 27, 28 or >=35.")]),Object.defineProperty(n,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"}),n}return b(t,e),p(t)}(oi),Eo=new TextDecoder,To=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map(function(e,t){return[t,e.charCodeAt(0)]}));function _o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.pad,r=void 0===n||n,a=t.url,i=void 0!==a&&a,o=new Uint8Array(4*Math.ceil(e.length/3)),s=0,c=0;c<e.length;s+=4,c+=3){var u=(e[c]<<16)+(e[c+1]<<8)+(0|e[c+2]);o[s]=To[u>>18],o[s+1]=To[u>>12&63],o[s+2]=To[u>>6&63],o[s+3]=To[63&u]}var l=e.length%3,d=4*Math.floor(e.length/3)+(l&&l+1),f=Eo.decode(new Uint8Array(o.buffer,0,d));return r&&1===l&&(f+="=="),r&&2===l&&(f+="="),i&&(f=f.replaceAll("+","-").replaceAll("/","_")),f}(eo(e),t)}function Co(e){var t=e.challenge,n=e.crossOrigin,r=e.extraClientData,a=e.flag,i=e.origin,o=e.rpId,s=e.signCount,c=e.userVerification,u=void 0===c?"required":c,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flag,n=void 0===t?5:t,r=e.rpId,a=void 0===r?window.location.hostname:r,i=e.signCount,o=void 0===i?0:i;return Ui(co(qi(a)),Gi(n,{size:1}),Gi(o,{size:4}))}({flag:a,rpId:o,signCount:s}),d=function(e){var t=e.challenge,n=e.crossOrigin,r=void 0!==n&&n,a=e.extraClientData,i=e.origin,o=void 0===i?window.location.origin:i;return JSON.stringify(k({type:"webauthn.get",challenge:_o(t,{url:!0,pad:!1}),origin:o,crossOrigin:r},a))}({challenge:t,crossOrigin:n,extraClientData:r,origin:i}),f=co(qi(d)),p=d.indexOf('"challenge"'),h=d.indexOf('"type"');return{metadata:{authenticatorData:l,clientDataJSON:d,challengeIndex:p,typeIndex:h,userVerificationRequired:"required"===u},payload:Ui(l,f)}}function jo(){return Lo.apply(this,arguments)}function Lo(){return Lo=P(A().m(function e(){var t,n,r,a,i,o=arguments;return A().w(function(e){for(;;)switch(e.n){case 0:return t=(o.length>0&&void 0!==o[0]?o[0]:{}).extractable,n=void 0!==t&&t,e.n=1,globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},n,["sign","verify"]);case 1:return r=e.v,e.n=2,globalThis.crypto.subtle.exportKey("raw",r.publicKey);case 2:return a=e.v,i=lo(new Uint8Array(a)),e.a(2,{privateKey:r.privateKey,publicKey:i})}},e)})),Lo.apply(this,arguments)}function Mo(e){return Do.apply(this,arguments)}function Do(){return Do=P(A().m(function e(t){var n,r,a,i,o,s;return A().w(function(e){for(;;)switch(e.n){case 0:return n=t.payload,r=t.privateKey,e.n=1,globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},r,Yi(n));case 1:return a=e.v,i=Xi(new Uint8Array(a)),o=ro(no(i,0,32)),(s=ro(no(i,32,64)))>tt.CURVE.n/2n&&(s=tt.CURVE.n-s),e.a(2,{r:o,s:s})}},e)})),Do.apply(this,arguments)}k({},Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map(function(e,t){return[e.charCodeAt(0),t]}))),Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);var No="activeId",Uo=function(e,t){var n,r,a,i="undefined"!=typeof indexedDB?Fe(e,t):void 0;return{getItem:(a=P(A().m(function e(t){var n;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Ke(t,i);case 1:if(n=e.v){e.n=2;break}return e.a(2,null);case 2:return e.a(2,n)}},e)})),function(e){return a.apply(this,arguments)}),removeItem:(r=P(A().m(function e(t){return A().w(function(e){for(;;)if(0===e.n)return e.a(2,We(t,i))},e)})),function(e){return r.apply(this,arguments)}),setItem:(n=P(A().m(function e(t,n){return A().w(function(e){for(;;)if(0===e.n)return e.a(2,He(t,n,i))},e)})),function(e,t){return n.apply(this,arguments)})}}("cbwsdk","keys");function Bo(){return Ro.apply(this,arguments)}function Ro(){return(Ro=P(A().m(function e(){var t,n;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,jo({extractable:!1});case 1:return t=e.v,n=Fi(po(t.publicKey),1),e.n=2,Uo.setItem(n,t);case 2:return e.n=3,Uo.setItem(No,n);case 3:return e.a(2,t)}},e)}))).apply(this,arguments)}function Go(){return qo.apply(this,arguments)}function qo(){return(qo=P(A().m(function e(){var t,n;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Uo.getItem(No);case 1:if(t=e.v){e.n=2;break}return e.a(2,null);case 2:return e.n=3,Uo.getItem(t);case 3:if(n=e.v){e.n=4;break}return e.a(2,null);case 4:return e.a(2,n)}},e)}))).apply(this,arguments)}function zo(){return Fo.apply(this,arguments)}function Fo(){return(Fo=P(A().m(function e(){var t,n,r;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Go();case 1:if(t=e.v){e.n=5;break}return e.n=2,Bo();case 2:return n=e.v,r=Fi(po(n.publicKey),1),e.n=3,Uo.setItem(r,n);case 3:return e.n=4,Uo.setItem(No,r);case 4:return e.a(2,n);case 5:return e.a(2,t)}},e)}))).apply(this,arguments)}function Ho(){return Wo.apply(this,arguments)}function Wo(){return Wo=P(A().m(function e(){var t,n,r;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,zo();case 1:return t=e.v,n=Fi(po(t.publicKey),1),r=function(){var e=P(A().m(function e(n){var r,a,i,o;return A().w(function(e){for(;;)switch(e.n){case 0:return r=Co({challenge:n,origin:"https://keys.coinbase.com",userVerification:"preferred"}),a=r.payload,i=r.metadata,e.n=1,Mo({payload:a,privateKey:t.privateKey});case 1:return o=e.v,e.a(2,{signature:ko(o),raw:{},webauthn:i})}},e)}));return function(t){return e.apply(this,arguments)}}(),e.a(2,{id:n,publicKey:n,sign:function(e){return P(A().m(function t(){var n;return A().w(function(t){for(;;)if(0===t.n)return n=e.hash,t.a(2,r(n))},t)}))()},signMessage:function(e){return P(A().m(function t(){var n;return A().w(function(t){for(;;)if(0===t.n)return n=e.message,t.a(2,r(Pe(n)))},t)}))()},signTypedData:function(e){return P(A().m(function t(){return A().w(function(t){for(;;)if(0===t.n)return t.a(2,r($(e)))},t)}))()},type:"webAuthn"})}},e)})),Wo.apply(this,arguments)}function Ko(){return Vo.apply(this,arguments)}function Vo(){return Vo=P(A().m(function e(){var t;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Ho();case 1:return t=e.v,e.a(2,{account:t})}},e)})),Vo.apply(this,arguments)}var Jo={storageKey:"ownPrivateKey",keyType:"private"},Qo={storageKey:"ownPublicKey",keyType:"public"},$o={storageKey:"peerPublicKey",keyType:"public"},Zo=function(){return p(function e(){h(this,e),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null},[{key:"getOwnPublicKey",value:(s=P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.loadKeysIfNeeded();case 1:return e.a(2,this.ownPublicKey)}},e,this)})),function(){return s.apply(this,arguments)})},{key:"getSharedSecret",value:(o=P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.loadKeysIfNeeded();case 1:return e.a(2,this.sharedSecret)}},e,this)})),function(){return o.apply(this,arguments)})},{key:"setPeerPublicKey",value:(i=P(A().m(function e(t){return A().w(function(e){for(;;)switch(e.n){case 0:return this.sharedSecret=null,this.peerPublicKey=t,e.n=1,this.storeKey($o,t);case 1:return e.n=2,this.loadKeysIfNeeded();case 2:return e.a(2)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"clear",value:(a=P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,Ln.keys.clear();case 1:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"generateKeyPair",value:(r=P(A().m(function e(){var t;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Fa();case 1:return t=e.v,this.ownPrivateKey=t.privateKey,this.ownPublicKey=t.publicKey,e.n=2,this.storeKey(Jo,t.privateKey);case 2:return e.n=3,this.storeKey(Qo,t.publicKey);case 3:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"loadKeysIfNeeded",value:(n=P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:if(null!==this.ownPrivateKey){e.n=2;break}return e.n=1,this.loadKey(Jo);case 1:this.ownPrivateKey=e.v;case 2:if(null!==this.ownPublicKey){e.n=4;break}return e.n=3,this.loadKey(Qo);case 3:this.ownPublicKey=e.v;case 4:if(null!==this.ownPrivateKey&&null!==this.ownPublicKey){e.n=5;break}return e.n=5,this.generateKeyPair();case 5:if(null!==this.peerPublicKey){e.n=7;break}return e.n=6,this.loadKey($o);case 6:this.peerPublicKey=e.v;case 7:if(null!==this.sharedSecret){e.n=10;break}if(null!==this.ownPrivateKey&&null!==this.peerPublicKey){e.n=8;break}return e.a(2);case 8:return e.n=9,Wa(this.ownPrivateKey,this.peerPublicKey);case 9:this.sharedSecret=e.v;case 10:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"loadKey",value:(t=P(A().m(function e(t){var n;return A().w(function(e){for(;;)switch(e.n){case 0:if(n=Ln.keys.get(t.storageKey)){e.n=1;break}return e.a(2,null);case 1:return e.a(2,ei(t.keyType,n))}},e)})),function(e){return t.apply(this,arguments)})},{key:"storeKey",value:(e=P(A().m(function e(t,n){var r;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Ya(t.keyType,n);case 1:r=e.v,Ln.keys.set(t.storageKey,r);case 2:return e.a(2)}},e)})),function(t,n){return e.apply(this,arguments)})}]);var e,t,n,r,a,i,o,s}();function Yo(e,t){if("object"===u(e)&&null!==e)return t.split(/[.[\]]+/).filter(Boolean).reduce(function(e,t){if("object"===u(e)&&null!==e)return e[t]},e)}var Xo="0x0ba5ed0c6aa8c49038f819e587e2633c4a9f428a",es="0xf85210B21cC50302F477BA56686d2019dC9b67Ad",ts=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"owner",type:"bytes"}],name:"AlreadyOwner",type:"error"},{inputs:[],name:"Initialized",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidEthereumAddressOwner",type:"error"},{inputs:[{name:"key",type:"uint256"}],name:"InvalidNonceKey",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidOwnerBytesLength",type:"error"},{inputs:[],name:"LastOwner",type:"error"},{inputs:[{name:"index",type:"uint256"}],name:"NoOwnerAtIndex",type:"error"},{inputs:[{name:"ownersRemaining",type:"uint256"}],name:"NotLastOwner",type:"error"},{inputs:[{name:"selector",type:"bytes4"}],name:"SelectorNotAllowed",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnauthorizedCallContext",type:"error"},{inputs:[],name:"UpgradeFailed",type:"error"},{inputs:[{name:"index",type:"uint256"},{name:"expectedOwner",type:"bytes"},{name:"actualOwner",type:"bytes"}],name:"WrongOwnerAtIndex",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"AddOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"RemoveOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"REPLAYABLE_NONCE_KEY",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"addOwnerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"addOwnerPublicKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"functionSelector",type:"bytes4"}],name:"canSkipChainIdValidation",outputs:[{name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"entryPoint",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"calls",type:"bytes[]"}],name:"executeWithoutChainIdValidation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHashWithoutChainId",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"$",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"owners",type:"bytes[]"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"isOwnerAddress",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"bytes"}],name:"isOwnerBytes",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"isOwnerPublicKey",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"result",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextOwnerIndex",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"}],name:"ownerAtIndex",outputs:[{name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeLastOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeOwnerAtIndex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"removedOwnersCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"}],name:"replaySafeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"newImplementation",type:"address"},{name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"missingAccountFunds",type:"uint256"}],name:"validateUserOp",outputs:[{name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],ns=[{inputs:[{name:"implementation_",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"OwnerRequired",type:"error"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"createAccount",outputs:[{name:"account",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"getAddress",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initCodeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"}];function rs(e){var t;if(!Array.isArray(e.params))return null;switch(e.method){case"personal_sign":return e.params[1];case"eth_signTypedData_v4":return e.params[0];case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":return null===(t=e.params[0])||void 0===t?void 0:t.from;default:return null}}function as(e,t){if(!Array.isArray(e.params))throw Kn.rpc.invalidParams();var n=d(e.params);switch(e.method){case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":n[0].from=t;break;case"eth_signTypedData_v4":n[0]=t;break;case"personal_sign":n[1]=t}return Object.assign(Object.assign({},e),{params:n})}function is(e){var t;if(!e||!Array.isArray(e)||!(null===(t=e[0])||void 0===t?void 0:t.chainId))throw Kn.rpc.invalidParams();if("string"!=typeof e[0].chainId&&"number"!=typeof e[0].chainId)throw Kn.rpc.invalidParams()}function os(e){if(!e||!Array.isArray(e)||1!==e.length&&2!==e.length)throw Kn.rpc.invalidParams();if("string"!=typeof e[0]||!T(e[0]))throw Kn.rpc.invalidParams();if(2===e.length){if(!Array.isArray(e[1]))throw Kn.rpc.invalidParams();var t,n=s(e[1]);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("string"!=typeof r||!r.startsWith("0x"))throw Kn.rpc.invalidParams()}}catch(a){n.e(a)}finally{n.f()}}}function ss(e,t){var n=Object.assign({},e);if(t&&e.method.startsWith("wallet_")){var r=Yo(n,"params.0.capabilities");if(void 0===r&&(r={}),"object"!==u(r))throw Kn.rpc.invalidParams();r=Object.assign(Object.assign({},t),r),n.params&&Array.isArray(n.params)&&(n.params[0]=Object.assign(Object.assign({},n.params[0]),{capabilities:r}))}return n}function cs(){return us.apply(this,arguments)}function us(){return us=P(A().m(function e(){var t,n,r,a,i;return A().w(function(e){for(;;)switch(e.n){case 0:if(n=null!==(t=Ln.subAccountsConfig.get())&&void 0!==t?t:{},r={},!n.enableAutoSubAccounts){e.n=6;break}if(!n.toOwnerAccount){e.n=2;break}return e.n=1,n.toOwnerAccount();case 1:i=e.v,e.n=4;break;case 2:return e.n=3,Ko();case 3:i=e.v;case 4:if(a=i.account){e.n=5;break}throw Kn.provider.unauthorized("No owner account found");case 5:r.addSubAccount={account:{type:"create",keys:[{type:a.address?"address":"webauthn-p256",publicKey:a.address||a.publicKey}]}};case 6:Ln.subAccountsConfig.set({capabilities:r});case 7:return e.a(2)}},e)})),us.apply(this,arguments)}function ls(e){if("coinbase_fetchPermissions"!==e.method||void 0!==e.params){if("coinbase_fetchPermissions"!==e.method||!Array.isArray(e.params)||1!==e.params.length||"object"!==u(e.params[0]))throw Kn.rpc.invalidParams();if("string"!=typeof e.params[0].account||!e.params[0].chainId.startsWith("0x"))throw Kn.rpc.invalidParams("FetchPermissions - Invalid params: params[0].account must be a hex string");if("string"!=typeof e.params[0].chainId||!e.params[0].chainId.startsWith("0x"))throw Kn.rpc.invalidParams("FetchPermissions - Invalid params: params[0].chainId must be a hex string");if("string"!=typeof e.params[0].spender||!e.params[0].spender.startsWith("0x"))throw Kn.rpc.invalidParams("FetchPermissions - Invalid params: params[0].spender must be a hex string")}}function ds(e){var t,n,r;if(void 0!==e.params)return e;var a=null===(t=Ln.getState().account.accounts)||void 0===t?void 0:t[0],i=null===(n=Ln.getState().account.chain)||void 0===n?void 0:n.id,o=null===(r=Ln.getState().subAccount)||void 0===r?void 0:r.address;if(!a||!o||!i)throw Kn.rpc.invalidParams("FetchPermissions - one or more of account, sub account, or chain id is missing, connect to sub account via wallet_connect first");return{method:"coinbase_fetchPermissions",params:[{account:a,chainId:D(i),spender:o}]}}function fs(e){var t=e.spendPermission;return{domain:{name:"Spend Permission Manager",version:"1",chainId:e.chainId,verifyingContract:es},types:{SpendPermission:[{name:"account",type:"address"},{name:"spender",type:"address"},{name:"token",type:"address"},{name:"allowance",type:"uint160"},{name:"period",type:"uint48"},{name:"start",type:"uint48"},{name:"end",type:"uint48"},{name:"salt",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"SpendPermission",message:{account:t.account,spender:t.spender,token:t.token,allowance:t.allowance,period:t.period,start:t.start,end:t.end,salt:t.salt,extraData:t.extraData}}}function ps(e){var t=e.spendPermissionBatch;return{domain:{name:"Spend Permission Manager",version:"1",chainId:e.chainId,verifyingContract:es},types:{SpendPermissionBatch:[{name:"account",type:"address"},{name:"period",type:"uint48"},{name:"start",type:"uint48"},{name:"end",type:"uint48"},{name:"permissions",type:"PermissionDetails[]"}],PermissionDetails:[{name:"spender",type:"address"},{name:"token",type:"address"},{name:"allowance",type:"uint160"},{name:"salt",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"SpendPermissionBatch",message:{account:t.account,period:t.period,start:t.start,end:t.end,permissions:t.permissions.map(function(e){return{spender:e.spender,token:e.token,allowance:e.allowance,salt:e.salt,extraData:e.extraData}})}}}function hs(e){return ms.apply(this,arguments)}function ms(){return(ms=P(A().m(function e(t){var n,r,a,i;return A().w(function(e){for(;;)switch(e.n){case 0:return n=t.client,r=t.id,e.n=1,ze(n,{id:r});case 1:if("success"!==(i=e.v).status){e.n=2;break}return e.a(2,null===(a=i.receipts)||void 0===a?void 0:a[0].transactionHash);case 2:throw Kn.rpc.internal("failed to send transaction");case 3:return e.a(2)}},e)}))).apply(this,arguments)}function vs(e){var t=e.calls,n=e.from,r=e.chainId,a=e.capabilities,i=Cn.get().paymasterUrls,o={method:"wallet_sendCalls",params:[{version:"1.0",calls:t,chainId:D(r),from:n,atomicRequired:!0,capabilities:a}]};return(null==i?void 0:i[r])&&(o=ss(o,{paymasterService:{url:null==i?void 0:i[r]}})),o}function ys(){return bs.apply(this,arguments)}function bs(){return bs=P(A().m(function e(){var t,n;return A().w(function(e){for(;;)switch(e.n){case 0:return t=ta(),e.n=1,new Promise(function(e){Gr({snackbarContext:"sub_account_insufficient_balance"}),t.presentItem({autoExpand:!0,message:"Insufficient spend permission. Choose how to proceed:",menuItems:[{isRed:!1,info:"Create new Spend Permission",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:function(){qr({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"create_permission"}),t.clear(),e("update_permission")}},{isRed:!1,info:"Continue in Popup",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:function(){qr({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"continue_in_popup"}),t.clear(),e("continue_popup")}},{isRed:!0,info:"Cancel",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:function(){qr({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"cancel"}),t.clear(),e("cancel")}}]})});case 1:return n=e.v,e.a(2,n)}},e)})),bs.apply(this,arguments)}function gs(e){for(var t,n=e.errorData,r=e.sourceAddress,a=[],i=function(){var e=E(s[o],2),t=e[0],n=e[1],i=n.amount;if(0===n.sources.filter(function(e){return de(e.balance)>=de(i)&&e.address.toLowerCase()===(null==r?void 0:r.toLowerCase())}).length)throw new Error("Source address has insufficient balance for a token");a.push({token:t,requiredAmount:de(i)})},o=0,s=Object.entries(null!==(t=null==n?void 0:n.required)&&void 0!==t?t:{});o<s.length;o++)i();return a}function ws(e){return"object"===u(e)&&null!==e&&"calls"in e}function ks(e){return Array.isArray(e)&&1===e.length&&"object"===u(e[0])&&null!==e[0]&&"to"in e[0]}function Is(e){var t=e.attribution,n=e.dappOrigin;if(t)return"auto"in t&&t.auto&&n?Ee(Y(Te(n)),0,16):"dataSuffix"in t?t.dataSuffix:void 0}function xs(e,t){var n;if(!Array.isArray(null==e?void 0:e.params))return!1;var r=null===(n=e.params[0])||void 0===n?void 0:n.capabilities;return!(!r||"object"!==u(r))&&t in r}function As(e,t){var n=e.filter(function(e){return e!==t});return[t].concat(d(n))}function Ss(e,t){var n=e.filter(function(e){return e!==t});return[].concat(d(n),[t])}function Os(){return Ps.apply(this,arguments)}function Ps(){return Ps=P(A().m(function e(){var t,n,r,a;return A().w(function(e){for(;;)switch(e.n){case 0:if(t=Ln.spendPermissions.get(),n=Ln.subAccounts.get(),r=Ln.account.get().accounts){e.n=1;break}return e.a(2,null);case 1:return a=null==r?void 0:r.map(function(e){return{address:e,capabilities:{subAccounts:n?[n]:void 0,spendPermissions:t.length>0?{permissions:t}:void 0}}}),e.a(2,{accounts:a})}},e)})),Ps.apply(this,arguments)}function Es(e){var t=btoa(String.fromCharCode.apply(String,d(new Uint8Array(e))));return t.replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}function Ts(e){var t=e.webauthn,n=e.signature,r=e.id,a=wo(n);return{id:r,rawId:Es(_e(r)),response:{authenticatorData:Es(Ce(t.authenticatorData)),clientDataJSON:Es(_e(t.clientDataJSON)),signature:Es(_s(a.r,a.s))},type:JSON.parse(t.clientDataJSON).type}}function _s(e,t){var n=Ce(je(D(e))),r=Ce(je(D(t))),a=n.length,i=r.length,o=a+i+4,s=new Uint8Array(o+2);return s[0]=48,s[1]=o,s[2]=2,s[3]=a,s.set(n,4),s[a+4]=2,s[a+5]=i,s.set(r,a+6),s}var Cs=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function js(e){return Ls.apply(this,arguments)}function Ls(){return Ls=P(A().m(function e(t){var n,r,a,i,o,s,c;return A().w(function(e){for(;;)if(0===e.n)return n=t.owner,r=t.ownerIndex,a=t.address,i=t.client,o=t.factoryData,s={abi:nt,address:"0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",version:"0.6"},c={abi:ns,address:Xo},e.a(2,st({client:i,entryPoint:s,extend:{abi:ts,factory:c},decodeCalls:function(e){return P(A().m(function t(){var n;return A().w(function(t){for(;;)switch(t.n){case 0:if("execute"!==(n=Le({abi:ts,data:e})).functionName){t.n=1;break}return t.a(2,[{to:n.args[0],value:n.args[1],data:n.args[2]}]);case 1:if("executeBatch"!==n.functionName){t.n=2;break}return t.a(2,n.args[0].map(function(e){return{to:e.target,value:e.value,data:e.data}}));case 2:throw new ae('unable to decode calls for "'.concat(n.functionName,'"'));case 3:return t.a(2)}},t)}))()},encodeCalls:function(e){return P(A().m(function t(){var n,r;return A().w(function(t){for(;;)switch(t.n){case 0:if(1!==e.length){t.n=1;break}return t.a(2,he({abi:ts,functionName:"execute",args:[e[0].to,null!==(n=e[0].value)&&void 0!==n?n:BigInt(0),null!==(r=e[0].data)&&void 0!==r?r:"0x"]}));case 1:return t.a(2,he({abi:ts,functionName:"executeBatch",args:[e.map(function(e){var t,n;return{data:null!==(t=e.data)&&void 0!==t?t:"0x",target:e.to,value:null!==(n=e.value)&&void 0!==n?n:BigInt(0)}})]}))}},t)}))()},getAddress:function(){return P(A().m(function e(){return A().w(function(e){for(;;)if(0===e.n)return e.a(2,a)},e)}))()},getFactoryArgs:function(){return P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:if(!o){e.n=1;break}return e.a(2,{factory:c.address,factoryData:o});case 1:return e.a(2,{factory:c.address,factoryData:o})}},e)}))()},getStubSignature:function(){return P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:if("webAuthn"!==n.type){e.n=1;break}return e.a(2,"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000001949fc7c88032b9fcb5f6efc7a7b8c63668eae9871b765e23123bb473ff57aa831a7c0d9276168ebcc29f2875a0239cffdf2a9cd1c2007c5c77c071db9264df1d000000000000000000000000000000000000000000000000000000000000002549960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97630500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a7b2274797065223a22776562617574686e2e676574222c226368616c6c656e6765223a2273496a396e6164474850596759334b7156384f7a4a666c726275504b474f716d59576f4d57516869467773222c226f726967696e223a2268747470733a2f2f7369676e2e636f696e626173652e636f6d222c2263726f73734f726967696e223a66616c73657d00000000000000000000000000000000000000000000");case 1:return e.a(2,Bs({ownerIndex:r,signature:"0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c"}))}},e)}))()},sign:function(e){var t=this;return P(A().m(function a(){var o,s,c;return A().w(function(a){for(;;)switch(a.n){case 0:return a.n=1,t.getAddress();case 1:return o=a.v,s=Ns({address:o,chainId:i.chain.id,hash:e.hash}),a.n=2,Ms({hash:s,owner:n});case 2:return c=a.v,a.a(2,Bs({ownerIndex:r,signature:c}))}},a)}))()},signMessage:function(e){var t=this;return P(A().m(function a(){var o,s,c,u;return A().w(function(a){for(;;)switch(a.n){case 0:return o=e.message,a.n=1,t.getAddress();case 1:return s=a.v,c=Ns({address:s,chainId:i.chain.id,hash:Pe(o)}),a.n=2,Ms({hash:c,owner:n});case 2:return u=a.v,a.a(2,Bs({ownerIndex:r,signature:u}))}},a)}))()},signTypedData:function(e){var t=this;return P(A().m(function a(){var o,s,c,u,l,d,f;return A().w(function(a){for(;;)switch(a.n){case 0:return o=e.domain,s=e.types,c=e.primaryType,u=e.message,a.n=1,t.getAddress();case 1:return l=a.v,d=Ns({address:l,chainId:i.chain.id,hash:$({domain:o,message:u,primaryType:c,types:s})}),a.n=2,Ms({hash:d,owner:n});case 2:return f=a.v,a.a(2,Bs({ownerIndex:r,signature:f}))}},a)}))()},signUserOperation:function(e){var t=this;return P(A().m(function a(){var o,c,u,l,d,f;return A().w(function(a){for(;;)switch(a.n){case 0:return o=e.chainId,c=void 0===o?i.chain.id:o,u=Cs(e,["chainId"]),a.n=1,t.getAddress();case 1:return l=a.v,d=ot({chainId:c,entryPointAddress:s.address,entryPointVersion:s.version,userOperation:Object.assign(Object.assign({},u),{sender:l})}),a.n=2,Ms({hash:d,owner:n});case 2:return f=a.v,a.a(2,Bs({ownerIndex:r,signature:f}))}},a)}))()},userOperation:{estimateGas:function(e){return P(A().m(function t(){var r;return A().w(function(t){for(;;)switch(t.n){case 0:if("webAuthn"===n.type){t.n=1;break}return t.a(2);case 1:return t.a(2,{verificationGasLimit:BigInt(Math.max(Number(null!==(r=e.verificationGasLimit)&&void 0!==r?r:BigInt(0)),8e5))})}},t)}))()}}}))},e)})),Ls.apply(this,arguments)}function Ms(e){return Ds.apply(this,arguments)}function Ds(){return(Ds=P(A().m(function e(t){var n,r,a,i,o;return A().w(function(e){for(;;)switch(e.n){case 0:if(n=t.hash,"webAuthn"!==(r=t.owner).type){e.n=2;break}return e.n=1,r.sign({hash:n});case 1:return a=e.v,i=a.signature,o=a.webauthn,e.a(2,Us({signature:i,webauthn:o}));case 2:if(!r.sign){e.n=3;break}return e.a(2,r.sign({hash:n}));case 3:throw new ae("`owner` does not support raw sign.");case 4:return e.a(2)}},e)}))).apply(this,arguments)}function Ns(e){var t=e.address,n=e.chainId,r=e.hash;return $({domain:{chainId:n,name:"Coinbase Smart Wallet",verifyingContract:t,version:"1"},types:{CoinbaseSmartWalletMessage:[{name:"hash",type:"bytes32"}]},primaryType:"CoinbaseSmartWalletMessage",message:{hash:r}})}function Us(e){var t=e.webauthn,n=wo(e.signature),r=n.r,a=n.s;return Z([{components:[{name:"authenticatorData",type:"bytes"},{name:"clientDataJSON",type:"bytes"},{name:"challengeIndex",type:"uint256"},{name:"typeIndex",type:"uint256"},{name:"r",type:"uint256"},{name:"s",type:"uint256"}],type:"tuple"}],[{authenticatorData:t.authenticatorData,clientDataJSON:j(t.clientDataJSON),challengeIndex:BigInt(t.challengeIndex),typeIndex:BigInt(t.typeIndex),r:r,s:a}])}function Bs(e){var t=e.ownerIndex,n=void 0===t?0:t,r=function(){if(65!==Me(e.signature))return e.signature;var t=function(e){var t=F.Signature.fromCompact(e.slice(2,130)),n=t.r,r=t.s,a=Number("0x".concat(e.slice(130))),i=E(function(){if(0===a||1===a)return[void 0,a];if(27===a)return[BigInt(a),0];if(28===a)return[BigInt(a),1];throw new Error("Invalid yParityOrV value")}(),2),o=i[0],s=i[1];return void 0!==o?{r:D(n,{size:32}),s:D(r,{size:32}),v:o,yParity:s}:{r:D(n,{size:32}),s:D(r,{size:32}),yParity:s}}(e.signature);return function(e,t){if(e.length!==t.length)throw new S({expectedLength:e.length,givenLength:t.length});for(var n=[],r=0;r<e.length;r++){var a=e[r],i=t[r];n.push(v(a,i))}return O(n)}(["bytes32","bytes32","uint8"],[t.r,t.s,0===t.yParity?27:28])}();return Z([{components:[{name:"ownerIndex",type:"uint8"},{name:"signatureData",type:"bytes"}],type:"tuple"}],[{ownerIndex:n,signatureData:r}])}function Rs(e){return Gs.apply(this,arguments)}function Gs(){return Gs=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p,h;return A().w(function(e){for(;;)switch(e.n){case 0:if(n=t.address,r=t.client,a=t.factory,i=t.factoryData,o=t.owner,s=t.ownerIndex,c=t.parentAddress,u=t.attribution,d={address:n,factory:a,factoryData:i},f=null===(l=r.chain)||void 0===l?void 0:l.id){e.n=1;break}throw Kn.rpc.internal("chainId not found");case 1:return e.n=2,js({owner:o,ownerIndex:null!=s?s:1,address:n,client:r,factoryData:i});case 2:return p=e.v,h=function(){var e=P(A().m(function e(t){var n,a,i,s,l,m,v,y,b,g,w,k,I,x,S,O,P,E,T,_,C,j,L,M,N,U;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,N=t.method,e.n="wallet_addSubAccount"===N?1:"eth_accounts"===N?2:"eth_coinbase"===N?3:"net_version"===N?4:"eth_chainId"===N?5:"eth_sendTransaction"===N?6:"wallet_sendCalls"===N?8:"wallet_sendPreparedCalls"===N?17:"wallet_prepareCalls"===N?21:"personal_sign"===N?27:"eth_signTypedData_v4"===N?29:30;break;case 1:return e.a(2,d);case 2:return e.a(2,[d.address]);case 3:return e.a(2,d.address);case 4:return e.a(2,f.toString());case 5:return e.a(2,D(f));case 6:return qa(t.params),Ga((v=t.params[0]).to,Kn.rpc.invalidParams("to is required")),y={to:v.to,data:yr(null!==(n=v.data)&&void 0!==n?n:"0x",!0),value:yr(null!==(a=v.value)&&void 0!==a?a:"0x",!0),from:null!==(i=v.from)&&void 0!==i?i:d.address},b=vs({calls:[y],chainId:f,from:y.from}),e.n=7,h(b);case 7:return g=e.v,e.a(2,hs({client:r,id:g}));case 8:if(qa(t.params),w=Yo(t.params[0],"chainId")){e.n=9;break}throw Kn.rpc.invalidParams("chainId is required");case 9:if(Oe(w)){e.n=10;break}throw Kn.rpc.invalidParams("chainId must be a hex encoded integer");case 10:if(t.params[0]){e.n=11;break}throw Kn.rpc.invalidParams("params are required");case 11:if("calls"in t.params[0]){e.n=12;break}throw Kn.rpc.invalidParams("calls are required");case 12:return k={method:"wallet_prepareCalls",params:[{version:"1.0",calls:t.params[0].calls,chainId:w,from:d.address,capabilities:"capabilities"in t.params[0]?t.params[0].capabilities:{}}]},c&&(k=ss(k,{funding:[{type:"spendPermission",data:{autoApply:!0,sources:[c],preference:"PREFER_DIRECT_BALANCE"}}]})),e.n=13,h(k);case 13:return I=e.v,e.n=14,null===(l=(s=o).sign)||void 0===l?void 0:l.call(s,{hash:De(I.signatureRequest.hash)});case 14:if(x=e.v){e.n=15;break}throw Kn.rpc.internal("signature not found");case 15:return S=Oe(x)?{type:"secp256k1",data:{address:o.address,signature:x}}:{type:"webauthn",data:{signature:JSON.stringify(Ts(Object.assign({id:null!==(m=o.id)&&void 0!==m?m:"1"},x))),publicKey:o.publicKey}},e.n=16,h({method:"wallet_sendPreparedCalls",params:[{version:"1.0",type:I.type,data:I.userOp,chainId:I.chainId,signature:S}]});case 16:return O=e.v,e.a(2,O[0]);case 17:if(qa(t.params),P=Yo(t.params[0],"chainId")){e.n=18;break}throw Kn.rpc.invalidParams("chainId is required");case 18:if(Oe(P)){e.n=19;break}throw Kn.rpc.invalidParams("chainId must be a hex encoded integer");case 19:return e.n=20,r.request({method:"wallet_sendPreparedCalls",params:t.params});case 20:return E=e.v,e.a(2,E);case 21:if(qa(t.params),T=Yo(t.params[0],"chainId")){e.n=22;break}throw Kn.rpc.invalidParams("chainId is required");case 22:if(Oe(T)){e.n=23;break}throw Kn.rpc.invalidParams("chainId must be a hex encoded integer");case 23:if(t.params[0]){e.n=24;break}throw Kn.rpc.invalidParams("params are required");case 24:if(Yo(t.params[0],"calls")){e.n=25;break}throw Kn.rpc.invalidParams("calls are required");case 25:return _=t.params[0],u&&_.capabilities&&!("attribution"in _.capabilities)&&(_.capabilities.attribution=u),e.n=26,r.request({method:"wallet_prepareCalls",params:[Object.assign(Object.assign({},t.params[0]),{chainId:T})]});case 26:return C=e.v,e.a(2,C);case 27:if(qa(t.params),Oe(t.params[0])){e.n=28;break}throw Kn.rpc.invalidParams("message must be a hex encoded string");case 28:return j=De(t.params[0]),e.a(2,p.signMessage({message:j}));case 29:return qa(t.params),L="string"==typeof t.params[1]?JSON.parse(t.params[1]):t.params[1],e.a(2,p.signTypedData(L));case 30:throw Kn.rpc.methodNotSupported();case 31:e.n=34;break;case 32:if(e.p=32,!Xn(U=e.v)){e.n=33;break}if(!(M=er(U))){e.n=33;break}throw M;case 33:throw U;case 34:return e.a(2)}},e,null,[[0,32]])}));return function(t){return e.apply(this,arguments)}}(),e.a(2,{request:h})}},e)})),Gs.apply(this,arguments)}function qs(e){return zs.apply(this,arguments)}function zs(){return(zs=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p;return A().w(function(e){for(;;)switch(e.n){case 0:return n=t.address,r=t.client,a=t.publicKey,i=t.factory,o=t.factoryData,e.n=1,te(r,{address:n});case 1:if(e.v||!i||!o){e.n=4;break}if(Ne(i)===Ne(Xo)){e.n=2;break}throw Kn.rpc.internal("unknown factory address");case 2:if("createAccount"===(s=Le({abi:ns,data:o})).functionName){e.n=3;break}throw Kn.rpc.internal("unknown factory function");case 3:return c=E(s.args,1),u=c[0],e.a(2,u.findIndex(function(e){return e.toLowerCase()===Fs(a).toLowerCase()}));case 4:return e.n=5,ne(r,{address:n,abi:ts,functionName:"ownerCount"});case 5:l=e.v,d=Number(l)-1;case 6:if(!(d>=0)){e.n=9;break}return e.n=7,ne(r,{address:n,abi:ts,functionName:"ownerAtIndex",args:[BigInt(d)]});case 7:if(f=e.v,p=Fs(a),f.toLowerCase()!==p.toLowerCase()){e.n=8;break}return e.a(2,d);case 8:d--,e.n=6;break;case 9:return e.a(2,-1)}},e)}))).apply(this,arguments)}function Fs(e){return T(e)?C(e):e}function Hs(){return Ws.apply(this,arguments)}function Ws(){return Ws=P(A().m(function e(){var t;return A().w(function(e){for(;;)if(0===e.n)return t=ta(),e.a(2,new Promise(function(e){Gr({snackbarContext:"sub_account_add_owner"}),t.presentItem({autoExpand:!0,message:"App requires a signer update",menuItems:[{isRed:!1,info:"Confirm",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:function(){qr({snackbarContext:"sub_account_add_owner",snackbarAction:"confirm"}),t.clear(),e("authenticate")}},{isRed:!0,info:"Cancel",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:function(){qr({snackbarContext:"sub_account_add_owner",snackbarAction:"cancel"}),t.clear(),e("cancel")}}]})}))},e)})),Ws.apply(this,arguments)}function Ks(e){return Vs.apply(this,arguments)}function Vs(){return Vs=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p,h,m,v,y;return A().w(function(e){for(;;)switch(e.n){case 0:return n=t.ownerAccount,r=t.globalAccountRequest,o=Ln.account.get(),s=Ln.subAccounts.get(),c=null===(a=o.accounts)||void 0===a?void 0:a.find(function(e){return e.toLowerCase()!==(null==s?void 0:s.address.toLowerCase())}),Ga(c,Kn.provider.unauthorized("no global account")),Ga(null===(i=o.chain)||void 0===i?void 0:i.id,Kn.provider.unauthorized("no chain id")),Ga(null==s?void 0:s.address,Kn.provider.unauthorized("no sub account")),u=[],"local"===n.type&&n.address&&u.push({to:s.address,data:he({abi:ts,functionName:"addOwnerAddress",args:[n.address]}),value:Te(0)}),n.publicKey&&(l=Ue([{type:"bytes32"},{type:"bytes32"}],n.publicKey),d=E(l,2),f=d[0],p=d[1],u.push({to:s.address,data:he({abi:ts,functionName:"addOwnerPublicKey",args:[f,p]}),value:Te(0)})),h={method:"wallet_sendCalls",params:[{version:"1",calls:u,chainId:D(84532),from:c}]},e.n=1,Hs();case 1:if("cancel"!==e.v){e.n=2;break}throw Kn.provider.unauthorized("user cancelled");case 2:return e.n=3,r(h);case 3:return m=e.v,Ga(v=Ra(o.chain.id),Kn.rpc.internal("client not found for chainId ".concat(o.chain.id))),e.n=4,ze(v,{id:m});case 4:if("success"===e.v.status){e.n=5;break}throw Kn.rpc.internal("add owner call failed");case 5:return e.n=6,qs({address:s.address,publicKey:"local"===n.type&&n.address?n.address:n.publicKey,client:v});case 6:if(-1!==(y=e.v)){e.n=7;break}throw Kn.rpc.internal("failed to find owner index");case 7:return e.a(2,y)}},e)})),Vs.apply(this,arguments)}function Js(e){return Qs.apply(this,arguments)}function Qs(){return(Qs=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,f,p,h,m,v,y,b,g,w,k,I,x,S,O;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.errorData,r=t.globalAccountAddress,a=t.subAccountAddress,i=t.client,o=t.request,s=t.subAccountRequest,c=t.globalAccountRequest,Ga(l=null===(u=i.chain)||void 0===u?void 0:u.id,Kn.rpc.internal("invalid chainId")),f=gs({errorData:n,sourceAddress:r}),e.n=1,ys();case 1:if("cancel"!==(p=e.v)){e.n=2;break}throw new Error("User cancelled funding");case 2:if(m=86400,"update_permission"!==p){e.n=7;break}return 1===f.length?(v=f[0],y=fs({spendPermission:{token:v.token,allowance:D(v.requiredAmount*BigInt(3)),period:m,account:r,spender:a,start:0,end:0xffffffffffff,salt:D(BigInt(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),extraData:"0x"},chainId:l}),h={method:"eth_signTypedData_v4",params:[r,y]}):(b=ps({spendPermissionBatch:{account:r,period:m,start:0,end:0xffffffffffff,permissions:f.map(function(e){return{token:e.token,allowance:D(e.requiredAmount*BigInt(3)),period:m,account:r,spender:a,salt:"0x0",extraData:"0x"}})},chainId:l}),h={method:"eth_signTypedData_v4",params:[r,b]}),e.p=3,e.n=4,c(h);case 4:e.n=6;break;case 5:throw e.p=5,O=e.v,console.error(O),new Error("User denied spend permission request");case 6:return e.a(2,s(o));case 7:if(g=f.map(function(e){return e.token.toLowerCase()==="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE".toLowerCase()?{to:a,value:D(e.requiredAmount),data:"0x"}:{to:e.token,value:"0x0",data:he({abi:Be,functionName:"transfer",args:[a,e.requiredAmount]})}}),"wallet_sendCalls"!==o.method||!ws(o.params)){e.n=8;break}w=o.params[0],e.n=10;break;case 8:if("eth_sendTransaction"!==o.method||!ks(o.params)){e.n=9;break}k=vs({calls:[o.params[0]],chainId:l,from:o.params[0].from}),w=k.params[0],e.n=10;break;case 9:throw new Error("Could not get original call");case 10:return I=he({abi:ts,functionName:"executeBatch",args:[w.calls.map(function(e){var t,n;return{target:e.to,value:de(null!==(t=e.value)&&void 0!==t?t:"0x0"),data:null!==(n=e.data)&&void 0!==n?n:"0x"}})]}),x=[].concat(d(g),[{data:I,to:a,value:"0x0"}]),e.n=11,c({method:"wallet_sendCalls",params:[Object.assign(Object.assign({},w),{calls:x,from:r})]});case 11:if(S=e.v,"eth_sendTransaction"!==o.method){e.n=12;break}return e.a(2,hs({client:i,id:S}));case 12:return e.a(2,S)}},e,null,[[3,5]])}))).apply(this,arguments)}var $s,Zs=function(){return p(function e(t){var n,r,a,i;h(this,e),this.communicator=t.communicator,this.callback=t.callback,this.keyManager=new Zo;var o=Ln.getState(),s=o.account,c=o.chains;this.accounts=null!==(n=s.accounts)&&void 0!==n?n:[],this.chain=null!==(r=s.chain)&&void 0!==r?r:{id:null!==(i=null===(a=t.metadata.appChainIds)||void 0===a?void 0:a[0])&&void 0!==i?i:1},c&&Ba(c)},[{key:"handshake",value:(f=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=ya(t),ka({method:t.method,correlationId:i}),e.p=1,e.n=2,null===(r=(n=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(n);case 2:return e.n=3,this.createRequestMessage({handshake:{method:t.method,params:null!==(a=t.params)&&void 0!==a?a:[]}},i);case 3:return o=e.v,e.n=4,this.communicator.postRequestAndWaitForResponse(o);case 4:if(!("failure"in(s=e.v).content)){e.n=5;break}throw s.content.failure;case 5:return e.n=6,ei("public",s.sender);case 6:return c=e.v,e.n=7,this.keyManager.setPeerPublicKey(c);case 7:return e.n=8,this.decryptResponseMessage(s);case 8:u=e.v,this.handleResponse(t,u),xa({method:t.method,correlationId:i}),e.n=10;break;case 9:throw e.p=9,l=e.v,Ia({method:t.method,correlationId:i,errorMessage:Na(l)}),l;case 10:return e.a(2)}},e,this,[[1,9]])})),function(e){return f.apply(this,arguments)})},{key:"request",value:(d=P(A().m(function e(t){var n,r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=ya(t),Aa({method:t.method,correlationId:n}),e.p=1,e.n=2,this._request(t);case 2:return r=e.v,Oa({method:t.method,correlationId:n}),e.a(2,r);case 3:throw e.p=3,a=e.v,Sa({method:t.method,correlationId:n,errorMessage:Na(a)}),a;case 4:return e.a(2)}},e,this,[[1,3]])})),function(e){return d.apply(this,arguments)})},{key:"_request",value:(l=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p,h,m,v,y,b,g,w,k,I,x,S,O,P,E,T,_,C,j,L,M;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if(0!==this.accounts.length){e.n=11;break}j=t.method,e.n="eth_requestAccounts"===j?1:"wallet_switchEthereumChain"===j?5:"wallet_connect"===j?6:"wallet_sendCalls"===j||"wallet_sign"===j?9:10;break;case 1:return e.n=2,null===(r=(n=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(n);case 2:return e.n=3,cs();case 3:return e.n=4,this.request({method:"wallet_connect",params:[{version:"1",capabilities:Object.assign({},null!==(i=null===(a=Ln.subAccountsConfig.get())||void 0===a?void 0:a.capabilities)&&void 0!==i?i:{})}]});case 4:return e.a(2,this.accounts);case 5:return is(t.params),this.chain.id=Number(t.params[0].chainId),e.a(2);case 6:return e.n=7,null===(s=(o=this.communicator).waitForPopupLoaded)||void 0===s?void 0:s.call(o);case 7:return e.n=8,cs();case 8:return v={},xs(t,"addSubAccount")&&(v=null!==(u=null===(c=Ln.subAccountsConfig.get())||void 0===c?void 0:c.capabilities)&&void 0!==u?u:{}),y=ss(t,v),e.a(2,this.sendRequestToPopup(y));case 9:case 22:return e.a(2,this.sendRequestToPopup(t));case 10:throw Kn.provider.unauthorized();case 11:if(!this.shouldRequestUseSubAccountSigner(t)){e.n=15;break}return b=ya(t),Pa({method:t.method,correlationId:b}),e.p=12,e.n=13,this.sendRequestToSubAccountSigner(t);case 13:return g=e.v,Ea({method:t.method,correlationId:b}),e.a(2,g);case 14:throw e.p=14,L=e.v,Ta({method:t.method,correlationId:b,errorMessage:Na(L)}),L;case 15:M=t.method,e.n="eth_requestAccounts"===M||"eth_accounts"===M?16:"eth_coinbase"===M?17:"net_version"===M?18:"eth_chainId"===M?19:"wallet_getCapabilities"===M?20:"wallet_switchEthereumChain"===M?21:"eth_ecRecover"===M||"personal_sign"===M||"wallet_sign"===M||"personal_ecRecover"===M||"eth_signTransaction"===M||"eth_sendTransaction"===M||"eth_signTypedData_v1"===M||"eth_signTypedData_v3"===M||"eth_signTypedData_v4"===M||"eth_signTypedData"===M||"wallet_addEthereumChain"===M||"wallet_watchAsset"===M||"wallet_sendCalls"===M||"wallet_showCallsStatus"===M||"wallet_grantPermissions"===M?22:"wallet_connect"===M?23:"wallet_getSubAccounts"===M?28:"wallet_addSubAccount"===M?32:"coinbase_fetchPermissions"===M?33:35;break;case 16:return w=Ln.subAccounts.get(),k=Ln.subAccountsConfig.get(),(null==w?void 0:w.address)&&(this.accounts=(null==k?void 0:k.enableAutoSubAccounts)?As(this.accounts,w.address):Ss(this.accounts,w.address)),null===(l=this.callback)||void 0===l||l.call(this,"connect",{chainId:D(this.chain.id)}),e.a(2,this.accounts);case 17:return e.a(2,this.accounts[0]);case 18:return e.a(2,this.chain.id);case 19:return e.a(2,D(this.chain.id));case 20:return e.a(2,this.handleGetCapabilitiesRequest(t));case 21:return e.a(2,this.handleSwitchChainRequest(t));case 23:return e.n=24,Os();case 24:if(!(I=e.v)){e.n=25;break}return e.a(2,I);case 25:return e.n=26,null===(f=(d=this.communicator).waitForPopupLoaded)||void 0===f?void 0:f.call(d);case 26:return e.n=27,cs();case 27:return x=Ln.subAccountsConfig.get(),S=ss(t,null!==(p=null==x?void 0:x.capabilities)&&void 0!==p?p:{}),null===(h=this.callback)||void 0===h||h.call(this,"connect",{chainId:D(this.chain.id)}),e.a(2,this.sendRequestToPopup(S));case 28:if(!(null==(O=Ln.subAccounts.get())?void 0:O.address)){e.n=29;break}return e.a(2,{subAccounts:[O]});case 29:if(this.chain.rpcUrl){e.n=30;break}throw Kn.rpc.internal("No RPC URL set for chain");case 30:return e.n=31,Tr(t,this.chain.rpcUrl);case 31:return qa((P=e.v).subAccounts,"subAccounts"),P.subAccounts.length>0&&(za(P.subAccounts[0]),E=P.subAccounts[0],Ln.subAccounts.set({address:E.address,factory:E.factory,factoryData:E.factoryData})),e.a(2,P);case 32:return e.a(2,this.addSubAccount(t));case 33:return ls(t),T=ds(t),e.n=34,Tr(T,Nr);case 34:return _=e.v,C=Re(null===(m=T.params)||void 0===m?void 0:m[0].chainId),Ln.spendPermissions.set(_.permissions.map(function(e){return Object.assign(Object.assign({},e),{chainId:C})})),e.a(2,_);case 35:if(this.chain.rpcUrl){e.n=36;break}throw Kn.rpc.internal("No RPC URL set for chain");case 36:return e.a(2,Tr(t,this.chain.rpcUrl));case 37:return e.a(2)}},e,this,[[12,14]])})),function(e){return l.apply(this,arguments)})},{key:"sendRequestToPopup",value:(u=P(A().m(function e(t){var n,r,a,i;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(r=(n=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(n);case 1:return e.n=2,this.sendEncryptedRequest(t);case 2:return a=e.v,e.n=3,this.decryptResponseMessage(a);case 3:return i=e.v,e.a(2,this.handleResponse(t,i))}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"handleResponse",value:(c=P(A().m(function e(t,n){var r,a,i,o,s,c,u,l,d,f,p,h,m,v,y,b,g,w,k;return A().w(function(e){for(;;)switch(e.n){case 0:if(!("error"in(c=n.result))){e.n=1;break}throw c.error;case 1:k=t.method,e.n="eth_requestAccounts"===k?2:"wallet_connect"===k?3:"wallet_addSubAccount"===k?4:5;break;case 2:return u=c.value,this.accounts=u,Ln.account.set({accounts:u,chain:this.chain}),null===(r=this.callback)||void 0===r||r.call(this,"accountsChanged",u),e.a(3,5);case 3:return l=c.value,d=l.accounts.map(function(e){return e.address}),this.accounts=d,Ln.account.set({accounts:d}),f=l.accounts.at(0),(null==(p=null==f?void 0:f.capabilities)?void 0:p.subAccounts)&&(qa(h=null==p?void 0:p.subAccounts,"subAccounts"),za(h[0]),Ln.subAccounts.set({address:h[0].address,factory:h[0].factory,factoryData:h[0].factoryData})),m=[this.accounts[0]],v=Ln.subAccounts.get(),y=Ln.subAccountsConfig.get(),(null==v?void 0:v.address)&&(this.accounts=(null==y?void 0:y.enableAutoSubAccounts)?As(this.accounts,v.address):Ss(this.accounts,v.address)),(b=null===(i=null===(a=null==l?void 0:l.accounts)||void 0===a?void 0:a[0].capabilities)||void 0===i?void 0:i.spendPermissions)&&"permissions"in b&&Ln.spendPermissions.set(null==b?void 0:b.permissions),null===(o=this.callback)||void 0===o||o.call(this,"accountsChanged",m),e.a(3,5);case 4:return za(c.value),g=c.value,Ln.subAccounts.set(g),w=Ln.subAccountsConfig.get(),this.accounts=(null==w?void 0:w.enableAutoSubAccounts)?As(this.accounts,g.address):Ss(this.accounts,g.address),null===(s=this.callback)||void 0===s||s.call(this,"accountsChanged",this.accounts),e.a(3,5);case 5:return e.a(2,c.value)}},e,this)})),function(e,t){return c.apply(this,arguments)})},{key:"cleanup",value:(s=P(A().m(function e(){var t,n,r;return A().w(function(e){for(;;)switch(e.n){case 0:return r=Ln.config.get().metadata,e.n=1,this.keyManager.clear();case 1:Ln.account.clear(),Ln.subAccounts.clear(),Ln.spendPermissions.clear(),Ln.chains.clear(),this.accounts=[],this.chain={id:null!==(n=null===(t=null==r?void 0:r.appChainIds)||void 0===t?void 0:t[0])&&void 0!==n?n:1};case 2:return e.a(2)}},e,this)})),function(){return s.apply(this,arguments)})},{key:"handleSwitchChainRequest",value:(o=P(A().m(function e(t){var n,r;return A().w(function(e){for(;;)switch(e.n){case 0:if(is(t.params),n=kr(t.params[0].chainId),!this.updateChain(n)){e.n=1;break}return e.a(2,null);case 1:return e.n=2,this.sendRequestToPopup(t);case 2:return null===(r=e.v)&&this.updateChain(n),e.a(2,r)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"handleGetCapabilitiesRequest",value:(i=P(A().m(function e(t){var n,r,a,i,o;return A().w(function(e){for(;;)switch(e.n){case 0:if(os(t.params),n=t.params[0],r=t.params[1],this.accounts.some(function(e){return Ge(e,n)})){e.n=1;break}throw Kn.provider.unauthorized("no active account found when getting capabilities");case 1:if(a=Ln.getState().account.capabilities){e.n=2;break}return e.a(2,{});case 2:if(r&&0!==r.length){e.n=3;break}return e.a(2,a);case 3:return i=new Set(r.map(function(e){return Re(e)})),o=Object.fromEntries(Object.entries(a).filter(function(e){var t=E(e,1)[0];try{var n=Re(t);return i.has(n)}catch(r){return!1}})),e.a(2,o)}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"sendEncryptedRequest",value:(a=P(A().m(function e(t){var n,r,a,i;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.keyManager.getSharedSecret();case 1:if(n=e.v){e.n=2;break}throw Kn.provider.unauthorized("No shared secret found when encrypting request");case 2:return e.n=3,ni({action:t,chainId:this.chain.id},n);case 3:return r=e.v,a=ya(t),e.n=4,this.createRequestMessage({encrypted:r},a);case 4:return i=e.v,e.a(2,this.communicator.postRequestAndWaitForResponse(i))}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"createRequestMessage",value:(r=P(A().m(function e(t,n){var r,a;return A().w(function(e){for(;;)switch(e.n){case 0:return a=Ya,e.n=1,this.keyManager.getOwnPublicKey();case 1:return e.n=2,a("public",e.v);case 2:return r=e.v,e.a(2,{id:crypto.randomUUID(),correlationId:n,sender:r,content:t,timestamp:new Date})}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"decryptResponseMessage",value:(n=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,d;return A().w(function(e){for(;;)switch(e.n){case 0:if(!("failure"in(i=t.content))){e.n=1;break}throw i.failure;case 1:return e.n=2,this.keyManager.getSharedSecret();case 2:if(o=e.v){e.n=3;break}throw Kn.provider.unauthorized("Invalid session: no shared secret found when decrypting response");case 3:return e.n=4,ai(i.encrypted,o);case 4:return s=e.v,(c=null===(n=s.data)||void 0===n?void 0:n.chains)&&(u=null===(r=s.data)||void 0===r?void 0:r.nativeCurrencies,l=Object.entries(c).map(function(e){var t=E(e,2),n=t[0],r=t[1],a=null==u?void 0:u[Number(n)];return Object.assign({id:Number(n),rpcUrl:r},a?{nativeCurrency:a}:{})}),Ln.chains.set(l),this.updateChain(this.chain.id,l),Ba(l)),(d=null===(a=s.data)||void 0===a?void 0:a.capabilities)&&Ln.account.set({capabilities:d}),e.a(2,s)}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"updateChain",value:function(e,t){var n,r=Ln.getState(),a=null!=t?t:r.chains,i=null==a?void 0:a.find(function(t){return t.id===e});return!!i&&(i!==this.chain&&(this.chain=i,Ln.account.set({chain:i}),null===(n=this.callback)||void 0===n||n.call(this,"chainChanged",fr(i.id))),!0)}},{key:"addSubAccount",value:(t=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p;return A().w(function(e){for(;;)switch(e.n){case 0:if(o=Ln.getState(),s=o.subAccount,c=Ln.subAccountsConfig.get(),!(null==s?void 0:s.address)){e.n=1;break}return this.accounts=(null==c?void 0:c.enableAutoSubAccounts)?As(this.accounts,s.address):Ss(this.accounts,s.address),null===(n=this.callback)||void 0===n||n.call(this,"accountsChanged",this.accounts),e.a(2,s);case 1:return e.n=2,null===(a=(r=this.communicator).waitForPopupLoaded)||void 0===a?void 0:a.call(r);case 2:if(!(Array.isArray(t.params)&&t.params.length>0&&t.params[0].account&&"create"===t.params[0].account.type)){e.n=10;break}if(!(t.params[0].account.keys&&t.params[0].account.keys.length>0)){e.n=3;break}u=t.params[0].account.keys,e.n=9;break;case 3:if(!(l=null!==(i=Ln.subAccountsConfig.get())&&void 0!==i?i:{}).toOwnerAccount){e.n=5;break}return e.n=4,l.toOwnerAccount();case 4:p=e.v,e.n=7;break;case 5:return e.n=6,Ko();case 6:p=e.v;case 7:if(d=p.account){e.n=8;break}throw Kn.provider.unauthorized("could not get subaccount owner account when adding sub account");case 8:u=[{type:d.address?"address":"webauthn-p256",publicKey:d.address||d.publicKey}];case 9:t.params[0].account.keys=u;case 10:return e.n=11,this.sendRequestToPopup(t);case 11:return za(f=e.v),e.a(2,f)}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"shouldRequestUseSubAccountSigner",value:function(e){var t=rs(e),n=Ln.subAccounts.get();return!!t&&t.toLowerCase()===(null==n?void 0:n.address.toLowerCase())}},{key:"sendRequestToSubAccountSigner",value:(e=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p,h,m,v,y,b,g,w,k,I;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=Ln.subAccounts.get(),a=Ln.subAccountsConfig.get(),i=Ln.config.get(),Ga(null==r?void 0:r.address,Kn.provider.unauthorized("no active sub account when sending request to sub account signer")),!(null==a?void 0:a.toOwnerAccount)){e.n=2;break}return e.n=1,a.toOwnerAccount();case 1:g=e.v,e.n=4;break;case 2:return e.n=3,Ko();case 3:g=e.v;case 4:return Ga(null==(o=g)?void 0:o.account,Kn.provider.unauthorized("no active sub account owner when sending request to sub account signer")),void 0===rs(t)&&(t=as(t,r.address)),Ga(s=Ra(this.chain.id),Kn.rpc.internal("client not found for chainId ".concat(this.chain.id," when sending request to sub account signer"))),c=this.accounts.find(function(e){return e.toLowerCase()!==r.address.toLowerCase()}),Ga(c,Kn.provider.unauthorized("no global account found when sending request to sub account signer")),u=Is({attribution:null===(n=i.preference)||void 0===n?void 0:n.attribution,dappOrigin:window.location.origin}),l="local"===o.account.type?o.account.address:o.account.publicKey,e.n=5,qs({address:r.address,factory:r.factory,factoryData:r.factoryData,publicKey:l,client:s});case 5:if(-1!==(d=e.v)){e.n=9;break}return f=ya(t),_a({method:t.method,correlationId:f}),e.p=6,e.n=7,Ks({ownerAccount:o.account,globalAccountRequest:this.sendRequestToPopup.bind(this)});case 7:d=e.v,Ca({method:t.method,correlationId:f}),e.n=9;break;case 8:return e.p=8,w=e.v,ja({method:t.method,correlationId:f,errorMessage:Na(w)}),e.a(2,Kn.provider.unauthorized("failed to add sub account owner when sending request to sub account signer"));case 9:return e.n=10,Rs({address:r.address,owner:o.account,client:s,factory:r.factory,factoryData:r.factoryData,parentAddress:c,attribution:u?{suffix:u}:void 0,ownerIndex:d});case 10:return p=e.v,h=p.request,e.p=11,e.n=12,h(t);case 12:return m=e.v,e.a(2,m);case 13:if(e.p=13,!Xn(k=e.v)){e.n=14;break}v=JSON.parse(k.details),e.n=16;break;case 14:if(!Yn(k)){e.n=15;break}v=k,e.n=16;break;case 15:throw k;case 16:if(Yn(v)&&v.data){e.n=17;break}throw k;case 17:if(v.data){e.n=18;break}throw k;case 18:return y=ya(t),La({method:t.method,correlationId:y}),e.p=19,e.n=20,Js({errorData:v.data,globalAccountAddress:c,subAccountAddress:r.address,client:s,request:t,subAccountRequest:h,globalAccountRequest:this.request.bind(this)});case 20:return b=e.v,Ma({method:t.method,correlationId:y}),e.a(2,b);case 21:throw e.p=21,I=e.v,console.error(I),Da({method:t.method,correlationId:y,errorMessage:Na(I)}),k;case 22:return e.a(2)}},e,this,[[19,21],[11,13],[6,8]])})),function(t){return e.apply(this,arguments)})}]);var e,t,n,r,a,i,o,s,c,u,l,d,f}(),Ys=function(e){var t=e.method,n=e.correlationId;Br("walletlink_signer.handshake.started",{action:Mr.unknown,componentType:Lr.unknown,method:t,correlationId:n},Dr.high)},Xs=function(e){var t=e.method,n=e.correlationId,r=e.errorMessage;Br("walletlink_signer.handshake.error",{action:Mr.error,componentType:Lr.unknown,method:t,correlationId:n,errorMessage:r},Dr.high)},ec=function(e){var t=e.method,n=e.correlationId;Br("walletlink_signer.handshake.completed",{action:Mr.unknown,componentType:Lr.unknown,method:t,correlationId:n},Dr.high)},tc=function(e){var t=e.method,n=e.correlationId;Br("walletlink_signer.request.started",{action:Mr.unknown,componentType:Lr.unknown,method:t,correlationId:n},Dr.high)},nc=function(e){var t=e.method,n=e.correlationId,r=e.errorMessage;Br("walletlink_signer.request.error",{action:Mr.error,componentType:Lr.unknown,method:t,correlationId:n,errorMessage:r},Dr.high)},rc=function(e){var t=e.method,n=e.correlationId;Br("walletlink_signer.request.completed",{action:Mr.unknown,componentType:Lr.unknown,method:t,correlationId:n},Dr.high)},ac=function(){Br("walletlink_signer.walletlink_connection.connection_failed",{action:Mr.measurement,componentType:Lr.unknown},Dr.high)},ic=function(){Br("walletlink_signer.walletlink_connection.fetch_unseen_events_failed",{action:Mr.measurement,componentType:Lr.unknown},Dr.high)},oc={},sc={};function cc(){if($s)return sc;function e(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, not ".concat(e))}function t(e){if("boolean"!=typeof e)throw new Error("boolean expected, not ".concat(e))}function n(e){return e instanceof Uint8Array||null!=e&&"object"===u(e)&&"Uint8Array"===e.constructor.name}function r(e){if(!n(e))throw new Error("Uint8Array expected");for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(r.length>0&&!r.includes(e.length))throw new Error("Uint8Array expected of length ".concat(r,", not of length=").concat(e.length))}function a(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");e(t.outputLen),e(t.blockLen)}function i(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function o(e,t){r(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least ".concat(n))}$s=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.output=sc.exists=sc.hash=sc.bytes=sc.bool=sc.number=sc.isBytes=void 0,sc.number=e,sc.bool=t,sc.isBytes=n,sc.bytes=r,sc.hash=a,sc.exists=i,sc.output=o;var s={number:e,bool:t,bytes:r,hash:a,exists:i,output:o};return sc.default=s,sc}var uc,lc={};function dc(){if(uc)return lc;uc=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.add5L=lc.add5H=lc.add4H=lc.add4L=lc.add3H=lc.add3L=lc.add=lc.rotlBL=lc.rotlBH=lc.rotlSL=lc.rotlSH=lc.rotr32L=lc.rotr32H=lc.rotrBL=lc.rotrBH=lc.rotrSL=lc.rotrSH=lc.shrSL=lc.shrSH=lc.toBig=lc.split=lc.fromBig=void 0;var e=BigInt(Math.pow(2,32)-1),t=BigInt(32);function n(n){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(n&e),l:Number(n>>t&e)}:{h:0|Number(n>>t&e),l:0|Number(n&e)}}function r(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),a=new Uint32Array(e.length),i=0;i<e.length;i++){var o=n(e[i],t),s=[o.h,o.l];r[i]=s[0],a[i]=s[1]}return[r,a]}lc.fromBig=n,lc.split=r;var a=function(e,n){return BigInt(e>>>0)<<t|BigInt(n>>>0)};lc.toBig=a;var i=function(e,t,n){return e>>>n};lc.shrSH=i;var o=function(e,t,n){return e<<32-n|t>>>n};lc.shrSL=o;var s=function(e,t,n){return e>>>n|t<<32-n};lc.rotrSH=s;var c=function(e,t,n){return e<<32-n|t>>>n};lc.rotrSL=c;var u=function(e,t,n){return e<<64-n|t>>>n-32};lc.rotrBH=u;var l=function(e,t,n){return e>>>n-32|t<<64-n};lc.rotrBL=l;var d=function(e,t){return t};lc.rotr32H=d;var f=function(e,t){return e};lc.rotr32L=f;var p=function(e,t,n){return e<<n|t>>>32-n};lc.rotlSH=p;var h=function(e,t,n){return t<<n|e>>>32-n};lc.rotlSL=h;var m=function(e,t,n){return t<<n-32|e>>>64-n};lc.rotlBH=m;var v=function(e,t,n){return e<<n-32|t>>>64-n};function y(e,t,n,r){var a=(t>>>0)+(r>>>0);return{h:e+n+(a/Math.pow(2,32)|0)|0,l:0|a}}lc.rotlBL=v,lc.add=y;var b=function(e,t,n){return(e>>>0)+(t>>>0)+(n>>>0)};lc.add3L=b;var g=function(e,t,n,r){return t+n+r+(e/Math.pow(2,32)|0)|0};lc.add3H=g;var w=function(e,t,n,r){return(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)};lc.add4L=w;var k=function(e,t,n,r,a){return t+n+r+a+(e/Math.pow(2,32)|0)|0};lc.add4H=k;var I=function(e,t,n,r,a){return(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(a>>>0)};lc.add5L=I;var x=function(e,t,n,r,a,i){return t+n+r+a+i+(e/Math.pow(2,32)|0)|0};lc.add5H=x;var A={fromBig:n,split:r,toBig:a,shrSH:i,shrSL:o,rotrSH:s,rotrSL:c,rotrBH:u,rotrBL:l,rotr32H:d,rotr32L:f,rotlSH:p,rotlSL:h,rotlBH:m,rotlBL:v,add:y,add3L:b,add3H:g,add4L:w,add4H:k,add5H:x,add5L:I};return lc.default=A,lc}var fc,pc,hc,mc,vc,yc,bc,gc,wc,kc={},Ic={};function xc(){return fc||(fc=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.crypto=void 0,Ic.crypto="object"===("undefined"==typeof globalThis?"undefined":u(globalThis))&&"crypto"in globalThis?globalThis.crypto:void 0),Ic}function Ac(){return pc||(pc=1,function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.byteSwap32=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=e.isBytes=void 0;var t=xc(),n=cc();e.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"===u(e)&&"Uint8Array"===e.constructor.name};e.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};e.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))};e.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)};e.rotr=function(e,t){return e<<32-t|e>>>t};e.rotl=function(e,t){return e<<t|e>>>32-t>>>0},e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];e.byteSwap=function(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255},e.byteSwapIfBE=e.isLE?function(e){return e}:function(t){return(0,e.byteSwap)(t)},e.byteSwap32=function(t){for(var n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])};var r=Array.from({length:256},function(e,t){return t.toString(16).padStart(2,"0")});e.bytesToHex=function(e){(0,n.bytes)(e);for(var t="",a=0;a<e.length;a++)t+=r[e[a]];return t};var a=48,i=57,o=65,s=70,c=97,l=102;function d(e){return e>=a&&e<=i?e-a:e>=o&&e<=s?e-(o-10):e>=c&&e<=l?e-(c-10):void 0}e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+u(e));var t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(n),a=0,i=0;a<n;a++,i+=2){var o=d(e.charCodeAt(i)),s=d(e.charCodeAt(i+1));if(void 0===o||void 0===s){var c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[a]=16*o+s}return r};var f=function(){var e=P(A().m(function e(){return A().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}));return function(){return e.apply(this,arguments)}}();function m(){return(m=P(A().m(function t(n,r,a){var i,o,s;return A().w(function(t){for(;;)switch(t.n){case 0:i=Date.now(),o=0;case 1:if(!(o<n)){t.n=5;break}if(a(o),!((s=Date.now()-i)>=0&&s<r)){t.n=2;break}return t.a(3,4);case 2:return t.n=3,(0,e.nextTick)();case 3:i+=s;case 4:o++,t.n=1;break;case 5:return t.a(2)}},t)}))).apply(this,arguments)}function v(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got ".concat(u(e)));return new Uint8Array((new TextEncoder).encode(e))}function y(e){return"string"==typeof e&&(e=v(e)),(0,n.bytes)(e),e}e.nextTick=f,e.asyncLoop=function(e,t,n){return m.apply(this,arguments)},e.utf8ToBytes=v,e.toBytes=y,e.concatBytes=function(){for(var e=0,t=0;t<arguments.length;t++){var r=t<0||arguments.length<=t?void 0:arguments[t];(0,n.bytes)(r),e+=r.length}for(var a=new Uint8Array(e),i=0,o=0;i<arguments.length;i++){var s=i<0||arguments.length<=i?void 0:arguments[i];a.set(s,o),o+=s.length}return a};var b=function(){return p(function e(){h(this,e)},[{key:"clone",value:function(){return this._cloneInto()}}])}();e.Hash=b;var g={}.toString;e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==g.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){var t=function(t){return e().update(y(t)).digest()},n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(){return e()},t},e.wrapConstructorWithOpts=function(e){var t=function(t,n){return e(n).update(y(t)).digest()},n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t){return e(t)},t},e.wrapXOFConstructorWithOpts=function(e){var t=function(t,n){return e(n).update(y(t)).digest()},n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t){return e(t)},t},e.randomBytes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}(kc)),kc}function Sc(){if(hc)return oc;hc=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.shake256=oc.shake128=oc.keccak_512=oc.keccak_384=oc.keccak_256=oc.keccak_224=oc.sha3_512=oc.sha3_384=oc.sha3_256=oc.sha3_224=oc.Keccak=oc.keccakP=void 0;for(var e=cc(),t=dc(),n=Ac(),r=[],a=[],i=[],o=BigInt(0),s=BigInt(1),c=BigInt(2),u=BigInt(7),l=BigInt(256),d=BigInt(113),f=0,v=s,y=1,g=0;f<24;f++){var w=[g,(2*y+3*g)%5];y=w[0],g=w[1],r.push(2*(5*g+y)),a.push((f+1)*(f+2)/2%64);for(var k=o,I=0;I<7;I++)(v=(v<<s^(v>>u)*d)%l)&c&&(k^=s<<(s<<BigInt(I))-s);i.push(k)}var x=E((0,t.split)(i,!0),2),A=x[0],S=x[1],O=function(e,n,r){return r>32?(0,t.rotlBH)(e,n,r):(0,t.rotlSH)(e,n,r)},P=function(e,n,r){return r>32?(0,t.rotlBL)(e,n,r):(0,t.rotlSL)(e,n,r)};function T(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=new Uint32Array(10),i=24-t;i<24;i++){for(var o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(var s=0;s<10;s+=2)for(var c=(s+8)%10,u=(s+2)%10,l=n[u],d=n[u+1],f=O(l,d,1)^n[c],p=P(l,d,1)^n[c+1],h=0;h<50;h+=10)e[s+h]^=f,e[s+h+1]^=p;for(var m=e[2],v=e[3],y=0;y<24;y++){var b=a[y],g=O(m,v,b),w=P(m,v,b),k=r[y];m=e[k],v=e[k+1],e[k]=g,e[k+1]=w}for(var I=0;I<50;I+=10){for(var x=0;x<10;x++)n[x]=e[I+x];for(var E=0;E<10;E++)e[I+E]^=~n[(E+2)%10]&n[(E+4)%10]}e[0]^=A[i],e[1]^=S[i]}n.fill(0)}oc.keccakP=T;var _=function(t){function r(t,a,i){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(h(this,r),(o=m(this,r)).blockLen=t,o.suffix=a,o.outputLen=i,o.enableXOF=s,o.rounds=c,o.pos=0,o.posOut=0,o.finished=!1,o.destroyed=!1,(0,e.number)(i),0>=o.blockLen||o.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");return o.state=new Uint8Array(200),o.state32=(0,n.u32)(o.state),o}return b(r,t),p(r,[{key:"keccak",value:function(){n.isLE||(0,n.byteSwap32)(this.state32),T(this.state32,this.rounds),n.isLE||(0,n.byteSwap32)(this.state32),this.posOut=0,this.pos=0}},{key:"update",value:function(t){(0,e.exists)(this);for(var r=this.blockLen,a=this.state,i=(t=(0,n.toBytes)(t)).length,o=0;o<i;){for(var s=Math.min(r-this.pos,i-o),c=0;c<s;c++)a[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}},{key:"finish",value:function(){if(!this.finished){this.finished=!0;var e=this.state,t=this.suffix,n=this.pos,r=this.blockLen;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}}},{key:"writeInto",value:function(t){(0,e.exists)(this,!1),(0,e.bytes)(t),this.finish();for(var n=this.state,r=this.blockLen,a=0,i=t.length;a<i;){this.posOut>=r&&this.keccak();var o=Math.min(r-this.posOut,i-a);t.set(n.subarray(this.posOut,this.posOut+o),a),this.posOut+=o,a+=o}return t}},{key:"xofInto",value:function(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}},{key:"xof",value:function(t){return(0,e.number)(t),this.xofInto(new Uint8Array(t))}},{key:"digestInto",value:function(t){if((0,e.output)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}},{key:"digest",value:function(){return this.digestInto(new Uint8Array(this.outputLen))}},{key:"destroy",value:function(){this.destroyed=!0,this.state.fill(0)}},{key:"_cloneInto",value:function(e){var t=this.blockLen,n=this.suffix,a=this.outputLen,i=this.rounds,o=this.enableXOF;return e||(e=new r(t,n,a,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=a,e.enableXOF=o,e.destroyed=this.destroyed,e}}])}(n.Hash);oc.Keccak=_;var C=function(e,t,r){return(0,n.wrapConstructor)(function(){return new _(t,e,r)})};oc.sha3_224=C(6,144,28),oc.sha3_256=C(6,136,32),oc.sha3_384=C(6,104,48),oc.sha3_512=C(6,72,64),oc.keccak_224=C(1,144,28),oc.keccak_256=C(1,136,32),oc.keccak_384=C(1,104,48),oc.keccak_512=C(1,72,64);var j=function(e,t,r){return(0,n.wrapXOFConstructorWithOpts)(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _(t,e,void 0===n.dkLen?r:n.dkLen,!0)})};return oc.shake128=j(31,168,16),oc.shake256=j(31,136,32),oc}function Oc(){if(vc)return mc;vc=1;var e=Sc().keccak_256;function t(e){return Buffer.allocUnsafe(e).fill(0)}function n(e,t){var n=e.toString(16);n.length%2!=0&&(n="0"+n);for(var r=n.match(/.{1,2}/g).map(function(e){return parseInt(e,16)});r.length<t;)r.unshift(0);return Buffer.from(r)}function r(e,n,r){var i=t(n);return e=a(e),r?e.length<n?(e.copy(i),i):e.slice(0,n):e.length<n?(e.copy(i,n-e.length),i):e.slice(-n)}function a(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if("string"==typeof e)e=o(e)?Buffer.from(i(s(e)),"hex"):Buffer.from(e);else if("number"==typeof e)t=function(e){var t=e.toString(16);return"0x".concat(t)}(e),e=new Buffer(i(t.slice(2)),"hex");else if(null==e)e=Buffer.allocUnsafe(0);else if("bigint"==typeof e)e=n(e);else{if(!e.toArray)throw new Error("invalid type");e=Buffer.from(e.toArray())}var t;return e}function i(e){return e.length%2?"0"+e:e}function o(e){return"string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/)}function s(e){return"string"==typeof e&&e.startsWith("0x")?e.slice(2):e}return mc={zeros:t,setLength:r,setLengthRight:function(e,t){return r(e,t,!0)},isHexString:o,stripHexPrefix:s,toBuffer:a,bufferToHex:function(e){return"0x"+(e=a(e)).toString("hex")},keccak:function(t,n){if(t=a(t),n||(n=256),256!==n)throw new Error("unsupported");return Buffer.from(e(new Uint8Array(t)))},bitLengthFromBigInt:function(e){return e.toString(2).length},bufferBEFromBigInt:n,twosFromBigInt:function(e,t){var n;return n=e<0n?1n+(~e&(1n<<BigInt(t))-1n):e,n&=(1n<<BigInt(t))-1n}}}function Pc(){if(bc)return yc;bc=1;var e=Oc();function t(e){return e.startsWith("int[")?"int256"+e.slice(3):"int"===e?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):"uint"===e?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):"ufixed"===e?"ufixed128x128":e}function n(e){return Number.parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function r(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[Number.parseInt(t[1],10),Number.parseInt(t[2],10)]}function a(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":Number.parseInt(t[2],10):null}function i(e){var t=u(e);if("string"===t||"number"===t)return BigInt(e);if("bigint"===t)return e;throw new Error("Argument is not a number")}function o(t,s){var c,u,l,d;if("address"===t)return o("uint160",i(s));if("bool"===t)return o("uint8",s?1:0);if("string"===t)return o("bytes",new Buffer(s,"utf8"));if(function(e){return e.lastIndexOf("]")===e.length-1}(t)){if(void 0===s.length)throw new Error("Not an array?");if("dynamic"!==(c=a(t))&&0!==c&&s.length>c)throw new Error("Elements exceed array size: "+c);for(d in l=[],t=t.slice(0,t.lastIndexOf("[")),"string"==typeof s&&(s=JSON.parse(s)),s)l.push(o(t,s[d]));if("dynamic"===c){var f=o("uint256",s.length);l.unshift(f)}return Buffer.concat(l)}if("bytes"===t)return s=new Buffer(s),l=Buffer.concat([o("uint256",s.length),s]),s.length%32!=0&&(l=Buffer.concat([l,e.zeros(32-s.length%32)])),l;if(t.startsWith("bytes")){if((c=n(t))<1||c>32)throw new Error("Invalid bytes<N> width: "+c);return e.setLengthRight(s,32)}if(t.startsWith("uint")){if((c=n(t))%8||c<8||c>256)throw new Error("Invalid uint<N> width: "+c);u=i(s);var p=e.bitLengthFromBigInt(u);if(p>c)throw new Error("Supplied uint exceeds width: "+c+" vs "+p);if(u<0)throw new Error("Supplied uint is negative");return e.bufferBEFromBigInt(u,32)}if(t.startsWith("int")){if((c=n(t))%8||c<8||c>256)throw new Error("Invalid int<N> width: "+c);u=i(s);var h=e.bitLengthFromBigInt(u);if(h>c)throw new Error("Supplied int exceeds width: "+c+" vs "+h);var m=e.twosFromBigInt(u,256);return e.bufferBEFromBigInt(m,32)}if(t.startsWith("ufixed")){if(c=r(t),(u=i(s))<0)throw new Error("Supplied ufixed is negative");return o("uint256",u*Math.pow(BigInt(2),BigInt(c[1])))}if(t.startsWith("fixed"))return c=r(t),o("int256",i(s)*Math.pow(BigInt(2),BigInt(c[1])));throw new Error("Unsupported or invalid type: "+t)}function s(e){return"string"===e||"bytes"===e||"dynamic"===a(e)}function c(r,a){if(r.length!==a.length)throw new Error("Number of types are not matching the values");for(var o,s,c=[],u=0;u<r.length;u++){var l=t(r[u]),d=a[u];if("bytes"===l)c.push(d);else if("string"===l)c.push(new Buffer(d,"utf8"));else if("bool"===l)c.push(new Buffer(d?"01":"00","hex"));else if("address"===l)c.push(e.setLength(d,20));else if(l.startsWith("bytes")){if((o=n(l))<1||o>32)throw new Error("Invalid bytes<N> width: "+o);c.push(e.setLengthRight(d,o))}else if(l.startsWith("uint")){if((o=n(l))%8||o<8||o>256)throw new Error("Invalid uint<N> width: "+o);s=i(d);var f=e.bitLengthFromBigInt(s);if(f>o)throw new Error("Supplied uint exceeds width: "+o+" vs "+f);c.push(e.bufferBEFromBigInt(s,o/8))}else{if(!l.startsWith("int"))throw new Error("Unsupported or invalid type: "+l);if((o=n(l))%8||o<8||o>256)throw new Error("Invalid int<N> width: "+o);s=i(d);var p=e.bitLengthFromBigInt(s);if(p>o)throw new Error("Supplied int exceeds width: "+o+" vs "+p);var h=e.twosFromBigInt(s,o);c.push(e.bufferBEFromBigInt(h,o/8))}}return Buffer.concat(c)}return yc={rawEncode:function(e,n){var r=[],a=[],i=32*e.length;for(var c in e){var u=t(e[c]),l=o(u,n[c]);s(u)?(r.push(o("uint256",i)),a.push(l),i+=l.length):r.push(l)}return Buffer.concat(r.concat(a))},solidityPack:c,soliditySHA3:function(t,n){return e.keccak(c(t,n))}},yc}function Ec(){if(wc)return gc;wc=1;var e=Oc(),t=Pc(),n={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},r={encodeData:function(n,r,a){var i=this,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=["bytes32"],u=[this.hashType(n,a)];if(o){var l,d=function(n,r,s){if(void 0!==a[r])return["bytes32",null==s?"0x0000000000000000000000000000000000000000000000000000000000000000":e.keccak(i.encodeData(r,s,a,o))];if(void 0===s)throw new Error("missing value for field ".concat(n," of type ").concat(r));if("bytes"===r)return["bytes32",e.keccak(s)];if("string"===r)return"string"==typeof s&&(s=Buffer.from(s,"utf8")),["bytes32",e.keccak(s)];if(r.lastIndexOf("]")===r.length-1){var c=r.slice(0,r.lastIndexOf("[")),u=s.map(function(e){return d(n,c,e)});return["bytes32",e.keccak(t.rawEncode(u.map(function(e){return E(e,1)[0]}),u.map(function(e){return E(e,2)[1]})))]}return[r,s]},f=s(a[n]);try{for(f.s();!(l=f.n()).done;){var p=l.value,h=E(d(p.name,p.type,r[p.name]),2),m=h[0],v=h[1];c.push(m),u.push(v)}}catch(k){f.e(k)}finally{f.f()}}else{var y,b=s(a[n]);try{for(b.s();!(y=b.n()).done;){var g=y.value,w=r[g.name];if(void 0!==w)if("bytes"===g.type)c.push("bytes32"),w=e.keccak(w),u.push(w);else if("string"===g.type)c.push("bytes32"),"string"==typeof w&&(w=Buffer.from(w,"utf8")),w=e.keccak(w),u.push(w);else if(void 0!==a[g.type])c.push("bytes32"),w=e.keccak(this.encodeData(g.type,w,a,o)),u.push(w);else{if(g.type.lastIndexOf("]")===g.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");c.push(g.type),u.push(w)}}}catch(k){b.e(k)}finally{b.f()}}return t.rawEncode(c,u)},encodeType:function(e,t){var n,r="",a=this.findTypeDependencies(e,t).filter(function(t){return t!==e}),i=s(a=[e].concat(a.sort()));try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!t[o])throw new Error("No type definition specified: "+o);r+=o+"("+t[o].map(function(e){var t=e.name;return e.type+" "+t}).join(",")+")"}}catch(c){i.e(c)}finally{i.f()}return r},findTypeDependencies:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e=e.match(/^\w*/)[0],n.includes(e)||void 0===t[e])return n;n.push(e);var r,a=s(t[e]);try{for(a.s();!(r=a.n()).done;){var i,o=r.value,c=s(this.findTypeDependencies(o.type,t,n));try{for(c.s();!(i=c.n()).done;){var u=i.value;!n.includes(u)&&n.push(u)}}catch(l){c.e(l)}finally{c.f()}}}catch(l){a.e(l)}finally{a.f()}return n},hashStruct:function(t,n,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e.keccak(this.encodeData(t,n,r,a))},hashType:function(t,n){return e.keccak(this.encodeType(t,n))},sanitizeData:function(e){var t={};for(var r in n.properties)e[r]&&(t[r]=e[r]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.sanitizeData(t),a=[Buffer.from("1901","hex")];return a.push(this.hashStruct("EIP712Domain",r.domain,r.types,n)),"EIP712Domain"!==r.primaryType&&a.push(this.hashStruct(r.primaryType,r.message,r.types,n)),e.keccak(Buffer.concat(a))}};return gc={TYPED_MESSAGE_SCHEMA:n,TypedDataUtils:r,hashForSignTypedDataLegacy:function(n){return function(n){var r=new Error("Expect argument to be non-empty array");if("object"!==u(n)||!n.length)throw r;var a=n.map(function(t){return"bytes"===t.type?e.toBuffer(t.value):t.value}),i=n.map(function(e){return e.type}),o=n.map(function(e){if(!e.name)throw r;return e.type+" "+e.name});return t.soliditySHA3(["bytes32","bytes32"],[t.soliditySHA3(new Array(n.length).fill("string"),o),t.soliditySHA3(i,a)])}(n.data)},hashForSignTypedData_v3:function(e){return r.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return r.hash(e.data)}},gc}var Tc,_c=xe(Ec()),Cc="Addresses",jc=function(){return p(function e(t){h(this,e),this.secret=t},[{key:"encrypt",value:(t=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,f;return A().w(function(e){for(;;)switch(e.n){case 0:if(64===(n=this.secret).length){e.n=1;break}throw new Error("secret must be 256 bits");case 1:return r=crypto.getRandomValues(new Uint8Array(12)),e.n=2,crypto.subtle.importKey("raw",cr(n),{name:"aes-gcm"},!1,["encrypt","decrypt"]);case 2:return a=e.v,i=new TextEncoder,e.n=3,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},a,i.encode(t));case 3:return o=e.v,s=o.slice(o.byteLength-16),c=o.slice(0,o.byteLength-16),u=new Uint8Array(s),l=new Uint8Array(c),f=new Uint8Array([].concat(d(r),d(u),d(l))),e.a(2,sr(f))}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"decrypt",value:(e=P(A().m(function e(t){var n;return A().w(function(e){for(;;)switch(e.n){case 0:if(64===(n=this.secret).length){e.n=1;break}throw new Error("secret must be 256 bits");case 1:return e.a(2,new Promise(function(e,r){P(A().m(function a(){var i,o,s,c,u,l,f,p,h,m;return A().w(function(a){for(;;)switch(a.p=a.n){case 0:return a.n=1,crypto.subtle.importKey("raw",cr(n),{name:"aes-gcm"},!1,["encrypt","decrypt"]);case 1:return i=a.v,o=cr(t),s=o.slice(0,12),c=o.slice(12,28),u=o.slice(28),l=new Uint8Array([].concat(d(u),d(c))),f={name:"AES-GCM",iv:new Uint8Array(s)},a.p=2,a.n=3,window.crypto.subtle.decrypt(f,i,l);case 3:p=a.v,h=new TextDecoder,e(h.decode(p)),a.n=5;break;case 4:a.p=4,m=a.v,r(m);case 5:return a.a(2)}},a,null,[[2,4]])}))()}))}},e,this)})),function(t){return e.apply(this,arguments)})}]);var e,t}(),Lc=function(){return p(function e(t,n,r){h(this,e),this.linkAPIUrl=t,this.sessionId=n;var a="".concat(n,":").concat(r);this.auth="Basic ".concat(btoa(a))},[{key:"markUnseenEventsAsSeen",value:(t=P(A().m(function e(t){var n=this;return A().w(function(e){for(;;)if(0===e.n)return e.a(2,Promise.all(t.map(function(e){return fetch("".concat(n.linkAPIUrl,"/events/").concat(e.eventId,"/seen"),{method:"POST",headers:{Authorization:n.auth}})})).catch(function(e){return console.error("Unable to mark events as seen:",e)}))},e)})),function(e){return t.apply(this,arguments)})},{key:"fetchUnseenEvents",value:(e=P(A().m(function e(){var t,n,r,a,i,o,s=this;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch("".concat(this.linkAPIUrl,"/events?unseen=true"),{headers:{Authorization:this.auth}});case 1:if(!(n=e.v).ok){e.n=4;break}return e.n=2,n.json();case 2:if(r=e.v,a=r.events,!(i=r.error)){e.n=3;break}throw new Error("Check unseen events failed: ".concat(i));case 3:return o=null!==(t=null==a?void 0:a.filter(function(e){return"Web3Response"===e.event}).map(function(e){return{type:"Event",sessionId:s.sessionId,eventId:e.id,event:e.event,data:e.data}}))&&void 0!==t?t:[],this.markUnseenEventsAsSeen(o),e.a(2,o);case 4:throw new Error("Check unseen events failed: ".concat(n.status));case 5:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})}]);var e,t}();!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"}(Tc||(Tc={}));var Mc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WebSocket;h(this,e),this.WebSocketClass=n,this.webSocket=null,this.isDisconnecting=!1,this.url=t.replace(/^http/,"ws"),this.instanceId=e.instanceCounter++,e.activeInstances.add(this.instanceId)}return p(e,[{key:"setConnectionStateListener",value:function(e){this.connectionStateListener=e}},{key:"setIncomingDataListener",value:function(e){this.incomingDataListener=e}},{key:"connect",value:(t=P(A().m(function t(){var n=this;return A().w(function(t){for(;;)switch(t.n){case 0:if(!this.webSocket){t.n=1;break}throw new Error("webSocket object is not null");case 1:if(!this.isDisconnecting){t.n=2;break}throw new Error("WebSocket is disconnecting, cannot reconnect on same instance");case 2:return t.a(2,new Promise(function(t,r){var a,i;try{n.webSocket=i=new n.WebSocketClass(n.url)}catch(o){return void r(o)}null===(a=n.connectionStateListener)||void 0===a||a.call(n,Tc.CONNECTING),i.onclose=function(e){var t;n.clearWebSocket(),i.readyState!==WebSocket.OPEN&&r(new Error("websocket error ".concat(e.code,": ").concat(e.reason))),null===(t=n.connectionStateListener)||void 0===t||t.call(n,Tc.DISCONNECTED)},i.onopen=function(r){var a;t(),null===(a=n.connectionStateListener)||void 0===a||a.call(n,Tc.CONNECTED),e.pendingData.length>0&&(d(e.pendingData).forEach(function(e){return n.sendData(e)}),e.pendingData=[])},i.onmessage=function(e){var t,r;if("h"===e.data)null===(t=n.incomingDataListener)||void 0===t||t.call(n,{type:"Heartbeat"});else try{var a=JSON.parse(e.data);null===(r=n.incomingDataListener)||void 0===r||r.call(n,a)}catch(i){}}}))}},t,this)})),function(){return t.apply(this,arguments)})},{key:"disconnect",value:function(){var e,t=this.webSocket;if(t){this.isDisconnecting=!0,this.clearWebSocket(),null===(e=this.connectionStateListener)||void 0===e||e.call(this,Tc.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{t.close()}catch(n){}}}},{key:"sendData",value:function(t){var n=this.webSocket;if(!n)return e.pendingData.push(t),void(this.isDisconnecting||this.connect());n.readyState===WebSocket.OPEN?n.send(t):e.pendingData.push(t)}},{key:"clearWebSocket",value:function(){var e=this.webSocket;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}},{key:"cleanup",value:function(){e.activeInstances.delete(this.instanceId)}}]);var t}();Mc.instanceCounter=0,Mc.activeInstances=new Set,Mc.pendingData=[];var Dc=function(){return p(function e(t){var n=this,r=t.session,a=t.linkAPIUrl,i=t.listener;h(this,e),this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=rr(1),this.reconnectAttempts=0,this.isReconnecting=!1,this._connected=!1,this._linked=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=function(e){e&&new Map([["__destroyed",n.handleDestroyed],["EthereumAddress",n.handleAccountUpdated],["WalletUsername",n.handleWalletUsernameUpdated],["AppVersion",n.handleAppVersionUpdated],["ChainId",function(t){return e.JsonRpcUrl&&n.handleChainUpdated(t,e.JsonRpcUrl)}]]).forEach(function(t,n){var r=e[n];void 0!==r&&t(r)})},this.handleDestroyed=function(e){var t;"1"===e&&(null===(t=n.listener)||void 0===t||t.resetAndReload())},this.handleAccountUpdated=function(){var e=P(A().m(function e(t){var r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.cipher.decrypt(t);case 1:a=e.v,null===(r=n.listener)||void 0===r||r.accountUpdated(a),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),this.handleMetadataUpdated=function(){var e=P(A().m(function e(t,r){var a,i;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.cipher.decrypt(r);case 1:i=e.v,null===(a=n.listener)||void 0===a||a.metadataUpdated(t,i),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t,n){return e.apply(this,arguments)}}(),this.handleWalletUsernameUpdated=function(){var e=P(A().m(function e(t){return A().w(function(e){for(;;)switch(e.n){case 0:n.handleMetadataUpdated("walletUsername",t);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),this.handleAppVersionUpdated=function(){var e=P(A().m(function e(t){return A().w(function(e){for(;;)switch(e.n){case 0:n.handleMetadataUpdated("AppVersion",t);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),this.handleChainUpdated=function(){var e=P(A().m(function e(t,r){var a,i,o;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n.cipher.decrypt(t);case 1:return i=e.v,e.n=2,n.cipher.decrypt(r);case 2:o=e.v,null===(a=n.listener)||void 0===a||a.chainUpdated(i,o),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t,n){return e.apply(this,arguments)}}(),this.session=r,this.cipher=new jc(r.secret),this.listener=i,this.linkAPIUrl=a,this.WebSocketClass=WebSocket;var o=this.createWebSocket();this.ws=o,this.http=new Lc(a,r.id,r.key),this.setupVisibilityChangeHandler()},[{key:"createWebSocket",value:function(){var e=this,t=new Mc("".concat(this.linkAPIUrl,"/rpc"),this.WebSocketClass);return this.activeWsInstance=t,t.setConnectionStateListener(function(){var n=P(A().m(function n(r){var a,i,o;return A().w(function(n){for(;;)switch(n.p=n.n){case 0:if(t===e.activeWsInstance){n.n=1;break}return n.a(2);case 1:a=!1,o=r,n.n=o===Tc.DISCONNECTED?2:o===Tc.CONNECTED?3:o===Tc.CONNECTING?8:9;break;case 2:return e.heartbeatIntervalId&&(clearInterval(e.heartbeatIntervalId),e.heartbeatIntervalId=void 0),e.lastHeartbeatResponse=0,a=!1,e.destroyed||(i=function(){var n=P(A().m(function n(){var r;return A().w(function(n){for(;;)switch(n.n){case 0:if(!e.isReconnecting){n.n=1;break}return n.a(2);case 1:return e.isReconnecting=!0,r=0===e.reconnectAttempts?0:3e3,n.n=2,new Promise(function(e){return setTimeout(e,r)});case 2:e.destroyed||t!==e.activeWsInstance?e.isReconnecting=!1:(e.reconnectAttempts++,"cleanup"in e.ws&&"function"==typeof e.ws.cleanup&&e.ws.cleanup(),e.ws=e.createWebSocket(),e.ws.connect().catch(function(){ac()}).finally(function(){e.isReconnecting=!1}));case 3:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),i()),n.a(3,9);case 3:return e.reconnectAttempts=0,n.p=4,n.n=5,e.handleConnected();case 5:a=n.v,e.fetchUnseenEventsAPI().catch(function(){}),n.n=7;break;case 6:return n.p=6,n.v,n.a(3,9);case 7:return e.connected=a,e.updateLastHeartbeat(),e.heartbeatIntervalId&&clearInterval(e.heartbeatIntervalId),e.heartbeatIntervalId=window.setInterval(function(){e.heartbeat()},1e4),setTimeout(function(){e.heartbeat()},100),n.a(3,9);case 8:return n.a(3,9);case 9:r!==Tc.CONNECTED&&(e.connected=a);case 10:return n.a(2)}},n,null,[[4,6]])}));return function(e){return n.apply(this,arguments)}}()),t.setIncomingDataListener(function(t){var n;switch(t.type){case"Heartbeat":return void e.updateLastHeartbeat();case"IsLinkedOK":case"Linked":var r="IsLinkedOK"===t.type?t.linked:void 0;e.linked=r||t.onlineGuests>0;break;case"GetSessionConfigOK":case"SessionConfigUpdated":e.handleSessionMetadataUpdated(t.metadata);break;case"Event":e.handleIncomingEvent(t)}void 0!==t.id&&(null===(n=e.requestResolutions.get(t.id))||void 0===n||n(t))}),t}},{key:"setupVisibilityChangeHandler",value:function(){var e=this;this.visibilityChangeHandler=function(){document.hidden||e.destroyed||(e.connected?e.heartbeat():e.reconnectWithFreshWebSocket())},this.focusHandler=function(){e.destroyed||e.connected||e.reconnectWithFreshWebSocket()},document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("focus",this.focusHandler),window.addEventListener("pageshow",function(t){t.persisted&&e.focusHandler&&e.focusHandler()})}},{key:"reconnectWithFreshWebSocket",value:function(){if(!this.destroyed){var e=this.ws;this.activeWsInstance=void 0,e.disconnect(),"cleanup"in e&&"function"==typeof e.cleanup&&e.cleanup(),this.ws=this.createWebSocket(),this.ws.connect().catch(function(){ac()})}}},{key:"connect",value:function(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}},{key:"destroy",value:(o=P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:if(!this.destroyed){e.n=1;break}return e.a(2);case 1:return e.n=2,this.makeRequest({type:"SetSessionConfig",id:rr(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3});case 2:this.destroyed=!0,this.activeWsInstance=void 0,this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=void 0),this.visibilityChangeHandler&&document.removeEventListener("visibilitychange",this.visibilityChangeHandler),this.focusHandler&&window.removeEventListener("focus",this.focusHandler),this.ws.disconnect(),"cleanup"in this.ws&&"function"==typeof this.ws.cleanup&&this.ws.cleanup(),this.listener=void 0;case 3:return e.a(2)}},e,this)})),function(){return o.apply(this,arguments)})},{key:"connected",get:function(){return this._connected},set:function(e){this._connected=e}},{key:"linked",get:function(){return this._linked},set:function(e){var t,n;this._linked=e,e&&(null===(t=this.onceLinked)||void 0===t||t.call(this)),null===(n=this.listener)||void 0===n||n.linkedUpdated(e)}},{key:"setOnceLinked",value:function(e){var t=this;return new Promise(function(n){t.linked?e().then(n):t.onceLinked=function(){e().then(n),t.onceLinked=void 0}})}},{key:"handleIncomingEvent",value:(i=P(A().m(function e(t){var n,r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if("Event"===t.type&&"Web3Response"===t.event){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,this.cipher.decrypt(t.data);case 2:if(r=e.v,"WEB3_RESPONSE"===(a=JSON.parse(r)).type){e.n=3;break}return e.a(2);case 3:null===(n=this.listener)||void 0===n||n.handleWeb3ResponseMessage(a.id,a.response),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,this,[[1,4]])})),function(e){return i.apply(this,arguments)})},{key:"checkUnseenEvents",value:(a=P(A().m(function e(){var t;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,new Promise(function(e){return setTimeout(e,250)});case 1:return e.p=1,e.n=2,this.fetchUnseenEventsAPI();case 2:e.n=4;break;case 3:e.p=3,t=e.v,console.error("Unable to check for unseen events",t);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return a.apply(this,arguments)})},{key:"fetchUnseenEventsAPI",value:(r=P(A().m(function e(){var t=this;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.http.fetchUnseenEvents();case 1:e.v.forEach(function(e){t.handleIncomingEvent(e)}),e.n=3;break;case 2:e.p=2,e.v,ic();case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"publishEvent",value:(n=P(A().m(function e(t,n){var r,a,i,o=this,s=arguments;return A().w(function(e){for(;;)switch(e.n){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.n=1,this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},n),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"})));case 1:return a=e.v,i={type:"PublishEvent",id:rr(this.nextReqId++),sessionId:this.session.id,event:t,data:a,callWebhook:r},e.a(2,this.setOnceLinked(P(A().m(function e(){var t;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,o.makeRequest(i);case 1:if("Fail"!==(t=e.v).type){e.n=2;break}throw new Error(t.error||"failed to publish event");case 2:return e.a(2,t.eventId)}},e)}))))}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"sendData",value:function(e){this.ws.sendData(JSON.stringify(e))}},{key:"updateLastHeartbeat",value:function(){this.lastHeartbeatResponse=Date.now()}},{key:"heartbeat",value:function(){if(Date.now()-this.lastHeartbeatResponse>2e4)this.ws.disconnect();else if(this.connected)try{this.ws.sendData("h")}catch(e){}}},{key:"makeRequest",value:(t=P(A().m(function e(t){var n,r,a,i=this,o=arguments;return A().w(function(e){for(;;)if(0===e.n)return n=o.length>1&&void 0!==o[1]?o[1]:{timeout:6e4},r=t.id,this.sendData(t),e.a(2,Promise.race([new Promise(function(e,t){a=window.setTimeout(function(){t(new Error("request ".concat(r," timed out")))},n.timeout)}),new Promise(function(e){i.requestResolutions.set(r,function(t){clearTimeout(a),e(t),i.requestResolutions.delete(r)})})]))},e,this)})),function(e){return t.apply(this,arguments)})},{key:"handleConnected",value:(e=P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.makeRequest({type:"HostSession",id:rr(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key});case 1:if("Fail"!==e.v.type){e.n=2;break}return e.a(2,!1);case 2:return this.sendData({type:"IsLinked",id:rr(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:rr(this.nextReqId++),sessionId:this.session.id}),e.a(2,!0)}},e,this)})),function(){return e.apply(this,arguments)})}]);var e,t,n,r,a,i,o}(),Nc=function(){return p(function e(){h(this,e),this._nextRequestId=0,this.callbacks=new Map},[{key:"makeRequestId",value:function(){this._nextRequestId=(this._nextRequestId+1)%2147483647;var e=this._nextRequestId,t=mr(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}}])}();function Uc(e){if(!((t=e)instanceof Uint8Array||null!=t&&"object"===u(t)&&"Uint8Array"===t.constructor.name))throw new Error("Uint8Array expected");for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(r.length>0&&!r.includes(e.length))throw new Error("Uint8Array expected of length ".concat(r,", not of length=").concat(e.length))}function Bc(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
var Rc=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},Gc=function(e,t){return e<<32-t|e>>>t};new Uint8Array(new Uint32Array([287454020]).buffer)[0];var qc=Array.from({length:256},function(e,t){return t.toString(16).padStart(2,"0")});function zc(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got ".concat(u(e)));return new Uint8Array((new TextEncoder).encode(e))}(e)),Uc(e),e}function Fc(e){var t=function(t){return e().update(zc(t)).digest()},n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(){return e()},t}var Hc=function(e,t,n){return e&t^~e&n},Wc=function(e,t,n){return e&t^e&n^t&n},Kc=function(e){function t(e,n,r,a){var i;return h(this,t),(i=m(this,t)).blockLen=e,i.outputLen=n,i.padOffset=r,i.isLE=a,i.finished=!1,i.length=0,i.pos=0,i.destroyed=!1,i.buffer=new Uint8Array(e),i.view=Rc(i.buffer),i}return b(t,e),p(t,[{key:"update",value:function(e){Bc(this);for(var t=this.view,n=this.buffer,r=this.blockLen,a=(e=zc(e)).length,i=0;i<a;){var o=Math.min(r-this.pos,a-i);if(o!==r)n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0),this.pos=0);else for(var s=Rc(e);r<=a-i;i+=r)this.process(s,i)}return this.length+=e.length,this.roundClean(),this}},{key:"digestInto",value:function(e){Bc(this),function(e,t){Uc(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least ".concat(n))}(e,this),this.finished=!0;var t=this.buffer,n=this.view,r=this.blockLen,a=this.isLE,i=this.pos;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(var o=i;o<r;o++)t[o]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);var a=BigInt(32),i=BigInt(4294967295),o=Number(n>>a&i),s=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,s,r)}(n,r-8,BigInt(8*this.length),a),this.process(n,0);var s=Rc(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(var d=0;d<u;d++)s.setUint32(4*d,l[d],a)}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}},{key:"_cloneInto",value:function(e){var t;e||(e=new this.constructor),(t=e).set.apply(t,d(this.get()));var n=this.blockLen,r=this.buffer,a=this.length,i=this.finished,o=this.destroyed,s=this.pos;return e.length=a,e.pos=s,e.finished=i,e.destroyed=o,a%n&&e.buffer.set(r),e}}])}(function(){return p(function e(){h(this,e)},[{key:"clone",value:function(){return this._cloneInto()}}])}()),Vc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Jc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qc=new Uint32Array(64),$c=function(e){function t(){var e;return h(this,t),(e=m(this,t,[64,32,8,!1])).A=0|Jc[0],e.B=0|Jc[1],e.C=0|Jc[2],e.D=0|Jc[3],e.E=0|Jc[4],e.F=0|Jc[5],e.G=0|Jc[6],e.H=0|Jc[7],e}return b(t,e),p(t,[{key:"get",value:function(){return[this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H]}},{key:"set",value:function(e,t,n,r,a,i,o,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|a,this.F=0|i,this.G=0|o,this.H=0|s}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)Qc[n]=e.getUint32(t,!1);for(var r=16;r<64;r++){var a=Qc[r-15],i=Qc[r-2],o=Gc(a,7)^Gc(a,18)^a>>>3,s=Gc(i,17)^Gc(i,19)^i>>>10;Qc[r]=s+Qc[r-7]+o+Qc[r-16]|0}for(var c=this.A,u=this.B,l=this.C,d=this.D,f=this.E,p=this.F,h=this.G,m=this.H,v=0;v<64;v++){var y=m+(Gc(f,6)^Gc(f,11)^Gc(f,25))+Hc(f,p,h)+Vc[v]+Qc[v]|0,b=(Gc(c,2)^Gc(c,13)^Gc(c,22))+Wc(c,u,l)|0;m=h,h=p,p=f,f=d+y|0,d=l,l=u,u=c,c=y+b|0}c=c+this.A|0,u=u+this.B|0,l=l+this.C|0,d=d+this.D|0,f=f+this.E|0,p=p+this.F|0,h=h+this.G|0,m=m+this.H|0,this.set(c,u,l,d,f,p,h,m)}},{key:"roundClean",value:function(){Qc.fill(0)}},{key:"destroy",value:function(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}])}(Kc),Zc=Fc(function(){return new $c}),Yc="session:id",Xc="session:secret",eu="session:linked",tu=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];h(this,e),this.storage=t,this.id=n,this.secret=r,this.key=function(e){Uc(e);for(var t="",n=0;n<e.length;n++)t+=qc[e[n]];return t}(Zc("".concat(n,", ").concat(r," WalletLink"))),this._linked=!!a}return p(e,[{key:"linked",get:function(){return this._linked},set:function(e){this._linked=e,this.persistLinked()}},{key:"save",value:function(){return this.storage.setItem(Yc,this.id),this.storage.setItem(Xc,this.secret),this.persistLinked(),this}},{key:"persistLinked",value:function(){this.storage.setItem(eu,this._linked?"1":"0")}}],[{key:"create",value:function(t){return new e(t,or(16),or(32)).save()}},{key:"load",value:function(t){var n=t.getItem(Yc),r=t.getItem(eu),a=t.getItem(Xc);return n&&a?new e(t,n,a,"1"===r):null}}])}(),nu=function(){return p(function e(){h(this,e),this.root=null,this.darkMode=Kr()},[{key:"attach",value:function(){var e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),zr()}},{key:"present",value:function(e){this.render(e)}},{key:"clear",value:function(){this.render(null)}},{key:"render",value:function(e){var t=this;this.root&&(y(null,this.root),e&&y(g(ru,Object.assign({},e,{onDismiss:function(){t.clear()},darkMode:this.darkMode})),this.root))}}])}(),ru=function(e){var t=e.title,n=e.buttonText,r=e.darkMode,a=e.onButtonClick,i=e.onDismiss,o=r?"dark":"light";return g(Jr,{darkMode:r},g("div",{class:"-cbwsdk-redirect-dialog"},g("style",null,".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"),g("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:i}),g("div",{class:Hr("-cbwsdk-redirect-dialog-box",o)},g("p",null,t),g("button",{onClick:a},n))))},au=function(){return p(function e(){h(this,e),this.attached=!1,this.redirectDialog=new nu},[{key:"attach",value:function(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}},{key:"redirectToCoinbaseWallet",value:function(e){var t=new URL("https://go.cb-w.com/walletlink");t.searchParams.append("redirect_url",Wr().href),e&&t.searchParams.append("wl_url",e);var n=document.createElement("a");n.target="cbw-opener",n.href=t.href,n.rel="noreferrer noopener",n.click()}},{key:"openCoinbaseWalletDeeplink",value:function(e){var t=this;this.redirectToCoinbaseWallet(e),setTimeout(function(){t.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:function(){t.redirectToCoinbaseWallet(e)}})},99)}},{key:"showConnecting",value:function(e){var t=this;return function(){t.redirectDialog.clear()}}}])}(),iu=function(){function e(t){var n,r=this;h(this,e),this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null===(n=null===window||void 0===window?void 0:window.navigator)||void 0===n?void 0:n.userAgent),this.linkedUpdated=function(e){r.isLinked=e;var t=r.storage.getItem(Cc);if(e&&(r._session.linked=e),r.isUnlinkedErrorState=!1,t){var n=t.split(" "),a="true"===r.storage.getItem("IsStandaloneSigning");""===n[0]||e||!r._session.linked||a||(r.isUnlinkedErrorState=!0)}},this.metadataUpdated=function(e,t){r.storage.setItem(e,t)},this.chainUpdated=function(e,t){r.chainCallbackParams.chainId===e&&r.chainCallbackParams.jsonRpcUrl===t||(r.chainCallbackParams={chainId:e,jsonRpcUrl:t},r.chainCallback&&r.chainCallback(t,Number.parseInt(e,10)))},this.accountUpdated=function(t){r.accountsCallback&&r.accountsCallback([t]),e.accountRequestCallbackIds.size>0&&(Array.from(e.accountRequestCallbackIds.values()).forEach(function(e){r.invokeCallback(e,{method:"requestEthereumAccounts",result:[t]})}),e.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=t.linkAPIUrl,this.storage=t.storage,this.metadata=t.metadata,this.accountsCallback=t.accountsCallback,this.chainCallback=t.chainCallback;var a=this.subscribe(),i=a.session,o=a.ui,s=a.connection;this._session=i,this.connection=s,this.relayEventManager=new Nc,this.ui=o,this.ui.attach()}return p(e,[{key:"subscribe",value:function(){var e=tu.load(this.storage)||tu.create(this.storage),t=this.linkAPIUrl,n=new Dc({session:e,linkAPIUrl:t,listener:this}),r=this.isMobileWeb?new au:new Zr;return n.connect(),{session:e,ui:r,connection:n}}},{key:"resetAndReload",value:function(){var e=this;this.connection.destroy().then(function(){var t=tu.load(e.storage);(null==t?void 0:t.id)===e._session.id&&ua.clearAll(),document.location.reload()}).catch(function(e){})}},{key:"signEthereumTransaction",value:function(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:dr(e.weiValue),data:ur(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?dr(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?dr(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?dr(e.gasPriceInWei):null,gasLimit:e.gasLimit?dr(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}},{key:"signAndSubmitEthereumTransaction",value:function(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:dr(e.weiValue),data:ur(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?dr(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?dr(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?dr(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?dr(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}},{key:"submitEthereumTransaction",value:function(e,t){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:ur(e,!0),chainId:t}})}},{key:"getWalletLinkSession",value:function(){return this._session}},{key:"sendRequest",value:function(e){var t=this,n=null,r=or(8),a=function(a){t.publishWeb3RequestCanceledEvent(r),t.handleErrorResponse(r,e.method,a),null==n||n()};return new Promise(function(i,o){n=t.ui.showConnecting({isUnlinkedErrorState:t.isUnlinkedErrorState,onCancel:a,onResetConnection:t.resetAndReload}),t.relayEventManager.callbacks.set(r,function(e){if(null==n||n(),ra(e))return o(new Error(e.errorMessage));i(e)}),t.publishWeb3RequestEvent(r,e)})}},{key:"publishWeb3RequestEvent",value:function(e,t){var n=this,r={type:"WEB3_REQUEST",id:e,request:t};this.publishEvent("Web3Request",r,!0).then(function(e){}).catch(function(e){n.handleWeb3ResponseMessage(r.id,{method:t.method,errorMessage:e.message})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(t.method)}},{key:"openCoinbaseWalletDeeplink",value:function(e){var t=this;if(this.ui instanceof au)switch(e){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",function(){window.addEventListener("focus",function(){t.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink()}}},{key:"publishWeb3RequestCanceledEvent",value:function(e){var t={type:"WEB3_REQUEST_CANCELED",id:e};this.publishEvent("Web3RequestCanceled",t,!1).then()}},{key:"publishEvent",value:function(e,t,n){return this.connection.publishEvent(e,t,n)}},{key:"handleWeb3ResponseMessage",value:function(t,n){var r=this;if("requestEthereumAccounts"===n.method)return e.accountRequestCallbackIds.forEach(function(e){return r.invokeCallback(e,n)}),void e.accountRequestCallbackIds.clear();this.invokeCallback(t,n)}},{key:"handleErrorResponse",value:function(e,t,n){var r,a=null!==(r=null==n?void 0:n.message)&&void 0!==r?r:"Unspecified error message.";this.handleWeb3ResponseMessage(e,{method:t,errorMessage:a})}},{key:"invokeCallback",value:function(e,t){var n=this.relayEventManager.callbacks.get(e);n&&(n(t),this.relayEventManager.callbacks.delete(e))}},{key:"requestEthereumAccounts",value:function(){var t=this,n=this.metadata,r={method:"requestEthereumAccounts",params:{appName:n.appName,appLogoUrl:n.appLogoUrl}},a=or(8);return new Promise(function(n,i){t.relayEventManager.callbacks.set(a,function(e){if(ra(e))return i(new Error(e.errorMessage));n(e)}),e.accountRequestCallbackIds.add(a),t.publishWeb3RequestEvent(a,r)})}},{key:"watchAsset",value:function(e,t,n,r,a,i){var o=this,s={method:"watchAsset",params:{type:e,options:{address:t,symbol:n,decimals:r,image:a},chainId:i}},c=null,u=or(8);return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:function(e){o.publishWeb3RequestCanceledEvent(u),o.handleErrorResponse(u,s.method,e),null==c||c()},onResetConnection:this.resetAndReload}),new Promise(function(e,t){o.relayEventManager.callbacks.set(u,function(n){if(null==c||c(),ra(n))return t(new Error(n.errorMessage));e(n)}),o.publishWeb3RequestEvent(u,s)})}},{key:"addEthereumChain",value:function(e,t,n,r,a,i){var o=this,s={method:"addEthereumChain",params:{chainId:e,rpcUrls:t,blockExplorerUrls:r,chainName:a,iconUrls:n,nativeCurrency:i}},c=null,u=or(8);return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:function(e){o.publishWeb3RequestCanceledEvent(u),o.handleErrorResponse(u,s.method,e),null==c||c()},onResetConnection:this.resetAndReload}),new Promise(function(e,t){o.relayEventManager.callbacks.set(u,function(n){if(null==c||c(),ra(n))return t(new Error(n.errorMessage));e(n)}),o.publishWeb3RequestEvent(u,s)})}},{key:"switchEthereumChain",value:function(e,t){var n=this,r={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:t})},a=null,i=or(8);return a=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:function(e){n.publishWeb3RequestCanceledEvent(i),n.handleErrorResponse(i,r.method,e),null==a||a()},onResetConnection:this.resetAndReload}),new Promise(function(e,t){n.relayEventManager.callbacks.set(i,function(n){return null==a||a(),ra(n)&&n.errorCode?t(Kn.provider.custom({code:n.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):ra(n)?t(new Error(n.errorMessage)):void e(n)}),n.publishWeb3RequestEvent(i,r)})}}])}();iu.accountRequestCallbackIds=new Set;var ou="DefaultChainId",su="DefaultJsonRpcUrl",cu=function(){return p(function e(t){h(this,e),this._relay=null,this._addresses=[],this.metadata=t.metadata,this._storage=new ua("walletlink",Ur),this.callback=t.callback||null;var n=this._storage.getItem(Cc);if(n){var r=n.split(" ");""!==r[0]&&(this._addresses=r.map(function(e){return gr(e)}))}this.initializeRelay()},[{key:"getSession",value:function(){var e=this.initializeRelay().getWalletLinkSession();return{id:e.id,secret:e.secret}}},{key:"handshake",value:(v=P(A().m(function e(t){var n,r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return n="eth_requestAccounts",r=ya(t),Ys({method:n,correlationId:r}),e.p=1,e.n=2,this._eth_requestAccounts();case 2:ec({method:n,correlationId:r}),e.n=4;break;case 3:throw e.p=3,a=e.v,Xs({method:n,correlationId:r,errorMessage:Na(a)}),a;case 4:return e.a(2)}},e,this,[[1,3]])})),function(e){return v.apply(this,arguments)})},{key:"selectedAddress",get:function(){return this._addresses[0]||void 0}},{key:"jsonRpcUrl",get:function(){var e;return null!==(e=this._storage.getItem(su))&&void 0!==e?e:void 0},set:function(e){this._storage.setItem(su,e)}},{key:"updateProviderInfo",value:function(e,t){var n;this.jsonRpcUrl=e;var r=this.getChainId();this._storage.setItem(ou,t.toString(10)),kr(t)!==r&&(null===(n=this.callback)||void 0===n||n.call(this,"chainChanged",fr(t)))}},{key:"watchAsset",value:(m=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l;return A().w(function(e){for(;;)switch(e.n){case 0:if((n=Array.isArray(t)?t[0]:t).type){e.n=1;break}throw Kn.rpc.invalidParams("Type is required");case 1:if("ERC20"===(null==n?void 0:n.type)){e.n=2;break}throw Kn.rpc.invalidParams("Asset of type '".concat(n.type,"' is not supported"));case 2:if(null==n?void 0:n.options){e.n=3;break}throw Kn.rpc.invalidParams("Options are required");case 3:if(null==n?void 0:n.options.address){e.n=4;break}throw Kn.rpc.invalidParams("Address is required");case 4:return r=this.getChainId(),a=n.options,i=a.address,o=a.symbol,s=a.image,c=a.decimals,u=this.initializeRelay(),e.n=5,u.watchAsset(n.type,i,o,c,s,null==r?void 0:r.toString());case 5:if(!ra(l=e.v)){e.n=6;break}return e.a(2,!1);case 6:return e.a(2,!!l.result)}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"addEthereumChain",value:(f=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p,h,m;return A().w(function(e){for(;;)switch(e.n){case 0:if(a=t[0],0!==(null===(n=a.rpcUrls)||void 0===n?void 0:n.length)){e.n=1;break}throw Kn.rpc.invalidParams("please pass in at least 1 rpcUrl");case 1:if(a.chainName&&""!==a.chainName.trim()){e.n=2;break}throw Kn.rpc.invalidParams("chainName is a required field");case 2:if(a.nativeCurrency){e.n=3;break}throw Kn.rpc.invalidParams("nativeCurrency is a required field");case 3:if((i=Number.parseInt(a.chainId,16))!==this.getChainId()){e.n=4;break}return e.a(2,!1);case 4:return o=this.initializeRelay(),s=a.rpcUrls,c=void 0===s?[]:s,u=a.blockExplorerUrls,l=void 0===u?[]:u,d=a.chainName,f=a.iconUrls,p=void 0===f?[]:f,h=a.nativeCurrency,e.n=5,o.addEthereumChain(i.toString(),c,p,l,d,h);case 5:if(!ra(m=e.v)){e.n=6;break}return e.a(2,!1);case 6:if(!0!==(null===(r=m.result)||void 0===r?void 0:r.isApproved)){e.n=7;break}return this.updateProviderInfo(c[0],i),e.a(2,null);case 7:throw Kn.rpc.internal("unable to add ethereum chain");case 8:return e.a(2)}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"switchEthereumChain",value:(l=P(A().m(function e(t){var n,r,a,i,o;return A().w(function(e){for(;;)switch(e.n){case 0:return n=t[0],r=Number.parseInt(n.chainId,16),a=this.initializeRelay(),e.n=1,a.switchEthereumChain(r.toString(10),this.selectedAddress||void 0);case 1:if(!ra(i=e.v)){e.n=2;break}throw i;case 2:return(o=i.result).isApproved&&o.rpcUrl.length>0&&this.updateProviderInfo(o.rpcUrl,r),e.a(2,null)}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"cleanup",value:(u=P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear();case 1:return e.a(2)}},e,this)})),function(){return u.apply(this,arguments)})},{key:"_setAddresses",value:function(e,t){var n;if(!Array.isArray(e))throw new Error("addresses is not an array");var r=e.map(function(e){return gr(e)});JSON.stringify(r)!==JSON.stringify(this._addresses)&&(this._addresses=r,null===(n=this.callback)||void 0===n||n.call(this,"accountsChanged",r),this._storage.setItem(Cc,r.join(" ")))}},{key:"request",value:(c=P(A().m(function e(t){var n,r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=ya(t),tc({method:t.method,correlationId:n}),e.p=1,e.n=2,this._request(t);case 2:return r=e.v,rc({method:t.method,correlationId:n}),e.a(2,r);case 3:throw e.p=3,a=e.v,nc({method:t.method,correlationId:n,errorMessage:Na(a)}),a;case 4:return e.a(2)}},e,this,[[1,3]])})),function(e){return c.apply(this,arguments)})},{key:"_request",value:(s=P(A().m(function e(t){var n,r;return A().w(function(e){for(;;)switch(e.n){case 0:n=t.params||[],r=t.method,e.n="eth_accounts"===r?1:"eth_coinbase"===r?2:"net_version"===r?3:"eth_chainId"===r?4:"eth_requestAccounts"===r?5:"eth_ecRecover"===r||"personal_ecRecover"===r?6:"personal_sign"===r?7:"eth_signTransaction"===r?8:"eth_sendRawTransaction"===r?9:"eth_sendTransaction"===r?10:"eth_signTypedData_v1"===r||"eth_signTypedData_v3"===r||"eth_signTypedData_v4"===r||"eth_signTypedData"===r?11:"wallet_addEthereumChain"===r?12:"wallet_switchEthereumChain"===r?13:"wallet_watchAsset"===r?14:15;break;case 1:return e.a(2,d(this._addresses));case 2:return e.a(2,this.selectedAddress||null);case 3:return e.a(2,this.getChainId().toString(10));case 4:return e.a(2,fr(this.getChainId()));case 5:return e.a(2,this._eth_requestAccounts());case 6:return e.a(2,this.ecRecover(t));case 7:return e.a(2,this.personalSign(t));case 8:return e.a(2,this._eth_signTransaction(n));case 9:return e.a(2,this._eth_sendRawTransaction(n));case 10:return e.a(2,this._eth_sendTransaction(n));case 11:return e.a(2,this.signTypedData(t));case 12:return e.a(2,this.addEthereumChain(n));case 13:return e.a(2,this.switchEthereumChain(n));case 14:return e.a(2,this.watchAsset(n));case 15:if(this.jsonRpcUrl){e.n=16;break}throw Kn.rpc.internal("No RPC URL set for chain");case 16:return e.a(2,Tr(t,this.jsonRpcUrl));case 17:return e.a(2)}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"_ensureKnownAddress",value:function(e){var t=gr(e);if(!this._addresses.map(function(e){return gr(e)}).includes(t))throw new Error("Unknown Ethereum address")}},{key:"_prepareTransactionParams",value:function(e){var t=e.from?gr(e.from):this.selectedAddress;if(!t)throw new Error("Ethereum address is unavailable");return this._ensureKnownAddress(t),{fromAddress:t,toAddress:e.to?gr(e.to):null,weiValue:null!=e.value?Ir(e.value):BigInt(0),data:e.data?wr(e.data):Buffer.alloc(0),nonce:null!=e.nonce?kr(e.nonce):null,gasPriceInWei:null!=e.gasPrice?Ir(e.gasPrice):null,maxFeePerGas:null!=e.maxFeePerGas?Ir(e.maxFeePerGas):null,maxPriorityFeePerGas:null!=e.maxPriorityFeePerGas?Ir(e.maxPriorityFeePerGas):null,gasLimit:null!=e.gas?Ir(e.gas):null,chainId:e.chainId?kr(e.chainId):this.getChainId()}}},{key:"ecRecover",value:(o=P(A().m(function e(t){var n,r,a,i;return A().w(function(e){for(;;)switch(e.n){case 0:if(n=t.method,r=t.params,Array.isArray(r)){e.n=1;break}throw Kn.rpc.invalidParams();case 1:return a=this.initializeRelay(),e.n=2,a.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:lr(r[0]),signature:lr(r[1]),addPrefix:"personal_ecRecover"===n}});case 2:if(!ra(i=e.v)){e.n=3;break}throw i;case 3:return e.a(2,i.result)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"getChainId",value:function(){var e;return Number.parseInt(null!==(e=this._storage.getItem(ou))&&void 0!==e?e:"1",10)}},{key:"_eth_requestAccounts",value:(i=P(A().m(function e(){var t,n,r,a;return A().w(function(e){for(;;)switch(e.n){case 0:if(!(this._addresses.length>0)){e.n=1;break}return null===(t=this.callback)||void 0===t||t.call(this,"connect",{chainId:fr(this.getChainId())}),e.a(2,this._addresses);case 1:return r=this.initializeRelay(),e.n=2,r.requestEthereumAccounts();case 2:if(!ra(a=e.v)){e.n=3;break}throw a;case 3:if(a.result){e.n=4;break}throw new Error("accounts received is empty");case 4:return this._setAddresses(a.result),null===(n=this.callback)||void 0===n||n.call(this,"connect",{chainId:fr(this.getChainId())}),e.a(2,this._addresses)}},e,this)})),function(){return i.apply(this,arguments)})},{key:"personalSign",value:(a=P(A().m(function e(t){var n,r,a,i,o;return A().w(function(e){for(;;)switch(e.n){case 0:if(n=t.params,Array.isArray(n)){e.n=1;break}throw Kn.rpc.invalidParams();case 1:return r=n[1],a=n[0],this._ensureKnownAddress(r),i=this.initializeRelay(),e.n=2,i.sendRequest({method:"signEthereumMessage",params:{address:gr(r),message:lr(a),addPrefix:!0,typedDataJson:null}});case 2:if(!ra(o=e.v)){e.n=3;break}throw o;case 3:return e.a(2,o.result)}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"_eth_signTransaction",value:(r=P(A().m(function e(t){var n,r,a;return A().w(function(e){for(;;)switch(e.n){case 0:return n=this._prepareTransactionParams(t[0]||{}),r=this.initializeRelay(),e.n=1,r.signEthereumTransaction(n);case 1:if(!ra(a=e.v)){e.n=2;break}throw a;case 2:return e.a(2,a.result)}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"_eth_sendRawTransaction",value:(n=P(A().m(function e(t){var n,r,a;return A().w(function(e){for(;;)switch(e.n){case 0:return n=wr(t[0]),r=this.initializeRelay(),e.n=1,r.submitEthereumTransaction(n,this.getChainId());case 1:if(!ra(a=e.v)){e.n=2;break}throw a;case 2:return e.a(2,a.result)}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"_eth_sendTransaction",value:(t=P(A().m(function e(t){var n,r,a;return A().w(function(e){for(;;)switch(e.n){case 0:return n=this._prepareTransactionParams(t[0]||{}),r=this.initializeRelay(),e.n=1,r.signAndSubmitEthereumTransaction(n);case 1:if(!ra(a=e.v)){e.n=2;break}throw a;case 2:return e.a(2,a.result)}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"signTypedData",value:(e=P(A().m(function e(t){var n,r,a,i,o,s,c;return A().w(function(e){for(;;)switch(e.n){case 0:if(n=t.method,r=t.params,Array.isArray(r)){e.n=1;break}throw Kn.rpc.invalidParams();case 1:return a=function(e){return ur({eth_signTypedData_v1:_c.hashForSignTypedDataLegacy,eth_signTypedData_v3:_c.hashForSignTypedData_v3,eth_signTypedData_v4:_c.hashForSignTypedData_v4,eth_signTypedData:_c.hashForSignTypedData_v4}[n]({data:xr(e)}),!0)},i=r["eth_signTypedData_v1"===n?1:0],o=r["eth_signTypedData_v1"===n?0:1],this._ensureKnownAddress(i),s=this.initializeRelay(),e.n=2,s.sendRequest({method:"signEthereumMessage",params:{address:gr(i),message:a(o),typedDataJson:JSON.stringify(o,null,2),addPrefix:!1}});case 2:if(!ra(c=e.v)){e.n=3;break}throw c;case 3:return e.a(2,c.result)}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"initializeRelay",value:function(){return this._relay||(this._relay=new iu({linkAPIUrl:Ur,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}]);var e,t,n,r,a,i,o,s,c,u,l,f,m,v}(),uu="SignerType",lu=new ua("CBWSDK","SignerConfigurator");function du(e){lu.setItem(uu,e)}function fu(e){if(e)return e instanceof Zs?"scw":"walletlink"}function pu(e){return hu.apply(this,arguments)}function hu(){return(hu=P(A().m(function e(t){var n,r,a,i,o,s,c;return A().w(function(e){for(;;)switch(e.n){case 0:return n=t.communicator,r=t.metadata,a=t.handshakeRequest,i=t.callback,mu(n,r,i,a).catch(function(){}),o={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},t.preference),{handshakeRequest:a})},e.n=1,n.postRequestAndWaitForResponse(o);case 1:return s=e.v,c=s.data,e.a(2,c)}},e)}))).apply(this,arguments)}function mu(e,t,n,r){return vu.apply(this,arguments)}function vu(){return(vu=P(A().m(function e(t,n,r,a){var i;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.onMessage(function(e){return"WalletLinkSessionRequest"===e.event});case 1:return i=new cu({metadata:n,callback:r}),t.postMessage({event:"WalletLinkUpdate",data:{session:i.getSession()}}),e.n=2,i.handshake(a);case 2:t.postMessage({event:"WalletLinkUpdate",data:{connected:!0}});case 3:return e.a(2)}},e)}))).apply(this,arguments)}var yu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},bu=function(e){function t(e){var n;h(this,t);var r=e.metadata,a=e.preference,i=a.keysUrl,o=yu(a,["keysUrl"]);(n=m(this,t)).signer=null,n.isCoinbaseWallet=!0,n.metadata=r,n.preference=o,n.communicator=new na({url:i,metadata:r,preference:o});var s=lu.getItem(uu);return s&&(n.signer=n.initSigner(s),function(e){var t=e.signerType;Br("provider.signer.loaded_from_storage",{action:Mr.measurement,componentType:Lr.unknown,signerType:t},Dr.low)}({signerType:s})),n}return b(t,e),p(t,[{key:"request",value:(o=P(A().m(function e(t){var n,r,a;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=crypto.randomUUID(),ba(t,n),la({method:t.method,correlationId:n}),e.p=1,e.n=2,this._request(t);case 2:return r=e.v,fa({method:t.method,signerType:fu(this.signer),correlationId:n}),e.a(2,r);case 3:throw e.p=3,a=e.v,da({method:t.method,correlationId:n,signerType:fu(this.signer),errorMessage:a instanceof Error?a.message:""}),a;case 4:return e.p=4,ga(t),e.f(4);case 5:return e.a(2)}},e,this,[[1,3,4,5]])})),function(e){return o.apply(this,arguments)})},{key:"_request",value:(i=P(A().m(function e(t){var n,r,a,i,o,s,c,u,l,d,f,p;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,Cr(t),this.signer){e.n=21;break}f=t.method,e.n="eth_requestAccounts"===f?1:"wallet_connect"===f?9:"wallet_sendCalls"===f||"wallet_sign"===f?12:"wallet_getCallsStatus"===f?16:"net_version"===f?18:"eth_chainId"===f?19:20;break;case 1:if(!(null==(r=Ln.subAccountsConfig.get())?void 0:r.enableAutoSubAccounts)){e.n=2;break}n="scw",e.n=4;break;case 2:return e.n=3,this.requestSignerSelection(t);case 3:n=e.v;case 4:if(a=this.initSigner(n),"scw"!==n||!(null==r?void 0:r.enableAutoSubAccounts)){e.n=7;break}return e.n=5,a.handshake({method:"handshake"});case 5:return e.n=6,a.request(t);case 6:e.n=8;break;case 7:return e.n=8,a.handshake(t);case 8:return this.signer=a,du(n),e.a(3,21);case 9:return i=this.initSigner("scw"),e.n=10,i.handshake({method:"handshake"});case 10:return e.n=11,i.request(t);case 11:return o=e.v,this.signer=i,e.a(2,o);case 12:return s=this.initSigner("scw"),e.n=13,s.handshake({method:"handshake"});case 13:return e.n=14,s.request(t);case 14:return c=e.v,e.n=15,s.cleanup();case 15:return e.a(2,c);case 16:return e.n=17,Tr(t,Nr);case 17:return u=e.v,e.a(2,u);case 18:return e.a(2,1);case 19:return l=fr(1),e.a(2,l);case 20:throw Kn.provider.unauthorized("Must call 'eth_requestAccounts' before other methods");case 21:return e.n=22,this.signer.request(t);case 22:return d=e.v,e.a(2,d);case 23:return e.p=23,(p=e.v).code===Un.unauthorized&&this.disconnect(),e.a(2,Promise.reject(aa(p)))}},e,this,[[0,23]])})),function(e){return i.apply(this,arguments)})},{key:"enable",value:(a=P(A().m(function e(){return A().w(function(e){for(;;)switch(e.n){case 0:return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),pa(),e.n=1,this.request({method:"eth_requestAccounts"});case 1:return e.a(2,e.v)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"disconnect",value:(r=P(A().m(function e(){var t;return A().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(t=this.signer)||void 0===t?void 0:t.cleanup();case 1:this.signer=null,ua.clearAll(),wa(),this.emit("disconnect",Kn.provider.disconnected("User initiated disconnection"));case 2:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"requestSignerSelection",value:(n=P(A().m(function e(t){var n;return A().w(function(e){for(;;)switch(e.n){case 0:return ha(),e.n=1,pu({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:t,callback:this.emit.bind(this)});case 1:return n=e.v,ma(n),e.a(2,n)}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"initSigner",value:function(e){return function(e){var t=e.signerType,n=e.metadata,r=e.communicator,a=e.callback;switch(t){case"scw":return new Zs({metadata:n,callback:a,communicator:r});case"walletlink":return new cu({metadata:n,callback:a})}}({signerType:e,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}]);var n,r,a,i,o}(ca);var gu={options:"all"}}}})}();
